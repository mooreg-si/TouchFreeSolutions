!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=70)}([function(e,t,r){"use strict";e.exports=r(32)},function(e,t,r){(function(){var r=this,n=r._,i={},o=Array.prototype,a=Object.prototype,s=Function.prototype,l=o.push,c=o.slice,u=o.concat,h=a.toString,f=a.hasOwnProperty,d=o.forEach,p=o.map,m=o.reduce,g=o.reduceRight,v=o.filter,y=o.every,x=o.some,b=o.indexOf,w=o.lastIndexOf,_=Array.isArray,M=Object.keys,S=s.bind,A=function(e){return e instanceof A?e:this instanceof A?void(this._wrapped=e):new A(e)};e.exports&&(t=e.exports=A),t._=A,A.VERSION="1.4.4";var C=A.each=A.forEach=function(e,t,r){if(null!=e)if(d&&e.forEach===d)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,o=e.length;n<o;n++)if(t.call(r,e[n],n,e)===i)return}else for(var a in e)if(A.has(e,a)&&t.call(r,e[a],a,e)===i)return};A.map=A.collect=function(e,t,r){var n=[];return null==e?n:p&&e.map===p?e.map(t,r):(C(e,(function(e,i,o){n[n.length]=t.call(r,e,i,o)})),n)};var T="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(e,t,r,n){var i=arguments.length>2;if(null==e&&(e=[]),m&&e.reduce===m)return n&&(t=A.bind(t,n)),i?e.reduce(t,r):e.reduce(t);if(C(e,(function(e,o,a){i?r=t.call(n,r,e,o,a):(r=e,i=!0)})),!i)throw new TypeError(T);return r},A.reduceRight=A.foldr=function(e,t,r,n){var i=arguments.length>2;if(null==e&&(e=[]),g&&e.reduceRight===g)return n&&(t=A.bind(t,n)),i?e.reduceRight(t,r):e.reduceRight(t);var o=e.length;if(o!==+o){var a=A.keys(e);o=a.length}if(C(e,(function(s,l,c){l=a?a[--o]:--o,i?r=t.call(n,r,e[l],l,c):(r=e[l],i=!0)})),!i)throw new TypeError(T);return r},A.find=A.detect=function(e,t,r){var n;return E(e,(function(e,i,o){if(t.call(r,e,i,o))return n=e,!0})),n},A.filter=A.select=function(e,t,r){var n=[];return null==e?n:v&&e.filter===v?e.filter(t,r):(C(e,(function(e,i,o){t.call(r,e,i,o)&&(n[n.length]=e)})),n)},A.reject=function(e,t,r){return A.filter(e,(function(e,n,i){return!t.call(r,e,n,i)}),r)},A.every=A.all=function(e,t,r){t||(t=A.identity);var n=!0;return null==e?n:y&&e.every===y?e.every(t,r):(C(e,(function(e,o,a){if(!(n=n&&t.call(r,e,o,a)))return i})),!!n)};var E=A.some=A.any=function(e,t,r){t||(t=A.identity);var n=!1;return null==e?n:x&&e.some===x?e.some(t,r):(C(e,(function(e,o,a){if(n||(n=t.call(r,e,o,a)))return i})),!!n)};A.contains=A.include=function(e,t){return null!=e&&(b&&e.indexOf===b?-1!=e.indexOf(t):E(e,(function(e){return e===t})))},A.invoke=function(e,t){var r=c.call(arguments,2),n=A.isFunction(t);return A.map(e,(function(e){return(n?t:e[t]).apply(e,r)}))},A.pluck=function(e,t){return A.map(e,(function(e){return e[t]}))},A.where=function(e,t,r){return A.isEmpty(t)?r?null:[]:A[r?"find":"filter"](e,(function(e){for(var r in t)if(t[r]!==e[r])return!1;return!0}))},A.findWhere=function(e,t){return A.where(e,t,!0)},A.max=function(e,t,r){if(!t&&A.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&A.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return C(e,(function(e,i,o){var a=t?t.call(r,e,i,o):e;a>=n.computed&&(n={value:e,computed:a})})),n.value},A.min=function(e,t,r){if(!t&&A.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&A.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return C(e,(function(e,i,o){var a=t?t.call(r,e,i,o):e;a<n.computed&&(n={value:e,computed:a})})),n.value},A.shuffle=function(e){var t,r=0,n=[];return C(e,(function(e){t=A.random(r++),n[r-1]=n[t],n[t]=e})),n};var k=function(e){return A.isFunction(e)?e:function(t){return t[e]}};A.sortBy=function(e,t,r){var n=k(t);return A.pluck(A.map(e,(function(e,t,i){return{value:e,index:t,criteria:n.call(r,e,t,i)}})).sort((function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index<t.index?-1:1})),"value")};var P=function(e,t,r,n){var i={},o=k(t||A.identity);return C(e,(function(t,a){var s=o.call(r,t,a,e);n(i,s,t)})),i};A.groupBy=function(e,t,r){return P(e,t,r,(function(e,t,r){(A.has(e,t)?e[t]:e[t]=[]).push(r)}))},A.countBy=function(e,t,r){return P(e,t,r,(function(e,t){A.has(e,t)||(e[t]=0),e[t]++}))},A.sortedIndex=function(e,t,r,n){for(var i=(r=null==r?A.identity:k(r)).call(n,t),o=0,a=e.length;o<a;){var s=o+a>>>1;r.call(n,e[s])<i?o=s+1:a=s}return o},A.toArray=function(e){return e?A.isArray(e)?c.call(e):e.length===+e.length?A.map(e,A.identity):A.values(e):[]},A.size=function(e){return null==e?0:e.length===+e.length?e.length:A.keys(e).length},A.first=A.head=A.take=function(e,t,r){if(null!=e)return null==t||r?e[0]:c.call(e,0,t)},A.initial=function(e,t,r){return c.call(e,0,e.length-(null==t||r?1:t))},A.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},A.rest=A.tail=A.drop=function(e,t,r){return c.call(e,null==t||r?1:t)},A.compact=function(e){return A.filter(e,A.identity)};var L=function(e,t,r){return C(e,(function(e){A.isArray(e)?t?l.apply(r,e):L(e,t,r):r.push(e)})),r};A.flatten=function(e,t){return L(e,t,[])},A.without=function(e){return A.difference(e,c.call(arguments,1))},A.uniq=A.unique=function(e,t,r,n){A.isFunction(t)&&(n=r,r=t,t=!1);var i=r?A.map(e,r,n):e,o=[],a=[];return C(i,(function(r,n){(t?n&&a[a.length-1]===r:A.contains(a,r))||(a.push(r),o.push(e[n]))})),o},A.union=function(){return A.uniq(u.apply(o,arguments))},A.intersection=function(e){var t=c.call(arguments,1);return A.filter(A.uniq(e),(function(e){return A.every(t,(function(t){return A.indexOf(t,e)>=0}))}))},A.difference=function(e){var t=u.apply(o,c.call(arguments,1));return A.filter(e,(function(e){return!A.contains(t,e)}))},A.zip=function(){for(var e=c.call(arguments),t=A.max(A.pluck(e,"length")),r=new Array(t),n=0;n<t;n++)r[n]=A.pluck(e,""+n);return r},A.object=function(e,t){if(null==e)return{};for(var r={},n=0,i=e.length;n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},A.indexOf=function(e,t,r){if(null==e)return-1;var n=0,i=e.length;if(r){if("number"!=typeof r)return e[n=A.sortedIndex(e,t)]===t?n:-1;n=r<0?Math.max(0,i+r):r}if(b&&e.indexOf===b)return e.indexOf(t,r);for(;n<i;n++)if(e[n]===t)return n;return-1},A.lastIndexOf=function(e,t,r){if(null==e)return-1;var n=null!=r;if(w&&e.lastIndexOf===w)return n?e.lastIndexOf(t,r):e.lastIndexOf(t);for(var i=n?r:e.length;i--;)if(e[i]===t)return i;return-1},A.range=function(e,t,r){arguments.length<=1&&(t=e||0,e=0),r=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=0,o=new Array(n);i<n;)o[i++]=e,e+=r;return o},A.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,c.call(arguments,1));var r=c.call(arguments,2);return function(){return e.apply(t,r.concat(c.call(arguments)))}},A.partial=function(e){var t=c.call(arguments,1);return function(){return e.apply(this,t.concat(c.call(arguments)))}},A.bindAll=function(e){var t=c.call(arguments,1);return 0===t.length&&(t=A.functions(e)),C(t,(function(t){e[t]=A.bind(e[t],e)})),e},A.memoize=function(e,t){var r={};return t||(t=A.identity),function(){var n=t.apply(this,arguments);return A.has(r,n)?r[n]:r[n]=e.apply(this,arguments)}},A.delay=function(e,t){var r=c.call(arguments,2);return setTimeout((function(){return e.apply(null,r)}),t)},A.defer=function(e){return A.delay.apply(A,[e,1].concat(c.call(arguments,1)))},A.throttle=function(e,t){var r,n,i,o,a=0,s=function(){a=new Date,i=null,o=e.apply(r,n)};return function(){var l=new Date,c=t-(l-a);return r=this,n=arguments,c<=0?(clearTimeout(i),i=null,a=l,o=e.apply(r,n)):i||(i=setTimeout(s,c)),o}},A.debounce=function(e,t,r){var n,i;return function(){var o=this,a=arguments,s=function(){n=null,r||(i=e.apply(o,a))},l=r&&!n;return clearTimeout(n),n=setTimeout(s,t),l&&(i=e.apply(o,a)),i}},A.once=function(e){var t,r=!1;return function(){return r||(r=!0,t=e.apply(this,arguments),e=null),t}},A.wrap=function(e,t){return function(){var r=[e];return l.apply(r,arguments),t.apply(this,r)}},A.compose=function(){var e=arguments;return function(){for(var t=arguments,r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},A.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},A.keys=M||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var r in e)A.has(e,r)&&(t[t.length]=r);return t},A.values=function(e){var t=[];for(var r in e)A.has(e,r)&&t.push(e[r]);return t},A.pairs=function(e){var t=[];for(var r in e)A.has(e,r)&&t.push([r,e[r]]);return t},A.invert=function(e){var t={};for(var r in e)A.has(e,r)&&(t[e[r]]=r);return t},A.functions=A.methods=function(e){var t=[];for(var r in e)A.isFunction(e[r])&&t.push(r);return t.sort()},A.extend=function(e){return C(c.call(arguments,1),(function(t){if(t)for(var r in t)e[r]=t[r]})),e},A.pick=function(e){var t={},r=u.apply(o,c.call(arguments,1));return C(r,(function(r){r in e&&(t[r]=e[r])})),t},A.omit=function(e){var t={},r=u.apply(o,c.call(arguments,1));for(var n in e)A.contains(r,n)||(t[n]=e[n]);return t},A.defaults=function(e){return C(c.call(arguments,1),(function(t){if(t)for(var r in t)null==e[r]&&(e[r]=t[r])})),e},A.clone=function(e){return A.isObject(e)?A.isArray(e)?e.slice():A.extend({},e):e},A.tap=function(e,t){return t(e),e};var R=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof A&&(e=e._wrapped),t instanceof A&&(t=t._wrapped);var i=h.call(e);if(i!=h.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=r.length;o--;)if(r[o]==e)return n[o]==t;r.push(e),n.push(t);var a=0,s=!0;if("[object Array]"==i){if(s=(a=e.length)==t.length)for(;a--&&(s=R(e[a],t[a],r,n)););}else{var l=e.constructor,c=t.constructor;if(l!==c&&!(A.isFunction(l)&&l instanceof l&&A.isFunction(c)&&c instanceof c))return!1;for(var u in e)if(A.has(e,u)&&(a++,!(s=A.has(t,u)&&R(e[u],t[u],r,n))))break;if(s){for(u in t)if(A.has(t,u)&&!a--)break;s=!a}}return r.pop(),n.pop(),s};A.isEqual=function(e,t){return R(e,t,[],[])},A.isEmpty=function(e){if(null==e)return!0;if(A.isArray(e)||A.isString(e))return 0===e.length;for(var t in e)if(A.has(e,t))return!1;return!0},A.isElement=function(e){return!(!e||1!==e.nodeType)},A.isArray=_||function(e){return"[object Array]"==h.call(e)},A.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],(function(e){A["is"+e]=function(t){return h.call(t)=="[object "+e+"]"}})),A.isArguments(arguments)||(A.isArguments=function(e){return!(!e||!A.has(e,"callee"))}),A.isFunction=function(e){return"function"==typeof e},A.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},A.isNaN=function(e){return A.isNumber(e)&&e!=+e},A.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==h.call(e)},A.isNull=function(e){return null===e},A.isUndefined=function(e){return void 0===e},A.has=function(e,t){return f.call(e,t)},A.noConflict=function(){return r._=n,this},A.identity=function(e){return e},A.times=function(e,t,r){for(var n=Array(e),i=0;i<e;i++)n[i]=t.call(r,i);return n},A.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};D.unescape=A.invert(D.escape);var F={escape:new RegExp("["+A.keys(D.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(D.unescape).join("|")+")","g")};A.each(["escape","unescape"],(function(e){A[e]=function(t){return null==t?"":(""+t).replace(F[e],(function(t){return D[e][t]}))}})),A.result=function(e,t){if(null==e)return null;var r=e[t];return A.isFunction(r)?r.call(e):r},A.mixin=function(e){C(A.functions(e),(function(t){var r=A[t]=e[t];A.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),N.call(this,r.apply(A,e))}}))};var z=0;A.uniqueId=function(e){var t=++z+"";return e?e+t:t},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(e,t,r){var n;r=A.defaults({},r,A.templateSettings);var i=new RegExp([(r.escape||O).source,(r.interpolate||O).source,(r.evaluate||O).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(i,(function(t,r,n,i,s){return a+=e.slice(o,s).replace(I,(function(e){return"\\"+B[e]})),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),n&&(a+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=s+t.length,t})),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(r.variable||"obj","_",a)}catch(e){throw e.source=a,e}if(t)return n(t,A);var s=function(e){return n.call(this,e,A)};return s.source="function("+(r.variable||"obj")+"){\n"+a+"}",s},A.chain=function(e){return A(e).chain()};var N=function(e){return this._chain?A(e).chain():e};A.mixin(A),C(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=o[e];A.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=e&&"splice"!=e||0!==r.length||delete r[0],N.call(this,r)}})),C(["concat","join","slice"],(function(e){var t=o[e];A.prototype[e]=function(){return N.call(this,t.apply(this._wrapped,arguments))}})),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},function(e,t,r){!function(e){"use strict";var r={};r.exports=t,function(e){if(!t)var t=1e-6;if(!r)var r="undefined"!=typeof Float32Array?Float32Array:Array;if(!n)var n=Math.random;var i={setMatrixArrayType:function(e){r=e}};void 0!==e&&(e.glMatrix=i);var o=Math.PI/180;i.toRadian=function(e){return e*o};var a,s={};s.create=function(){var e=new r(2);return e[0]=0,e[1]=0,e},s.clone=function(e){var t=new r(2);return t[0]=e[0],t[1]=e[1],t},s.fromValues=function(e,t){var n=new r(2);return n[0]=e,n[1]=t,n},s.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},s.set=function(e,t,r){return e[0]=t,e[1]=r,e},s.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e},s.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e},s.sub=s.subtract,s.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e},s.mul=s.multiply,s.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e},s.div=s.divide,s.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},s.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},s.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},s.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e},s.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)},s.dist=s.distance,s.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n},s.sqrDist=s.squaredDistance,s.length=function(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)},s.len=s.length,s.squaredLength=function(e){var t=e[0],r=e[1];return t*t+r*r},s.sqrLen=s.squaredLength,s.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},s.normalize=function(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},s.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},s.cross=function(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e},s.lerp=function(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e},s.random=function(e,t){t=t||1;var r=2*n()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},s.transformMat2=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e},s.transformMat2d=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e},s.transformMat3=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e},s.transformMat4=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e},s.forEach=(a=s.create(),function(e,t,r,n,i,o){var s,l;for(t||(t=2),r||(r=0),l=n?Math.min(n*t+r,e.length):e.length,s=r;s<l;s+=t)a[0]=e[s],a[1]=e[s+1],i(a,a,o),e[s]=a[0],e[s+1]=a[1];return e}),s.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},void 0!==e&&(e.vec2=s);var l={create:function(){var e=new r(3);return e[0]=0,e[1]=0,e[2]=0,e},clone:function(e){var t=new r(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},fromValues:function(e,t,n){var i=new r(3);return i[0]=e,i[1]=t,i[2]=n,i},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},set:function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},subtract:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}};l.sub=l.subtract,l.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e},l.mul=l.multiply,l.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},l.div=l.divide,l.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},l.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},l.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},l.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e},l.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)},l.dist=l.distance,l.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i},l.sqrDist=l.squaredDistance,l.length=function(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)},l.len=l.length,l.squaredLength=function(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n},l.sqrLen=l.squaredLength,l.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},l.normalize=function(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},l.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},l.cross=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=i*l-o*s,e[1]=o*a-n*l,e[2]=n*s-i*a,e},l.lerp=function(e,t,r,n){var i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e},l.random=function(e,t){t=t||1;var r=2*n()*Math.PI,i=2*n()-1,o=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=i*t,e},l.transformMat4=function(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12],e[1]=r[1]*n+r[5]*i+r[9]*o+r[13],e[2]=r[2]*n+r[6]*i+r[10]*o+r[14],e},l.transformMat3=function(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e},l.transformQuat=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2],c=r[3],u=c*n+s*o-l*i,h=c*i+l*n-a*o,f=c*o+a*i-s*n,d=-a*n-s*i-l*o;return e[0]=u*c+d*-a+h*-l-f*-s,e[1]=h*c+d*-s+f*-a-u*-l,e[2]=f*c+d*-l+u*-s-h*-a,e},l.rotateX=function(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},l.rotateY=function(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},l.rotateZ=function(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},l.forEach=function(){var e=l.create();return function(t,r,n,i,o,a){var s,l;for(r||(r=3),n||(n=0),l=i?Math.min(i*r+n,t.length):t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),l.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},void 0!==e&&(e.vec3=l);var c={create:function(){var e=new r(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},clone:function(e){var t=new r(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},fromValues:function(e,t,n,i){var o=new r(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=i,o},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},set:function(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},subtract:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}};c.sub=c.subtract,c.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},c.mul=c.multiply,c.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e},c.div=c.divide,c.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},c.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},c.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},c.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e},c.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(r*r+n*n+i*i+o*o)},c.dist=c.distance,c.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return r*r+n*n+i*i+o*o},c.sqrDist=c.squaredDistance,c.length=function(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.sqrt(t*t+r*r+n*n+i*i)},c.len=c.length,c.squaredLength=function(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i},c.sqrLen=c.squaredLength,c.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},c.normalize=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a),e},c.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},c.lerp=function(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e[3]=s+n*(r[3]-s),e},c.random=function(e,t){return t=t||1,e[0]=n(),e[1]=n(),e[2]=n(),e[3]=n(),c.normalize(e,e),c.scale(e,e,t),e},c.transformMat4=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e},c.transformQuat=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2],c=r[3],u=c*n+s*o-l*i,h=c*i+l*n-a*o,f=c*o+a*i-s*n,d=-a*n-s*i-l*o;return e[0]=u*c+d*-a+h*-l-f*-s,e[1]=h*c+d*-s+f*-a-u*-l,e[2]=f*c+d*-l+u*-s-h*-a,e},c.forEach=function(){var e=c.create();return function(t,r,n,i,o,a){var s,l;for(r||(r=4),n||(n=0),l=i?Math.min(i*r+n,t.length):t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),c.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},void 0!==e&&(e.vec4=c);var u={create:function(){var e=new r(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},clone:function(e){var t=new r(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},transpose:function(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},invert:function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*o-i*n;return a?(a=1/a,e[0]=o*a,e[1]=-n*a,e[2]=-i*a,e[3]=r*a,e):null},adjoint:function(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e},determinant:function(e){return e[0]*e[3]-e[2]*e[1]},multiply:function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],l=r[1],c=r[2],u=r[3];return e[0]=n*s+o*l,e[1]=i*s+a*l,e[2]=n*c+o*u,e[3]=i*c+a*u,e}};u.mul=u.multiply,u.rotate=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+o*s,e[1]=i*l+a*s,e[2]=n*-s+o*l,e[3]=i*-s+a*l,e},u.scale=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],l=r[1];return e[0]=n*s,e[1]=i*s,e[2]=o*l,e[3]=a*l,e},u.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},u.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},u.LDU=function(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]},void 0!==e&&(e.mat2=u);var h={create:function(){var e=new r(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},clone:function(e){var t=new r(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},invert:function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=r*o-n*i;return l?(l=1/l,e[0]=o*l,e[1]=-n*l,e[2]=-i*l,e[3]=r*l,e[4]=(i*s-o*a)*l,e[5]=(n*a-r*s)*l,e):null},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=r[0],u=r[1],h=r[2],f=r[3],d=r[4],p=r[5];return e[0]=n*c+o*u,e[1]=i*c+a*u,e[2]=n*h+o*f,e[3]=i*h+a*f,e[4]=n*d+o*p+s,e[5]=i*d+a*p+l,e}};h.mul=h.multiply,h.rotate=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=Math.sin(r),u=Math.cos(r);return e[0]=n*u+o*c,e[1]=i*u+a*c,e[2]=n*-c+o*u,e[3]=i*-c+a*u,e[4]=s,e[5]=l,e},h.scale=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=r[0],u=r[1];return e[0]=n*c,e[1]=i*c,e[2]=o*u,e[3]=a*u,e[4]=s,e[5]=l,e},h.translate=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=r[0],u=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=n*c+o*u+s,e[5]=i*c+a*u+l,e},h.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},h.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},void 0!==e&&(e.mat2d=h);var f={create:function(){var e=new r(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat4:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},clone:function(e){var t=new r(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=u*a-s*c,f=-u*o+s*l,d=c*o-a*l,p=r*h+n*f+i*d;return p?(p=1/p,e[0]=h*p,e[1]=(-u*n+i*c)*p,e[2]=(s*n-i*a)*p,e[3]=f*p,e[4]=(u*r-i*l)*p,e[5]=(-s*r+i*o)*p,e[6]=d*p,e[7]=(-c*r+n*l)*p,e[8]=(a*r-n*o)*p,e):null},adjoint:function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=a*u-s*c,e[1]=i*c-n*u,e[2]=n*s-i*a,e[3]=s*l-o*u,e[4]=r*u-i*l,e[5]=i*o-r*s,e[6]=o*c-a*l,e[7]=n*l-r*c,e[8]=r*a-n*o,e},determinant:function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*(c*o-a*l)+r*(-c*i+a*s)+n*(l*i-o*s)},multiply:function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=r[0],d=r[1],p=r[2],m=r[3],g=r[4],v=r[5],y=r[6],x=r[7],b=r[8];return e[0]=f*n+d*a+p*c,e[1]=f*i+d*s+p*u,e[2]=f*o+d*l+p*h,e[3]=m*n+g*a+v*c,e[4]=m*i+g*s+v*u,e[5]=m*o+g*l+v*h,e[6]=y*n+x*a+b*c,e[7]=y*i+x*s+b*u,e[8]=y*o+x*l+b*h,e}};f.mul=f.multiply,f.translate=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=f*n+d*a+c,e[7]=f*i+d*s+u,e[8]=f*o+d*l+h,e},f.rotate=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=Math.sin(r),d=Math.cos(r);return e[0]=d*n+f*a,e[1]=d*i+f*s,e[2]=d*o+f*l,e[3]=d*a-f*n,e[4]=d*s-f*i,e[5]=d*l-f*o,e[6]=c,e[7]=u,e[8]=h,e},f.scale=function(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},f.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},f.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,c=r*a,u=n*a,h=n*s,f=i*a,d=i*s,p=i*l,m=o*a,g=o*s,v=o*l;return e[0]=1-h-p,e[3]=u-v,e[6]=f+g,e[1]=u+v,e[4]=1-c-p,e[7]=d-m,e[2]=f-g,e[5]=d+m,e[8]=1-c-h,e},f.normalFromMat4=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],v=t[15],y=r*s-n*a,x=r*l-i*a,b=r*c-o*a,w=n*l-i*s,_=n*c-o*s,M=i*c-o*l,S=u*m-h*p,A=u*g-f*p,C=u*v-d*p,T=h*g-f*m,E=h*v-d*m,k=f*v-d*g,P=y*k-x*E+b*T+w*C-_*A+M*S;return P?(P=1/P,e[0]=(s*k-l*E+c*T)*P,e[1]=(l*C-a*k-c*A)*P,e[2]=(a*E-s*C+c*S)*P,e[3]=(i*E-n*k-o*T)*P,e[4]=(r*k-i*C+o*A)*P,e[5]=(n*C-r*E-o*S)*P,e[6]=(m*M-g*_+v*w)*P,e[7]=(g*b-p*M-v*x)*P,e[8]=(p*_-m*b+v*y)*P,e):null},f.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},f.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},void 0!==e&&(e.mat3=f);var d={create:function(){var e=new r(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},clone:function(e){var t=new r(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},invert:function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],v=t[15],y=r*s-n*a,x=r*l-i*a,b=r*c-o*a,w=n*l-i*s,_=n*c-o*s,M=i*c-o*l,S=u*m-h*p,A=u*g-f*p,C=u*v-d*p,T=h*g-f*m,E=h*v-d*m,k=f*v-d*g,P=y*k-x*E+b*T+w*C-_*A+M*S;return P?(P=1/P,e[0]=(s*k-l*E+c*T)*P,e[1]=(i*E-n*k-o*T)*P,e[2]=(m*M-g*_+v*w)*P,e[3]=(f*_-h*M-d*w)*P,e[4]=(l*C-a*k-c*A)*P,e[5]=(r*k-i*C+o*A)*P,e[6]=(g*b-p*M-v*x)*P,e[7]=(u*M-f*b+d*x)*P,e[8]=(a*E-s*C+c*S)*P,e[9]=(n*C-r*E-o*S)*P,e[10]=(p*_-m*b+v*y)*P,e[11]=(h*b-u*_-d*y)*P,e[12]=(s*A-a*T-l*S)*P,e[13]=(r*T-n*A+i*S)*P,e[14]=(m*x-p*w-g*y)*P,e[15]=(u*w-h*x+f*y)*P,e):null},adjoint:function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],v=t[15];return e[0]=s*(f*v-d*g)-h*(l*v-c*g)+m*(l*d-c*f),e[1]=-(n*(f*v-d*g)-h*(i*v-o*g)+m*(i*d-o*f)),e[2]=n*(l*v-c*g)-s*(i*v-o*g)+m*(i*c-o*l),e[3]=-(n*(l*d-c*f)-s*(i*d-o*f)+h*(i*c-o*l)),e[4]=-(a*(f*v-d*g)-u*(l*v-c*g)+p*(l*d-c*f)),e[5]=r*(f*v-d*g)-u*(i*v-o*g)+p*(i*d-o*f),e[6]=-(r*(l*v-c*g)-a*(i*v-o*g)+p*(i*c-o*l)),e[7]=r*(l*d-c*f)-a*(i*d-o*f)+u*(i*c-o*l),e[8]=a*(h*v-d*m)-u*(s*v-c*m)+p*(s*d-c*h),e[9]=-(r*(h*v-d*m)-u*(n*v-o*m)+p*(n*d-o*h)),e[10]=r*(s*v-c*m)-a*(n*v-o*m)+p*(n*c-o*s),e[11]=-(r*(s*d-c*h)-a*(n*d-o*h)+u*(n*c-o*s)),e[12]=-(a*(h*g-f*m)-u*(s*g-l*m)+p*(s*f-l*h)),e[13]=r*(h*g-f*m)-u*(n*g-i*m)+p*(n*f-i*h),e[14]=-(r*(s*g-l*m)-a*(n*g-i*m)+p*(n*l-i*s)),e[15]=r*(s*f-l*h)-a*(n*f-i*h)+u*(n*l-i*s),e},determinant:function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11],d=e[12],p=e[13],m=e[14],g=e[15];return(t*a-r*o)*(h*g-f*m)-(t*s-n*o)*(u*g-f*p)+(t*l-i*o)*(u*m-h*p)+(r*s-n*a)*(c*g-f*d)-(r*l-i*a)*(c*m-h*d)+(n*l-i*s)*(c*p-u*d)},multiply:function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=t[9],d=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],x=r[0],b=r[1],w=r[2],_=r[3];return e[0]=x*n+b*s+w*h+_*m,e[1]=x*i+b*l+w*f+_*g,e[2]=x*o+b*c+w*d+_*v,e[3]=x*a+b*u+w*p+_*y,x=r[4],b=r[5],w=r[6],_=r[7],e[4]=x*n+b*s+w*h+_*m,e[5]=x*i+b*l+w*f+_*g,e[6]=x*o+b*c+w*d+_*v,e[7]=x*a+b*u+w*p+_*y,x=r[8],b=r[9],w=r[10],_=r[11],e[8]=x*n+b*s+w*h+_*m,e[9]=x*i+b*l+w*f+_*g,e[10]=x*o+b*c+w*d+_*v,e[11]=x*a+b*u+w*p+_*y,x=r[12],b=r[13],w=r[14],_=r[15],e[12]=x*n+b*s+w*h+_*m,e[13]=x*i+b*l+w*f+_*g,e[14]=x*o+b*c+w*d+_*v,e[15]=x*a+b*u+w*p+_*y,e}};d.mul=d.multiply,d.translate=function(e,t,r){var n,i,o,a,s,l,c,u,h,f,d,p,m=r[0],g=r[1],v=r[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=t[9],d=t[10],p=t[11],e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=f,e[10]=d,e[11]=p,e[12]=n*m+s*g+h*v+t[12],e[13]=i*m+l*g+f*v+t[13],e[14]=o*m+c*g+d*v+t[14],e[15]=a*m+u*g+p*v+t[15]),e},d.scale=function(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},d.rotate=function(e,r,n,i){var o,a,s,l,c,u,h,f,d,p,m,g,v,y,x,b,w,_,M,S,A,C,T,E,k=i[0],P=i[1],L=i[2],R=Math.sqrt(k*k+P*P+L*L);return Math.abs(R)<t?null:(k*=R=1/R,P*=R,L*=R,o=Math.sin(n),s=1-(a=Math.cos(n)),l=r[0],c=r[1],u=r[2],h=r[3],f=r[4],d=r[5],p=r[6],m=r[7],g=r[8],v=r[9],y=r[10],x=r[11],b=k*k*s+a,w=P*k*s+L*o,_=L*k*s-P*o,M=k*P*s-L*o,S=P*P*s+a,A=L*P*s+k*o,C=k*L*s+P*o,T=P*L*s-k*o,E=L*L*s+a,e[0]=l*b+f*w+g*_,e[1]=c*b+d*w+v*_,e[2]=u*b+p*w+y*_,e[3]=h*b+m*w+x*_,e[4]=l*M+f*S+g*A,e[5]=c*M+d*S+v*A,e[6]=u*M+p*S+y*A,e[7]=h*M+m*S+x*A,e[8]=l*C+f*T+g*E,e[9]=c*C+d*T+v*E,e[10]=u*C+p*T+y*E,e[11]=h*C+m*T+x*E,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)},d.rotateX=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*n,e[5]=a*i+u*n,e[6]=s*i+h*n,e[7]=l*i+f*n,e[8]=c*i-o*n,e[9]=u*i-a*n,e[10]=h*i-s*n,e[11]=f*i-l*n,e},d.rotateY=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*n,e[1]=a*i-u*n,e[2]=s*i-h*n,e[3]=l*i-f*n,e[8]=o*n+c*i,e[9]=a*n+u*i,e[10]=s*n+h*i,e[11]=l*n+f*i,e},d.rotateZ=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*n,e[1]=a*i+u*n,e[2]=s*i+h*n,e[3]=l*i+f*n,e[4]=c*i-o*n,e[5]=u*i-a*n,e[6]=h*i-s*n,e[7]=f*i-l*n,e},d.fromRotationTranslation=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,l=i+i,c=o+o,u=n*s,h=n*l,f=n*c,d=i*l,p=i*c,m=o*c,g=a*s,v=a*l,y=a*c;return e[0]=1-(d+m),e[1]=h+y,e[2]=f-v,e[3]=0,e[4]=h-y,e[5]=1-(u+m),e[6]=p+g,e[7]=0,e[8]=f+v,e[9]=p-g,e[10]=1-(u+d),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},d.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,c=r*a,u=n*a,h=n*s,f=i*a,d=i*s,p=i*l,m=o*a,g=o*s,v=o*l;return e[0]=1-h-p,e[1]=u+v,e[2]=f-g,e[3]=0,e[4]=u-v,e[5]=1-c-p,e[6]=d+m,e[7]=0,e[8]=f+g,e[9]=d-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},d.frustum=function(e,t,r,n,i,o,a){var s=1/(r-t),l=1/(i-n),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*l,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e},d.perspective=function(e,t,r,n,i){var o=1/Math.tan(t/2),a=1/(n-i);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*a,e[15]=0,e},d.ortho=function(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(a+o)*c,e[15]=1,e},d.lookAt=function(e,r,n,i){var o,a,s,l,c,u,h,f,p,m,g=r[0],v=r[1],y=r[2],x=i[0],b=i[1],w=i[2],_=n[0],M=n[1],S=n[2];return Math.abs(g-_)<t&&Math.abs(v-M)<t&&Math.abs(y-S)<t?d.identity(e):(h=g-_,f=v-M,p=y-S,o=b*(p*=m=1/Math.sqrt(h*h+f*f+p*p))-w*(f*=m),a=w*(h*=m)-x*p,s=x*f-b*h,(m=Math.sqrt(o*o+a*a+s*s))?(o*=m=1/m,a*=m,s*=m):(o=0,a=0,s=0),l=f*s-p*a,c=p*o-h*s,u=h*a-f*o,(m=Math.sqrt(l*l+c*c+u*u))?(l*=m=1/m,c*=m,u*=m):(l=0,c=0,u=0),e[0]=o,e[1]=l,e[2]=h,e[3]=0,e[4]=a,e[5]=c,e[6]=f,e[7]=0,e[8]=s,e[9]=u,e[10]=p,e[11]=0,e[12]=-(o*g+a*v+s*y),e[13]=-(l*g+c*v+u*y),e[14]=-(h*g+f*v+p*y),e[15]=1,e)},d.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},d.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},void 0!==e&&(e.mat4=d);var p,m,g,v,y={};y.create=function(){var e=new r(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},y.rotationTo=(p=l.create(),m=l.fromValues(1,0,0),g=l.fromValues(0,1,0),function(e,t,r){var n=l.dot(t,r);return n<-.999999?(l.cross(p,m,t),l.length(p)<1e-6&&l.cross(p,g,t),l.normalize(p,p),y.setAxisAngle(e,p,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(l.cross(p,t,r),e[0]=p[0],e[1]=p[1],e[2]=p[2],e[3]=1+n,y.normalize(e,e))}),y.setAxes=(v=f.create(),function(e,t,r,n){return v[0]=r[0],v[3]=r[1],v[6]=r[2],v[1]=n[0],v[4]=n[1],v[7]=n[2],v[2]=-t[0],v[5]=-t[1],v[8]=-t[2],y.normalize(e,y.fromMat3(e,v))}),y.clone=c.clone,y.fromValues=c.fromValues,y.copy=c.copy,y.set=c.set,y.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},y.setAxisAngle=function(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e},y.add=c.add,y.multiply=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],l=r[1],c=r[2],u=r[3];return e[0]=n*u+a*s+i*c-o*l,e[1]=i*u+a*l+o*s-n*c,e[2]=o*u+a*c+n*l-i*s,e[3]=a*u-n*s-i*l-o*c,e},y.mul=y.multiply,y.scale=c.scale,y.rotateX=function(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-n*s,e},y.rotateY=function(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l-o*s,e[1]=i*l+a*s,e[2]=o*l+n*s,e[3]=a*l-i*s,e},y.rotateZ=function(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*s,e[1]=i*l-n*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e},y.calculateW=function(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=-Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e},y.dot=c.dot,y.lerp=c.lerp,y.slerp=function(e,t,r,n){var i,o,a,s,l,c=t[0],u=t[1],h=t[2],f=t[3],d=r[0],p=r[1],m=r[2],g=r[3];return(o=c*d+u*p+h*m+f*g)<0&&(o=-o,d=-d,p=-p,m=-m,g=-g),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-n)*i)/a,l=Math.sin(n*i)/a):(s=1-n,l=n),e[0]=s*c+l*d,e[1]=s*u+l*p,e[2]=s*h+l*m,e[3]=s*f+l*g,e},y.invert=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=o*s,e},y.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},y.length=c.length,y.len=y.length,y.squaredLength=c.squaredLength,y.sqrLen=y.squaredLength,y.normalize=c.normalize,y.fromMat3=function(e,t){var r,n=t[0]+t[4]+t[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[7]-t[5])*r,e[1]=(t[2]-t[6])*r,e[2]=(t[3]-t[1])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*a+o]-t[3*o+a])*r,e[o]=(t[3*o+i]+t[3*i+o])*r,e[a]=(t[3*a+i]+t[3*i+a])*r}return e},y.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},void 0!==e&&(e.quat=y)}(r.exports)}()},function(e,t,r){r(2).vec3;var n=e.exports=function(e){this.valid=!0,this.id=e.id,this.handId=e.handId,this.length=e.length,this.tool=e.tool,this.width=e.width,this.direction=e.direction,this.stabilizedTipPosition=e.stabilizedTipPosition,this.tipPosition=e.tipPosition,this.tipVelocity=e.tipVelocity,this.touchZone=e.touchZone,this.touchDistance=e.touchDistance,this.timeVisible=e.timeVisible};n.prototype.toString=function(){return"Pointable [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},n.prototype.hand=function(){return this.frame.hand(this.handId)},n.Invalid={valid:!1}},function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,o,a,s;if(c(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=u(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function p(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var c=l.length,u=g(l,c);for(r=0;r<c;++r)o(u[r],this,t)}return!0},s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,o,a;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){var n=r(3),i=r(17),o=r(2),a=o.mat3,s=o.vec3,l=r(1),c=e.exports=function(e){this.id=e.id,this.palmPosition=e.palmPosition,this.direction=e.direction,this.palmVelocity=e.palmVelocity,this.palmNormal=e.palmNormal,this.sphereCenter=e.sphereCenter,this.sphereRadius=e.sphereRadius,this.valid=!0,this.pointables=[],this.fingers=[],e.armBasis?this.arm=new i(this,{type:4,width:e.armWidth,prevJoint:e.elbow,nextJoint:e.wrist,basis:e.armBasis}):this.arm=null,this.tools=[],this._translation=e.t,this._rotation=l.flatten(e.r),this._scaleFactor=e.s,this.timeVisible=e.timeVisible,this.stabilizedPalmPosition=e.stabilizedPalmPosition,this.type=e.type,this.grabStrength=e.grabStrength,this.pinchStrength=e.pinchStrength,this.confidence=e.confidence};c.prototype.finger=function(e){var t=this.frame.finger(e);return t&&t.handId==this.id?t:n.Invalid},c.prototype.rotationAngle=function(e,t){if(!this.valid||!e.valid)return 0;if(!e.hand(this.id).valid)return 0;var r=this.rotationMatrix(e),n=.5*(r[0]+r[4]+r[8]-1),i=Math.acos(n);if(i=isNaN(i)?0:i,void 0!==t){var o=this.rotationAxis(e);i*=s.dot(o,s.normalize(s.create(),t))}return i},c.prototype.rotationAxis=function(e){if(!this.valid||!e.valid)return s.create();var t=e.hand(this.id);return t.valid?s.normalize(s.create(),[this._rotation[7]-t._rotation[5],this._rotation[2]-t._rotation[6],this._rotation[3]-t._rotation[1]]):s.create()},c.prototype.rotationMatrix=function(e){if(!this.valid||!e.valid)return a.create();var t=e.hand(this.id);if(!t.valid)return a.create();var r=a.transpose(a.create(),this._rotation);return a.multiply(a.create(),t._rotation,r)},c.prototype.scaleFactor=function(e){if(!this.valid||!e.valid)return 1;var t=e.hand(this.id);return t.valid?Math.exp(this._scaleFactor-t._scaleFactor):1},c.prototype.translation=function(e){if(!this.valid||!e.valid)return s.create();var t=e.hand(this.id);return t.valid?[this._translation[0]-t._translation[0],this._translation[1]-t._translation[1],this._translation[2]-t._translation[2]]:s.create()},c.prototype.toString=function(){return"Hand ("+this.type+") [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "},c.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])},c.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])},c.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])},c.Invalid={valid:!1,fingers:[],tools:[],pointables:[],left:!1,pointable:function(){return n.Invalid},finger:function(){return n.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return a.create()},rotationAxis:function(){return s.create()},scaleFactor:function(){return 1},translation:function(){return s.create()}}},function(e,t,r){var n=r(3),i=r(17),o=r(19),a=r(1),s=e.exports=function(e){n.call(this,e),this.dipPosition=e.dipPosition,this.pipPosition=e.pipPosition,this.mcpPosition=e.mcpPosition,this.carpPosition=e.carpPosition,this.extended=e.extended,this.type=e.type,this.finger=!0,this.positions=[this.carpPosition,this.mcpPosition,this.pipPosition,this.dipPosition,this.tipPosition],e.bases?this.addBones(e):o.warnBones()};a.extend(s.prototype,n.prototype),s.prototype.addBones=function(e){this.metacarpal=new i(this,{type:0,width:this.width,prevJoint:this.carpPosition,nextJoint:this.mcpPosition,basis:e.bases[0]}),this.proximal=new i(this,{type:1,width:this.width,prevJoint:this.mcpPosition,nextJoint:this.pipPosition,basis:e.bases[1]}),this.medial=new i(this,{type:2,width:this.width,prevJoint:this.pipPosition,nextJoint:this.dipPosition,basis:e.bases[2]}),this.distal=new i(this,{type:3,width:this.width,prevJoint:this.dipPosition,nextJoint:e.btipPosition,basis:e.bases[3]}),this.bones=[this.metacarpal,this.proximal,this.medial,this.distal]},s.prototype.toString=function(){return"Finger [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},s.Invalid={valid:!1}},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,s,l=a(e),c=1;c<arguments.length;c++){for(var u in r=Object(arguments[c]))i.call(r,u)&&(l[u]=r[u]);if(n){s=n(r);for(var h=0;h<s.length;h++)o.call(r,s[h])&&(l[s[h]]=r[s[h]])}}return l}},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l,c=[],u=!1,h=-1;function f(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&d())}function d(){if(!u){var e=s(f);u=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||u||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){var n=r(5),i=r(3),o=r(10).createGesture,a=r(2),s=a.mat3,l=a.vec3,c=r(18),u=r(6),h=r(1),f=e.exports=function(e){if(this.valid=!0,this.id=e.id,this.timestamp=e.timestamp,this.hands=[],this.handsMap={},this.pointables=[],this.tools=[],this.fingers=[],e.interactionBox&&(this.interactionBox=new c(e.interactionBox)),this.gestures=[],this.pointablesMap={},this._translation=e.t,this._rotation=h.flatten(e.r),this._scaleFactor=e.s,this.data=e,this.type="frame",this.currentFrameRate=e.currentFrameRate,e.gestures)for(var t=0,r=e.gestures.length;t!=r;t++)this.gestures.push(o(e.gestures[t]));this.postprocessData(e)};f.prototype.postprocessData=function(e){e||(e=this.data);for(var t=0,r=e.hands.length;t!=r;t++){var o=new n(e.hands[t]);o.frame=this,this.hands.push(o),this.handsMap[o.id]=o}e.pointables=h.sortBy(e.pointables,(function(e){return e.id}));for(var a=0,s=e.pointables.length;a!=s;a++){var l=e.pointables[a],c=l.dipPosition?new u(l):new i(l);c.frame=this,this.addPointable(c)}},f.prototype.addPointable=function(e){if(this.pointables.push(e),this.pointablesMap[e.id]=e,(e.tool?this.tools:this.fingers).push(e),void 0!==e.handId&&this.handsMap.hasOwnProperty(e.handId)){var t=this.handsMap[e.handId];switch(t.pointables.push(e),(e.tool?t.tools:t.fingers).push(e),e.type){case 0:t.thumb=e;break;case 1:t.indexFinger=e;break;case 2:t.middleFinger=e;break;case 3:t.ringFinger=e;break;case 4:t.pinky=e}}},f.prototype.tool=function(e){var t=this.pointable(e);return t.tool?t:i.Invalid},f.prototype.pointable=function(e){return this.pointablesMap[e]||i.Invalid},f.prototype.finger=function(e){var t=this.pointable(e);return t.tool?i.Invalid:t},f.prototype.hand=function(e){return this.handsMap[e]||n.Invalid},f.prototype.rotationAngle=function(e,t){if(!this.valid||!e.valid)return 0;var r=this.rotationMatrix(e),n=.5*(r[0]+r[4]+r[8]-1),i=Math.acos(n);if(i=isNaN(i)?0:i,void 0!==t){var o=this.rotationAxis(e);i*=l.dot(o,l.normalize(l.create(),t))}return i},f.prototype.rotationAxis=function(e){return this.valid&&e.valid?l.normalize(l.create(),[this._rotation[7]-e._rotation[5],this._rotation[2]-e._rotation[6],this._rotation[3]-e._rotation[1]]):l.create()},f.prototype.rotationMatrix=function(e){if(!this.valid||!e.valid)return s.create();var t=s.transpose(s.create(),this._rotation);return s.multiply(s.create(),e._rotation,t)},f.prototype.scaleFactor=function(e){return this.valid&&e.valid?Math.exp(this._scaleFactor-e._scaleFactor):1},f.prototype.translation=function(e){return this.valid&&e.valid?l.subtract(l.create(),this._translation,e._translation):l.create()},f.prototype.toString=function(){var e="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";return this.gestures&&(e+=" | Gesture count:("+this.gestures.length+")"),e+=" ]"},f.prototype.dump=function(){var e="";e+="Frame Info:<br/>",e+=this.toString(),e+="<br/><br/>Hands:<br/>";for(var t=0,r=this.hands.length;t!=r;t++)e+="  "+this.hands[t].toString()+"<br/>";e+="<br/><br/>Pointables:<br/>";for(var n=0,i=this.pointables.length;n!=i;n++)e+="  "+this.pointables[n].toString()+"<br/>";if(this.gestures){e+="<br/><br/>Gestures:<br/>";for(var o=0,a=this.gestures.length;o!=a;o++)e+="  "+this.gestures[o].toString()+"<br/>"}return e+="<br/><br/>Raw JSON:<br/>",e+=JSON.stringify(this.data)},f.Invalid={valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return i.Invalid},finger:function(){return i.Invalid},hand:function(){return n.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return s.create()},rotationAxis:function(){return l.create()},scaleFactor:function(){return 1},translation:function(){return l.create()}}},function(e,t,r){var n=r(2).vec3,i=r(4).EventEmitter,o=r(1),a=(t.createGesture=function(e){var t;switch(e.type){case"circle":t=new s(e);break;case"swipe":t=new l(e);break;case"screenTap":t=new c(e);break;case"keyTap":t=new u(e);break;default:throw"unknown gesture type"}return t.id=e.id,t.handIds=e.handIds.slice(),t.pointableIds=e.pointableIds.slice(),t.duration=e.duration,t.state=e.state,t.type=e.type,t},t.gestureListener=function(e,t){var r={},n={};e.on("gesture",(function(e,i){if(e.type==t){if(("start"==e.state||"stop"==e.state)&&void 0===n[e.id]){var s=new a(e,i);n[e.id]=s,o.each(r,(function(e,t){s.on(t,e)}))}n[e.id].update(e,i),"stop"==e.state&&delete n[e.id]}}));var i={start:function(e){return r.start=e,i},stop:function(e){return r.stop=e,i},complete:function(e){return r.stop=e,i},update:function(e){return r.update=e,i}};return i},t.Gesture=function(e,t){this.gestures=[e],this.frames=[t]});a.prototype.update=function(e,t){this.lastGesture=e,this.lastFrame=t,this.gestures.push(e),this.frames.push(t),this.emit(e.state,this)},a.prototype.translation=function(){return n.subtract(n.create(),this.lastGesture.startPosition,this.lastGesture.position)},o.extend(a.prototype,i.prototype);var s=function(e){this.center=e.center,this.normal=e.normal,this.progress=e.progress,this.radius=e.radius};s.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var l=function(e){this.startPosition=e.startPosition,this.position=e.position,this.direction=e.direction,this.speed=e.speed};l.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var c=function(e){this.position=e.position,this.direction=e.direction,this.progress=e.progress};c.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var u=function(e){this.position=e.position,this.direction=e.direction,this.progress=e.progress};u.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+"]"}},function(e,t,r){e.exports={Controller:r(36),Frame:r(9),Gesture:r(10),Hand:r(5),Pointable:r(3),Finger:r(6),InteractionBox:r(18),CircularBuffer:r(20),UI:r(42),JSONProtocol:r(22).JSONProtocol,glMatrix:r(2),mat3:r(2).mat3,vec3:r(2).vec3,loopController:void 0,version:r(45),_:r(1),EventEmitter:r(4).EventEmitter,loop:function(e,t){return e&&void 0===t&&"[object Function]"==={}.toString.call(e)&&(t=e,e={}),this.loopController?e&&this.loopController.setupFrameEvents(e):this.loopController=new this.Controller(e),this.loopController.loop(t),this.loopController},plugin:function(e,t){this.Controller.plugin(e,t)}}},function(e,t,r){e.exports=function e(t){"use strict";var r=/^\0+/g,n=/[\0\r\f]/g,i=/: */g,o=/zoo|gra/,a=/([,: ])(transform)/g,s=/,+\s*(?![^(]*[)])/g,l=/ +\s*(?![^(]*[)])/g,c=/ *[\0] */g,u=/,\r+?/g,h=/([\t\r\n ])*\f?&/g,f=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,d=/\W+/g,p=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,g=/:(read-only)/g,v=/\s+(?=[{\];=:>])/g,y=/([[}=:>])\s+/g,x=/(\{[^{]+?);(?=\})/g,b=/\s{2,}/g,w=/([^\(])(:+) */g,_=/[svh]\w+-[tblr]{2}/,M=/\(\s*(.*)\s*\)/g,S=/([\s\S]*?);/g,A=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,T=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,k="-webkit-",P="-moz-",L="-ms-",R=59,D=125,F=123,z=40,O=41,B=10,I=13,N=32,U=45,V=42,H=44,G=58,j=47,W=1,Q=1,X=0,q=1,Y=1,K=1,J=0,Z=0,$=0,ee=[],te=[],re=0,ne=null,ie=0,oe=1,ae="",se="",le="";function ce(e,t,i,o,a){for(var s,l,u=0,h=0,f=0,d=0,v=0,y=0,x=0,b=0,_=0,S=0,A=0,C=0,T=0,E=0,P=0,L=0,J=0,te=0,ne=0,he=i.length,ve=he-1,ye="",xe="",be="",we="",_e="",Me="";P<he;){if(x=i.charCodeAt(P),P===ve&&h+d+f+u!==0&&(0!==h&&(x=h===j?B:j),d=f=u=0,he++,ve++),h+d+f+u===0){if(P===ve&&(L>0&&(xe=xe.replace(n,"")),xe.trim().length>0)){switch(x){case N:case 9:case R:case I:case B:break;default:xe+=i.charAt(P)}x=R}if(1===J)switch(x){case F:case D:case R:case 34:case 39:case z:case O:case H:J=0;case 9:case I:case B:case N:break;default:for(J=0,ne=P,v=x,P--,x=R;ne<he;)switch(i.charCodeAt(ne++)){case B:case I:case R:++P,x=v,ne=he;break;case G:L>0&&(++P,x=v);case F:ne=he}}switch(x){case F:for(v=(xe=xe.trim()).charCodeAt(0),A=1,ne=++P;P<he;){switch(x=i.charCodeAt(P)){case F:A++;break;case D:A--;break;case j:switch(y=i.charCodeAt(P+1)){case V:case j:P=ge(y,P,ve,i)}break;case 91:x++;case z:x++;case 34:case 39:for(;P++<ve&&i.charCodeAt(P)!==x;);}if(0===A)break;P++}switch(be=i.substring(ne,P),0===v&&(v=(xe=xe.replace(r,"").trim()).charCodeAt(0)),v){case 64:switch(L>0&&(xe=xe.replace(n,"")),y=xe.charCodeAt(1)){case 100:case 109:case 115:case U:s=t;break;default:s=ee}if(ne=(be=ce(t,s,be,y,a+1)).length,$>0&&0===ne&&(ne=xe.length),re>0&&(l=me(3,be,s=ue(ee,xe,te),t,Q,W,ne,y,a,o),xe=s.join(""),void 0!==l&&0===(ne=(be=l.trim()).length)&&(y=0,be="")),ne>0)switch(y){case 115:xe=xe.replace(M,pe);case 100:case 109:case U:be=xe+"{"+be+"}";break;case 107:be=(xe=xe.replace(p,"$1 $2"+(oe>0?ae:"")))+"{"+be+"}",be=1===Y||2===Y&&de("@"+be,3)?"@"+k+be+"@"+be:"@"+be;break;default:be=xe+be,112===o&&(we+=be,be="")}else be="";break;default:be=ce(t,ue(t,xe,te),be,o,a+1)}_e+=be,C=0,J=0,E=0,L=0,te=0,T=0,xe="",be="",x=i.charCodeAt(++P);break;case D:case R:if((ne=(xe=(L>0?xe.replace(n,""):xe).trim()).length)>1)switch(0===E&&((v=xe.charCodeAt(0))===U||v>96&&v<123)&&(ne=(xe=xe.replace(" ",":")).length),re>0&&void 0!==(l=me(1,xe,t,e,Q,W,we.length,o,a,o))&&0===(ne=(xe=l.trim()).length)&&(xe="\0\0"),v=xe.charCodeAt(0),y=xe.charCodeAt(1),v){case 0:break;case 64:if(105===y||99===y){Me+=xe+i.charAt(P);break}default:if(xe.charCodeAt(ne-1)===G)break;we+=fe(xe,v,y,xe.charCodeAt(2))}C=0,J=0,E=0,L=0,te=0,xe="",x=i.charCodeAt(++P)}}switch(x){case I:case B:if(h+d+f+u+Z===0)switch(S){case O:case 39:case 34:case 64:case 126:case 62:case V:case 43:case j:case U:case G:case H:case R:case F:case D:break;default:E>0&&(J=1)}h===j?h=0:q+C===0&&107!==o&&xe.length>0&&(L=1,xe+="\0"),re*ie>0&&me(0,xe,t,e,Q,W,we.length,o,a,o),W=1,Q++;break;case R:case D:if(h+d+f+u===0){W++;break}default:switch(W++,ye=i.charAt(P),x){case 9:case N:if(d+u+h===0)switch(b){case H:case G:case 9:case N:ye="";break;default:x!==N&&(ye=" ")}break;case 0:ye="\\0";break;case 12:ye="\\f";break;case 11:ye="\\v";break;case 38:d+h+u===0&&q>0&&(te=1,L=1,ye="\f"+ye);break;case 108:if(d+h+u+X===0&&E>0)switch(P-E){case 2:112===b&&i.charCodeAt(P-3)===G&&(X=b);case 8:111===_&&(X=_)}break;case G:d+h+u===0&&(E=P);break;case H:h+f+d+u===0&&(L=1,ye+="\r");break;case 34:case 39:0===h&&(d=d===x?0:0===d?x:d);break;case 91:d+h+f===0&&u++;break;case 93:d+h+f===0&&u--;break;case O:d+h+u===0&&f--;break;case z:if(d+h+u===0){if(0===C)switch(2*b+3*_){case 533:break;default:A=0,C=1}f++}break;case 64:h+f+d+u+E+T===0&&(T=1);break;case V:case j:if(d+u+f>0)break;switch(h){case 0:switch(2*x+3*i.charCodeAt(P+1)){case 235:h=j;break;case 220:ne=P,h=V}break;case V:x===j&&b===V&&ne+2!==P&&(33===i.charCodeAt(ne+2)&&(we+=i.substring(ne,P+1)),ye="",h=0)}}if(0===h){if(q+d+u+T===0&&107!==o&&x!==R)switch(x){case H:case 126:case 62:case 43:case O:case z:if(0===C){switch(b){case 9:case N:case B:case I:ye+="\0";break;default:ye="\0"+ye+(x===H?"":"\0")}L=1}else switch(x){case z:E+7===P&&108===b&&(E=0),C=++A;break;case O:0==(C=--A)&&(L=1,ye+="\0")}break;case 9:case N:switch(b){case 0:case F:case D:case R:case H:case 12:case 9:case N:case B:case I:break;default:0===C&&(L=1,ye+="\0")}}xe+=ye,x!==N&&9!==x&&(S=x)}}_=b,b=x,P++}if(ne=we.length,$>0&&0===ne&&0===_e.length&&0===t[0].length==0&&(109!==o||1===t.length&&(q>0?se:le)===t[0])&&(ne=t.join(",").length+2),ne>0){if(s=0===q&&107!==o?function(e){for(var t,r,i=0,o=e.length,a=Array(o);i<o;++i){for(var s=e[i].split(c),l="",u=0,h=0,f=0,d=0,p=s.length;u<p;++u)if(!(0===(h=(r=s[u]).length)&&p>1)){if(f=l.charCodeAt(l.length-1),d=r.charCodeAt(0),t="",0!==u)switch(f){case V:case 126:case 62:case 43:case N:case z:break;default:t=" "}switch(d){case 38:r=t+se;case 126:case 62:case 43:case N:case O:case z:break;case 91:r=t+r+se;break;case G:switch(2*r.charCodeAt(1)+3*r.charCodeAt(2)){case 530:if(K>0){r=t+r.substring(8,h-1);break}default:(u<1||s[u-1].length<1)&&(r=t+se+r)}break;case H:t="";default:r=h>1&&r.indexOf(":")>0?t+r.replace(w,"$1"+se+"$2"):t+r+se}l+=r}a[i]=l.replace(n,"").trim()}return a}(t):t,re>0&&void 0!==(l=me(2,we,s,e,Q,W,ne,o,a,o))&&0===(we=l).length)return Me+we+_e;if(we=s.join(",")+"{"+we+"}",Y*X!=0){switch(2!==Y||de(we,2)||(X=0),X){case 111:we=we.replace(g,":-moz-$1")+we;break;case 112:we=we.replace(m,"::"+k+"input-$1")+we.replace(m,"::-moz-$1")+we.replace(m,":-ms-input-$1")+we}X=0}}return Me+we+_e}function ue(e,t,r){var n=t.trim().split(u),i=n,o=n.length,a=e.length;switch(a){case 0:case 1:for(var s=0,l=0===a?"":e[0]+" ";s<o;++s)i[s]=he(l,i[s],r,a).trim();break;default:s=0;var c=0;for(i=[];s<o;++s)for(var h=0;h<a;++h)i[c++]=he(e[h]+" ",n[s],r,a).trim()}return i}function he(e,t,r,n){var i=t,o=i.charCodeAt(0);switch(o<33&&(o=(i=i.trim()).charCodeAt(0)),o){case 38:switch(q+n){case 0:case 1:if(0===e.trim().length)break;default:return i.replace(h,"$1"+e.trim())}break;case G:switch(i.charCodeAt(1)){case 103:if(K>0&&q>0)return i.replace(f,"$1").replace(h,"$1"+le);break;default:return e.trim()+i.replace(h,"$1"+e.trim())}default:if(r*q>0&&i.indexOf("\f")>0)return i.replace(h,(e.charCodeAt(0)===G?"":"$1")+e.trim())}return e+i}function fe(e,t,r,n){var c,u=0,h=e+";",f=2*t+3*r+4*n;if(944===f)return function(e){var t=e.length,r=e.indexOf(":",9)+1,n=e.substring(0,r).trim(),i=e.substring(r,t-1).trim();switch(e.charCodeAt(9)*oe){case 0:break;case U:if(110!==e.charCodeAt(10))break;default:var o=i.split((i="",s)),a=0;for(r=0,t=o.length;a<t;r=0,++a){for(var c=o[a],u=c.split(l);c=u[r];){var h=c.charCodeAt(0);if(1===oe&&(h>64&&h<90||h>96&&h<123||95===h||h===U&&c.charCodeAt(1)!==U))switch(isNaN(parseFloat(c))+(-1!==c.indexOf("("))){case 1:switch(c){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:c+=ae}}u[r++]=c}i+=(0===a?"":",")+u.join(" ")}}return i=n+i+";",1===Y||2===Y&&de(i,1)?k+i+i:i}(h);if(0===Y||2===Y&&!de(h,1))return h;switch(f){case 1015:return 97===h.charCodeAt(10)?k+h+h:h;case 951:return 116===h.charCodeAt(3)?k+h+h:h;case 963:return 110===h.charCodeAt(5)?k+h+h:h;case 1009:if(100!==h.charCodeAt(4))break;case 969:case 942:return k+h+h;case 978:return k+h+P+h+h;case 1019:case 983:return k+h+P+h+L+h+h;case 883:return h.charCodeAt(8)===U?k+h+h:h.indexOf("image-set(",11)>0?h.replace(E,"$1"+k+"$2")+h:h;case 932:if(h.charCodeAt(4)===U)switch(h.charCodeAt(5)){case 103:return k+"box-"+h.replace("-grow","")+k+h+L+h.replace("grow","positive")+h;case 115:return k+h+L+h.replace("shrink","negative")+h;case 98:return k+h+L+h.replace("basis","preferred-size")+h}return k+h+L+h+h;case 964:return k+h+L+"flex-"+h+h;case 1023:if(99!==h.charCodeAt(8))break;return c=h.substring(h.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),k+"box-pack"+c+k+h+L+"flex-pack"+c+h;case 1005:return o.test(h)?h.replace(i,":"+k)+h.replace(i,":"+P)+h:h;case 1e3:switch(u=(c=h.substring(13).trim()).indexOf("-")+1,c.charCodeAt(0)+c.charCodeAt(u)){case 226:c=h.replace(_,"tb");break;case 232:c=h.replace(_,"tb-rl");break;case 220:c=h.replace(_,"lr");break;default:return h}return k+h+L+c+h;case 1017:if(-1===h.indexOf("sticky",9))return h;case 975:switch(u=(h=e).length-10,f=(c=(33===h.charCodeAt(u)?h.substring(0,u):h).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|c.charCodeAt(7))){case 203:if(c.charCodeAt(8)<111)break;case 115:h=h.replace(c,k+c)+";"+h;break;case 207:case 102:h=h.replace(c,k+(f>102?"inline-":"")+"box")+";"+h.replace(c,k+c)+";"+h.replace(c,L+c+"box")+";"+h}return h+";";case 938:if(h.charCodeAt(5)===U)switch(h.charCodeAt(6)){case 105:return c=h.replace("-items",""),k+h+k+"box-"+c+L+"flex-"+c+h;case 115:return k+h+L+"flex-item-"+h.replace(A,"")+h;default:return k+h+L+"flex-line-pack"+h.replace("align-content","").replace(A,"")+h}break;case 973:case 989:if(h.charCodeAt(3)!==U||122===h.charCodeAt(4))break;case 931:case 953:if(!0===T.test(e))return 115===(c=e.substring(e.indexOf(":")+1)).charCodeAt(0)?fe(e.replace("stretch","fill-available"),t,r,n).replace(":fill-available",":stretch"):h.replace(c,k+c)+h.replace(c,P+c.replace("fill-",""))+h;break;case 962:if(h=k+h+(102===h.charCodeAt(5)?L+h:"")+h,r+n===211&&105===h.charCodeAt(13)&&h.indexOf("transform",10)>0)return h.substring(0,h.indexOf(";",27)+1).replace(a,"$1"+k+"$2")+h}return h}function de(e,t){var r=e.indexOf(1===t?":":"{"),n=e.substring(0,3!==t?r:10),i=e.substring(r+1,e.length-1);return ne(2!==t?n:n.replace(C,"$1"),i,t)}function pe(e,t){var r=fe(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return r!==t+";"?r.replace(S," or ($1)").substring(4):"("+t+")"}function me(e,t,r,n,i,o,a,s,l,c){for(var u,h=0,f=t;h<re;++h)switch(u=te[h].call(ye,e,f,r,n,i,o,a,s,l,c)){case void 0:case!1:case!0:case null:break;default:f=u}if(f!==t)return f}function ge(e,t,r,n){for(var i=t+1;i<r;++i)switch(n.charCodeAt(i)){case j:if(e===V&&n.charCodeAt(i-1)===V&&t+2!==i)return i+1;break;case B:if(e===j)return i+1}return i}function ve(e){for(var t in e){var r=e[t];switch(t){case"keyframe":oe=0|r;break;case"global":K=0|r;break;case"cascade":q=0|r;break;case"compress":J=0|r;break;case"semicolon":Z=0|r;break;case"preserve":$=0|r;break;case"prefix":ne=null,r?"function"!=typeof r?Y=1:(Y=2,ne=r):Y=0}}return ve}function ye(t,r){if(void 0!==this&&this.constructor===ye)return e(t);var i=t,o=i.charCodeAt(0);o<33&&(o=(i=i.trim()).charCodeAt(0)),oe>0&&(ae=i.replace(d,91===o?"":"-")),o=1,1===q?le=i:se=i;var a,s=[le];re>0&&void 0!==(a=me(-1,r,s,s,Q,W,0,0,0,0))&&"string"==typeof a&&(r=a);var l=ce(ee,s,r,0,0);return re>0&&void 0!==(a=me(-2,l,s,s,Q,W,l.length,0,0,0))&&"string"!=typeof(l=a)&&(o=0),ae="",le="",se="",X=0,Q=1,W=1,J*o==0?l:l.replace(n,"").replace(v,"").replace(y,"$1").replace(x,"$1").replace(b," ")}return ye.use=function e(t){switch(t){case void 0:case null:re=te.length=0;break;default:if("function"==typeof t)te[re++]=t;else if("object"==typeof t)for(var r=0,n=t.length;r<n;++r)e(t[r]);else ie=0|!!t}return e},ye.set=ve,void 0!==t&&ve(t),ye}(null)},function(e,t,r){"use strict";e.exports=r(66)},function(e,t,r){"use strict";function n(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}t.a=function(e,t){var r;void 0===t&&(t=n);var i,o=[],a=!1;return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return a&&r===this&&t(n,o)||(i=e.apply(this,n),a=!0,r=this,o=n),i}}},function(e,t,r){"use strict";var n,i=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),a=[];function s(e){for(var t=-1,r=0;r<a.length;r++)if(a[r].identifier===e){t=r;break}return t}function l(e,t){for(var r={},n=[],i=0;i<e.length;i++){var o=e[i],l=t.base?o[0]+t.base:o[0],c=r[l]||0,u="".concat(l," ").concat(c);r[l]=c+1;var h=s(u),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(a[h].references++,a[h].updater(f)):a.push({identifier:u,updater:g(f,t),references:1}),n.push(u)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var i=r.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,h=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,r,n){var i=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=h(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function d(e,t,r){var n=r.css,i=r.media,o=r.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var p=null,m=0;function g(e,t){var r,n,i;if(t.singleton){var o=m++;r=p||(p=c(t)),n=f.bind(null,r,o,!1),i=f.bind(null,r,o,!0)}else r=c(t),n=d.bind(null,r,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var r=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var i=s(r[n]);a[i].references--}for(var o=l(e,t),c=0;c<r.length;c++){var u=s(r[c]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}r=o}}}},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var i=(a=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(o).concat([i]).join("\n")}var a,s,l;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);n&&i[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),t.push(l))}},t}},function(e,t,r){r(3);var n=r(2),i=n.vec3,o=n.mat3,a=n.mat4,s=(r(1),e.exports=function(e,t){this.finger=e,this._center=null,this._matrix=null,this.type=t.type,this.prevJoint=t.prevJoint,this.nextJoint=t.nextJoint,this.width=t.width;var r=new Array(3);i.sub(r,t.nextJoint,t.prevJoint),this.length=i.length(r),this.basis=t.basis});s.prototype.left=function(){return this._left||(this._left=o.determinant(this.basis[0].concat(this.basis[1]).concat(this.basis[2]))<0),this._left},s.prototype.matrix=function(){if(this._matrix)return this._matrix;var e=this.basis,t=this._matrix=a.create();return t[0]=e[0][0],t[1]=e[0][1],t[2]=e[0][2],t[4]=e[1][0],t[5]=e[1][1],t[6]=e[1][2],t[8]=e[2][0],t[9]=e[2][1],t[10]=e[2][2],t[3]=this.center()[0],t[7]=this.center()[1],t[11]=this.center()[2],this.left()&&(t[0]*=-1,t[1]*=-1,t[2]*=-1),this._matrix},s.prototype.lerp=function(e,t){i.lerp(e,this.prevJoint,this.nextJoint,t)},s.prototype.center=function(){if(this._center)return this._center;var e=i.create();return this.lerp(e,.5),this._center=e,e},s.prototype.direction=function(){return[-1*this.basis[2][0],-1*this.basis[2][1],-1*this.basis[2][2]]}},function(e,t,r){var n=r(2).vec3,i=e.exports=function(e){this.valid=!0,this.center=e.center,this.size=e.size,this.width=e.size[0],this.height=e.size[1],this.depth=e.size[2]};i.prototype.denormalizePoint=function(e){return n.fromValues((e[0]-.5)*this.size[0]+this.center[0],(e[1]-.5)*this.size[1]+this.center[1],(e[2]-.5)*this.size[2]+this.center[2])},i.prototype.normalizePoint=function(e,t){var r=n.fromValues((e[0]-this.center[0])/this.size[0]+.5,(e[1]-this.center[1])/this.size[1]+.5,(e[2]-this.center[2])/this.size[2]+.5);return t&&(r[0]=Math.min(Math.max(r[0],0),1),r[1]=Math.min(Math.max(r[1],0),1),r[2]=Math.min(Math.max(r[2],0),1)),r},i.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"},i.Invalid={valid:!1}},function(e,t,r){(function(t){var r=e.exports=function(e,t){this.options=t||{},this.message=e,this.createElement()};r.prototype.createElement=function(){this.element=document.createElement("div"),this.element.className="leapjs-dialog",this.element.style.position="fixed",this.element.style.top="8px",this.element.style.left=0,this.element.style.right=0,this.element.style.textAlign="center",this.element.style.zIndex=1e3;var e=document.createElement("div");this.element.appendChild(e),e.style.className="leapjs-dialog",e.style.display="inline-block",e.style.margin="auto",e.style.padding="8px",e.style.color="#222",e.style.background="#eee",e.style.borderRadius="4px",e.style.border="1px solid #999",e.style.textAlign="left",e.style.cursor="pointer",e.style.whiteSpace="nowrap",e.style.transition="box-shadow 1s linear",e.innerHTML=this.message,this.options.onclick&&e.addEventListener("click",this.options.onclick),this.options.onmouseover&&e.addEventListener("mouseover",this.options.onmouseover),this.options.onmouseout&&e.addEventListener("mouseout",this.options.onmouseout),this.options.onmousemove&&e.addEventListener("mousemove",this.options.onmousemove)},r.prototype.show=function(){return document.body.appendChild(this.element),this},r.prototype.hide=function(){return document.body.removeChild(this.element),this},r.warnOutOfDate=function(e){e||(e={});var t="http://developer.leapmotion.com?";for(var n in e.returnTo=window.location.href,e)t+=n+"="+encodeURIComponent(e[n])+"&";var i;return(i=new r("This site requires Leap Motion Tracking V2.<button id='leapjs-accept-upgrade'  style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 16px;'>Upgrade</button><button id='leapjs-decline-upgrade' style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 8px; '>Not Now</button>",{onclick:function(e){if("leapjs-decline-upgrade"!=e.target.id){var r=window.open(t,"_blank","height=800,width=1000,location=1,menubar=1,resizable=1,status=1,toolbar=1,scrollbars=1");window.focus&&r.focus()}return i.hide(),!0},onmousemove:function(e){e.target==document.getElementById("leapjs-decline-upgrade")?(document.getElementById("leapjs-decline-upgrade").style.color="#000",document.getElementById("leapjs-decline-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"):(document.getElementById("leapjs-accept-upgrade").style.color="#000",document.getElementById("leapjs-accept-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none")},onmouseout:function(){document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"}})).show()},r.hasWarnedBones=!1,r.warnBones=function(){this.hasWarnedBones||(this.hasWarnedBones=!0,console.warn("Your Leap Service is out of date"),void 0!==t&&t.versions&&t.versions.node||this.warnOutOfDate({reason:"bones"}))}}).call(this,r(8))},function(e,t){var r=e.exports=function(e){this.pos=0,this._buf=[],this.size=e};r.prototype.get=function(e){if(null==e&&(e=0),!(e>=this.size||e>=this._buf.length))return this._buf[(this.pos-e-1)%this.size]},r.prototype.push=function(e){return this._buf[this.pos%this.size]=e,this.pos++}},function(e,t,r){var n=r(22).chooseProtocol,i=r(4).EventEmitter,o=r(1),a=e.exports=function(e){this.opts=o.defaults(e||{},{host:"127.0.0.1",enableGestures:!1,scheme:this.getScheme(),port:this.getPort(),background:!1,optimizeHMD:!1,requestProtocolVersion:a.defaultProtocolVersion}),this.host=this.opts.host,this.port=this.opts.port,this.scheme=this.opts.scheme,this.protocolVersionVerified=!1,this.background=null,this.optimizeHMD=null,this.on("ready",(function(){this.enableGestures(this.opts.enableGestures),this.setBackground(this.opts.background),this.setOptimizeHMD(this.opts.optimizeHMD),this.opts.optimizeHMD?console.log("Optimized for head mounted display usage."):console.log("Optimized for desktop usage.")}))};a.defaultProtocolVersion=6,a.prototype.getUrl=function(){return this.scheme+"//"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"},a.prototype.getScheme=function(){return"ws:"},a.prototype.getPort=function(){return 6437},a.prototype.setBackground=function(e){this.opts.background=e,this.protocol&&this.protocol.sendBackground&&this.background!==this.opts.background&&(this.background=this.opts.background,this.protocol.sendBackground(this,this.opts.background))},a.prototype.setOptimizeHMD=function(e){this.opts.optimizeHMD=e,this.protocol&&this.protocol.sendOptimizeHMD&&this.optimizeHMD!==this.opts.optimizeHMD&&(this.optimizeHMD=this.opts.optimizeHMD,this.protocol.sendOptimizeHMD(this,this.opts.optimizeHMD))},a.prototype.handleOpen=function(){this.connected||(this.connected=!0,this.emit("connect"))},a.prototype.enableGestures=function(e){this.gesturesEnabled=!!e,this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))},a.prototype.handleClose=function(e,t){this.connected&&(this.disconnect(),1001===e&&this.opts.requestProtocolVersion>1&&(this.protocolVersionVerified?this.protocolVersionVerified=!1:this.opts.requestProtocolVersion--),this.startReconnection())},a.prototype.startReconnection=function(){var e=this;this.reconnectionTimer||(this.reconnectionTimer=setInterval((function(){e.reconnect()}),500))},a.prototype.stopReconnection=function(){this.reconnectionTimer=clearInterval(this.reconnectionTimer)},a.prototype.disconnect=function(e){if(e||this.stopReconnection(),this.socket)return this.socket.close(),delete this.socket,delete this.protocol,delete this.background,delete this.optimizeHMD,delete this.focusedState,this.connected&&(this.connected=!1,this.emit("disconnect")),!0},a.prototype.reconnect=function(){this.connected?this.stopReconnection():(this.disconnect(!0),this.connect())},a.prototype.handleData=function(e){var t,r=JSON.parse(e);void 0===this.protocol?(t=this.protocol=n(r),this.protocolVersionVerified=!0,this.emit("ready")):t=this.protocol(r),this.emit(t.type,t)},a.prototype.connect=function(){if(!this.socket)return this.socket=this.setupSocket(),!0},a.prototype.send=function(e){this.socket.send(e)},a.prototype.reportFocus=function(e){this.connected&&this.focusedState!==e&&(this.focusedState=e,this.emit(this.focusedState?"focus":"blur"),this.protocol&&this.protocol.sendFocused&&this.protocol.sendFocused(this,this.focusedState))},o.extend(a.prototype,i.prototype)},function(e,t,r){var n=r(9),i=(r(5),r(3),r(6),r(1)),o=r(4).EventEmitter,a=function(e){this.type=e.type,this.state=e.state};t.chooseProtocol=function(e){var t;switch(e.version){case 1:case 2:case 3:case 4:case 5:case 6:(t=s(e)).sendBackground=function(e,r){e.send(t.encode({background:r}))},t.sendFocused=function(e,r){e.send(t.encode({focused:r}))},t.sendOptimizeHMD=function(e,r){e.send(t.encode({optimizeHMD:r}))};break;default:throw"unrecognized version"}return t};var s=t.JSONProtocol=function(e){var t=function(e){if(e.event)return new a(e.event);t.emit("beforeFrameCreated",e);var r=new n(e);return t.emit("afterFrameCreated",r,e),r};return t.encode=function(e){return JSON.stringify(e)},t.version=e.version,t.serviceVersion=e.serviceVersion,t.versionLong="Version "+e.version,t.type="protocol",i.extend(t,o.prototype),t}},function(e,t,r){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=r(33)},function(e,t){function r(e,t,r){var n,i,o,a,s;function l(){var c=Date.now()-a;c<t&&c>=0?n=setTimeout(l,t-c):(n=null,r||(s=e.apply(o,i),o=i=null))}null==t&&(t=100);var c=function(){o=this,i=arguments,a=Date.now();var c=r&&!n;return n||(n=setTimeout(l,t)),c&&(s=e.apply(o,i),o=i=null),s};return c.clear=function(){n&&(clearTimeout(n),n=null)},c.flush=function(){n&&(s=e.apply(o,i),o=i=null,clearTimeout(n),n=null)},c}r.debounce=r,e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(57)),i=a(r(59)),o=a(r(64));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return n.default.createElement(o.default,{style:e.style,className:e.className,fill:e.color,width:e.fontSize,height:e.fontSize,viewBox:"0 0 1024 1024",onClick:e.onClick,rotate:e.rotate?1:0,shake:e.shake?1:0,beat:e.beat?1:0},n.default.createElement("path",{d:"M512 352c-88.008 0-160.002 72-160.002 160 0 88.008 71.994 160 160.002 160 88.010 0 159.998-71.992 159.998-160 0-88-71.988-160-159.998-160zM893.876 469.334c-19.21-177.062-162.148-320-339.21-339.198v-66.136h-85.332v66.134c-177.062 19.198-320 162.136-339.208 339.198h-66.126v85.334h66.124c19.208 177.062 162.144 320 339.208 339.208v66.126h85.332v-66.124c177.062-19.208 320-162.146 339.21-339.208h66.126v-85.334h-66.124zM512 810.666c-164.274 0-298.668-134.396-298.668-298.666 0-164.272 134.394-298.666 298.668-298.666 164.27 0 298.664 134.396 298.664 298.666s-134.394 298.666-298.664 298.666z"}))};s.defaultProps={style:{},color:"#000000",fontSize:"22px",shake:!1,beat:!1,rotate:!1},s.propTypes={style:i.default.object,color:i.default.string,fontSize:i.default.string,shake:i.default.bool,beat:i.default.bool,rotate:i.default.bool,onClick:i.default.func},t.default=s,e.exports=t.default},function(e,t,r){e.exports=function(){"use strict";return function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(r,n,i,o,a,s,l,c,u,h){switch(r){case 1:if(0===u&&64===n.charCodeAt(0))return e(n+";"),"";break;case 2:if(0===c)return n+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+n),"";default:return n+(0===h?"/*|*/":"")}case-2:n.split("/*|*/}").forEach(t)}}}}()},function(e,t,r){"use strict";t.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,r){"use strict";var n=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,i=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}((function(e){return n.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));t.a=i},function(e,t,r){"use strict";function n(e){return Object.prototype.toString.call(e).slice(8,-1)}function i(e){return"Object"===n(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function o(e){return"Array"===n(e)}function a(e){return"Symbol"===n(e)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function s(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function l(e,t,r,n){var i=n.propertyIsEnumerable(t)?"enumerable":"nonenumerable";"enumerable"===i&&(e[t]=r),"nonenumerable"===i&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}function c(e,t,r){if(!i(t))return r&&o(r)&&r.forEach((function(r){t=r(e,t)})),t;var n={};i(e)&&(n=s(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)).reduce((function(r,n){var i=e[n];return(!a(n)&&!Object.getOwnPropertyNames(t).includes(n)||a(n)&&!Object.getOwnPropertySymbols(t).includes(n))&&l(r,n,i,e),r}),{}));return s(Object.getOwnPropertyNames(t),Object.getOwnPropertySymbols(t)).reduce((function(n,a){var s=t[a],u=i(e)?e[a]:void 0;return r&&o(r)&&r.forEach((function(e){s=e(u,s)})),void 0!==u&&i(s)&&(s=c(u,s,r)),l(n,a,s,t),n}),n)}t.a=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=null,o=e;return i(e)&&e.extensions&&1===Object.keys(e).length&&(o={},n=e.extensions),t.reduce((function(e,t){return c(e,t,n)}),o)}},function(e,t,r){var n=r(15),i=r(31);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};n(i,o);e.exports=i.locals||{}},function(e,t,r){(t=r(16)(!1)).push([e.i,".btn{width:25vw;height:25vh;background-color:#fff;border:5px solid #000;cursor:pointer}.btn.active{background-color:blue}",""]),e.exports=t},function(e,t,r){"use strict";
/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(7),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x={};function b(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||y}function w(){}function _(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||y}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=b.prototype;var M=_.prototype=new w;M.constructor=_,n(M,b.prototype),M.isPureReactComponent=!0;var S={current:null},A=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var n,i={},a=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)A.call(t,n)&&!C.hasOwnProperty(n)&&(i[n]=t[n]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===i[n]&&(i[n]=l[n]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:S.current}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var k=/\/+/g,P=[];function L(e,t,r,n){if(P.length){var i=P.pop();return i.result=e,i.keyPrefix=t,i.func=r,i.context=n,i.count=0,i}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>P.length&&P.push(e)}function D(e,t,r){return null==e?0:function e(t,r,n,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case o:case a:l=!0}}if(l)return n(i,t,""===r?"."+F(t,0):r),1;if(l=0,r=""===r?".":r+":",Array.isArray(t))for(var c=0;c<t.length;c++){var u=r+F(s=t[c],c);l+=e(s,u,n,i)}else if(null===t||"object"!=typeof t?u=null:u="function"==typeof(u=g&&t[g]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),c=0;!(s=t.next()).done;)l+=e(s=s.value,u=r+F(s,c++),n,i);else if("object"===s)throw n=""+t,Error(v(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return l}(e,"",t,r)}function F(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function z(e,t){e.func.call(e.context,t,e.count++)}function O(e,t,r){var n=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?B(e,n,r,(function(e){return e})):null!=e&&(E(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(k,"$&/")+"/")+r)),n.push(e))}function B(e,t,r,n,i){var o="";null!=r&&(o=(""+r).replace(k,"$&/")+"/"),D(e,O,t=L(t,o,n,i)),R(t)}var I={current:null};function N(){var e=I.current;if(null===e)throw Error(v(321));return e}var U={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:function(e,t,r){if(null==e)return e;var n=[];return B(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;D(e,z,t=L(null,null,t,r)),R(t)},count:function(e){return D(e,(function(){return null}),null)},toArray:function(e){var t=[];return B(e,t,null,(function(e){return e})),t},only:function(e){if(!E(e))throw Error(v(143));return e}},t.Component=b,t.Fragment=s,t.Profiler=c,t.PureComponent=_,t.StrictMode=l,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,t.cloneElement=function(e,t,r){if(null==e)throw Error(v(267,e));var i=n({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)A.call(t,u)&&!C.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:f,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return N().useCallback(e,t)},t.useContext=function(e,t){return N().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return N().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return N().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return N().useLayoutEffect(e,t)},t.useMemo=function(e,t){return N().useMemo(e,t)},t.useReducer=function(e,t,r){return N().useReducer(e,t,r)},t.useRef=function(e){return N().useRef(e)},t.useState=function(e){return N().useState(e)},t.version="16.13.1"},function(e,t,r){"use strict";
/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(0),i=r(7),o=r(34);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(a(227));function s(e,t,r,n,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(e){this.onError(e)}}var l=!1,c=null,u=!1,h=null,f={onError:function(e){l=!0,c=e}};function d(e,t,r,n,i,o,a,u,h){l=!1,c=null,s.apply(f,arguments)}var p=null,m=null,g=null;function v(e,t,r){var n=e.type||"unknown-event";e.currentTarget=g(r),function(e,t,r,n,i,o,s,f,p){if(d.apply(this,arguments),l){if(!l)throw Error(a(198));var m=c;l=!1,c=null,u||(u=!0,h=m)}}(n,t,void 0,e),e.currentTarget=null}var y=null,x={};function b(){if(y)for(var e in x){var t=x[e],r=y.indexOf(e);if(!(-1<r))throw Error(a(96,e));if(!_[r]){if(!t.extractEvents)throw Error(a(97,e));for(var n in _[r]=t,r=t.eventTypes){var i=void 0,o=r[n],s=t,l=n;if(M.hasOwnProperty(l))throw Error(a(99,l));M[l]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&w(c[i],s,l);i=!0}else o.registrationName?(w(o.registrationName,s,l),i=!0):i=!1;if(!i)throw Error(a(98,n,e))}}}}function w(e,t,r){if(S[e])throw Error(a(100,e));S[e]=t,A[e]=t.eventTypes[r].dependencies}var _=[],M={},S={},A={};function C(e){var t,r=!1;for(t in e)if(e.hasOwnProperty(t)){var n=e[t];if(!x.hasOwnProperty(t)||x[t]!==n){if(x[t])throw Error(a(102,t));x[t]=n,r=!0}}r&&b()}var T=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),E=null,k=null,P=null;function L(e){if(e=m(e)){if("function"!=typeof E)throw Error(a(280));var t=e.stateNode;t&&(t=p(t),E(e.stateNode,e.type,t))}}function R(e){k?P?P.push(e):P=[e]:k=e}function D(){if(k){var e=k,t=P;if(P=k=null,L(e),t)for(e=0;e<t.length;e++)L(t[e])}}function F(e,t){return e(t)}function z(e,t,r,n,i){return e(t,r,n,i)}function O(){}var B=F,I=!1,N=!1;function U(){null===k&&null===P||(O(),D())}function V(e,t,r){if(N)return e(t,r);N=!0;try{return B(e,t,r)}finally{N=!1,U()}}var H=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G=Object.prototype.hasOwnProperty,j={},W={};function Q(e,t,r,n,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o}var X={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){X[e]=new Q(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];X[t]=new Q(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){X[e]=new Q(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){X[e]=new Q(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){X[e]=new Q(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){X[e]=new Q(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){X[e]=new Q(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){X[e]=new Q(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){X[e]=new Q(e,5,!1,e.toLowerCase(),null,!1)}));var q=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(q,Y);X[t]=new Q(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(q,Y);X[t]=new Q(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(q,Y);X[t]=new Q(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){X[e]=new Q(e,1,!1,e.toLowerCase(),null,!1)})),X.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){X[e]=new Q(e,1,!1,e.toLowerCase(),null,!0)}));var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(e,t,r,n){var i=X.hasOwnProperty(t)?X[t]:null;(null!==i?0===i.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!G.call(W,e)||!G.call(j,e)&&(H.test(e)?W[e]=!0:(j[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}K.hasOwnProperty("ReactCurrentDispatcher")||(K.ReactCurrentDispatcher={current:null}),K.hasOwnProperty("ReactCurrentBatchConfig")||(K.ReactCurrentBatchConfig={suspense:null});var Z=/^(.*)[\\\/]/,$="function"==typeof Symbol&&Symbol.for,ee=$?Symbol.for("react.element"):60103,te=$?Symbol.for("react.portal"):60106,re=$?Symbol.for("react.fragment"):60107,ne=$?Symbol.for("react.strict_mode"):60108,ie=$?Symbol.for("react.profiler"):60114,oe=$?Symbol.for("react.provider"):60109,ae=$?Symbol.for("react.context"):60110,se=$?Symbol.for("react.concurrent_mode"):60111,le=$?Symbol.for("react.forward_ref"):60112,ce=$?Symbol.for("react.suspense"):60113,ue=$?Symbol.for("react.suspense_list"):60120,he=$?Symbol.for("react.memo"):60115,fe=$?Symbol.for("react.lazy"):60116,de=$?Symbol.for("react.block"):60121,pe="function"==typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case re:return"Fragment";case te:return"Portal";case ie:return"Profiler";case ne:return"StrictMode";case ce:return"Suspense";case ue:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ae:return"Context.Consumer";case oe:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return ge(e.type);case de:return ge(e.render);case fe:if(e=1===e._status?e._result:null)return ge(e)}return null}function ve(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var r="";break e;default:var n=e._debugOwner,i=e._debugSource,o=ge(e.type);r=null,n&&(r=ge(n.type)),n=o,o="",i?o=" (at "+i.fileName.replace(Z,"")+":"+i.lineNumber+")":r&&(o=" (created by "+r+")"),r="\n    in "+(n||"Unknown")+o}t+=r,e=e.return}while(e);return t}function ye(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function xe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=xe(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function we(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=xe(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function _e(e,t){var r=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Me(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=ye(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Se(e,t){null!=(t=t.checked)&&J(e,"checked",t,!1)}function Ae(e,t){Se(e,t);var r=ye(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?Te(e,t.type,r):t.hasOwnProperty("defaultValue")&&Te(e,t.type,ye(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ce(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function Te(e,t,r){"number"===t&&e.ownerDocument.activeElement===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function Ee(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ke(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ye(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Pe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Le(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:ye(r)}}function Re(e,t){var r=ye(t.value),n=ye(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function De(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Fe="http://www.w3.org/1999/xhtml",ze="http://www.w3.org/2000/svg";function Oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Be(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ie,Ne=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction((function(){return e(t,r)}))}:e}((function(e,t){if(e.namespaceURI!==ze||"innerHTML"in e)e.innerHTML=t;else{for((Ie=Ie||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ie.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function Ue(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}function Ve(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var He={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Ge={},je={};function We(e){if(Ge[e])return Ge[e];if(!He[e])return e;var t,r=He[e];for(t in r)if(r.hasOwnProperty(t)&&t in je)return Ge[e]=r[t];return e}T&&(je=document.createElement("div").style,"AnimationEvent"in window||(delete He.animationend.animation,delete He.animationiteration.animation,delete He.animationstart.animation),"TransitionEvent"in window||delete He.transitionend.transition);var Qe=We("animationend"),Xe=We("animationiteration"),qe=We("animationstart"),Ye=We("transitionend"),Ke="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"==typeof WeakMap?WeakMap:Map);function Ze(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function $e(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if($e(e)!==e)throw Error(a(188))}function rt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(n=i.return)){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return tt(i),e;if(o===n)return tt(i),t;o=o.sibling}throw Error(a(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,n=o;break}if(l===n){s=!0,n=i,r=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===r){s=!0,r=o,n=i;break}if(l===n){s=!0,n=o,r=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(r.alternate!==n)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function nt(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function it(e,t,r){Array.isArray(e)?e.forEach(t,r):e&&t.call(r,e)}var ot=null;function at(e){if(e){var t=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)v(e,t[n],r[n]);else t&&v(e,t,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(ot=nt(ot,e)),e=ot,ot=null,e){if(it(e,at),ot)throw Error(a(95));if(u)throw e=h,u=!1,h=null,e}}function lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!T)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var ut=[];function ht(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ut.length&&ut.push(e)}function ft(e,t,r,n){if(ut.length){var i=ut.pop();return i.topLevelType=e,i.eventSystemFlags=n,i.nativeEvent=t,i.targetInst=r,i}return{topLevelType:e,eventSystemFlags:n,nativeEvent:t,targetInst:r,ancestors:[]}}function dt(e){var t=e.targetInst,r=t;do{if(!r){e.ancestors.push(r);break}var n=r;if(3===n.tag)n=n.stateNode.containerInfo;else{for(;n.return;)n=n.return;n=3!==n.tag?null:n.stateNode.containerInfo}if(!n)break;5!==(t=r.tag)&&6!==t||e.ancestors.push(r),r=Cr(n)}while(r);for(r=0;r<e.ancestors.length;r++){t=e.ancestors[r];var i=lt(e.nativeEvent);n=e.topLevelType;var o=e.nativeEvent,a=e.eventSystemFlags;0===r&&(a|=64);for(var s=null,l=0;l<_.length;l++){var c=_[l];c&&(c=c.extractEvents(n,t,o,i,a))&&(s=nt(s,c))}st(s)}}function pt(e,t,r){if(!r.has(e)){switch(e){case"scroll":qt(t,"scroll",!0);break;case"focus":case"blur":qt(t,"focus",!0),qt(t,"blur",!0),r.set("blur",null),r.set("focus",null);break;case"cancel":case"close":ct(e)&&qt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ke.indexOf(e)&&Xt(e,t)}r.set(e,null)}}var mt,gt,vt,yt=!1,xt=[],bt=null,wt=null,_t=null,Mt=new Map,St=new Map,At=[],Ct="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Tt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Et(e,t,r,n,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|r,nativeEvent:i,container:n}}function kt(e,t){switch(e){case"focus":case"blur":bt=null;break;case"dragenter":case"dragleave":wt=null;break;case"mouseover":case"mouseout":_t=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":St.delete(t.pointerId)}}function Pt(e,t,r,n,i,o){return null===e||e.nativeEvent!==o?(e=Et(t,r,n,i,o),null!==t&&(null!==(t=Tr(t))&&gt(t)),e):(e.eventSystemFlags|=n,e)}function Lt(e){var t=Cr(e.target);if(null!==t){var r=$e(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=et(r)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){vt(r)}))}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var r=Tr(t);return null!==r&&gt(r),e.blockedOn=t,!1}return!0}function Dt(e,t,r){Rt(e)&&r.delete(t)}function Ft(){for(yt=!1;0<xt.length;){var e=xt[0];if(null!==e.blockedOn){null!==(e=Tr(e.blockedOn))&&mt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:xt.shift()}null!==bt&&Rt(bt)&&(bt=null),null!==wt&&Rt(wt)&&(wt=null),null!==_t&&Rt(_t)&&(_t=null),Mt.forEach(Dt),St.forEach(Dt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,yt||(yt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ft)))}function Ot(e){function t(t){return zt(t,e)}if(0<xt.length){zt(xt[0],e);for(var r=1;r<xt.length;r++){var n=xt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==bt&&zt(bt,e),null!==wt&&zt(wt,e),null!==_t&&zt(_t,e),Mt.forEach(t),St.forEach(t),r=0;r<At.length;r++)(n=At[r]).blockedOn===e&&(n.blockedOn=null);for(;0<At.length&&null===(r=At[0]).blockedOn;)Lt(r),null===r.blockedOn&&At.shift()}var Bt={},It=new Map,Nt=new Map,Ut=["abort","abort",Qe,"animationEnd",Xe,"animationIteration",qe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ye,"transitionEnd","waiting","waiting"];function Vt(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[n],eventPriority:t},Nt.set(n,t),It.set(n,o),Bt[i]=o}}Vt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Vt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Vt(Ut,2);for(var Ht="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Gt=0;Gt<Ht.length;Gt++)Nt.set(Ht[Gt],0);var jt=o.unstable_UserBlockingPriority,Wt=o.unstable_runWithPriority,Qt=!0;function Xt(e,t){qt(t,e,!1)}function qt(e,t,r){var n=Nt.get(t);switch(void 0===n?2:n){case 0:n=Yt.bind(null,t,1,e);break;case 1:n=Kt.bind(null,t,1,e);break;default:n=Jt.bind(null,t,1,e)}r?e.addEventListener(t,n,!0):e.addEventListener(t,n,!1)}function Yt(e,t,r,n){I||O();var i=Jt,o=I;I=!0;try{z(i,e,t,r,n)}finally{(I=o)||U()}}function Kt(e,t,r,n){Wt(jt,Jt.bind(null,e,t,r,n))}function Jt(e,t,r,n){if(Qt)if(0<xt.length&&-1<Ct.indexOf(e))e=Et(null,e,t,r,n),xt.push(e);else{var i=Zt(e,t,r,n);if(null===i)kt(e,n);else if(-1<Ct.indexOf(e))e=Et(i,e,t,r,n),xt.push(e);else if(!function(e,t,r,n,i){switch(t){case"focus":return bt=Pt(bt,e,t,r,n,i),!0;case"dragenter":return wt=Pt(wt,e,t,r,n,i),!0;case"mouseover":return _t=Pt(_t,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Mt.set(o,Pt(Mt.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,St.set(o,Pt(St.get(o)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n)){kt(e,n),e=ft(e,n,null,t);try{V(dt,e)}finally{ht(e)}}}}function Zt(e,t,r,n){if(null!==(r=Cr(r=lt(n)))){var i=$e(r);if(null===i)r=null;else{var o=i.tag;if(13===o){if(null!==(r=et(i)))return r;r=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}e=ft(e,n,r,t);try{V(dt,e)}finally{ht(e)}return null}var $t={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},er=["Webkit","ms","Moz","O"];function tr(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||$t.hasOwnProperty(e)&&$t[e]?(""+t).trim():t+"px"}function rr(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=tr(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys($t).forEach((function(e){er.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$t[t]=$t[e]}))}));var nr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ir(e,t){if(t){if(nr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62,""))}}function or(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=Fe;function sr(e,t){var r=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=A[t];for(var n=0;n<t.length;n++)pt(t[n],e,r)}function lr(){}function cr(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var r,n=ur(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ur(n)}}function fr(){for(var e=window,t=cr();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;t=cr((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var pr=null,mr=null;function gr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function vr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var yr="function"==typeof setTimeout?setTimeout:void 0,xr="function"==typeof clearTimeout?clearTimeout:void 0;function br(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function wr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var _r=Math.random().toString(36).slice(2),Mr="__reactInternalInstance$"+_r,Sr="__reactEventHandlers$"+_r,Ar="__reactContainere$"+_r;function Cr(e){var t=e[Mr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ar]||r[Mr]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=wr(e);null!==e;){if(r=e[Mr])return r;e=wr(e)}return t}r=(e=r).parentNode}return null}function Tr(e){return!(e=e[Mr]||e[Ar])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Er(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function kr(e){return e[Sr]||null}function Pr(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Lr(e,t){var r=e.stateNode;if(!r)return null;var n=p(r);if(!n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(a(231,t,typeof r));return r}function Rr(e,t,r){(t=Lr(e,r.dispatchConfig.phasedRegistrationNames[t]))&&(r._dispatchListeners=nt(r._dispatchListeners,t),r._dispatchInstances=nt(r._dispatchInstances,e))}function Dr(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,r=[];t;)r.push(t),t=Pr(t);for(t=r.length;0<t--;)Rr(r[t],"captured",e);for(t=0;t<r.length;t++)Rr(r[t],"bubbled",e)}}function Fr(e,t,r){e&&r&&r.dispatchConfig.registrationName&&(t=Lr(e,r.dispatchConfig.registrationName))&&(r._dispatchListeners=nt(r._dispatchListeners,t),r._dispatchInstances=nt(r._dispatchInstances,e))}function zr(e){e&&e.dispatchConfig.registrationName&&Fr(e._targetInst,null,e)}function Or(e){it(e,Dr)}var Br=null,Ir=null,Nr=null;function Ur(){if(Nr)return Nr;var e,t,r=Ir,n=r.length,i="value"in Br?Br.value:Br.textContent,o=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[o-t];t++);return Nr=i.slice(e,1<t?1-t:void 0)}function Vr(){return!0}function Hr(){return!1}function Gr(e,t,r,n){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=r,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(r):"target"===i?this.target=n:this[i]=r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Vr:Hr,this.isPropagationStopped=Hr,this}function jr(e,t,r,n){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,r,n),i}return new this(e,t,r,n)}function Wr(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Qr(e){e.eventPool=[],e.getPooled=jr,e.release=Wr}i(Gr.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Vr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Vr)},persist:function(){this.isPersistent=Vr},isPersistent:Hr,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Hr,this._dispatchInstances=this._dispatchListeners=null}}),Gr.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Gr.extend=function(e){function t(){}function r(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var o=new t;return i(o,r.prototype),r.prototype=o,r.prototype.constructor=r,r.Interface=i({},n.Interface,e),r.extend=n.extend,Qr(r),r},Qr(Gr);var Xr=Gr.extend({data:null}),qr=Gr.extend({data:null}),Yr=[9,13,27,32],Kr=T&&"CompositionEvent"in window,Jr=null;T&&"documentMode"in document&&(Jr=document.documentMode);var Zr=T&&"TextEvent"in window&&!Jr,$r=T&&(!Kr||Jr&&8<Jr&&11>=Jr),en=String.fromCharCode(32),tn={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rn=!1;function nn(e,t){switch(e){case"keyup":return-1!==Yr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function on(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var an=!1;var sn={eventTypes:tn,extractEvents:function(e,t,r,n){var i;if(Kr)e:{switch(e){case"compositionstart":var o=tn.compositionStart;break e;case"compositionend":o=tn.compositionEnd;break e;case"compositionupdate":o=tn.compositionUpdate;break e}o=void 0}else an?nn(e,r)&&(o=tn.compositionEnd):"keydown"===e&&229===r.keyCode&&(o=tn.compositionStart);return o?($r&&"ko"!==r.locale&&(an||o!==tn.compositionStart?o===tn.compositionEnd&&an&&(i=Ur()):(Ir="value"in(Br=n)?Br.value:Br.textContent,an=!0)),o=Xr.getPooled(o,t,r,n),i?o.data=i:null!==(i=on(r))&&(o.data=i),Or(o),i=o):i=null,(e=Zr?function(e,t){switch(e){case"compositionend":return on(t);case"keypress":return 32!==t.which?null:(rn=!0,en);case"textInput":return(e=t.data)===en&&rn?null:e;default:return null}}(e,r):function(e,t){if(an)return"compositionend"===e||!Kr&&nn(e,t)?(e=Ur(),Nr=Ir=Br=null,an=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $r&&"ko"!==t.locale?null:t.data;default:return null}}(e,r))?((t=qr.getPooled(tn.beforeInput,t,r,n)).data=e,Or(t)):t=null,null===i?t:null===t?i:[i,t]}},ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ln[e.type]:"textarea"===t}var un={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function hn(e,t,r){return(e=Gr.getPooled(un.change,e,t,r)).type="change",R(r),Or(e),e}var fn=null,dn=null;function pn(e){st(e)}function mn(e){if(we(Er(e)))return e}function gn(e,t){if("change"===e)return t}var vn=!1;function yn(){fn&&(fn.detachEvent("onpropertychange",xn),dn=fn=null)}function xn(e){if("value"===e.propertyName&&mn(dn))if(e=hn(dn,e,lt(e)),I)st(e);else{I=!0;try{F(pn,e)}finally{I=!1,U()}}}function bn(e,t,r){"focus"===e?(yn(),dn=r,(fn=t).attachEvent("onpropertychange",xn)):"blur"===e&&yn()}function wn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return mn(dn)}function _n(e,t){if("click"===e)return mn(t)}function Mn(e,t){if("input"===e||"change"===e)return mn(t)}T&&(vn=ct("input")&&(!document.documentMode||9<document.documentMode));var Sn={eventTypes:un,_isInputEventSupported:vn,extractEvents:function(e,t,r,n){var i=t?Er(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=gn;else if(cn(i))if(vn)a=Mn;else{a=wn;var s=bn}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=_n);if(a&&(a=a(e,t)))return hn(a,r,n);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Te(i,"number",i.value)}},An=Gr.extend({view:null,detail:null}),Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function En(){return Tn}var kn=0,Pn=0,Ln=!1,Rn=!1,Dn=An.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:En,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=kn;return kn=e.screenX,Ln?"mousemove"===e.type?e.screenX-t:0:(Ln=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Pn;return Pn=e.screenY,Rn?"mousemove"===e.type?e.screenY-t:0:(Rn=!0,0)}}),Fn=Dn.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),zn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},On={eventTypes:zn,extractEvents:function(e,t,r,n,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0==(32&i)&&(r.relatedTarget||r.fromElement)||!a&&!o)return null;(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=t,null!==(t=(t=r.relatedTarget||r.toElement)?Cr(t):null)&&(t!==$e(t)||5!==t.tag&&6!==t.tag)&&(t=null)):a=null;if(a===t)return null;if("mouseout"===e||"mouseover"===e)var s=Dn,l=zn.mouseLeave,c=zn.mouseEnter,u="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Fn,l=zn.pointerLeave,c=zn.pointerEnter,u="pointer");if(e=null==a?o:Er(a),o=null==t?o:Er(t),(l=s.getPooled(l,a,r,n)).type=u+"leave",l.target=e,l.relatedTarget=o,(r=s.getPooled(c,t,r,n)).type=u+"enter",r.target=o,r.relatedTarget=e,u=t,(n=a)&&u)e:{for(c=u,a=0,e=s=n;e;e=Pr(e))a++;for(e=0,t=c;t;t=Pr(t))e++;for(;0<a-e;)s=Pr(s),a--;for(;0<e-a;)c=Pr(c),e--;for(;a--;){if(s===c||s===c.alternate)break e;s=Pr(s),c=Pr(c)}s=null}else s=null;for(c=s,s=[];n&&n!==c&&(null===(a=n.alternate)||a!==c);)s.push(n),n=Pr(n);for(n=[];u&&u!==c&&(null===(a=u.alternate)||a!==c);)n.push(u),u=Pr(u);for(u=0;u<s.length;u++)Fr(s[u],"bubbled",l);for(u=n.length;0<u--;)Fr(n[u],"captured",r);return 0==(64&i)?[l]:[l,r]}};var Bn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},In=Object.prototype.hasOwnProperty;function Nn(e,t){if(Bn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!In.call(t,r[n])||!Bn(e[r[n]],t[r[n]]))return!1;return!0}var Un=T&&"documentMode"in document&&11>=document.documentMode,Vn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Hn=null,Gn=null,jn=null,Wn=!1;function Qn(e,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Wn||null==Hn||Hn!==cr(r)?null:("selectionStart"in(r=Hn)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},jn&&Nn(jn,r)?null:(jn=r,(e=Gr.getPooled(Vn.select,Gn,e,t)).type="select",e.target=Hn,Or(e),e))}var Xn={eventTypes:Vn,extractEvents:function(e,t,r,n,i,o){if(!(o=!(i=o||(n.window===n?n.document:9===n.nodeType?n:n.ownerDocument)))){e:{i=Ze(i),o=A.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?Er(t):window,e){case"focus":(cn(i)||"true"===i.contentEditable)&&(Hn=i,Gn=t,jn=null);break;case"blur":jn=Gn=Hn=null;break;case"mousedown":Wn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Wn=!1,Qn(r,n);case"selectionchange":if(Un)break;case"keydown":case"keyup":return Qn(r,n)}return null}},qn=Gr.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Yn=Gr.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kn=An.extend({relatedTarget:null});function Jn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Zn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ei=An.extend({key:function(e){if(e.key){var t=Zn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?$n[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:En,charCode:function(e){return"keypress"===e.type?Jn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ti=Dn.extend({dataTransfer:null}),ri=An.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:En}),ni=Gr.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Dn.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:Bt,extractEvents:function(e,t,r,n){var i=It.get(e);if(!i)return null;switch(e){case"keypress":if(0===Jn(r))return null;case"keydown":case"keyup":e=ei;break;case"blur":case"focus":e=Kn;break;case"click":if(2===r.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ti;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ri;break;case Qe:case Xe:case qe:e=qn;break;case Ye:e=ni;break;case"scroll":e=An;break;case"wheel":e=ii;break;case"copy":case"cut":case"paste":e=Yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Fn;break;default:e=Gr}return Or(t=e.getPooled(i,t,r,n)),t}};if(y)throw Error(a(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),p=kr,m=Tr,g=Er,C({SimpleEventPlugin:oi,EnterLeaveEventPlugin:On,ChangeEventPlugin:Sn,SelectEventPlugin:Xn,BeforeInputEventPlugin:sn});var ai=[],si=-1;function li(e){0>si||(e.current=ai[si],ai[si]=null,si--)}function ci(e,t){si++,ai[si]=e.current,e.current=t}var ui={},hi={current:ui},fi={current:!1},di=ui;function pi(e,t){var r=e.type.contextTypes;if(!r)return ui;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function mi(e){return null!=(e=e.childContextTypes)}function gi(){li(fi),li(hi)}function vi(e,t,r){if(hi.current!==ui)throw Error(a(168));ci(hi,t),ci(fi,r)}function yi(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var o in n=n.getChildContext())if(!(o in e))throw Error(a(108,ge(t)||"Unknown",o));return i({},r,{},n)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ui,di=hi.current,ci(hi,e),ci(fi,fi.current),!0}function bi(e,t,r){var n=e.stateNode;if(!n)throw Error(a(169));r?(e=yi(e,t,di),n.__reactInternalMemoizedMergedChildContext=e,li(fi),li(hi),ci(hi,e)):li(fi),ci(fi,r)}var wi=o.unstable_runWithPriority,_i=o.unstable_scheduleCallback,Mi=o.unstable_cancelCallback,Si=o.unstable_requestPaint,Ai=o.unstable_now,Ci=o.unstable_getCurrentPriorityLevel,Ti=o.unstable_ImmediatePriority,Ei=o.unstable_UserBlockingPriority,ki=o.unstable_NormalPriority,Pi=o.unstable_LowPriority,Li=o.unstable_IdlePriority,Ri={},Di=o.unstable_shouldYield,Fi=void 0!==Si?Si:function(){},zi=null,Oi=null,Bi=!1,Ii=Ai(),Ni=1e4>Ii?Ai:function(){return Ai()-Ii};function Ui(){switch(Ci()){case Ti:return 99;case Ei:return 98;case ki:return 97;case Pi:return 96;case Li:return 95;default:throw Error(a(332))}}function Vi(e){switch(e){case 99:return Ti;case 98:return Ei;case 97:return ki;case 96:return Pi;case 95:return Li;default:throw Error(a(332))}}function Hi(e,t){return e=Vi(e),wi(e,t)}function Gi(e,t,r){return e=Vi(e),_i(e,t,r)}function ji(e){return null===zi?(zi=[e],Oi=_i(Ti,Qi)):zi.push(e),Ri}function Wi(){if(null!==Oi){var e=Oi;Oi=null,Mi(e)}Qi()}function Qi(){if(!Bi&&null!==zi){Bi=!0;var e=0;try{var t=zi;Hi(99,(function(){for(;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}})),zi=null}catch(t){throw null!==zi&&(zi=zi.slice(e+1)),_i(Ti,Wi),t}finally{Bi=!1}}}function Xi(e,t,r){return 1073741821-(1+((1073741821-e+t/10)/(r/=10)|0))*r}function qi(e,t){if(e&&e.defaultProps)for(var r in t=i({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}var Yi={current:null},Ki=null,Ji=null,Zi=null;function $i(){Zi=Ji=Ki=null}function eo(e){var t=Yi.current;li(Yi),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var r=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t);else{if(!(null!==r&&r.childExpirationTime<t))break;r.childExpirationTime=t}e=e.return}}function ro(e,t){Ki=e,Zi=Ji=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Pa=!0),e.firstContext=null)}function no(e,t){if(Zi!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Zi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ji){if(null===Ki)throw Error(a(308));Ji=t,Ki.dependencies={expirationTime:0,firstContext:t,responders:null}}else Ji=Ji.next=t;return e._currentValue}var io=!1;function oo(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function so(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function lo(e,t){if(null!==(e=e.updateQueue)){var r=(e=e.shared).pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function co(e,t){var r=e.alternate;null!==r&&ao(r,e),null===(r=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=r.next,r.next=t)}function uo(e,t,r,n){var o=e.updateQueue;io=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var l=a.next;a.next=s.next,s.next=l}a=s,o.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=s))}if(null!==a){l=a.next;var c=o.baseState,u=0,h=null,f=null,d=null;if(null!==l)for(var p=l;;){if((s=p.expirationTime)<n){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===d?(f=d=m,h=c):d=d.next=m,s>u&&(u=s)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),ol(s,p.suspenseConfig);e:{var g=e,v=p;switch(s=t,m=r,v.tag){case 1:if("function"==typeof(g=v.payload)){c=g.call(m,c,s);break e}c=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null==(s="function"==typeof(g=v.payload)?g.call(m,c,s):g))break e;c=i({},c,s);break e;case 2:io=!0}}null!==p.callback&&(e.effectTag|=32,null===(s=o.effects)?o.effects=[p]:s.push(p))}if(null===(p=p.next)||p===l){if(null===(s=o.shared.pending))break;p=a.next=s.next,s.next=l,o.baseQueue=a=s,o.shared.pending=null}}null===d?h=c:d.next=f,o.baseState=h,o.baseQueue=d,al(u),e.expirationTime=u,e.memoizedState=c}}function ho(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=i,i=r,"function"!=typeof n)throw Error(a(191,n));n.call(i)}}}var fo=K.ReactCurrentBatchConfig,po=(new n.Component).refs;function mo(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:i({},t,r),e.memoizedState=r,0===e.expirationTime&&(e.updateQueue.baseState=r)}var go={isMounted:function(e){return!!(e=e._reactInternalFiber)&&$e(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternalFiber;var n=Qs(),i=fo.suspense;(i=so(n=Xs(n,e,i),i)).payload=t,null!=r&&(i.callback=r),lo(e,i),qs(e,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternalFiber;var n=Qs(),i=fo.suspense;(i=so(n=Xs(n,e,i),i)).tag=1,i.payload=t,null!=r&&(i.callback=r),lo(e,i),qs(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var r=Qs(),n=fo.suspense;(n=so(r=Xs(r,e,n),n)).tag=2,null!=t&&(n.callback=t),lo(e,n),qs(e,r)}};function vo(e,t,r,n,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Nn(r,n)||!Nn(i,o))}function yo(e,t,r){var n=!1,i=ui,o=t.contextType;return"object"==typeof o&&null!==o?o=no(o):(i=mi(t)?di:hi.current,o=(n=null!=(n=t.contextTypes))?pi(e,i):ui),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=go,e.stateNode=t,t._reactInternalFiber=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function xo(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&go.enqueueReplaceState(t,t.state,null)}function bo(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=po,oo(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=no(o):(o=mi(t)?di:hi.current,i.context=pi(e,o)),uo(e,r,i,n),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(mo(e,t,o,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&go.enqueueReplaceState(i,i.state,null),uo(e,r,i,n),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var wo=Array.isArray;function _o(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var n=r.stateNode}if(!n)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=n.refs;t===po&&(t=n.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function Mo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function So(e){function t(t,r){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.effectTag=8}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Cl(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.effectTag=2,r):n:(t.effectTag=2,r):r}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=kl(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function c(e,t,r,n){return null!==t&&t.elementType===r.type?((n=i(t,r.props)).ref=_o(e,t,r),n.return=e,n):((n=Tl(r.type,r.key,r.props,null,e.mode,n)).ref=_o(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Pl(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function h(e,t,r,n,o){return null===t||7!==t.tag?((t=El(r,e.mode,n,o)).return=e,t):((t=i(t,r)).return=e,t)}function f(e,t,r){if("string"==typeof t||"number"==typeof t)return(t=kl(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ee:return(r=Tl(t.type,t.key,t.props,null,e.mode,r)).ref=_o(e,null,t),r.return=e,r;case te:return(t=Pl(t,e.mode,r)).return=e,t}if(wo(t)||me(t))return(t=El(t,e.mode,r,null)).return=e,t;Mo(e,t)}return null}function d(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r||"number"==typeof r)return null!==i?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ee:return r.key===i?r.type===re?h(e,t,r.props.children,n,i):c(e,t,r,n):null;case te:return r.key===i?u(e,t,r,n):null}if(wo(r)||me(r))return null!==i?null:h(e,t,r,n,null);Mo(e,r)}return null}function p(e,t,r,n,i){if("string"==typeof n||"number"==typeof n)return l(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ee:return e=e.get(null===n.key?r:n.key)||null,n.type===re?h(t,e,n.props.children,i,n.key):c(t,e,n,i);case te:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i)}if(wo(n)||me(n))return h(t,e=e.get(r)||null,n,i,null);Mo(t,n)}return null}function m(i,a,s,l){for(var c=null,u=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=d(i,h,s[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),a=o(v,a,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===s.length)return r(i,h),c;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],l))&&(a=o(h,a,m),null===u?c=h:u.sibling=h,u=h);return c}for(h=n(i,h);m<s.length;m++)null!==(g=p(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),c}function g(i,s,l,c){var u=me(l);if("function"!=typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var x=d(i,m,y.value,c);if(null===x){null===m&&(m=v);break}e&&m&&null===x.alternate&&t(i,m),s=o(x,s,g),null===h?u=x:h.sibling=x,h=x,m=v}if(y.done)return r(i,m),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=f(i,y.value,c))&&(s=o(y,s,g),null===h?u=y:h.sibling=y,h=y);return u}for(m=n(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,n,o,l){var c="object"==typeof o&&null!==o&&o.type===re&&null===o.key;c&&(o=o.props.children);var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case ee:e:{for(u=o.key,c=n;null!==c;){if(c.key===u){switch(c.tag){case 7:if(o.type===re){r(e,c.sibling),(n=i(c,o.props.children)).return=e,e=n;break e}break;default:if(c.elementType===o.type){r(e,c.sibling),(n=i(c,o.props)).ref=_o(e,c,o),n.return=e,e=n;break e}}r(e,c);break}t(e,c),c=c.sibling}o.type===re?((n=El(o.props.children,e.mode,l,o.key)).return=e,e=n):((l=Tl(o.type,o.key,o.props,null,e.mode,l)).ref=_o(e,n,o),l.return=e,e=l)}return s(e);case te:e:{for(c=o.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===o.containerInfo&&n.stateNode.implementation===o.implementation){r(e,n.sibling),(n=i(n,o.children||[])).return=e,e=n;break e}r(e,n);break}t(e,n),n=n.sibling}(n=Pl(o,e.mode,l)).return=e,e=n}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==n&&6===n.tag?(r(e,n.sibling),(n=i(n,o)).return=e,e=n):(r(e,n),(n=kl(o,e.mode,l)).return=e,e=n),s(e);if(wo(o))return m(e,n,o,l);if(me(o))return g(e,n,o,l);if(u&&Mo(e,o),void 0===o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return r(e,n)}}var Ao=So(!0),Co=So(!1),To={},Eo={current:To},ko={current:To},Po={current:To};function Lo(e){if(e===To)throw Error(a(174));return e}function Ro(e,t){switch(ci(Po,t),ci(ko,e),ci(Eo,To),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Be(null,"");break;default:t=Be(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Eo),ci(Eo,t)}function Do(){li(Eo),li(ko),li(Po)}function Fo(e){Lo(Po.current);var t=Lo(Eo.current),r=Be(t,e.type);t!==r&&(ci(ko,e),ci(Eo,r))}function zo(e){ko.current===e&&(li(Eo),li(ko))}var Oo={current:0};function Bo(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Io(e,t){return{responder:e,props:t}}var No=K.ReactCurrentDispatcher,Uo=K.ReactCurrentBatchConfig,Vo=0,Ho=null,Go=null,jo=null,Wo=!1;function Qo(){throw Error(a(321))}function Xo(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Bn(e[r],t[r]))return!1;return!0}function qo(e,t,r,n,i,o){if(Vo=o,Ho=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,No.current=null===e||null===e.memoizedState?va:ya,e=r(n,i),t.expirationTime===Vo){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(a(301));o+=1,jo=Go=null,t.updateQueue=null,No.current=xa,e=r(n,i)}while(t.expirationTime===Vo)}if(No.current=ga,t=null!==Go&&null!==Go.next,Vo=0,jo=Go=Ho=null,Wo=!1,t)throw Error(a(300));return e}function Yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===jo?Ho.memoizedState=jo=e:jo=jo.next=e,jo}function Ko(){if(null===Go){var e=Ho.alternate;e=null!==e?e.memoizedState:null}else e=Go.next;var t=null===jo?Ho.memoizedState:jo.next;if(null!==t)jo=t,Go=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Go=e).memoizedState,baseState:Go.baseState,baseQueue:Go.baseQueue,queue:Go.queue,next:null},null===jo?Ho.memoizedState=jo=e:jo=jo.next=e}return jo}function Jo(e,t){return"function"==typeof t?t(e):t}function Zo(e){var t=Ko(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=Go,i=n.baseQueue,o=r.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(null!==i){i=i.next,n=n.baseState;var l=s=o=null,c=i;do{var u=c.expirationTime;if(u<Vo){var h={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(s=l=h,o=n):l=l.next=h,u>Ho.expirationTime&&(Ho.expirationTime=u,al(u))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ol(u,c.suspenseConfig),n=c.eagerReducer===e?c.eagerState:e(n,c.action);c=c.next}while(null!==c&&c!==i);null===l?o=n:l.next=s,Bn(n,t.memoizedState)||(Pa=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function $o(e){var t=Ko(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Bn(o,t.memoizedState)||(Pa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function ea(e){var t=Yo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:e}).dispatch=ma.bind(null,Ho,e),[t.memoizedState,e]}function ta(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=Ho.updateQueue)?(t={lastEffect:null},Ho.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function ra(){return Ko().memoizedState}function na(e,t,r,n){var i=Yo();Ho.effectTag|=e,i.memoizedState=ta(1|t,r,void 0,void 0===n?null:n)}function ia(e,t,r,n){var i=Ko();n=void 0===n?null:n;var o=void 0;if(null!==Go){var a=Go.memoizedState;if(o=a.destroy,null!==n&&Xo(n,a.deps))return void ta(t,r,o,n)}Ho.effectTag|=e,i.memoizedState=ta(1|t,r,o,n)}function oa(e,t){return na(516,4,e,t)}function aa(e,t){return ia(516,4,e,t)}function sa(e,t){return ia(4,2,e,t)}function la(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ca(e,t,r){return r=null!=r?r.concat([e]):null,ia(4,2,la.bind(null,t,e),r)}function ua(){}function ha(e,t){return Yo().memoizedState=[e,void 0===t?null:t],e}function fa(e,t){var r=Ko();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Xo(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function da(e,t){var r=Ko();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Xo(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function pa(e,t,r){var n=Ui();Hi(98>n?98:n,(function(){e(!0)})),Hi(97<n?97:n,(function(){var n=Uo.suspense;Uo.suspense=void 0===t?null:t;try{e(!1),r()}finally{Uo.suspense=n}}))}function ma(e,t,r){var n=Qs(),i=fo.suspense;i={expirationTime:n=Xs(n,e,i),suspenseConfig:i,action:r,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Ho||null!==o&&o===Ho)Wo=!0,i.expirationTime=Vo,Ho.expirationTime=Vo;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,r);if(i.eagerReducer=o,i.eagerState=s,Bn(s,a))return}catch(e){}qs(e,n)}}var ga={readContext:no,useCallback:Qo,useContext:Qo,useEffect:Qo,useImperativeHandle:Qo,useLayoutEffect:Qo,useMemo:Qo,useReducer:Qo,useRef:Qo,useState:Qo,useDebugValue:Qo,useResponder:Qo,useDeferredValue:Qo,useTransition:Qo},va={readContext:no,useCallback:ha,useContext:no,useEffect:oa,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,na(4,2,la.bind(null,t,e),r)},useLayoutEffect:function(e,t){return na(4,2,e,t)},useMemo:function(e,t){var r=Yo();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Yo();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ma.bind(null,Ho,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Yo().memoizedState=e},useState:ea,useDebugValue:ua,useResponder:Io,useDeferredValue:function(e,t){var r=ea(e),n=r[0],i=r[1];return oa((function(){var r=Uo.suspense;Uo.suspense=void 0===t?null:t;try{i(e)}finally{Uo.suspense=r}}),[e,t]),n},useTransition:function(e){var t=ea(!1),r=t[0];return t=t[1],[ha(pa.bind(null,t,e),[t,e]),r]}},ya={readContext:no,useCallback:fa,useContext:no,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:da,useReducer:Zo,useRef:ra,useState:function(){return Zo(Jo)},useDebugValue:ua,useResponder:Io,useDeferredValue:function(e,t){var r=Zo(Jo),n=r[0],i=r[1];return aa((function(){var r=Uo.suspense;Uo.suspense=void 0===t?null:t;try{i(e)}finally{Uo.suspense=r}}),[e,t]),n},useTransition:function(e){var t=Zo(Jo),r=t[0];return t=t[1],[fa(pa.bind(null,t,e),[t,e]),r]}},xa={readContext:no,useCallback:fa,useContext:no,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:da,useReducer:$o,useRef:ra,useState:function(){return $o(Jo)},useDebugValue:ua,useResponder:Io,useDeferredValue:function(e,t){var r=$o(Jo),n=r[0],i=r[1];return aa((function(){var r=Uo.suspense;Uo.suspense=void 0===t?null:t;try{i(e)}finally{Uo.suspense=r}}),[e,t]),n},useTransition:function(e){var t=$o(Jo),r=t[0];return t=t[1],[fa(pa.bind(null,t,e),[t,e]),r]}},ba=null,wa=null,_a=!1;function Ma(e,t){var r=Sl(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Sa(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Aa(e){if(_a){var t=wa;if(t){var r=t;if(!Sa(e,t)){if(!(t=br(r.nextSibling))||!Sa(e,t))return e.effectTag=-1025&e.effectTag|2,_a=!1,void(ba=e);Ma(ba,r)}ba=e,wa=br(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,_a=!1,ba=e}}function Ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ba=e}function Ta(e){if(e!==ba)return!1;if(!_a)return Ca(e),_a=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!vr(t,e.memoizedProps))for(t=wa;t;)Ma(e,t),t=br(t.nextSibling);if(Ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){wa=br(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}wa=null}}else wa=ba?br(e.stateNode.nextSibling):null;return!0}function Ea(){wa=ba=null,_a=!1}var ka=K.ReactCurrentOwner,Pa=!1;function La(e,t,r,n){t.child=null===e?Co(t,null,r,n):Ao(t,e.child,r,n)}function Ra(e,t,r,n,i){r=r.render;var o=t.ref;return ro(t,i),n=qo(e,t,r,n,o,i),null===e||Pa?(t.effectTag|=1,La(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),qa(e,t,i))}function Da(e,t,r,n,i,o){if(null===e){var a=r.type;return"function"!=typeof a||Al(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Tl(r.type,null,n,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Fa(e,t,a,n,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(r=null!==(r=r.compare)?r:Nn)(i,n)&&e.ref===t.ref)?qa(e,t,o):(t.effectTag|=1,(e=Cl(a,n)).ref=t.ref,e.return=t,t.child=e)}function Fa(e,t,r,n,i,o){return null!==e&&Nn(e.memoizedProps,n)&&e.ref===t.ref&&(Pa=!1,i<o)?(t.expirationTime=e.expirationTime,qa(e,t,o)):Oa(e,t,r,n,o)}function za(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.effectTag|=128)}function Oa(e,t,r,n,i){var o=mi(r)?di:hi.current;return o=pi(t,o),ro(t,i),r=qo(e,t,r,n,o,i),null===e||Pa?(t.effectTag|=1,La(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),qa(e,t,i))}function Ba(e,t,r,n,i){if(mi(r)){var o=!0;xi(t)}else o=!1;if(ro(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),yo(t,r,n),bo(t,r,n,i),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=r.contextType;"object"==typeof c&&null!==c?c=no(c):c=pi(t,c=mi(r)?di:hi.current);var u=r.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==n||l!==c)&&xo(t,a,n,c),io=!1;var f=t.memoizedState;a.state=f,uo(t,n,a,i),l=t.memoizedState,s!==n||f!==l||fi.current||io?("function"==typeof u&&(mo(t,r,u,n),l=t.memoizedState),(s=io||vo(t,r,s,n,f,l,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),n=!1)}else a=t.stateNode,ao(e,t),s=t.memoizedProps,a.props=t.type===t.elementType?s:qi(t.type,s),l=a.context,"object"==typeof(c=r.contextType)&&null!==c?c=no(c):c=pi(t,c=mi(r)?di:hi.current),(h="function"==typeof(u=r.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==n||l!==c)&&xo(t,a,n,c),io=!1,l=t.memoizedState,a.state=l,uo(t,n,a,i),f=t.memoizedState,s!==n||l!==f||fi.current||io?("function"==typeof u&&(mo(t,r,u,n),f=t.memoizedState),(u=io||vo(t,r,s,n,l,f,c))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,f,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,f,c)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=c,n=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),n=!1);return Ia(e,t,r,n,o,i)}function Ia(e,t,r,n,i,o){za(e,t);var a=0!=(64&t.effectTag);if(!n&&!a)return i&&bi(t,r,!1),qa(e,t,o);n=t.stateNode,ka.current=t;var s=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.effectTag|=1,null!==e&&a?(t.child=Ao(t,e.child,null,o),t.child=Ao(t,null,s,o)):La(e,t,s,o),t.memoizedState=n.state,i&&bi(t,r,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?vi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vi(0,t.context,!1),Ro(e,t.containerInfo)}var Ua,Va,Ha,Ga={dehydrated:null,retryTime:0};function ja(e,t,r){var n,i=t.mode,o=t.pendingProps,a=Oo.current,s=!1;if((n=0!=(64&t.effectTag))||(n=0!=(2&a)&&(null===e||null!==e.memoizedState)),n?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),ci(Oo,1&a),null===e){if(void 0!==o.fallback&&Aa(t),s){if(s=o.fallback,(o=El(null,i,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(r=El(s,i,r,null)).return=t,o.sibling=r,t.memoizedState=Ga,t.child=o,r}return i=o.children,t.memoizedState=null,t.child=Co(t,null,i,r)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(r=Cl(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(r.child=s;null!==s;)s.return=r,s=s.sibling;return(i=Cl(i,o)).return=t,r.sibling=i,r.childExpirationTime=0,t.memoizedState=Ga,t.child=r,i}return r=Ao(t,e.child,o.children,r),t.memoizedState=null,t.child=r}if(e=e.child,s){if(s=o.fallback,(o=El(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(r=El(s,i,r,null)).return=t,o.sibling=r,r.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Ga,t.child=o,r}return t.memoizedState=null,t.child=Ao(t,e,o.children,r)}function Wa(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t),to(e.return,t)}function Qa(e,t,r,n,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Xa(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(La(e,t,n.children,r),0!=(2&(n=Oo.current)))n=1&n|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,r);else if(19===e.tag)Wa(e,r);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ci(Oo,n),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===Bo(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Qa(t,!1,i,r,o,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Bo(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Qa(t,!0,r,null,o,t.lastEffect);break;case"together":Qa(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function qa(e,t,r){null!==e&&(t.dependencies=e.dependencies);var n=t.expirationTime;if(0!==n&&al(n),t.childExpirationTime<r)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=Cl(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Cl(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ya(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ka(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return mi(t.type)&&gi(),null;case 3:return Do(),li(fi),li(hi),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||!Ta(t)||(t.effectTag|=4),null;case 5:zo(t),r=Lo(Po.current);var o=t.type;if(null!==e&&null!=t.stateNode)Va(e,t,o,n,r),e.ref!==t.ref&&(t.effectTag|=128);else{if(!n){if(null===t.stateNode)throw Error(a(166));return null}if(e=Lo(Eo.current),Ta(t)){n=t.stateNode,o=t.type;var s=t.memoizedProps;switch(n[Mr]=t,n[Sr]=s,o){case"iframe":case"object":case"embed":Xt("load",n);break;case"video":case"audio":for(e=0;e<Ke.length;e++)Xt(Ke[e],n);break;case"source":Xt("error",n);break;case"img":case"image":case"link":Xt("error",n),Xt("load",n);break;case"form":Xt("reset",n),Xt("submit",n);break;case"details":Xt("toggle",n);break;case"input":Me(n,s),Xt("invalid",n),sr(r,"onChange");break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Xt("invalid",n),sr(r,"onChange");break;case"textarea":Le(n,s),Xt("invalid",n),sr(r,"onChange")}for(var l in ir(o,s),e=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"==typeof c?n.textContent!==c&&(e=["children",c]):"number"==typeof c&&n.textContent!==""+c&&(e=["children",""+c]):S.hasOwnProperty(l)&&null!=c&&sr(r,l)}switch(o){case"input":be(n),Ce(n,s,!0);break;case"textarea":be(n),De(n);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(n.onclick=lr)}r=e,t.updateQueue=r,null!==r&&(t.effectTag|=4)}else{switch(l=9===r.nodeType?r:r.ownerDocument,e===ar&&(e=Oe(o)),e===ar?"script"===o?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=l.createElement(o,{is:n.is}):(e=l.createElement(o),"select"===o&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,o),e[Mr]=t,e[Sr]=n,Ua(e,t),t.stateNode=e,l=or(o,n),o){case"iframe":case"object":case"embed":Xt("load",e),c=n;break;case"video":case"audio":for(c=0;c<Ke.length;c++)Xt(Ke[c],e);c=n;break;case"source":Xt("error",e),c=n;break;case"img":case"image":case"link":Xt("error",e),Xt("load",e),c=n;break;case"form":Xt("reset",e),Xt("submit",e),c=n;break;case"details":Xt("toggle",e),c=n;break;case"input":Me(e,n),c=_e(e,n),Xt("invalid",e),sr(r,"onChange");break;case"option":c=Ee(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},c=i({},n,{value:void 0}),Xt("invalid",e),sr(r,"onChange");break;case"textarea":Le(e,n),c=Pe(e,n),Xt("invalid",e),sr(r,"onChange");break;default:c=n}ir(o,c);var u=c;for(s in u)if(u.hasOwnProperty(s)){var h=u[s];"style"===s?rr(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&Ne(e,h):"children"===s?"string"==typeof h?("textarea"!==o||""!==h)&&Ue(e,h):"number"==typeof h&&Ue(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(S.hasOwnProperty(s)?null!=h&&sr(r,s):null!=h&&J(e,s,h,l))}switch(o){case"input":be(e),Ce(e,n,!1);break;case"textarea":be(e),De(e);break;case"option":null!=n.value&&e.setAttribute("value",""+ye(n.value));break;case"select":e.multiple=!!n.multiple,null!=(r=n.value)?ke(e,!!n.multiple,r,!1):null!=n.defaultValue&&ke(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof c.onClick&&(e.onclick=lr)}gr(o,n)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ha(0,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(a(166));r=Lo(Po.current),Lo(Eo.current),Ta(t)?(r=t.stateNode,n=t.memoizedProps,r[Mr]=t,r.nodeValue!==n&&(t.effectTag|=4)):((r=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[Mr]=t,t.stateNode=r)}return null;case 13:return li(Oo),n=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=r,t):(r=null!==n,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ta(t):(n=null!==(o=e.memoizedState),r||null===o||null!==(o=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=o,o.nextEffect=s):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Oo.current)?Ts===bs&&(Ts=ws):(Ts!==bs&&Ts!==ws||(Ts=_s),0!==Rs&&null!==Ss&&(Dl(Ss,Cs),Fl(Ss,Rs)))),(r||n)&&(t.effectTag|=4),null);case 4:return Do(),null;case 10:return eo(t),null;case 17:return mi(t.type)&&gi(),null;case 19:if(li(Oo),null===(n=t.memoizedState))return null;if(o=0!=(64&t.effectTag),null===(s=n.rendering)){if(o)Ya(n,!1);else if(Ts!==bs||null!==e&&0!=(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=Bo(s))){for(t.effectTag|=64,Ya(n,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=t.child;null!==n;)s=r,(o=n).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,s=e.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),n=n.sibling;return ci(Oo,1&Oo.current|2),t.child}s=s.sibling}}else{if(!o)if(null!==(e=Bo(s))){if(t.effectTag|=64,o=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),Ya(n,!0),null===n.tail&&"hidden"===n.tailMode&&!s.alternate)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*Ni()-n.renderingStartTime>n.tailExpiration&&1<r&&(t.effectTag|=64,o=!0,Ya(n,!1),t.expirationTime=t.childExpirationTime=r-1);n.isBackwards?(s.sibling=t.child,t.child=s):(null!==(r=n.last)?r.sibling=s:t.child=s,n.last=s)}return null!==n.tail?(0===n.tailExpiration&&(n.tailExpiration=Ni()+500),r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Ni(),r.sibling=null,t=Oo.current,ci(Oo,o?1&t|2:1&t),r):null}throw Error(a(156,t.tag))}function Ja(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Do(),li(fi),li(hi),0!=(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return zo(e),null;case 13:return li(Oo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return li(Oo),null;case 4:return Do(),null;case 10:return eo(e),null;default:return null}}function Za(e,t){return{value:e,source:t,stack:ve(t)}}Ua=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Va=function(e,t,r,n,o){var a=e.memoizedProps;if(a!==n){var s,l,c=t.stateNode;switch(Lo(Eo.current),e=null,r){case"input":a=_e(c,a),n=_e(c,n),e=[];break;case"option":a=Ee(c,a),n=Ee(c,n),e=[];break;case"select":a=i({},a,{value:void 0}),n=i({},n,{value:void 0}),e=[];break;case"textarea":a=Pe(c,a),n=Pe(c,n),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof n.onClick&&(c.onclick=lr)}for(s in ir(r,n),r=null,a)if(!n.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(l in c=a[s])c.hasOwnProperty(l)&&(r||(r={}),r[l]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(S.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in n){var u=n[s];if(c=null!=a?a[s]:void 0,n.hasOwnProperty(s)&&u!==c&&(null!=u||null!=c))if("style"===s)if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(r||(r={}),r[l]=u[l])}else r||(e||(e=[]),e.push(s,r)),r=u;else"dangerouslySetInnerHTML"===s?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(s,u)):"children"===s?c===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(s,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(S.hasOwnProperty(s)?(null!=u&&sr(o,s),e||c===u||(e=[])):(e=e||[]).push(s,u))}r&&(e=e||[]).push("style",r),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},Ha=function(e,t,r,n){r!==n&&(t.effectTag|=4)};var $a="function"==typeof WeakSet?WeakSet:Set;function es(e,t){var r=t.source,n=t.stack;null===n&&null!==r&&(n=ve(r)),null!==r&&ge(r.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function ts(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){yl(e,t)}else t.current=null}function rs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var r=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?r:qi(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function ns(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.destroy;r.destroy=void 0,void 0!==n&&n()}r=r.next}while(r!==t)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function os(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:return void is(3,r);case 1:if(e=r.stateNode,4&r.effectTag)if(null===t)e.componentDidMount();else{var n=r.elementType===r.type?t.memoizedProps:qi(r.type,t.memoizedProps);e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=r.updateQueue)&&ho(r,t,e));case 3:if(null!==(t=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}ho(r,t,e)}return;case 5:return e=r.stateNode,void(null===t&&4&r.effectTag&&gr(r.type,r.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===r.memoizedState&&(r=r.alternate,null!==r&&(r=r.memoizedState,null!==r&&(r=r.dehydrated,null!==r&&Ot(r)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(e,t,r){switch("function"==typeof _l&&_l(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e.next;Hi(97<r?97:r,(function(){var e=n;do{var r=e.destroy;if(void 0!==r){var i=t;try{r()}catch(e){yl(i,e)}}e=e.next}while(e!==n)}))}break;case 1:ts(t),"function"==typeof(r=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){yl(e,t)}}(t,r);break;case 5:ts(t);break;case 4:us(e,t,r)}}function ss(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ss(t)}function ls(e){return 5===e.tag||3===e.tag||4===e.tag}function cs(e){e:{for(var t=e.return;null!==t;){if(ls(t)){var r=t;break e}t=t.return}throw Error(a(160))}switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(a(161))}16&r.effectTag&&(Ue(t,""),r.effectTag&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||ls(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.effectTag)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.effectTag)){r=r.stateNode;break e}}n?function e(t,r,n){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,r?8===n.nodeType?n.parentNode.insertBefore(t,r):n.insertBefore(t,r):(8===n.nodeType?(r=n.parentNode).insertBefore(t,n):(r=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==r.onclick||(r.onclick=lr));else if(4!==i&&null!==(t=t.child))for(e(t,r,n),t=t.sibling;null!==t;)e(t,r,n),t=t.sibling}(e,r,t):function e(t,r,n){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,r?n.insertBefore(t,r):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,r,n),t=t.sibling;null!==t;)e(t,r,n),t=t.sibling}(e,r,t)}function us(e,t,r){for(var n,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(n=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:n=n.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var l=e,c=o,u=r,h=c;;)if(as(l,h,u),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break e;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(l=n,c=o.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):n.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(as(e,o,r),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function hs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ns(3,t);case 1:return;case 5:var r=t.stateNode;if(null!=r){var n=t.memoizedProps,i=null!==e?e.memoizedProps:n;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(r[Sr]=n,"input"===e&&"radio"===n.type&&null!=n.name&&Se(r,n),or(e,i),t=or(e,n),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?rr(r,l):"dangerouslySetInnerHTML"===s?Ne(r,l):"children"===s?Ue(r,l):J(r,s,l,t)}switch(e){case"input":Ae(r,n);break;case"textarea":Re(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,null!=(e=n.value)?ke(r,!!n.multiple,e,!1):t!==!!n.multiple&&(null!=n.defaultValue?ke(r,!!n.multiple,n.defaultValue,!0):ke(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ot(t.containerInfo)));case 12:return;case 13:if(r=t,null===t.memoizedState?n=!1:(n=!0,r=t.child,Fs=Ni()),null!==r)e:for(e=r;;){if(5===e.tag)o=e.stateNode,n?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=tr("display",i));else if(6===e.tag)e.stateNode.nodeValue=n?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===r)break;for(;null===e.sibling;){if(null===e.return||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void fs(t);case 19:return void fs(t);case 17:return}throw Error(a(163))}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new $a),t.forEach((function(t){var n=bl.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}var ds="function"==typeof WeakMap?WeakMap:Map;function ps(e,t,r){(r=so(r,null)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Os||(Os=!0,Bs=n),es(e,t)},r}function ms(e,t,r){(r=so(r,null)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return es(e,t),n(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===Is?Is=new Set([this]):Is.add(this),es(e,t));var r=t.stack;this.componentDidCatch(t.value,{componentStack:null!==r?r:""})}),r}var gs,vs=Math.ceil,ys=K.ReactCurrentDispatcher,xs=K.ReactCurrentOwner,bs=0,ws=3,_s=4,Ms=0,Ss=null,As=null,Cs=0,Ts=bs,Es=null,ks=1073741823,Ps=1073741823,Ls=null,Rs=0,Ds=!1,Fs=0,zs=null,Os=!1,Bs=null,Is=null,Ns=!1,Us=null,Vs=90,Hs=null,Gs=0,js=null,Ws=0;function Qs(){return 0!=(48&Ms)?1073741821-(Ni()/10|0):0!==Ws?Ws:Ws=1073741821-(Ni()/10|0)}function Xs(e,t,r){if(0==(2&(t=t.mode)))return 1073741823;var n=Ui();if(0==(4&t))return 99===n?1073741823:1073741822;if(0!=(16&Ms))return Cs;if(null!==r)e=Xi(e,0|r.timeoutMs||5e3,250);else switch(n){case 99:e=1073741823;break;case 98:e=Xi(e,150,100);break;case 97:case 96:e=Xi(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Ss&&e===Cs&&--e,e}function qs(e,t){if(50<Gs)throw Gs=0,js=null,Error(a(185));if(null!==(e=Ys(e,t))){var r=Ui();1073741823===t?0!=(8&Ms)&&0==(48&Ms)?$s(e):(Js(e),0===Ms&&Wi()):Js(e),0==(4&Ms)||98!==r&&99!==r||(null===Hs?Hs=new Map([[e,t]]):(void 0===(r=Hs.get(e))||r>t)&&Hs.set(e,t))}}function Ys(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t);var n=e.return,i=null;if(null===n&&3===e.tag)i=e.stateNode;else for(;null!==n;){if(r=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t),null===n.return&&3===n.tag){i=n.stateNode;break}n=n.return}return null!==i&&(Ss===i&&(al(t),Ts===_s&&Dl(i,Cs)),Fl(i,t)),i}function Ks(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Rl(e,t=e.firstPendingTime))return t;var r=e.lastPingedTime;return 2>=(e=r>(e=e.nextKnownPendingLevel)?r:e)&&t!==e?0:e}function Js(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=ji($s.bind(null,e));else{var t=Ks(e),r=e.callbackNode;if(0===t)null!==r&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var n=Qs();if(1073741823===t?n=99:1===t||2===t?n=95:n=0>=(n=10*(1073741821-t)-10*(1073741821-n))?99:250>=n?98:5250>=n?97:95,null!==r){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=n)return;r!==Ri&&Mi(r)}e.callbackExpirationTime=t,e.callbackPriority=n,t=1073741823===t?ji($s.bind(null,e)):Gi(n,Zs.bind(null,e),{timeout:10*(1073741821-t)-Ni()}),e.callbackNode=t}}}function Zs(e,t){if(Ws=0,t)return zl(e,t=Qs()),Js(e),null;var r=Ks(e);if(0!==r){if(t=e.callbackNode,0!=(48&Ms))throw Error(a(327));if(ml(),e===Ss&&r===Cs||rl(e,r),null!==As){var n=Ms;Ms|=16;for(var i=il();;)try{ll();break}catch(t){nl(e,t)}if($i(),Ms=n,ys.current=i,1===Ts)throw t=Es,rl(e,r),Dl(e,r),Js(e),t;if(null===As)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=r,n=Ts,Ss=null,n){case bs:case 1:throw Error(a(345));case 2:zl(e,2<r?2:r);break;case ws:if(Dl(e,r),r===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=hl(i)),1073741823===ks&&10<(i=Fs+500-Ni())){if(Ds){var o=e.lastPingedTime;if(0===o||o>=r){e.lastPingedTime=r,rl(e,r);break}}if(0!==(o=Ks(e))&&o!==r)break;if(0!==n&&n!==r){e.lastPingedTime=n;break}e.timeoutHandle=yr(fl.bind(null,e),i);break}fl(e);break;case _s:if(Dl(e,r),r===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=hl(i)),Ds&&(0===(i=e.lastPingedTime)||i>=r)){e.lastPingedTime=r,rl(e,r);break}if(0!==(i=Ks(e))&&i!==r)break;if(0!==n&&n!==r){e.lastPingedTime=n;break}if(1073741823!==Ps?n=10*(1073741821-Ps)-Ni():1073741823===ks?n=0:(n=10*(1073741821-ks)-5e3,0>(n=(i=Ni())-n)&&(n=0),(r=10*(1073741821-r)-i)<(n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*vs(n/1960))-n)&&(n=r)),10<n){e.timeoutHandle=yr(fl.bind(null,e),n);break}fl(e);break;case 5:if(1073741823!==ks&&null!==Ls){o=ks;var s=Ls;if(0>=(n=0|s.busyMinDurationMs)?n=0:(i=0|s.busyDelayMs,n=(o=Ni()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+n-o),10<n){Dl(e,r),e.timeoutHandle=yr(fl.bind(null,e),n);break}}fl(e);break;default:throw Error(a(329))}if(Js(e),e.callbackNode===t)return Zs.bind(null,e)}}return null}function $s(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&Ms))throw Error(a(327));if(ml(),e===Ss&&t===Cs||rl(e,t),null!==As){var r=Ms;Ms|=16;for(var n=il();;)try{sl();break}catch(t){nl(e,t)}if($i(),Ms=r,ys.current=n,1===Ts)throw r=Es,rl(e,t),Dl(e,t),Js(e),r;if(null!==As)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ss=null,fl(e),Js(e)}return null}function el(e,t){var r=Ms;Ms|=1;try{return e(t)}finally{0===(Ms=r)&&Wi()}}function tl(e,t){var r=Ms;Ms&=-2,Ms|=8;try{return e(t)}finally{0===(Ms=r)&&Wi()}}function rl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,xr(r)),null!==As)for(r=As.return;null!==r;){var n=r;switch(n.tag){case 1:null!=(n=n.type.childContextTypes)&&gi();break;case 3:Do(),li(fi),li(hi);break;case 5:zo(n);break;case 4:Do();break;case 13:case 19:li(Oo);break;case 10:eo(n)}r=r.return}Ss=e,As=Cl(e.current,null),Cs=t,Ts=bs,Es=null,Ps=ks=1073741823,Ls=null,Rs=0,Ds=!1}function nl(e,t){for(;;){try{if($i(),No.current=ga,Wo)for(var r=Ho.memoizedState;null!==r;){var n=r.queue;null!==n&&(n.pending=null),r=r.next}if(Vo=0,jo=Go=Ho=null,Wo=!1,null===As||null===As.return)return Ts=1,Es=t,As=null;e:{var i=e,o=As.return,a=As,s=t;if(t=Cs,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var l=s;if(0==(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var u=0!=(1&Oo.current),h=o;do{var f;if(f=13===h.tag){var d=h.memoizedState;if(null!==d)f=null!==d.dehydrated;else{var p=h.memoizedProps;f=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!u)}}if(f){var m=h.updateQueue;if(null===m){var g=new Set;g.add(l),h.updateQueue=g}else m.add(l);if(0==(2&h.mode)){if(h.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=so(1073741823,null);v.tag=2,lo(a,v)}a.expirationTime=1073741823;break e}s=void 0,a=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new ds,s=new Set,y.set(l,s)):void 0===(s=y.get(l))&&(s=new Set,y.set(l,s)),!s.has(a)){s.add(a);var x=xl.bind(null,i,l,a);l.then(x,x)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);s=Error((ge(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ve(a))}5!==Ts&&(Ts=2),s=Za(s,a),h=o;do{switch(h.tag){case 3:l=s,h.effectTag|=4096,h.expirationTime=t,co(h,ps(h,l,t));break e;case 1:l=s;var b=h.type,w=h.stateNode;if(0==(64&h.effectTag)&&("function"==typeof b.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===Is||!Is.has(w)))){h.effectTag|=4096,h.expirationTime=t,co(h,ms(h,l,t));break e}}h=h.return}while(null!==h)}As=ul(As)}catch(e){t=e;continue}break}}function il(){var e=ys.current;return ys.current=ga,null===e?ga:e}function ol(e,t){e<ks&&2<e&&(ks=e),null!==t&&e<Ps&&2<e&&(Ps=e,Ls=t)}function al(e){e>Rs&&(Rs=e)}function sl(){for(;null!==As;)As=cl(As)}function ll(){for(;null!==As&&!Di();)As=cl(As)}function cl(e){var t=gs(e.alternate,e,Cs);return e.memoizedProps=e.pendingProps,null===t&&(t=ul(e)),xs.current=null,t}function ul(e){As=e;do{var t=As.alternate;if(e=As.return,0==(2048&As.effectTag)){if(t=Ka(t,As,Cs),1===Cs||1!==As.childExpirationTime){for(var r=0,n=As.child;null!==n;){var i=n.expirationTime,o=n.childExpirationTime;i>r&&(r=i),o>r&&(r=o),n=n.sibling}As.childExpirationTime=r}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=As.firstEffect),null!==As.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=As.firstEffect),e.lastEffect=As.lastEffect),1<As.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=As:e.firstEffect=As,e.lastEffect=As))}else{if(null!==(t=Ja(As)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=As.sibling))return t;As=e}while(null!==As);return Ts===bs&&(Ts=5),null}function hl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function fl(e){var t=Ui();return Hi(99,dl.bind(null,e,t)),null}function dl(e,t){do{ml()}while(null!==Us);if(0!=(48&Ms))throw Error(a(327));var r=e.finishedWork,n=e.finishedExpirationTime;if(null===r)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=hl(r);if(e.firstPendingTime=i,n<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n<=e.firstSuspendedTime&&(e.firstSuspendedTime=n-1),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ss&&(As=Ss=null,Cs=0),1<r.effectTag?null!==r.lastEffect?(r.lastEffect.nextEffect=r,i=r.firstEffect):i=r:i=r.firstEffect,null!==i){var o=Ms;Ms|=32,xs.current=null,pr=Qt;var s=fr();if(dr(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(l=(l=s.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(c&&0!==c.rangeCount){l=c.anchorNode;var u=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{l.nodeType,h.nodeType}catch(e){l=null;break e}var f=0,d=-1,p=-1,m=0,g=0,v=s,y=null;t:for(;;){for(var x;v!==l||0!==u&&3!==v.nodeType||(d=f+u),v!==h||0!==c&&3!==v.nodeType||(p=f+c),3===v.nodeType&&(f+=v.nodeValue.length),null!==(x=v.firstChild);)y=v,v=x;for(;;){if(v===s)break t;if(y===l&&++m===u&&(d=f),y===h&&++g===c&&(p=f),null!==(x=v.nextSibling))break;y=(v=y).parentNode}v=x}l=-1===d||-1===p?null:{start:d,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;mr={activeElementDetached:null,focusedElem:s,selectionRange:l},Qt=!1,zs=i;do{try{pl()}catch(e){if(null===zs)throw Error(a(330));yl(zs,e),zs=zs.nextEffect}}while(null!==zs);zs=i;do{try{for(s=e,l=t;null!==zs;){var b=zs.effectTag;if(16&b&&Ue(zs.stateNode,""),128&b){var w=zs.alternate;if(null!==w){var _=w.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&b){case 2:cs(zs),zs.effectTag&=-3;break;case 6:cs(zs),zs.effectTag&=-3,hs(zs.alternate,zs);break;case 1024:zs.effectTag&=-1025;break;case 1028:zs.effectTag&=-1025,hs(zs.alternate,zs);break;case 4:hs(zs.alternate,zs);break;case 8:us(s,u=zs,l),ss(u)}zs=zs.nextEffect}}catch(e){if(null===zs)throw Error(a(330));yl(zs,e),zs=zs.nextEffect}}while(null!==zs);if(_=mr,w=fr(),b=_.focusedElem,l=_.selectionRange,w!==b&&b&&b.ownerDocument&&function e(t,r){return!(!t||!r)&&(t===r||(!t||3!==t.nodeType)&&(r&&3===r.nodeType?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))}(b.ownerDocument.documentElement,b)){null!==l&&dr(b)&&(w=l.start,void 0===(_=l.end)&&(_=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(_,b.value.length)):(_=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(_=_.getSelection(),u=b.textContent.length,s=Math.min(l.start,u),l=void 0===l.end?s:Math.min(l.end,u),!_.extend&&s>l&&(u=l,l=s,s=u),u=hr(b,s),h=hr(b,l),u&&h&&(1!==_.rangeCount||_.anchorNode!==u.node||_.anchorOffset!==u.offset||_.focusNode!==h.node||_.focusOffset!==h.offset)&&((w=w.createRange()).setStart(u.node,u.offset),_.removeAllRanges(),s>l?(_.addRange(w),_.extend(h.node,h.offset)):(w.setEnd(h.node,h.offset),_.addRange(w))))),w=[];for(_=b;_=_.parentNode;)1===_.nodeType&&w.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(_=w[b]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Qt=!!pr,mr=pr=null,e.current=r,zs=i;do{try{for(b=e;null!==zs;){var M=zs.effectTag;if(36&M&&os(b,zs.alternate,zs),128&M){w=void 0;var S=zs.ref;if(null!==S){var A=zs.stateNode;switch(zs.tag){case 5:w=A;break;default:w=A}"function"==typeof S?S(w):S.current=w}}zs=zs.nextEffect}}catch(e){if(null===zs)throw Error(a(330));yl(zs,e),zs=zs.nextEffect}}while(null!==zs);zs=null,Fi(),Ms=o}else e.current=r;if(Ns)Ns=!1,Us=e,Vs=t;else for(zs=i;null!==zs;)t=zs.nextEffect,zs.nextEffect=null,zs=t;if(0===(t=e.firstPendingTime)&&(Is=null),1073741823===t?e===js?Gs++:(Gs=0,js=e):Gs=0,"function"==typeof wl&&wl(r.stateNode,n),Js(e),Os)throw Os=!1,e=Bs,Bs=null,e;return 0!=(8&Ms)||Wi(),null}function pl(){for(;null!==zs;){var e=zs.effectTag;0!=(256&e)&&rs(zs.alternate,zs),0==(512&e)||Ns||(Ns=!0,Gi(97,(function(){return ml(),null}))),zs=zs.nextEffect}}function ml(){if(90!==Vs){var e=97<Vs?97:Vs;return Vs=90,Hi(e,gl)}}function gl(){if(null===Us)return!1;var e=Us;if(Us=null,0!=(48&Ms))throw Error(a(331));var t=Ms;for(Ms|=32,e=e.current.firstEffect;null!==e;){try{var r=e;if(0!=(512&r.effectTag))switch(r.tag){case 0:case 11:case 15:case 22:ns(5,r),is(5,r)}}catch(t){if(null===e)throw Error(a(330));yl(e,t)}r=e.nextEffect,e.nextEffect=null,e=r}return Ms=t,Wi(),!0}function vl(e,t,r){lo(e,t=ps(e,t=Za(r,t),1073741823)),null!==(e=Ys(e,1073741823))&&Js(e)}function yl(e,t){if(3===e.tag)vl(e,e,t);else for(var r=e.return;null!==r;){if(3===r.tag){vl(r,e,t);break}if(1===r.tag){var n=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Is||!Is.has(n))){lo(r,e=ms(r,e=Za(t,e),1073741823)),null!==(r=Ys(r,1073741823))&&Js(r);break}}r=r.return}}function xl(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),Ss===e&&Cs===r?Ts===_s||Ts===ws&&1073741823===ks&&Ni()-Fs<500?rl(e,Cs):Ds=!0:Rl(e,r)&&(0!==(t=e.lastPingedTime)&&t<r||(e.lastPingedTime=r,Js(e)))}function bl(e,t){var r=e.stateNode;null!==r&&r.delete(t),0===(t=0)&&(t=Xs(t=Qs(),e,null)),null!==(e=Ys(e,t))&&Js(e)}gs=function(e,t,r){var n=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||fi.current)Pa=!0;else{if(n<r){switch(Pa=!1,t.tag){case 3:Na(t),Ea();break;case 5:if(Fo(t),4&t.mode&&1!==r&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:mi(t.type)&&xi(t);break;case 4:Ro(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value,i=t.type._context,ci(Yi,i._currentValue),i._currentValue=n;break;case 13:if(null!==t.memoizedState)return 0!==(n=t.child.childExpirationTime)&&n>=r?ja(e,t,r):(ci(Oo,1&Oo.current),null!==(t=qa(e,t,r))?t.sibling:null);ci(Oo,1&Oo.current);break;case 19:if(n=t.childExpirationTime>=r,0!=(64&e.effectTag)){if(n)return Xa(e,t,r);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),ci(Oo,Oo.current),!n)return null}return qa(e,t,r)}Pa=!1}}else Pa=!1;switch(t.expirationTime=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=pi(t,hi.current),ro(t,r),i=qo(null,t,n,e,i,r),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(n)){var o=!0;xi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(t);var s=n.getDerivedStateFromProps;"function"==typeof s&&mo(t,n,s,e),i.updater=go,t.stateNode=i,i._reactInternalFiber=t,bo(t,n,e,r),t=Ia(null,t,n,!0,o,r)}else t.tag=0,La(null,t,i,r),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"==typeof e)return Al(e)?1:0;if(null!=e){if((e=e.$$typeof)===le)return 11;if(e===he)return 14}return 2}(i),e=qi(i,e),o){case 0:t=Oa(null,t,i,e,r);break e;case 1:t=Ba(null,t,i,e,r);break e;case 11:t=Ra(null,t,i,e,r);break e;case 14:t=Da(null,t,i,qi(i.type,e),n,r);break e}throw Error(a(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,Oa(e,t,n,i=t.elementType===n?i:qi(n,i),r);case 1:return n=t.type,i=t.pendingProps,Ba(e,t,n,i=t.elementType===n?i:qi(n,i),r);case 3:if(Na(t),n=t.updateQueue,null===e||null===n)throw Error(a(282));if(n=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ao(e,t),uo(t,n,null,r),(n=t.memoizedState.element)===i)Ea(),t=qa(e,t,r);else{if((i=t.stateNode.hydrate)&&(wa=br(t.stateNode.containerInfo.firstChild),ba=t,i=_a=!0),i)for(r=Co(t,null,n,r),t.child=r;r;)r.effectTag=-3&r.effectTag|1024,r=r.sibling;else La(e,t,n,r),Ea();t=t.child}return t;case 5:return Fo(t),null===e&&Aa(t),n=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,vr(n,i)?s=null:null!==o&&vr(n,o)&&(t.effectTag|=16),za(e,t),4&t.mode&&1!==r&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(La(e,t,s,r),t=t.child),t;case 6:return null===e&&Aa(t),null;case 13:return ja(e,t,r);case 4:return Ro(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ao(t,null,n,r):La(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,Ra(e,t,n,i=t.elementType===n?i:qi(n,i),r);case 7:return La(e,t,t.pendingProps,r),t.child;case 8:case 12:return La(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var l=t.type._context;if(ci(Yi,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=Bn(l,o)?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!fi.current){t=qa(e,t,r);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){s=l.child;for(var u=c.firstContext;null!==u;){if(u.context===n&&0!=(u.observedBits&o)){1===l.tag&&((u=so(r,null)).tag=2,lo(l,u)),l.expirationTime<r&&(l.expirationTime=r),null!==(u=l.alternate)&&u.expirationTime<r&&(u.expirationTime=r),to(l.return,r),c.expirationTime<r&&(c.expirationTime=r);break}u=u.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}La(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=(o=t.pendingProps).children,ro(t,r),n=n(i=no(i,o.unstable_observedBits)),t.effectTag|=1,La(e,t,n,r),t.child;case 14:return o=qi(i=t.type,t.pendingProps),Da(e,t,i,o=qi(i.type,o),n,r);case 15:return Fa(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:qi(n,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,mi(n)?(e=!0,xi(t)):e=!1,ro(t,r),yo(t,n,i),bo(t,n,i,r),Ia(null,t,n,!0,e,r);case 19:return Xa(e,t,r)}throw Error(a(156,t.tag))};var wl=null,_l=null;function Ml(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sl(e,t,r,n){return new Ml(e,t,r,n)}function Al(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Cl(e,t){var r=e.alternate;return null===r?((r=Sl(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Tl(e,t,r,n,i,o){var s=2;if(n=e,"function"==typeof e)Al(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case re:return El(r.children,i,o,t);case se:s=8,i|=7;break;case ne:s=8,i|=1;break;case ie:return(e=Sl(12,r,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=o,e;case ce:return(e=Sl(13,r,t,i)).type=ce,e.elementType=ce,e.expirationTime=o,e;case ue:return(e=Sl(19,r,t,i)).elementType=ue,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case oe:s=10;break e;case ae:s=9;break e;case le:s=11;break e;case he:s=14;break e;case fe:s=16,n=null;break e;case de:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Sl(s,r,t,i)).elementType=e,t.type=n,t.expirationTime=o,t}function El(e,t,r,n){return(e=Sl(7,e,n,t)).expirationTime=r,e}function kl(e,t,r){return(e=Sl(6,e,null,t)).expirationTime=r,e}function Pl(e,t,r){return(t=Sl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ll(e,t,r){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Rl(e,t){var r=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==r&&r>=t&&e<=t}function Dl(e,t){var r=e.firstSuspendedTime,n=e.lastSuspendedTime;r<t&&(e.firstSuspendedTime=t),(n>t||0===r)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Fl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var r=e.firstSuspendedTime;0!==r&&(t>=r?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function zl(e,t){var r=e.lastExpiredTime;(0===r||r>t)&&(e.lastExpiredTime=t)}function Ol(e,t,r,n){var i=t.current,o=Qs(),s=fo.suspense;o=Xs(o,i,s);e:if(r){t:{if($e(r=r._reactInternalFiber)!==r||1!==r.tag)throw Error(a(170));var l=r;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(mi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===r.tag){var c=r.type;if(mi(c)){r=yi(r,c,l);break e}}r=l}else r=ui;return null===t.context?t.context=r:t.pendingContext=r,(t=so(o,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),lo(i,t),qs(i,o),o}function Bl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Il(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Nl(e,t){Il(e,t),(e=e.alternate)&&Il(e,t)}function Ul(e,t,r){var n=new Ll(e,t,r=null!=r&&!0===r.hydrate),i=Sl(3,null,null,2===t?7:1===t?3:0);n.current=i,i.stateNode=n,oo(i),e[Ar]=n.current,r&&0!==t&&function(e,t){var r=Ze(t);Ct.forEach((function(e){pt(e,t,r)})),Tt.forEach((function(e){pt(e,t,r)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=n}function Vl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Hl(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Bl(a);s.call(e)}}Ol(t,a,e,i)}else{if(o=r._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new Ul(e,0,t?{hydrate:!0}:void 0)}(r,n),a=o._internalRoot,"function"==typeof i){var l=i;i=function(){var e=Bl(a);l.call(e)}}tl((function(){Ol(t,a,e,i)}))}return Bl(a)}function Gl(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function jl(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Vl(t))throw Error(a(200));return Gl(e,t,null,r)}Ul.prototype.render=function(e){Ol(e,this._internalRoot,null,null)},Ul.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ol(null,e,null,(function(){t[Ar]=null}))},mt=function(e){if(13===e.tag){var t=Xi(Qs(),150,100);qs(e,t),Nl(e,t)}},gt=function(e){13===e.tag&&(qs(e,3),Nl(e,3))},vt=function(e){if(13===e.tag){var t=Qs();qs(e,t=Xs(t,e,null)),Nl(e,t)}},E=function(e,t,r){switch(t){case"input":if(Ae(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=kr(n);if(!i)throw Error(a(90));we(n),Ae(n,i)}}}break;case"textarea":Re(e,r);break;case"select":null!=(t=r.value)&&ke(e,!!r.multiple,t,!1)}},F=el,z=function(e,t,r,n,i){var o=Ms;Ms|=4;try{return Hi(98,e.bind(null,t,r,n,i))}finally{0===(Ms=o)&&Wi()}},O=function(){0==(49&Ms)&&(function(){if(null!==Hs){var e=Hs;Hs=null,e.forEach((function(e,t){zl(t,e),Js(t)})),Wi()}}(),ml())},B=function(e,t){var r=Ms;Ms|=2;try{return e(t)}finally{0===(Ms=r)&&Wi()}};var Wl,Ql,Xl={Events:[Tr,Er,kr,C,M,Or,function(e){it(e,zr)},R,D,Jt,st,ml,{current:!1}]};Ql=(Wl={findFiberByHostInstance:Cr,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var r=t.inject(e);wl=function(e){try{t.onCommitFiberRoot(r,e,void 0,64==(64&e.current.effectTag))}catch(e){}},_l=function(e){try{t.onCommitFiberUnmount(r,e)}catch(e){}}}catch(e){}}(i({},Wl,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return Ql?Ql(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xl,t.createPortal=jl,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!=(48&Ms))throw Error(a(187));var r=Ms;Ms|=1;try{return Hi(99,e.bind(null,t))}finally{Ms=r,Wi()}},t.hydrate=function(e,t,r){if(!Vl(t))throw Error(a(200));return Hl(null,e,t,!0,r)},t.render=function(e,t,r){if(!Vl(t))throw Error(a(200));return Hl(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Vl(e))throw Error(a(40));return!!e._reactRootContainer&&(tl((function(){Hl(null,null,e,!1,(function(){e._reactRootContainer=null,e[Ar]=null}))})),!0)},t.unstable_batchedUpdates=el,t.unstable_createPortal=function(e,t){return jl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Vl(r))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return Hl(e,t,r,!1,n)},t.version="16.13.1"},function(e,t,r){"use strict";e.exports=r(35)},function(e,t,r){"use strict";
/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n,i,o,a,s;if("undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,c=null,u=function(){if(null!==l)try{var e=t.unstable_now();l(!0,e),l=null}catch(e){throw setTimeout(u,0),e}},h=Date.now();t.unstable_now=function(){return Date.now()-h},n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(u,0))},i=function(e,t){c=setTimeout(e,t)},o=function(){clearTimeout(c)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,d=window.Date,p=window.setTimeout,m=window.clearTimeout;if("undefined"!=typeof console){var g=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof f&&"function"==typeof f.now)t.unstable_now=function(){return f.now()};else{var v=d.now();t.unstable_now=function(){return d.now()-v}}var y=!1,x=null,b=-1,w=5,_=0;a=function(){return t.unstable_now()>=_},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<e?Math.floor(1e3/e):5};var M=new MessageChannel,S=M.port2;M.port1.onmessage=function(){if(null!==x){var e=t.unstable_now();_=e+w;try{x(!0,e)?S.postMessage(null):(y=!1,x=null)}catch(e){throw S.postMessage(null),e}}else y=!1},n=function(e){x=e,y||(y=!0,S.postMessage(null))},i=function(e,r){b=p((function(){e(t.unstable_now())}),r)},o=function(){m(b),b=-1}}function A(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,i=e[n];if(!(void 0!==i&&0<E(i,t)))break e;e[n]=t,e[r]=i,r=n}}function C(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length;n<i;){var o=2*(n+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>E(a,r))void 0!==l&&0>E(l,a)?(e[n]=l,e[s]=r,n=s):(e[n]=a,e[o]=r,n=o);else{if(!(void 0!==l&&0>E(l,r)))break e;e[n]=l,e[s]=r,n=s}}}return t}return null}function E(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var k=[],P=[],L=1,R=null,D=3,F=!1,z=!1,O=!1;function B(e){for(var t=C(P);null!==t;){if(null===t.callback)T(P);else{if(!(t.startTime<=e))break;T(P),t.sortIndex=t.expirationTime,A(k,t)}t=C(P)}}function I(e){if(O=!1,B(e),!z)if(null!==C(k))z=!0,n(N);else{var t=C(P);null!==t&&i(I,t.startTime-e)}}function N(e,r){z=!1,O&&(O=!1,o()),F=!0;var n=D;try{for(B(r),R=C(k);null!==R&&(!(R.expirationTime>r)||e&&!a());){var s=R.callback;if(null!==s){R.callback=null,D=R.priorityLevel;var l=s(R.expirationTime<=r);r=t.unstable_now(),"function"==typeof l?R.callback=l:R===C(k)&&T(k),B(r)}else T(k);R=C(k)}if(null!==R)var c=!0;else{var u=C(P);null!==u&&i(I,u.startTime-r),c=!1}return c}finally{R=null,D=n,F=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){z||F||(z=!0,n(N))},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return C(k)},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var r=D;D=t;try{return e()}finally{D=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=D;D=e;try{return t()}finally{D=r}},t.unstable_scheduleCallback=function(e,r,a){var s=t.unstable_now();if("object"==typeof a&&null!==a){var l=a.delay;l="number"==typeof l&&0<l?s+l:s,a="number"==typeof a.timeout?a.timeout:U(e)}else a=U(e),l=s;return e={id:L++,callback:r,priorityLevel:e,startTime:l,expirationTime:a=l+a,sortIndex:-1},l>s?(e.sortIndex=l,A(P,e),null===C(k)&&e===C(P)&&(O?o():O=!0,i(I,l-s))):(e.sortIndex=a,A(k,e),z||F||(z=!0,n(N))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();B(e);var r=C(k);return r!==R&&null!==R&&null!==r&&null!==r.callback&&r.startTime<=e&&r.expirationTime<R.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=D;return function(){var r=D;D=t;try{return e.apply(this,arguments)}finally{D=r}}}},function(e,t,r){(function(t){var n=r(9),i=r(5),o=r(3),a=r(6),s=r(20),l=r(37),c=r(4).EventEmitter,u=r(10).gestureListener,h=r(19),f=r(1),d=e.exports=function(e){var i=void 0!==t&&t.versions&&t.versions.node,o=this;e=f.defaults(e||{},{inNode:i}),this.inNode=e.inNode,e=f.defaults(e||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!this.useAnimationLoop(),loopWhileDisconnected:!0,useAllPlugins:!1,checkVersion:!0}),this.animationFrameRequested=!1,this.onAnimationFrame=function(e){o.lastConnectionFrame.valid&&o.emit("animationFrame",o.lastConnectionFrame),o.emit("frameEnd",e),o.loopWhileDisconnected&&(!1!==o.connection.focusedState||o.connection.opts.background)?window.requestAnimationFrame(o.onAnimationFrame):o.animationFrameRequested=!1},this.suppressAnimationLoop=e.suppressAnimationLoop,this.loopWhileDisconnected=e.loopWhileDisconnected,this.frameEventName=e.frameEventName,this.useAllPlugins=e.useAllPlugins,this.history=new s(200),this.lastFrame=n.Invalid,this.lastValidFrame=n.Invalid,this.lastConnectionFrame=n.Invalid,this.accumulatedGestures=[],this.checkVersion=e.checkVersion,void 0===e.connectionType?this.connectionType=this.inBrowser()?r(38):r(39):this.connectionType=e.connectionType,this.connection=new this.connectionType(e),this.streamingCount=0,this.devices={},this.plugins={},this._pluginPipelineSteps={},this._pluginExtendedMethods={},e.useAllPlugins&&this.useRegisteredPlugins(),this.setupFrameEvents(e),this.setupConnectionEvents(),this.startAnimationLoop()};d.prototype.gesture=function(e,t){var r=u(this,e);return void 0!==t&&r.stop(t),r},d.prototype.setBackground=function(e){return this.connection.setBackground(e),this},d.prototype.setOptimizeHMD=function(e){return this.connection.setOptimizeHMD(e),this},d.prototype.inBrowser=function(){return!this.inNode},d.prototype.useAnimationLoop=function(){return this.inBrowser()&&!this.inBackgroundPage()},d.prototype.inBackgroundPage=function(){return"undefined"!=typeof chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window},d.prototype.connect=function(){return this.connection.connect(),this},d.prototype.streaming=function(){return this.streamingCount>0},d.prototype.connected=function(){return!!this.connection.connected},d.prototype.startAnimationLoop=function(){this.suppressAnimationLoop||this.animationFrameRequested||(this.animationFrameRequested=!0,window.requestAnimationFrame(this.onAnimationFrame))},d.prototype.disconnect=function(){return this.connection.disconnect(),this},d.prototype.frame=function(e){return this.history.get(e)||n.Invalid},d.prototype.loop=function(e){return e&&("function"==typeof e?this.on(this.frameEventName,e):this.setupFrameEvents(e)),this.connect()},d.prototype.addStep=function(e){this.pipeline||(this.pipeline=new l(this)),this.pipeline.addStep(e)},d.prototype.processFrame=function(e){e.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(e.gestures)),this.lastConnectionFrame=e,this.startAnimationLoop(),this.emit("deviceFrame",e)},d.prototype.processFinishedFrame=function(e){if(this.lastFrame=e,e.valid&&(this.lastValidFrame=e),e.controller=this,e.historyIdx=this.history.push(e),e.gestures){e.gestures=this.accumulatedGestures,this.accumulatedGestures=[];for(var t=0;t!=e.gestures.length;t++)this.emit("gesture",e.gestures[t],e)}this.pipeline&&((e=this.pipeline.run(e))||(e=n.Invalid)),this.emit("frame",e),this.emitHandEvents(e)},d.prototype.emitHandEvents=function(e){for(var t=0;t<e.hands.length;t++)this.emit("hand",e.hands[t])},d.prototype.setupFrameEvents=function(e){e.frame&&this.on("frame",e.frame),e.hand&&this.on("hand",e.hand)},d.prototype.setupConnectionEvents=function(){var e=this;this.connection.on("frame",(function(t){e.processFrame(t)})),this.on(this.frameEventName,(function(t){e.processFinishedFrame(t)}));var t=function(){if(e.connection.opts.requestProtocolVersion<5&&0==e.streamingCount){e.streamingCount=1;var r={attached:!0,streaming:!0,type:"unknown",id:"Lx00000000000"};e.devices[r.id]=r,e.emit("deviceAttached",r),e.emit("deviceStreaming",r),e.emit("streamingStarted",r),e.connection.removeListener("frame",t)}},r=function(){if(e.streamingCount>0){for(var t in e.devices)e.emit("deviceStopped",e.devices[t]),e.emit("deviceRemoved",e.devices[t]);for(var t in e.emit("streamingStopped",e.devices[t]),e.streamingCount=0,e.devices)delete e.devices[t]}};this.connection.on("focus",(function(){e.loopWhileDisconnected&&e.startAnimationLoop(),e.emit("focus")})),this.connection.on("blur",(function(){e.emit("blur")})),this.connection.on("protocol",(function(t){t.on("beforeFrameCreated",(function(t){e.emit("beforeFrameCreated",t)})),t.on("afterFrameCreated",(function(t,r){e.emit("afterFrameCreated",t,r)})),e.emit("protocol",t)})),this.connection.on("ready",(function(){e.checkVersion&&!e.inNode&&e.checkOutOfDate(),e.emit("ready")})),this.connection.on("connect",(function(){e.emit("connect"),e.connection.removeListener("frame",t),e.connection.on("frame",t)})),this.connection.on("disconnect",(function(){e.emit("disconnect"),r()})),this.connection.on("deviceConnect",(function(n){n.state?(e.emit("deviceConnected"),e.connection.removeListener("frame",t),e.connection.on("frame",t)):(e.emit("deviceDisconnected"),r())})),this.connection.on("deviceEvent",(function(t){var r=t.state,n=e.devices[r.id],i={};for(var o in r)n&&n.hasOwnProperty(o)&&n[o]==r[o]||(i[o]=!0);e.devices[r.id]=r,i.attached&&e.emit(r.attached?"deviceAttached":"deviceRemoved",r),i.streaming&&(r.streaming?(e.streamingCount++,e.emit("deviceStreaming",r),1==e.streamingCount&&e.emit("streamingStarted",r),i.attached||e.emit("deviceConnected")):i.attached&&r.attached||(e.streamingCount--,e.emit("deviceStopped",r),0==e.streamingCount&&e.emit("streamingStopped",r),e.emit("deviceDisconnected")))})),this.on("newListener",(function(e,t){"deviceConnected"!=e&&"deviceDisconnected"!=e||console.warn(e+" events are depricated.  Consider using 'streamingStarted/streamingStopped' or 'deviceStreaming/deviceStopped' instead")}))},d.prototype.checkOutOfDate=function(){console.assert(this.connection&&this.connection.protocol);var e=this.connection.protocol.serviceVersion,t=this.connection.protocol.version,r=this.connectionType.defaultProtocolVersion;return r>t&&(console.warn("Your Protocol Version is v"+t+", this app was designed for v"+r),h.warnOutOfDate({sV:e,pV:t}),!0)},d._pluginFactories={},d.plugin=function(e,t){return this._pluginFactories[e]&&console.warn('Plugin "'+e+'" already registered'),this._pluginFactories[e]=t},d.plugins=function(){return f.keys(this._pluginFactories)};var p=function(e,t,r){-1!=["beforeFrameCreated","afterFrameCreated"].indexOf(t)?this.on(t,r):(this.pipeline||(this.pipeline=new l(this)),this._pluginPipelineSteps[e]||(this._pluginPipelineSteps[e]=[]),this._pluginPipelineSteps[e].push(this.pipeline.addWrappedStep(t,r)))},m=function(e,t,r){var s;switch(this._pluginExtendedMethods[e]||(this._pluginExtendedMethods[e]=[]),t){case"frame":s=n;break;case"hand":s=i;break;case"pointable":s=o,f.extend(a.prototype,r),f.extend(a.Invalid,r);break;case"finger":s=a;break;default:throw e+' specifies invalid object type "'+t+'" for prototypical extension'}f.extend(s.prototype,r),f.extend(s.Invalid,r),this._pluginExtendedMethods[e].push([s,r])};d.prototype.use=function(e,t){var r,n,i,o;if(!(n="function"==typeof e?e:d._pluginFactories[e]))throw"Leap Plugin "+e+" not found.";if(t||(t={}),this.plugins[e])return f.extend(this.plugins[e],t),this;for(i in this.plugins[e]=t,o=n.call(this,t))"function"==typeof(r=o[i])?p.call(this,e,i,r):m.call(this,e,i,r);return this},d.prototype.stopUsing=function(e){var t,r=this._pluginPipelineSteps[e],n=this._pluginExtendedMethods[e],i=0;if(this.plugins[e]){if(r)for(i=0;i<r.length;i++)this.pipeline.removeStep(r[i]);if(n)for(i=0;i<n.length;i++)for(var o in t=n[i][0],n[i][1])delete t.prototype[o],delete t.Invalid[o];return delete this.plugins[e],this}},d.prototype.useRegisteredPlugins=function(){for(var e in d._pluginFactories)this.use(e)},f.extend(d.prototype,c.prototype)}).call(this,r(8))},function(e,t){var r=e.exports=function(e){this.steps=[],this.controller=e};r.prototype.addStep=function(e){this.steps.push(e)},r.prototype.run=function(e){for(var t=this.steps.length,r=0;r!=t&&e;r++)e=this.steps[r](e);return e},r.prototype.removeStep=function(e){var t=this.steps.indexOf(e);if(-1===t)throw"Step not found in pipeline";this.steps.splice(t,1)},r.prototype.addWrappedStep=function(e,t){var r=this.controller,n=function(n){var i,o,a;for(o=0,a=(i="frame"==e?[n]:n[e+"s"]||[]).length;o<a;o++)t.call(r,i[o]);return n};return this.addStep(n),n}},function(e,t,r){var n=e.exports=r(21),i=r(1),o=e.exports=function(e){n.call(this,e);var t=this;this.on("ready",(function(){t.startFocusLoop()})),this.on("disconnect",(function(){t.stopFocusLoop()}))};i.extend(o.prototype,n.prototype),o.__proto__=n,o.prototype.useSecure=function(){return"https:"===location.protocol},o.prototype.getScheme=function(){return this.useSecure()?"wss:":"ws:"},o.prototype.getPort=function(){return this.useSecure()?6436:6437},o.prototype.setupSocket=function(){var e=this,t=new WebSocket(this.getUrl());return t.onopen=function(){e.handleOpen()},t.onclose=function(t){e.handleClose(t.code,t.reason)},t.onmessage=function(t){e.handleData(t.data)},t.onerror=function(t){e.useSecure()&&"wss:"===e.scheme&&(e.scheme="ws:",e.port=6437,e.disconnect(),e.connect())},t},o.prototype.startFocusLoop=function(){if(!this.focusDetectorTimer){var e=this,t=null;t=void 0!==document.hidden?"hidden":void 0!==document.mozHidden?"mozHidden":void 0!==document.msHidden?"msHidden":void 0!==document.webkitHidden?"webkitHidden":void 0,void 0===e.windowVisible&&(e.windowVisible=void 0===t||!1===document[t]);var r=window.addEventListener("focus",(function(t){e.windowVisible=!0,i()})),n=window.addEventListener("blur",(function(t){e.windowVisible=!1,i()}));this.on("disconnect",(function(){window.removeEventListener("focus",r),window.removeEventListener("blur",n)}));var i=function(){var r=void 0===t||!1===document[t];e.reportFocus(r&&e.windowVisible)};i(),this.focusDetectorTimer=setInterval(i,100)}},o.prototype.stopFocusLoop=function(){this.focusDetectorTimer&&(clearTimeout(this.focusDetectorTimer),delete this.focusDetectorTimer)}},function(e,t,r){var n=r(40),i=r(21),o=r(1),a=e.exports=function(e){i.call(this,e);var t=this;this.on("ready",(function(){t.reportFocus(!0)}))};o.extend(a.prototype,i.prototype),a.__proto__=i,a.prototype.setupSocket=function(){var e=this,t=new n(this.getUrl());return t.on("open",(function(){e.handleOpen()})),t.on("message",(function(t){e.handleData(t)})),t.on("close",(function(t,r){e.handleClose(t,r)})),t.on("error",(function(){e.startReconnection()})),t}},function(e,t,r){(function(t){e.exports=function(){return t.WebSocket||t.MozWebSocket}}).call(this,r(41))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){t.UI={Region:r(43),Cursor:r(44)}},function(e,t,r){var n=r(4).EventEmitter,i=r(1),o=e.exports=function(e,t){this.start=new Vector(e),this.end=new Vector(t),this.enteredFrame=null};o.prototype.hasPointables=function(e){for(var t=0;t!=e.pointables.length;t++){var r=e.pointables[t].tipPosition;if(r.x>=this.start.x&&r.x<=this.end.x&&r.y>=this.start.y&&r.y<=this.end.y&&r.z>=this.start.z&&r.z<=this.end.z)return!0}return!1},o.prototype.listener=function(e){var t=this;return e&&e.nearThreshold&&this.setupNearRegion(e.nearThreshold),function(e){return t.updatePosition(e)}},o.prototype.clipper=function(){var e=this;return function(t){return e.updatePosition(t),e.enteredFrame?t:null}},o.prototype.setupNearRegion=function(e){var t=this.nearRegion=new o([this.start.x-e,this.start.y-e,this.start.z-e],[this.end.x+e,this.end.y+e,this.end.z+e]),r=this;t.on("enter",(function(e){r.emit("near",e)})),t.on("exit",(function(e){r.emit("far",e)})),r.on("exit",(function(e){r.emit("near",e)}))},o.prototype.updatePosition=function(e){return this.nearRegion&&this.nearRegion.updatePosition(e),this.hasPointables(e)&&null==this.enteredFrame?(this.enteredFrame=e,this.emit("enter",this.enteredFrame)):this.hasPointables(e)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame)),e},o.prototype.normalize=function(e){return new Vector([(e.x-this.start.x)/(this.end.x-this.start.x),(e.y-this.start.y)/(this.end.y-this.start.y),(e.z-this.start.z)/(this.end.z-this.start.z)])},o.prototype.mapToXY=function(e,t,r){var n=this.normalize(e),i=n.x,o=n.y;return i>1?i=1:i<-1&&(i=-1),o>1?o=1:o<-1&&(o=-1),[(i+1)/2*t,(1-o)/2*r,n.z]},i.extend(o.prototype,n.prototype)},function(e,t){e.exports=function(){return function(e){var t=e.pointables.sort((function(e,t){return e.z-t.z}))[0];return t&&t.valid&&(e.cursorPosition=t.tipPosition),e}}},function(e,t){e.exports={full:"0.6.4",major:0,minor:6,dot:4}},function(e,t,r){Leap=r(11),r(47),r(48),r(49),r(51),r(53),r(54),e.exports=!0},function(e,t,r){(function(){var t;t=function(){var e;return e=[],0===Leap.version.major&&Leap.version.minor<5&&console.warn("The hand entry plugin requires LeapJS 0.5.0 or newer."),this.on("deviceStopped",(function(){for(var t=0,r=e.length;t<r;t++)id=e[t],e.splice(t,1),this.emit("handLost",this.lastConnectionFrame.hand(id)),t--,r--})),{frame:function(t){var r,n,i,o,a;n=t.hands.map((function(e){return e.id}));for(var s=0,l=e.length;s<l;s++)r=e[s],-1==n.indexOf(r)&&(e.splice(s,1),this.emit("handLost",this.frame(1).hand(r)),s--,l--);for(a=[],i=0,o=n.length;i<o;i++)r=n[i],-1===e.indexOf(r)?(e.push(r),a.push(this.emit("handFound",t.hand(r)))):a.push(void 0);return a}}},"undefined"!=typeof Leap&&Leap.Controller?Leap.Controller.plugin("handEntry",t):e.exports.handEntry=t}).call(this)},function(e,t,r){(function(){var t;t=function(){var e,t;return t={},e=function(e,r,n){var i,o,a,s;if(t[a=e+this.id]||(t[a]=[]),i=t[e+this.id],void 0!==n)return i[r]=n;if("[object String]"==={}.toString.call(r))return i[r];for(o in s=[],r)void 0===(n=r[o])?s.push(delete i[o]):s.push(i[o]=n);return s},{hand:{data:function(t,r){return e.call(this,"h",t,r)},hold:function(e){return e?this.data({holding:e}):this.hold(this.hovering())},holding:function(){return this.data("holding")},release:function(){var e;return e=this.data("holding"),this.data({holding:void 0}),e},hoverFn:function(e){return this.data({getHover:e})},hovering:function(){var e;if(e=this.data("getHover"))return this._hovering||(this._hovering=e.call(this))}},pointable:{data:function(t,r){return e.call(this,"p",t,r)}}}},"undefined"!=typeof Leap&&Leap.Controller?Leap.Controller.plugin("handHold",t):e.exports.handHold=t}).call(this)},function(e,t,r){(function(){var e,t,n,i,o,a,s,l,c,u,h,f,d,p,m;m=null,t=r(50),c=function(e,r){var n,i,o,a,s,l;return m.scene=new t.Scene,m.rendererOps||(m.rendererOps={}),void 0===m.rendererOps.alpha&&(m.rendererOps.alpha=!0),m.renderer=s=new t.WebGLRenderer(m.rendererOps),l=m.width||window.innerWidth,o=m.height||window.innerHeight,s.setClearColor(0,0),s.setSize(l,o),s.domElement.className="leap-boneHand",s.shadowMap.enabled=!0,s.shadowMap.type=t.PCFSoftShadowMap,e.appendChild(s.domElement),a=1,i=1e4,r&&(a*=r,i*=r),m.camera=n=new t.PerspectiveCamera(45,l/o,a,i),n.position.set(0,300,500),n.lookAt(new t.Vector3(0,160,0)),m.scene.add(n),m.width||m.height||window.addEventListener("resize",(function(){return l=window.innerWidth,o=window.innerHeight,n.aspect=l/o,n.updateProjectionMatrix(),s.setSize(l,o),s.render(m.scene,n)}),!1),m.render||(m.render=function(e){return s.render(m.scene,m.camera)}),m.render()},i=null,u=null,o=null,l=null,f=null,s=null,h=null,d=null,n=null,e=function(){function e(){var e,r,i,a,c,p,g,v,y;for(d=isNaN(m.opacity)?new t.MeshPhongMaterial({fog:!1}):new t.MeshPhongMaterial({fog:!1,transparent:!0,opacity:m.opacity}),s=40*l,h=40*f,this.fingerMeshes=[],i=p=0;p<5;i=++p){for(r=[],e=0===i?3:4,a=g=0;0<=e?g<e:g>e;a=0<=e?++g:--g)(c=new t.Mesh(new t.SphereGeometry(h,32,32),d.clone())).name="hand-bone-"+a,c.material.color.copy(u),c.renderOrder=(9*i+2*a)/36,c.castShadow=!0,m.scene.add(c),r.push(c),(c=new t.Mesh(new t.CylinderGeometry(s,s,40,32),d.clone())).name="hand-joint-"+a,c.material.color.copy(o),c.renderOrder=(9*i+2*a+1)/36,c.castShadow=!0,m.scene.add(c),r.push(c);(c=new t.Mesh(new t.SphereGeometry(h,32,32),d.clone())).material.color.copy(u),c.castShadow=!0,m.scene.add(c),r.push(c),this.fingerMeshes.push(r)}if(m.arm){for(this.armMesh=new t.Object3D,this.armBones=[],this.armSpheres=[],i=v=0;v<=3;i=++v)this.armBones.push(new t.Mesh(new t.CylinderGeometry(s,s,i<2?1e3:100,32),d.clone())),this.armBones[i].material.color.copy(o),this.armBones[i].castShadow=!0,this.armBones[i].name="ArmBone"+i,i>1&&this.armBones[i].quaternion.multiply(n),this.armMesh.add(this.armBones[i]);for(this.armSpheres=[],i=y=0;y<=3;i=++y)this.armSpheres.push(new t.Mesh(new t.SphereGeometry(h,32,32),d.clone())),this.armSpheres[i].material.color.copy(u),this.armSpheres[i].castShadow=!0,this.armSpheres[i].name="ArmSphere"+i,this.armMesh.add(this.armSpheres[i]);m.scene.add(this.armMesh)}}return e.unusedHandMeshes=[],e.get=function(){var t;return 0===e.unusedHandMeshes.length&&(t=e.create()),(t=e.unusedHandMeshes.pop()).show(),t},e.prototype.replace=function(){return this.hide(),e.unusedHandMeshes.push(this)},e.create=function(){var t;return(t=new e).setVisibility(!1),e.unusedHandMeshes.push(t),e.onMeshCreated&&e.onMeshCreated(t),t},e.prototype.traverse=function(e){var t,r,n,i,o;for(t=r=0;r<5;t=++r)for(n=0,i=(o=this.fingerMeshes[t]).length;n<i;n++)e(o[n]);return this.armMesh&&this.armMesh.traverse(e)},e.prototype.scaleTo=function(e){var t,r,n,i,o,a,s,l,c,u,h,f,d;for(n=e.middleFinger.proximal.length/this.fingerMeshes[2][1].geometry.parameters.height,c=f=0;f<5;c=++f)for(a=e.fingers[c],u=0;;){if(u===this.fingerMeshes[c].length-1){(h=this.fingerMeshes[c][u]).scale.set(n,n,n);break}i=a.bones[3-u/2],(h=this.fingerMeshes[c][u]).scale.set(n,n,n),u++,h=this.fingerMeshes[c][u],s=i.length/h.geometry.parameters.height,h.scale.set(n,s,n),u++}if(m.arm){for(t=e.arm.length/(this.armBones[0].geometry.parameters.height+this.armBones[0].geometry.parameters.radiusTop),r=e.arm.width/(this.armBones[2].geometry.parameters.height+this.armBones[2].geometry.parameters.radiusTop),c=d=0;d<=3;c=++d)this.armBones[c].scale.set(n,c<2?t:r,n),this.armSpheres[c].scale.set(n,n,n);o=e.arm.width/2*.85,l=e.arm.length/2,this.armBones[0].position.setX(o),this.armBones[1].position.setX(-o),this.armBones[2].position.setY(l),this.armBones[3].position.setY(-l),this.armSpheres[0].position.set(-o,l,0),this.armSpheres[1].position.set(o,l,0),this.armSpheres[2].position.set(o,-l,0),this.armSpheres[3].position.set(-o,-l,0)}return this},e.prototype.formTo=function(e){var r,n,o,a,s,l;for(o=l=0;l<5;o=++l)for(n=e.fingers[o],a=0;;){if(a===this.fingerMeshes[o].length-1){(s=this.fingerMeshes[o][a]).position.fromArray(r.prevJoint);break}r=n.bones[3-a/2],(s=this.fingerMeshes[o][a]).position.fromArray(r.nextJoint),++a,(s=this.fingerMeshes[o][a]).position.fromArray(r.center()),s.setRotationFromMatrix((new t.Matrix4).fromArray(r.matrix())),s.quaternion.multiply(i),++a}return this.armMesh&&(this.armMesh.position.fromArray(e.arm.center()),this.armMesh.setRotationFromMatrix((new t.Matrix4).fromArray(e.arm.matrix())),this.armMesh.quaternion.multiply(i)),this},e.prototype.setVisibility=function(e){var t,r,n,i,o;for(t=n=0;n<5;t=++n)for(r=0;this.fingerMeshes[t][r].visible=e,++r!==this.fingerMeshes[t].length;);if(m.arm){for(o=[],t=i=0;i<=3;t=++i)this.armBones[t].visible=e,o.push(this.armSpheres[t].visible=e);return o}},e.prototype.show=function(){return this.setVisibility(!0)},e.prototype.hide=function(){return this.setVisibility(!1)},e}(),p=function(t){var r;if(m.scene)return(r=t.data("handMesh"))||(r=e.get().scaleTo(t),t.data("handMesh",r),e.onMeshUsed&&e.onMeshUsed(r)),r.formTo(t)},a=function(e){var t;return(t=e.data("handMesh"))&&t.replace(),e.data("handMesh",null)},Leap.plugin("boneHand",(function(r){var g,v;return null==r&&(r={}),m=r,g=this,u=(new t.Color).setHex(6138368),o=(new t.Color).setHex(16777215),m.boneScale&&(l=m.boneScale),m.jointScale&&(f=m.jointScale),m.boneColor&&(o=m.boneColor),m.jointColor&&(u=m.jointColor),m.HandMesh=e,m.addShadowCamera=function(){if(m.light=new t.SpotLight(16777215,1),m.light.castShadow=!0,m.light.shadow.mapSize.width=1024,m.light.shadow.mapSize.height=1024,m.light.shadow.camera.near=500,m.light.shadow.camera.far=3e3,m.light.position.set(0,1e3,1e3),m.light.target.position.set(0,0,-1e3),m.camera.add(m.light.target),m.camera.add(m.light),g.plugins.transform&&(g.plugins.transform.getScale()&&(m.light.shadowCameraNear*=g.plugins.transform.scale.x,m.light.shadowCameraFar*=g.plugins.transform.scale.x,m.light.target.position.multiply(g.plugins.transform.scale),m.light.position.multiply(g.plugins.transform.scale)),!0===g.plugins.transform.vr&&m.camera.position.set(0,0,0),"desktop"===g.plugins.transform.vr))return m.camera.position.set(0,.15,.3)},i=(new t.Quaternion).setFromEuler(new t.Euler(Math.PI/2,0,0)),l=1/6,f=.2,s=null,h=null,d=null,n=(new t.Quaternion).setFromEuler(new t.Euler(0,0,Math.PI/2)),e.onMeshCreated=function(e){return g.emit("handMeshCreated",e)},e.onMeshUsed=function(e){return g.emit("handMeshUsed",e)},this.use("handEntry"),this.use("handHold"),void 0===m.scene&&(console.assert(m.targetEl),this.plugins.transform&&this.plugins.transform.getScale()&&(v=this.plugins.transform.scale.x),c(m.targetEl,v),m.addShadowCamera()),m.scene&&(e.create(),e.create(),0===Leap.version.major&&Leap.version.minor<7&&Leap.version.dot<4&&console.warn("BoneHand default scene render requires LeapJS > 0.6.3. You're running have "+Leap.version.full),this.on("frameEnd",(function(e){if(m.render)return m.render(e)}))),this.on("handLost",a),{hand:p}}))}).call(this)},function(e,t,r){var n,i,o,a,s,l,c,u,h,f,d,p,m,g,v,y,x,b,w,_,M,S,A,C,T,E,k,P,L,R,D,F,z,O,B,I,N,U,V,H,G,j,W,Q,X,q,Y,K,J,Z,$,ee,te=te||{},re={REVISION:"69"};e.exports=re,void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:0}),re.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},re.CullFaceNone=0,re.CullFaceBack=1,re.CullFaceFront=2,re.CullFaceFrontBack=3,re.FrontFaceDirectionCW=0,re.FrontFaceDirectionCCW=1,re.BasicShadowMap=0,re.PCFShadowMap=1,re.PCFSoftShadowMap=2,re.FrontSide=0,re.BackSide=1,re.DoubleSide=2,re.NoShading=0,re.FlatShading=1,re.SmoothShading=2,re.NoColors=0,re.FaceColors=1,re.VertexColors=2,re.NoBlending=0,re.NormalBlending=1,re.AdditiveBlending=2,re.SubtractiveBlending=3,re.MultiplyBlending=4,re.CustomBlending=5,re.AddEquation=100,re.SubtractEquation=101,re.ReverseSubtractEquation=102,re.MinEquation=103,re.MaxEquation=104,re.ZeroFactor=200,re.OneFactor=201,re.SrcColorFactor=202,re.OneMinusSrcColorFactor=203,re.SrcAlphaFactor=204,re.OneMinusSrcAlphaFactor=205,re.DstAlphaFactor=206,re.OneMinusDstAlphaFactor=207,re.DstColorFactor=208,re.OneMinusDstColorFactor=209,re.SrcAlphaSaturateFactor=210,re.MultiplyOperation=0,re.MixOperation=1,re.AddOperation=2,re.UVMapping=function(){},re.CubeReflectionMapping=function(){},re.CubeRefractionMapping=function(){},re.SphericalReflectionMapping=function(){},re.SphericalRefractionMapping=function(){},re.RepeatWrapping=1e3,re.ClampToEdgeWrapping=1001,re.MirroredRepeatWrapping=1002,re.NearestFilter=1003,re.NearestMipMapNearestFilter=1004,re.NearestMipMapLinearFilter=1005,re.LinearFilter=1006,re.LinearMipMapNearestFilter=1007,re.LinearMipMapLinearFilter=1008,re.UnsignedByteType=1009,re.ByteType=1010,re.ShortType=1011,re.UnsignedShortType=1012,re.IntType=1013,re.UnsignedIntType=1014,re.FloatType=1015,re.UnsignedShort4444Type=1016,re.UnsignedShort5551Type=1017,re.UnsignedShort565Type=1018,re.AlphaFormat=1019,re.RGBFormat=1020,re.RGBAFormat=1021,re.LuminanceFormat=1022,re.LuminanceAlphaFormat=1023,re.RGB_S3TC_DXT1_Format=2001,re.RGBA_S3TC_DXT1_Format=2002,re.RGBA_S3TC_DXT3_Format=2003,re.RGBA_S3TC_DXT5_Format=2004,re.RGB_PVRTC_4BPPV1_Format=2100,re.RGB_PVRTC_2BPPV1_Format=2101,re.RGBA_PVRTC_4BPPV1_Format=2102,re.RGBA_PVRTC_2BPPV1_Format=2103,re.Color=function(e){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(e)},re.Color.prototype={constructor:re.Color,r:1,g:1,b:1,set:function(e){return e instanceof re.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(e,t,r){if(0===t)this.r=this.g=this.b=r;else{var n=function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e},i=r<=.5?r*(1+t):r+t-r*t,o=2*r-i;this.r=n(o,i,e+1/3),this.g=n(o,i,e),this.b=n(o,i,e-1/3)}return this},setStyle:function(e){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){var t=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)){t=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(e)){t=/^\#([0-9a-f]{6})$/i.exec(e);return this.setHex(parseInt(t[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)){t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);return this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this}if(/^(\w+)$/i.test(e))return this.setHex(re.ColorKeywords[e]),this},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,r,n=e||{h:0,s:0,l:0},i=this.r,o=this.g,a=this.b,s=Math.max(i,o,a),l=Math.min(i,o,a),c=(l+s)/2;if(l===s)t=0,r=0;else{var u=s-l;switch(r=c<=.5?u/(s+l):u/(2-s-l),s){case i:t=(o-a)/u+(o<a?6:0);break;case o:t=(a-i)/u+2;break;case a:t=(i-o)/u+4}t/=6}return n.h=t,n.s=r,n.l=c,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){var n=this.getHSL();return n.h+=e,n.s+=t,n.l+=r,this.setHSL(n.h,n.s,n.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new re.Color).setRGB(this.r,this.g,this.b)}},re.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},re.Quaternion=function(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==n?n:1},re.Quaternion.prototype={constructor:re.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this.onChangeCallback(),this},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(e instanceof re.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var r=Math.cos(e._x/2),n=Math.cos(e._y/2),i=Math.cos(e._z/2),o=Math.sin(e._x/2),a=Math.sin(e._y/2),s=Math.sin(e._z/2);return"XYZ"===e.order?(this._x=o*n*i+r*a*s,this._y=r*a*i-o*n*s,this._z=r*n*s+o*a*i,this._w=r*n*i-o*a*s):"YXZ"===e.order?(this._x=o*n*i+r*a*s,this._y=r*a*i-o*n*s,this._z=r*n*s-o*a*i,this._w=r*n*i+o*a*s):"ZXY"===e.order?(this._x=o*n*i-r*a*s,this._y=r*a*i+o*n*s,this._z=r*n*s+o*a*i,this._w=r*n*i-o*a*s):"ZYX"===e.order?(this._x=o*n*i-r*a*s,this._y=r*a*i+o*n*s,this._z=r*n*s-o*a*i,this._w=r*n*i+o*a*s):"YZX"===e.order?(this._x=o*n*i+r*a*s,this._y=r*a*i+o*n*s,this._z=r*n*s-o*a*i,this._w=r*n*i-o*a*s):"XZY"===e.order&&(this._x=o*n*i-r*a*s,this._y=r*a*i-o*n*s,this._z=r*n*s+o*a*i,this._w=r*n*i+o*a*s),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,n=r[0],i=r[4],o=r[8],a=r[1],s=r[5],l=r[9],c=r[2],u=r[6],h=r[10],f=n+s+h;return f>0?(t=.5/Math.sqrt(f+1),this._w=.25/t,this._x=(u-l)*t,this._y=(o-c)*t,this._z=(a-i)*t):n>s&&n>h?(t=2*Math.sqrt(1+n-s-h),this._w=(u-l)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+c)/t):s>h?(t=2*Math.sqrt(1+s-n-h),this._w=(o-c)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(l+u)/t):(t=2*Math.sqrt(1+h-n-s),this._w=(a-i)/t,this._x=(o+c)/t,this._y=(l+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(e,t){return void 0===n&&(n=new re.Vector3),(i=e.dot(t)+1)<1e-6?(i=0,Math.abs(e.x)>Math.abs(e.z)?n.set(-e.y,e.x,0):n.set(0,-e.z,e.y)):n.crossVectors(e,t),this._x=n.x,this._y=n.y,this._z=n.z,this._w=i,this.normalize(),this},inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=r*c+o*a+n*l-i*s,this._y=n*c+o*s+i*a-r*l,this._z=i*c+o*l+r*s-n*a,this._w=o*c-r*a-n*s-i*l,this.onChangeCallback(),this},multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,o=this._w,a=o*e._w+r*e._x+n*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=n,this._z=i,this;var s=Math.acos(a),l=Math.sqrt(1-a*a);if(Math.abs(l)<.001)return this._w=.5*(o+this._w),this._x=.5*(r+this._x),this._y=.5*(n+this._y),this._z=.5*(i+this._z),this;var c=Math.sin((1-t)*s)/l,u=Math.sin(t*s)/l;return this._w=o*c+this._w*u,this._x=r*c+this._x*u,this._y=n*c+this._y*u,this._z=i*c+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new re.Quaternion(this._x,this._y,this._z,this._w)}},re.Quaternion.slerp=function(e,t,r,n){return r.copy(e).slerp(t,n)},re.Vector2=function(e,t){this.x=e||0,this.y=t||0},re.Vector2.prototype={constructor:re.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScalar:function(e){return this.x+=e,this.y+=e,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t}else this.x=0,this.y=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},clampScalar:function(e,t){return void 0===o&&(o=new re.Vector2,a=new re.Vector2),o.set(e,e),a.set(t,t),this.clamp(o,a)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},clone:function(){return new re.Vector2(this.x,this.y)}},re.Vector3=function(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0},re.Vector3.prototype={constructor:re.Vector3,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e instanceof re.Euler==0&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===l&&(l=new re.Quaternion),this.applyQuaternion(l.setFromEuler(e)),this},applyAxisAngle:function(){var e;return function(t,r){return void 0===e&&(e=new re.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,r)),this}}(),applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n+i[12],this.y=i[1]*t+i[5]*r+i[9]*n+i[13],this.z=i[2]*t+i[6]*r+i[10]*n+i[14],this},applyProjection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements,o=1/(i[3]*t+i[7]*r+i[11]*n+i[15]);return this.x=(i[0]*t+i[4]*r+i[8]*n+i[12])*o,this.y=(i[1]*t+i[5]*r+i[9]*n+i[13])*o,this.z=(i[2]*t+i[6]*r+i[10]*n+i[14])*o,this},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*n-a*r,c=s*r+a*t-i*n,u=s*n+i*r-o*t,h=-i*t-o*r-a*n;return this.x=l*s+h*-i+c*-a-u*-o,this.y=c*s+h*-o+u*-i-l*-a,this.z=u*s+h*-a+l*-o-c*-i,this},project:function(e){return void 0===s&&(s=new re.Matrix4),s.multiplyMatrices(e.projectionMatrix,s.getInverse(e.matrixWorld)),this.applyProjection(s)},unproject:function(){var e;return function(t){return void 0===e&&(e=new re.Matrix4),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new re.Vector3,t=new re.Vector3),e.set(r,r,r),t.set(n,n,n),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var r=this.x,n=this.y,i=this.z;return this.x=n*e.z-i*e.y,this.y=i*e.x-r*e.z,this.z=r*e.y-n*e.x,this},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*o-r*s,this.z=r*a-n*o,this},projectOnVector:function(){var e,t;return function(r){return void 0===e&&(e=new re.Vector3),e.copy(r).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new re.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new re.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/(this.length()*e.length());return Math.acos(re.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},setEulerFromRotationMatrix:function(e,t){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(e,t){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),r=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),n=this.set(e.elements[8],e.elements[9],e.elements[10]).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){var r=4*e,n=t.elements;return this.x=n[r],this.y=n[r+1],this.z=n[r+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},clone:function(){return new re.Vector3(this.x,this.y,this.z)}},re.Vector4=function(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1},re.Vector4.prototype={constructor:re.Vector4,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*n+o[12]*i,this.y=o[1]*t+o[5]*r+o[9]*n+o[13]*i,this.z=o[2]*t+o[6]*r+o[10]*n+o[14]*i,this.w=o[3]*t+o[7]*r+o[11]*n+o[15]*i,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t,this.w*=t}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,o=e.elements,a=o[0],s=o[4],l=o[8],c=o[1],u=o[5],h=o[9],f=o[2],d=o[6],p=o[10];if(Math.abs(s-c)<.01&&Math.abs(l-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+c)<.1&&Math.abs(l+f)<.1&&Math.abs(h+d)<.1&&Math.abs(a+u+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,g=(u+1)/2,v=(p+1)/2,y=(s+c)/4,x=(l+f)/4,b=(h+d)/4;return m>g&&m>v?m<.01?(r=0,n=.707106781,i=.707106781):(n=y/(r=Math.sqrt(m)),i=x/r):g>v?g<.01?(r=.707106781,n=0,i=.707106781):(r=y/(n=Math.sqrt(g)),i=b/n):v<.01?(r=.707106781,n=.707106781,i=0):(r=x/(i=Math.sqrt(v)),n=b/i),this.set(r,n,i,t),this}var w=Math.sqrt((d-h)*(d-h)+(l-f)*(l-f)+(c-s)*(c-s));return Math.abs(w)<.001&&(w=1),this.x=(d-h)/w,this.y=(l-f)/w,this.z=(c-s)/w,this.w=Math.acos((a+u+p-1)/2),this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new re.Vector4,t=new re.Vector4),e.set(r,r,r,r),t.set(n,n,n,n),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},clone:function(){return new re.Vector4(this.x,this.y,this.z,this.w)}},re.Euler=function(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||re.Euler.DefaultOrder},re.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],re.Euler.DefaultOrder="XYZ",re.Euler.prototype={constructor:re.Euler,_x:0,_y:0,_z:0,_order:re.Euler.DefaultOrder,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t){var r=re.Math.clamp,n=e.elements,i=n[0],o=n[4],a=n[8],s=n[1],l=n[5],c=n[9],u=n[2],h=n[6],f=n[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(a,f),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i))):"ZYX"===t?(this._y=Math.asin(-r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(a,f))):"XZY"===t?(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,this.onChangeCallback(),this},setFromQuaternion:function(e,t,r){var n=re.Math.clamp,i=e.x*e.x,o=e.y*e.y,a=e.z*e.z,s=e.w*e.w;return"XYZ"===(t=t||this._order)?(this._x=Math.atan2(2*(e.x*e.w-e.y*e.z),s-i-o+a),this._y=Math.asin(n(2*(e.x*e.z+e.y*e.w),-1,1)),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),s+i-o-a)):"YXZ"===t?(this._x=Math.asin(n(2*(e.x*e.w-e.y*e.z),-1,1)),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),s-i-o+a),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),s-i+o-a)):"ZXY"===t?(this._x=Math.asin(n(2*(e.x*e.w+e.y*e.z),-1,1)),this._y=Math.atan2(2*(e.y*e.w-e.z*e.x),s-i-o+a),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),s-i+o-a)):"ZYX"===t?(this._x=Math.atan2(2*(e.x*e.w+e.z*e.y),s-i-o+a),this._y=Math.asin(n(2*(e.y*e.w-e.x*e.z),-1,1)),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),s+i-o-a)):"YZX"===t?(this._x=Math.atan2(2*(e.x*e.w-e.z*e.y),s-i+o-a),this._y=Math.atan2(2*(e.y*e.w-e.x*e.z),s+i-o-a),this._z=Math.asin(n(2*(e.x*e.y+e.z*e.w),-1,1))):"XZY"===t?(this._x=Math.atan2(2*(e.x*e.w+e.y*e.z),s-i+o-a),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),s+i-o-a),this._z=Math.asin(n(2*(e.z*e.w-e.x*e.y),-1,1))):console.warn("THREE.Euler: .setFromQuaternion() given unsupported order: "+t),this._order=t,!1!==r&&this.onChangeCallback(),this},reorder:(c=new re.Quaternion,function(e){c.setFromEuler(this),this.setFromQuaternion(c,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new re.Euler(this._x,this._y,this._z,this._order)}},re.Line3=function(e,t){this.start=void 0!==e?e:new re.Vector3,this.end=void 0!==t?t:new re.Vector3},re.Line3.prototype={constructor:re.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){return(e||new re.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new re.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new re.Vector3;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(u=new re.Vector3,h=new re.Vector3,function(e,t){u.subVectors(e,this.start),h.subVectors(this.end,this.start);var r=h.dot(h),n=h.dot(u)/r;return t&&(n=re.Math.clamp(n,0,1)),n}),closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t),i=r||new re.Vector3;return this.delta(i).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new re.Line3).copy(this)}},re.Box2=function(e,t){this.min=void 0!==e?e:new re.Vector2(1/0,1/0),this.max=void 0!==t?t:new re.Vector2(-1/0,-1/0)},re.Box2.prototype={constructor:re.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new re.Vector2;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){return(e||new re.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new re.Vector2).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new re.Vector2).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new re.Vector2).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new re.Vector2;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new re.Box2).copy(this)}},re.Box3=function(e,t){this.min=void 0!==e?e:new re.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new re.Vector3(-1/0,-1/0,-1/0)},re.Box3.prototype={constructor:re.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new re.Vector3;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(){var e=new re.Vector3;return function(t){var r=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse((function(t){var n=t.geometry;if(void 0!==n)if(n instanceof re.Geometry)for(var i=n.vertices,o=0,a=i.length;o<a;o++)e.copy(i[o]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e);else if(n instanceof re.BufferGeometry&&void 0!==n.attributes.position){var s=n.attributes.position.array;for(o=0,a=s.length;o<a;o+=3)e.set(s[o],s[o+1],s[o+2]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e)}})),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){return(e||new re.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new re.Vector3).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new re.Vector3).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},clampPoint:function(e,t){return(t||new re.Vector3).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new re.Vector3;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new re.Vector3;return function(t){var r=t||new re.Sphere;return r.center=this.center(),r.radius=.5*this.size(e).length(),r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(f=[new re.Vector3,new re.Vector3,new re.Vector3,new re.Vector3,new re.Vector3,new re.Vector3,new re.Vector3,new re.Vector3],function(e){return f[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),f[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),f[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),f[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),f[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),f[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),f[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),f[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.makeEmpty(),this.setFromPoints(f),this}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new re.Box3).copy(this)}},re.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},re.Matrix3.prototype={constructor:re.Matrix3,set:function(e,t,r,n,i,o,a,s,l){var c=this.elements;return c[0]=e,c[3]=t,c[6]=r,c[1]=n,c[4]=i,c[7]=o,c[2]=a,c[5]=s,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new re.Vector3;return function(t,r,n){void 0===r&&(r=0),void 0===n&&(n=t.length);for(var i=0,o=r;i<n;i+=3,o+=3)e.x=t[o],e.y=t[o+1],e.z=t[o+2],e.applyMatrix3(this),t[o]=e.x,t[o+1]=e.y,t[o+2]=e.z;return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-r*i*c+r*a*s+n*i*l-n*o*s},getInverse:function(e,t){var r=e.elements,n=this.elements;n[0]=r[10]*r[5]-r[6]*r[9],n[1]=-r[10]*r[1]+r[2]*r[9],n[2]=r[6]*r[1]-r[2]*r[5],n[3]=-r[10]*r[4]+r[6]*r[8],n[4]=r[10]*r[0]-r[2]*r[8],n[5]=-r[6]*r[0]+r[2]*r[4],n[6]=r[9]*r[4]-r[5]*r[8],n[7]=-r[9]*r[0]+r[1]*r[8],n[8]=r[5]*r[0]-r[1]*r[4];var i=r[0]*n[0]+r[1]*n[3]+r[2]*n[6];if(0===i){var o="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(o);return console.warn(o),this.identity(),this}return this.multiplyScalar(1/i),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},clone:function(){return(new re.Matrix3).fromArray(this.elements)}},re.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},re.Matrix4.prototype={constructor:re.Matrix4,set:function(e,t,r,n,i,o,a,s,l,c,u,h,f,d,p,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=n,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractRotation:function(){var e=new re.Vector3;return function(t){var r=this.elements,n=t.elements,i=1/e.set(n[0],n[1],n[2]).length(),o=1/e.set(n[4],n[5],n[6]).length(),a=1/e.set(n[8],n[9],n[10]).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[8]=n[8]*a,r[9]=n[9]*a,r[10]=n[10]*a,this}}(),makeRotationFromEuler:function(e){e instanceof re.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,i=e.z,o=Math.cos(r),a=Math.sin(r),s=Math.cos(n),l=Math.sin(n),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){var h=o*c,f=o*u,d=a*c,p=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=f+d*l,t[5]=h-p*l,t[9]=-a*s,t[2]=p-h*l,t[6]=d+f*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,g=s*u,v=l*c,y=l*u;t[0]=m+y*a,t[4]=v*a-g,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=g*a-v,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*c,g=s*u,v=l*c,y=l*u;t[0]=m-y*a,t[4]=-o*u,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*c,t[9]=y-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){h=o*c,f=o*u,d=a*c,p=a*u;t[0]=s*c,t[4]=d*l-f,t[8]=h*l+p,t[1]=s*u,t[5]=p*l+h,t[9]=f*l-d,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var x=o*s,b=o*l,w=a*s,_=a*l;t[0]=s*c,t[4]=_-x*u,t[8]=w*u+b,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=b*u+w,t[10]=x-_*u}else if("XZY"===e.order){x=o*s,b=o*l,w=a*s,_=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=x*u+_,t[5]=o*c,t[9]=b*u-w,t[2]=w*u-b,t[6]=a*c,t[10]=_*u+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z,o=e.w,a=r+r,s=n+n,l=i+i,c=r*a,u=r*s,h=r*l,f=n*s,d=n*l,p=i*l,m=o*a,g=o*s,v=o*l;return t[0]=1-(f+p),t[4]=u-v,t[8]=h+g,t[1]=u+v,t[5]=1-(c+p),t[9]=d-m,t[2]=h-g,t[6]=d+m,t[10]=1-(c+f),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:(d=new re.Vector3,p=new re.Vector3,m=new re.Vector3,function(e,t,r){var n=this.elements;return m.subVectors(e,t).normalize(),0===m.length()&&(m.z=1),d.crossVectors(r,m).normalize(),0===d.length()&&(m.x+=1e-4,d.crossVectors(r,m).normalize()),p.crossVectors(m,d),n[0]=d.x,n[4]=p.x,n[8]=m.x,n[1]=d.y,n[5]=p.y,n[9]=m.y,n[2]=d.z,n[6]=p.z,n[10]=m.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[4],s=r[8],l=r[12],c=r[1],u=r[5],h=r[9],f=r[13],d=r[2],p=r[6],m=r[10],g=r[14],v=r[3],y=r[7],x=r[11],b=r[15],w=n[0],_=n[4],M=n[8],S=n[12],A=n[1],C=n[5],T=n[9],E=n[13],k=n[2],P=n[6],L=n[10],R=n[14],D=n[3],F=n[7],z=n[11],O=n[15];return i[0]=o*w+a*A+s*k+l*D,i[4]=o*_+a*C+s*P+l*F,i[8]=o*M+a*T+s*L+l*z,i[12]=o*S+a*E+s*R+l*O,i[1]=c*w+u*A+h*k+f*D,i[5]=c*_+u*C+h*P+f*F,i[9]=c*M+u*T+h*L+f*z,i[13]=c*S+u*E+h*R+f*O,i[2]=d*w+p*A+m*k+g*D,i[6]=d*_+p*C+m*P+g*F,i[10]=d*M+p*T+m*L+g*z,i[14]=d*S+p*E+m*R+g*O,i[3]=v*w+y*A+x*k+b*D,i[7]=v*_+y*C+x*P+b*F,i[11]=v*M+y*T+x*L+b*z,i[15]=v*S+y*E+x*R+b*O,this},multiplyToArray:function(e,t,r){var n=this.elements;return this.multiplyMatrices(e,t),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new re.Vector3;return function(t,r,n){void 0===r&&(r=0),void 0===n&&(n=t.length);for(var i=0,o=r;i<n;i+=3,o+=3)e.x=t[o],e.y=t[o+1],e.z=t[o+2],e.applyMatrix4(this),t[o]=e.x,t[o+1]=e.y,t[o+2]=e.z;return t}}(),rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],f=e[14];return e[3]*(+i*s*u-n*l*u-i*a*h+r*l*h+n*a*f-r*s*f)+e[7]*(+t*s*f-t*l*h+i*o*h-n*o*f+n*l*c-i*s*c)+e[11]*(+t*l*u-t*a*f-i*o*u+r*o*f+i*a*c-r*l*c)+e[15]*(-n*a*c-t*s*u+t*a*h+n*o*u-r*o*h+r*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e},getPosition:function(){var e=new re.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,n=e.elements,i=n[0],o=n[4],a=n[8],s=n[12],l=n[1],c=n[5],u=n[9],h=n[13],f=n[2],d=n[6],p=n[10],m=n[14],g=n[3],v=n[7],y=n[11],x=n[15];r[0]=u*m*v-h*p*v+h*d*y-c*m*y-u*d*x+c*p*x,r[4]=s*p*v-a*m*v-s*d*y+o*m*y+a*d*x-o*p*x,r[8]=a*h*v-s*u*v+s*c*y-o*h*y-a*c*x+o*u*x,r[12]=s*u*d-a*h*d-s*c*p+o*h*p+a*c*m-o*u*m,r[1]=h*p*g-u*m*g-h*f*y+l*m*y+u*f*x-l*p*x,r[5]=a*m*g-s*p*g+s*f*y-i*m*y-a*f*x+i*p*x,r[9]=s*u*g-a*h*g-s*l*y+i*h*y+a*l*x-i*u*x,r[13]=a*h*f-s*u*f+s*l*p-i*h*p-a*l*m+i*u*m,r[2]=c*m*g-h*d*g+h*f*v-l*m*v-c*f*x+l*d*x,r[6]=s*d*g-o*m*g-s*f*v+i*m*v+o*f*x-i*d*x,r[10]=o*h*g-s*c*g+s*l*v-i*h*v-o*l*x+i*c*x,r[14]=s*c*f-o*h*f-s*l*d+i*h*d+o*l*m-i*c*m,r[3]=u*d*g-c*p*g-u*f*v+l*p*v+c*f*y-l*d*y,r[7]=o*p*g-a*d*g+a*f*v-i*p*v-o*f*y+i*d*y,r[11]=a*c*g-o*u*g-a*l*v+i*u*v+o*l*y-i*c*y,r[15]=o*u*f-a*c*f+a*l*d-i*u*d-o*l*p+i*c*p;var b=i*r[0]+l*r[4]+f*r[8]+g*r[12];if(0==b){var w="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(w);return console.warn(w),this.identity(),this}return this.multiplyScalar(1/b),this},translate:function(e){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(e){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(e){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(e){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(e,t){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(r,n)))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=1-r,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+r,l*a-n*s,l*s+n*a,0,l*a+n*s,c*a+r,c*s-n*o,0,l*s-n*a,c*s+n*o,i*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},compose:function(e,t,r){return this.makeRotationFromQuaternion(t),this.scale(r),this.setPosition(e),this},decompose:function(){var e=new re.Vector3,t=new re.Matrix4;return function(r,n,i){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),r.x=o[12],r.y=o[13],r.z=o[14],t.elements.set(this.elements);var c=1/a,u=1/s,h=1/l;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=u,t.elements[5]*=u,t.elements[6]*=u,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,n.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=l,this}}(),makeFrustum:function(e,t,r,n,i,o){var a=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,r,n){var i=r*Math.tan(re.Math.degToRad(.5*e)),o=-i,a=o*t,s=i*t;return this.makeFrustum(a,s,o,i,r,n)},makeOrthographic:function(e,t,r,n,i,o){var a=this.elements,s=t-e,l=r-n,c=o-i,u=(t+e)/s,h=(r+n)/l,f=(o+i)/c;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2/l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2/c,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){return(new re.Matrix4).fromArray(this.elements)}},re.Ray=function(e,t){this.origin=void 0!==e?e:new re.Vector3,this.direction=void 0!==t?t:new re.Vector3},re.Ray.prototype={constructor:re.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new re.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new re.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new re.Vector3;r.subVectors(e,this.origin);var n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(){var e=new re.Vector3;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceTo(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceTo(t))}}(),distanceSqToSegment:function(e,t,r,n){var i,o,a,s,l=e.clone().add(t).multiplyScalar(.5),c=t.clone().sub(e).normalize(),u=.5*e.distanceTo(t),h=this.origin.clone().sub(l),f=-this.direction.dot(c),d=h.dot(this.direction),p=-h.dot(c),m=h.lengthSq(),g=Math.abs(1-f*f);if(g>=0)if(o=f*d-p,s=u*g,(i=f*p-d)>=0)if(o>=-s)if(o<=s){var v=1/g;a=(i*=v)*(i+f*(o*=v)+2*d)+o*(f*i+o+2*p)+m}else o=u,a=-(i=Math.max(0,-(f*o+d)))*i+o*(o+2*p)+m;else o=-u,a=-(i=Math.max(0,-(f*o+d)))*i+o*(o+2*p)+m;else o<=-s?a=-(i=Math.max(0,-(-f*u+d)))*i+(o=i>0?-u:Math.min(Math.max(-u,-p),u))*(o+2*p)+m:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-p),u))*(o+2*p)+m):a=-(i=Math.max(0,-(f*u+d)))*i+(o=i>0?u:Math.min(Math.max(-u,-p),u))*(o+2*p)+m;else o=f>0?-u:u,a=-(i=Math.max(0,-(f*o+d)))*i+o*(o+2*p)+m;return r&&r.copy(this.direction.clone().multiplyScalar(i).add(this.origin)),n&&n.copy(c.clone().multiplyScalar(o).add(l)),a},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:function(){var e=new re.Vector3;return function(t,r){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),i=e.dot(e)-n*n,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=n-a,l=n+a;return s<0&&l<0?null:s<0?this.at(l,r):this.at(s,r)}}(),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0==t)return 0==e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},isIntersectionBox:(b=new re.Vector3,function(e){return null!==this.intersectBox(e,b)}),intersectBox:function(e,t){var r,n,i,o,a,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(r=(e.min.x-h.x)*l,n=(e.max.x-h.x)*l):(r=(e.max.x-h.x)*l,n=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),r>o||i>n?null:((i>r||r!=r)&&(r=i),(o<n||n!=n)&&(n=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),r>s||a>n?null:((a>r||r!=r)&&(r=a),(s<n||n!=n)&&(n=s),n<0?null:this.at(r>=0?r:n,t)))},intersectTriangle:(g=new re.Vector3,v=new re.Vector3,y=new re.Vector3,x=new re.Vector3,function(e,t,r,n,i){v.subVectors(t,e),y.subVectors(r,e),x.crossVectors(v,y);var o,a=this.direction.dot(x);if(a>0){if(n)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}g.subVectors(this.origin,e);var s=o*this.direction.dot(y.crossVectors(g,y));if(s<0)return null;var l=o*this.direction.dot(v.cross(g));if(l<0)return null;if(s+l>a)return null;var c=-o*g.dot(x);return c<0?null:this.at(c/a,i)}),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new re.Ray).copy(this)}},re.Sphere=function(e,t){this.center=void 0!==e?e:new re.Vector3,this.radius=void 0!==t?t:0},re.Sphere.prototype={constructor:re.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(w=new re.Box3,function(e,t){var r=this.center;void 0!==t?r.copy(t):w.setFromPoints(e).center(r);for(var n=0,i=0,o=e.length;i<o;i++)n=Math.max(n,r.distanceToSquared(e[i]));return this.radius=Math.sqrt(n),this}),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),n=t||new re.Vector3;return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(e){var t=e||new re.Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new re.Sphere).copy(this)}},re.Frustum=function(e,t,r,n,i,o){this.planes=[void 0!==e?e:new re.Plane,void 0!==t?t:new re.Plane,void 0!==r?r:new re.Plane,void 0!==n?n:new re.Plane,void 0!==i?i:new re.Plane,void 0!==o?o:new re.Plane]},re.Frustum.prototype={constructor:re.Frustum,set:function(e,t,r,n,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(n),a[4].copy(i),a[5].copy(o),this},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],l=r[5],c=r[6],u=r[7],h=r[8],f=r[9],d=r[10],p=r[11],m=r[12],g=r[13],v=r[14],y=r[15];return t[0].setComponents(a-n,u-s,p-h,y-m).normalize(),t[1].setComponents(a+n,u+s,p+h,y+m).normalize(),t[2].setComponents(a+i,u+l,p+f,y+g).normalize(),t[3].setComponents(a-i,u-l,p-f,y-g).normalize(),t[4].setComponents(a-o,u-c,p-d,y-v).normalize(),t[5].setComponents(a+o,u+c,p+d,y+v).normalize(),this},intersectsObject:(S=new re.Sphere,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),S.copy(t.boundingSphere),S.applyMatrix4(e.matrixWorld),this.intersectsSphere(S)}),intersectsSphere:function(e){for(var t=this.planes,r=e.center,n=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(r)<n)return!1}return!0},intersectsBox:(_=new re.Vector3,M=new re.Vector3,function(e){for(var t=this.planes,r=0;r<6;r++){var n=t[r];_.x=n.normal.x>0?e.min.x:e.max.x,M.x=n.normal.x>0?e.max.x:e.min.x,_.y=n.normal.y>0?e.min.y:e.max.y,M.y=n.normal.y>0?e.max.y:e.min.y,_.z=n.normal.z>0?e.min.z:e.max.z,M.z=n.normal.z>0?e.max.z:e.min.z;var i=n.distanceToPoint(_),o=n.distanceToPoint(M);if(i<0&&o<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0},clone:function(){return(new re.Frustum).copy(this)}},re.Plane=function(e,t){this.normal=void 0!==e?e:new re.Vector3(1,0,0),this.constant=void 0!==t?t:0},re.Plane.prototype={constructor:re.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new re.Vector3,t=new re.Vector3;return function(r,n,i){var o=e.subVectors(i,n).cross(t.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,r),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var r=this.distanceToPoint(e);return(t||new re.Vector3).copy(this.normal).multiplyScalar(r)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectLine:function(){var e=new re.Vector3;return function(t,r){var n=r||new re.Vector3,i=t.delta(e),o=this.normal.dot(i);if(0==o)return 0==this.distanceToPoint(t.start)?n.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/o;return a<0||a>1?void 0:n.copy(i).multiplyScalar(a).add(t.start)}}(),coplanarPoint:function(e){return(e||new re.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new re.Vector3,t=new re.Vector3,r=new re.Matrix3;return function(n,i){var o=i||r.getNormalMatrix(n),a=e.copy(this.normal).applyMatrix3(o),s=this.coplanarPoint(t);return s.applyMatrix4(n),this.setFromNormalAndCoplanarPoint(a,s),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new re.Plane).copy(this)}},re.Math={generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),n=0;return function(){for(var i=0;i<36;i++)8==i||13==i||18==i||23==i?r[i]="-":14==i?r[i]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),e=15&n,n>>=4,r[i]=t[19==i?3&e|8:e]);return r.join("")}}(),clamp:function(e,t,r){return e<t?t:e>r?r:e},clampBottom:function(e,t){return e<t?t:e},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:(C=Math.PI/180,function(e){return e*C}),radToDeg:(A=180/Math.PI,function(e){return e*A}),isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e}},re.Spline=function(e){this.points=e;var t,r,n,i,o,a,s,l,c,u=[],h={x:0,y:0,z:0};function f(e,t,r,n,i,o,a){var s=.5*(r-e),l=.5*(n-t);return(2*(t-r)+s+l)*a+(-3*(t-r)-2*s-l)*o+s*i+t}this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return t=(this.points.length-1)*e,r=Math.floor(t),n=t-r,u[0]=0===r?r:r-1,u[1]=r,u[2]=r>this.points.length-2?this.points.length-1:r+1,u[3]=r>this.points.length-3?this.points.length-1:r+2,a=this.points[u[0]],s=this.points[u[1]],l=this.points[u[2]],c=this.points[u[3]],o=n*(i=n*n),h.x=f(a.x,s.x,l.x,c.x,n,i,o),h.y=f(a.y,s.y,l.y,c.y,n,i,o),h.z=f(a.z,s.z,l.z,c.z,n,i,o),h},this.getControlPointsArray=function(){var e,t,r=this.points.length,n=[];for(e=0;e<r;e++)t=this.points[e],n[e]=[t.x,t.y,t.z];return n},this.getLength=function(e){var t,r,n,i,o=0,a=0,s=0,l=new re.Vector3,c=new re.Vector3,u=[],h=0;for(u[0]=0,e||(e=100),n=this.points.length*e,l.copy(this.points[0]),t=1;t<n;t++)r=t/n,i=this.getPoint(r),c.copy(i),h+=c.distanceTo(l),l.copy(i),o=(this.points.length-1)*r,(a=Math.floor(o))!=s&&(u[a]=h,s=a);return u[u.length]=h,{chunks:u,total:h}},this.reparametrizeByArcLength=function(e){var t,r,n,i,o,a,s,l,c=[],u=new re.Vector3,h=this.getLength();for(c.push(u.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(a=h.chunks[t]-h.chunks[t-1],s=Math.ceil(e*a/h.total),i=(t-1)/(this.points.length-1),o=t/(this.points.length-1),r=1;r<s-1;r++)n=i+r*(1/s)*(o-i),l=this.getPoint(n),c.push(u.copy(l).clone());c.push(u.copy(this.points[t]).clone())}this.points=c}},re.Triangle=function(e,t,r){this.a=void 0!==e?e:new re.Vector3,this.b=void 0!==t?t:new re.Vector3,this.c=void 0!==r?r:new re.Vector3},re.Triangle.normal=(T=new re.Vector3,function(e,t,r,n){var i=n||new re.Vector3;i.subVectors(r,t),T.subVectors(e,t),i.cross(T);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}),re.Triangle.barycoordFromPoint=function(){var e=new re.Vector3,t=new re.Vector3,r=new re.Vector3;return function(n,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),r.subVectors(n,i);var l=e.dot(e),c=e.dot(t),u=e.dot(r),h=t.dot(t),f=t.dot(r),d=l*h-c*c,p=s||new re.Vector3;if(0==d)return p.set(-2,-1,-1);var m=1/d,g=(h*u-c*f)*m,v=(l*f-c*u)*m;return p.set(1-g-v,v,g)}}(),re.Triangle.containsPoint=function(){var e=new re.Vector3;return function(t,r,n,i){var o=re.Triangle.barycoordFromPoint(t,r,n,i,e);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),re.Triangle.prototype={constructor:re.Triangle,set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new re.Vector3,t=new re.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new re.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return re.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new re.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return re.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return re.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new re.Triangle).copy(this)}},re.Clock=function(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},re.Clock.prototype={constructor:re.Clock,start:function(){this.startTime=void 0!==te.performance&&void 0!==te.performance.now?te.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=void 0!==te.performance&&void 0!==te.performance.now?te.performance.now():Date.now();e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e}},re.EventDispatcher=function(){},re.EventDispatcher.prototype={constructor:re.EventDispatcher,apply:function(e){e.addEventListener=re.EventDispatcher.prototype.addEventListener,e.hasEventListener=re.EventDispatcher.prototype.hasEventListener,e.removeEventListener=re.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=re.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners[e];if(void 0!==r){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var r=[],n=t.length,i=0;i<n;i++)r[i]=t[i];for(i=0;i<n;i++)r[i].call(this,e)}}}},function(e){e.Raycaster=function(t,r,n,i){this.ray=new e.Ray(t,r),this.near=n||0,this.far=i||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var t=function(e,t){return e.distance-t.distance},r=function(e,t,n,i){if(e.raycast(t,n),!0===i)for(var o=e.children,a=0,s=o.length;a<s;a++)r(o[a],t,n,!0)};e.Raycaster.prototype={constructor:e.Raycaster,precision:1e-4,linePrecision:1,set:function(e,t){this.ray.set(e,t)},intersectObject:function(e,n){var i=[];return r(e,this,i,n),i.sort(t),i},intersectObjects:function(e,n){var i=[];if(e instanceof Array==!1)return console.log("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var o=0,a=e.length;o<a;o++)r(e[o],this,i,n);return i.sort(t),i}}}(re),re.Object3D=function(){Object.defineProperty(this,"id",{value:re.Object3DIdCount++}),this.uuid=re.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=re.Object3D.DefaultUp.clone();var e=new re.Vector3,t=new re.Euler,r=new re.Quaternion,n=new re.Vector3(1,1,1);t.onChange((function(){r.setFromEuler(t,!1)})),r.onChange((function(){t.setFromQuaternion(r,void 0,!1)})),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:n}}),this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new re.Matrix4,this.matrixWorld=new re.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.userData={}},re.Object3D.DefaultUp=new re.Vector3(0,1,0),re.Object3D.prototype={constructor:re.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(e){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=e},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(L=new re.Quaternion,function(e,t){return L.setFromAxisAngle(e,t),this.quaternion.multiply(L),this}),rotateX:function(){var e=new re.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new re.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new re.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new re.Vector3;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},translateX:function(){var e=new re.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new re.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new re.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(P=new re.Matrix4,function(e){return e.applyMatrix4(P.getInverse(this.matrixWorld))}),lookAt:function(){var e=new re.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add:",e,"can't be added as a child of itself."),this):(e instanceof re.Object3D?(void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add:",e,"is not an instance of THREE.Object3D."),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var r=this.children.indexOf(e);-1!==r&&(e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(r,1))},getChildByName:function(e,t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e,t)},getObjectById:function(e,t){if(this.id===e)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r].getObjectById(e,t);if(void 0!==i)return i}},getObjectByName:function(e,t){if(this.name===e)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r].getObjectByName(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){var t=e||new re.Vector3;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(E=new re.Vector3,k=new re.Vector3,function(e){var t=e||new re.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(E,t,k),t}),getWorldRotation:function(){var e=new re.Quaternion;return function(t){var r=t||new re.Euler;return this.getWorldQuaternion(e),r.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new re.Vector3,t=new re.Quaternion;return function(r){var n=r||new re.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new re.Quaternion;return function(t){var r=t||new re.Vector3;return this.getWorldQuaternion(e),r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=0,r=this.children.length;t<r;t++)this.children[t].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=0,r=this.children.length;t<r;t++)this.children[t].traverseVisible(e)}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,r=this.children.length;t<r;t++)this.children[t].updateMatrixWorld(e)},toJSON:function(){var e={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},t={},r=function(r){if(void 0===e.geometries&&(e.geometries=[]),void 0===t[r.uuid]){var n=r.toJSON();delete n.metadata,t[r.uuid]=n,e.geometries.push(n)}return r.uuid},n={},i=function(t){if(void 0===e.materials&&(e.materials=[]),void 0===n[t.uuid]){var r=t.toJSON();delete r.metadata,n[t.uuid]=r,e.materials.push(r)}return t.uuid},o=function(e){var t={};if(t.uuid=e.uuid,t.type=e.type,""!==e.name&&(t.name=e.name),"{}"!==JSON.stringify(e.userData)&&(t.userData=e.userData),!0!==e.visible&&(t.visible=e.visible),e instanceof re.PerspectiveCamera?(t.fov=e.fov,t.aspect=e.aspect,t.near=e.near,t.far=e.far):e instanceof re.OrthographicCamera?(t.left=e.left,t.right=e.right,t.top=e.top,t.bottom=e.bottom,t.near=e.near,t.far=e.far):e instanceof re.AmbientLight?t.color=e.color.getHex():e instanceof re.DirectionalLight?(t.color=e.color.getHex(),t.intensity=e.intensity):e instanceof re.PointLight?(t.color=e.color.getHex(),t.intensity=e.intensity,t.distance=e.distance):e instanceof re.SpotLight?(t.color=e.color.getHex(),t.intensity=e.intensity,t.distance=e.distance,t.angle=e.angle,t.exponent=e.exponent):e instanceof re.HemisphereLight?(t.color=e.color.getHex(),t.groundColor=e.groundColor.getHex()):e instanceof re.Mesh||e instanceof re.Line?(t.geometry=r(e.geometry),t.material=i(e.material)):e instanceof re.Sprite&&(t.material=i(e.material)),t.matrix=e.matrix.toArray(),e.children.length>0){t.children=[];for(var n=0;n<e.children.length;n++)t.children.push(o(e.children[n]))}return t};return e.object=o(this),e},clone:function(e,t){if(void 0===e&&(e=new re.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.renderDepth=this.renderDepth,e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),!0===t)for(var r=0;r<this.children.length;r++){var n=this.children[r];e.add(n.clone())}return e}},re.EventDispatcher.prototype.apply(re.Object3D.prototype),re.Object3DIdCount=0,re.Projector=function(){console.warn("THREE.Projector has been moved to /examples/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() has been removed.")}},re.Face3=function(e,t,r,n,i,o){this.a=e,this.b=t,this.c=r,this.normal=n instanceof re.Vector3?n:new re.Vector3,this.vertexNormals=n instanceof Array?n:[],this.color=i instanceof re.Color?i:new re.Color,this.vertexColors=i instanceof Array?i:[],this.vertexTangents=[],this.materialIndex=void 0!==o?o:0},re.Face3.prototype={constructor:re.Face3,clone:function(){var e=new re.Face3(this.a,this.b,this.c);e.normal.copy(this.normal),e.color.copy(this.color),e.materialIndex=this.materialIndex;for(var t=0,r=this.vertexNormals.length;t<r;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();for(t=0,r=this.vertexColors.length;t<r;t++)e.vertexColors[t]=this.vertexColors[t].clone();for(t=0,r=this.vertexTangents.length;t<r;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},re.Face4=function(e,t,r,n,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new re.Face3(e,t,r,i,o,a)},re.BufferAttribute=function(e,t){this.array=e,this.itemSize=t,this.needsUpdate=!1},re.BufferAttribute.prototype={constructor:re.BufferAttribute,get length(){return this.array.length},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n]},set:function(e){return this.array.set(e),this},setX:function(e,t){return this.array[e*this.itemSize]=t,this},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=r,this.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this},clone:function(){return new re.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},re.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new re.BufferAttribute(e,t)},re.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new re.BufferAttribute(e,t)},re.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new re.BufferAttribute(e,t)},re.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new re.BufferAttribute(e,t)},re.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new re.BufferAttribute(e,t)},re.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new re.BufferAttribute(e,t)},re.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new re.BufferAttribute(e,t)},re.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new re.BufferAttribute(e,t)},re.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new re.BufferAttribute(e,t)},re.BufferGeometry=function(){Object.defineProperty(this,"id",{value:re.GeometryIdCount++}),this.uuid=re.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.drawcalls=[],this.offsets=this.drawcalls,this.boundingBox=null,this.boundingSphere=null},re.BufferGeometry.prototype={constructor:re.BufferGeometry,addAttribute:function(e,t){if(t instanceof re.BufferAttribute==!1)return console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void(this.attributes[e]={array:arguments[1],itemSize:arguments[2]});this.attributes[e]=t,this.attributesKeys=Object.keys(this.attributes)},getAttribute:function(e){return this.attributes[e]},addDrawCall:function(e,t,r){this.drawcalls.push({start:e,count:t,index:void 0!==r?r:0})},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0);var r=this.attributes.normal;void 0!==r&&((new re.Matrix3).getNormalMatrix(e).applyToVector3Array(r.array),r.needsUpdate=!0)},center:function(){},fromGeometry:function(e,t){t=t||{vertexColors:re.NoColors};var r=e.vertices,n=e.faces,i=e.faceVertexUvs,o=t.vertexColors,a=i[0].length>0,s=3==n[0].vertexNormals.length,l=new Float32Array(3*n.length*3);this.addAttribute("position",new re.BufferAttribute(l,3));var c=new Float32Array(3*n.length*3);if(this.addAttribute("normal",new re.BufferAttribute(c,3)),o!==re.NoColors){var u=new Float32Array(3*n.length*3);this.addAttribute("color",new re.BufferAttribute(u,3))}if(!0===a){var h=new Float32Array(3*n.length*2);this.addAttribute("uv",new re.BufferAttribute(h,2))}for(var f=0,d=0,p=0;f<n.length;f++,d+=6,p+=9){var m=n[f],g=r[m.a],v=r[m.b],y=r[m.c];if(l[p]=g.x,l[p+1]=g.y,l[p+2]=g.z,l[p+3]=v.x,l[p+4]=v.y,l[p+5]=v.z,l[p+6]=y.x,l[p+7]=y.y,l[p+8]=y.z,!0===s){var x=m.vertexNormals[0],b=m.vertexNormals[1],w=m.vertexNormals[2];c[p]=x.x,c[p+1]=x.y,c[p+2]=x.z,c[p+3]=b.x,c[p+4]=b.y,c[p+5]=b.z,c[p+6]=w.x,c[p+7]=w.y,c[p+8]=w.z}else{var _=m.normal;c[p]=_.x,c[p+1]=_.y,c[p+2]=_.z,c[p+3]=_.x,c[p+4]=_.y,c[p+5]=_.z,c[p+6]=_.x,c[p+7]=_.y,c[p+8]=_.z}if(o===re.FaceColors){var M=m.color;u[p]=M.r,u[p+1]=M.g,u[p+2]=M.b,u[p+3]=M.r,u[p+4]=M.g,u[p+5]=M.b,u[p+6]=M.r,u[p+7]=M.g,u[p+8]=M.b}else if(o===re.VertexColors){var S=m.vertexColors[0],A=m.vertexColors[1],C=m.vertexColors[2];u[p]=S.r,u[p+1]=S.g,u[p+2]=S.b,u[p+3]=A.r,u[p+4]=A.g,u[p+5]=A.b,u[p+6]=C.r,u[p+7]=C.g,u[p+8]=C.b}if(!0===a){var T=i[0][f][0],E=i[0][f][1],k=i[0][f][2];h[d]=T.x,h[d+1]=T.y,h[d+2]=E.x,h[d+3]=E.y,h[d+4]=k.x,h[d+5]=k.y}}return this.computeBoundingSphere(),this},computeBoundingBox:(R=new re.Vector3,function(){null===this.boundingBox&&(this.boundingBox=new re.Box3);var e=this.attributes.position.array;if(e){var t=this.boundingBox;t.makeEmpty();for(var r=0,n=e.length;r<n;r+=3)R.set(e[r],e[r+1],e[r+2]),t.expandByPoint(R)}void 0!==e&&0!==e.length||(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}),computeBoundingSphere:function(){var e=new re.Box3,t=new re.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new re.Sphere);var r=this.attributes.position.array;if(r){e.makeEmpty();for(var n=this.boundingSphere.center,i=0,o=r.length;i<o;i+=3)t.set(r[i],r[i+1],r[i+2]),e.expandByPoint(t);e.center(n);var a=0;for(i=0,o=r.length;i<o;i+=3)t.set(r[i],r[i+1],r[i+2]),a=Math.max(a,n.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.attributes;if(e.position){var t=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new re.BufferAttribute(new Float32Array(t.length),3));else for(var r=0,n=(s=e.normal.array).length;r<n;r++)s[r]=0;var i,o,a,s=e.normal.array,l=new re.Vector3,c=new re.Vector3,u=new re.Vector3,h=new re.Vector3,f=new re.Vector3;if(e.index)for(var d=e.index.array,p=this.offsets.length>0?this.offsets:[{start:0,count:d.length,index:0}],m=0,g=p.length;m<g;++m){var v=p[m].start,y=p[m].count,x=p[m].index;for(r=v,n=v+y;r<n;r+=3)i=3*(x+d[r]),o=3*(x+d[r+1]),a=3*(x+d[r+2]),l.fromArray(t,i),c.fromArray(t,o),u.fromArray(t,a),h.subVectors(u,c),f.subVectors(l,c),h.cross(f),s[i]+=h.x,s[i+1]+=h.y,s[i+2]+=h.z,s[o]+=h.x,s[o+1]+=h.y,s[o+2]+=h.z,s[a]+=h.x,s[a+1]+=h.y,s[a+2]+=h.z}else for(r=0,n=t.length;r<n;r+=9)l.fromArray(t,r),c.fromArray(t,r+3),u.fromArray(t,r+6),h.subVectors(u,c),f.subVectors(l,c),h.cross(f),s[r]=h.x,s[r+1]=h.y,s[r+2]=h.z,s[r+3]=h.x,s[r+4]=h.y,s[r+5]=h.z,s[r+6]=h.x,s[r+7]=h.y,s[r+8]=h.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},computeTangents:function(){if(void 0!==this.attributes.index&&void 0!==this.attributes.position&&void 0!==this.attributes.normal&&void 0!==this.attributes.uv){var e=this.attributes.index.array,t=this.attributes.position.array,r=this.attributes.normal.array,n=this.attributes.uv.array,i=t.length/3;void 0===this.attributes.tangent&&this.addAttribute("tangent",new re.BufferAttribute(new Float32Array(4*i),4));for(var o=this.attributes.tangent.array,a=[],s=[],l=0;l<i;l++)a[l]=new re.Vector3,s[l]=new re.Vector3;var c,u,h,f,d,p,m,g,v,y,x,b,w,_,M,S,A,C,T=new re.Vector3,E=new re.Vector3,k=new re.Vector3,P=new re.Vector2,L=new re.Vector2,R=new re.Vector2,D=new re.Vector3,F=new re.Vector3;0===this.drawcalls.length&&this.addDrawCall(0,e.length,0);var z,O,B,I=this.drawcalls;for(_=0,M=I.length;_<M;++_){var N=I[_].start,U=I[_].count,V=I[_].index;for(b=N,w=N+U;b<w;b+=3)S=V+e[b],A=V+e[b+1],C=V+e[b+2],z=S,O=A,B=C,T.fromArray(t,3*z),E.fromArray(t,3*O),k.fromArray(t,3*B),P.fromArray(n,2*z),L.fromArray(n,2*O),R.fromArray(n,2*B),c=E.x-T.x,u=k.x-T.x,h=E.y-T.y,f=k.y-T.y,d=E.z-T.z,p=k.z-T.z,m=L.x-P.x,g=R.x-P.x,v=L.y-P.y,y=R.y-P.y,x=1/(m*y-g*v),D.set((y*c-v*u)*x,(y*h-v*f)*x,(y*d-v*p)*x),F.set((m*u-g*c)*x,(m*f-g*h)*x,(m*p-g*d)*x),a[z].add(D),a[O].add(D),a[B].add(D),s[z].add(F),s[O].add(F),s[B].add(F)}var H,G,j,W=new re.Vector3,Q=new re.Vector3,X=new re.Vector3,q=new re.Vector3;for(_=0,M=I.length;_<M;++_){N=I[_].start,U=I[_].count,V=I[_].index;for(b=N,w=N+U;b<w;b+=3)S=V+e[b],A=V+e[b+1],C=V+e[b+2],Y(S),Y(A),Y(C)}}else console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function Y(e){X.fromArray(r,3*e),q.copy(X),G=a[e],W.copy(G),W.sub(X.multiplyScalar(X.dot(G))).normalize(),Q.crossVectors(q,G),j=Q.dot(s[e]),H=j<0?-1:1,o[4*e]=W.x,o[4*e+1]=W.y,o[4*e+2]=W.z,o[4*e+3]=H}},computeOffsets:function(e){var t=e;void 0===e&&(t=65535);Date.now();for(var r=this.attributes.index.array,n=this.attributes.position.array,i=(n.length,r.length/3),o=new Uint16Array(r.length),a=0,s=0,l=[{start:0,count:0,index:0}],c=l[0],u=0,h=new Int32Array(6),f=new Int32Array(n.length),d=new Int32Array(n.length),p=0;p<n.length;p++)f[p]=-1,d[p]=-1;for(var m=0;m<i;m++){u=0;for(var g=0;g<3;g++){-1==f[b=r[3*m+g]]?(h[2*g]=b,h[2*g+1]=-1,u++):f[b]<c.index?(h[2*g]=b,h[2*g+1]=-1):(h[2*g]=b,h[2*g+1]=f[b])}if(s+u>c.index+t){var v={start:a,count:0,index:s};l.push(v),c=v;for(var y=0;y<6;y+=2){(x=h[y+1])>-1&&x<c.index&&(h[y+1]=-1)}}for(y=0;y<6;y+=2){var x,b=h[y];-1===(x=h[y+1])&&(x=s++),f[b]=x,d[x]=b,o[a++]=x-c.index,c.count++}}return this.reorderBuffers(o,d,s),this.offsets=l,l},merge:function(){console.log("BufferGeometry.merge(): TODO")},normalizeNormals:function(){for(var e,t,r,n,i=this.attributes.normal.array,o=0,a=i.length;o<a;o+=3)e=i[o],t=i[o+1],r=i[o+2],n=1/Math.sqrt(e*e+t*t+r*r),i[o]*=n,i[o+1]*=n,i[o+2]*=n},reorderBuffers:function(e,t,r){var n={};for(var i in this.attributes)if("index"!=i){var o=this.attributes[i].array;n[i]=new o.constructor(this.attributes[i].itemSize*r)}for(var a=0;a<r;a++){var s=t[a];for(var i in this.attributes)if("index"!=i)for(var l=this.attributes[i].array,c=this.attributes[i].itemSize,u=n[i],h=0;h<c;h++)u[a*c+h]=l[s*c+h]}for(var i in this.attributes.index.array=e,this.attributes)"index"!=i&&(this.attributes[i].array=n[i],this.attributes[i].numItems=this.attributes[i].itemSize*r)},toJSON:function(){var e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},t=this.attributes,r=this.offsets,n=this.boundingSphere;for(var i in t){for(var o=t[i],a=[],s=o.array,l=0,c=s.length;l<c;l++)a[l]=s[l];e.data.attributes[i]={itemSize:o.itemSize,type:o.array.constructor.name,array:a}}return r.length>0&&(e.data.offsets=JSON.parse(JSON.stringify(r))),null!==n&&(e.data.boundingSphere={center:n.center.toArray(),radius:n.radius}),e},clone:function(){var e=new re.BufferGeometry;for(var t in this.attributes){var r=this.attributes[t];e.addAttribute(t,r.clone())}for(var n=0,i=this.offsets.length;n<i;n++){var o=this.offsets[n];e.offsets.push({start:o.start,index:o.index,count:o.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},re.EventDispatcher.prototype.apply(re.BufferGeometry.prototype),re.Geometry=function(){Object.defineProperty(this,"id",{value:re.GeometryIdCount++}),this.uuid=re.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},re.Geometry.prototype={constructor:re.Geometry,applyMatrix:function(e){for(var t=(new re.Matrix3).getNormalMatrix(e),r=0,n=this.vertices.length;r<n;r++){this.vertices[r].applyMatrix4(e)}for(r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}this.boundingBox instanceof re.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof re.Sphere&&this.computeBoundingSphere()},fromBufferGeometry:function(e){for(var t=this,r=e.attributes,n=r.position.array,i=void 0!==r.index?r.index.array:void 0,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,l=[],c=[],u=0,h=0;u<n.length;u+=3,h+=2)t.vertices.push(new re.Vector3(n[u],n[u+1],n[u+2])),void 0!==o&&l.push(new re.Vector3(o[u],o[u+1],o[u+2])),void 0!==a&&t.colors.push(new re.Color(a[u],a[u+1],a[u+2])),void 0!==s&&c.push(new re.Vector2(s[h],s[h+1]));var f=function(e,r,n){var i=void 0!==o?[l[e].clone(),l[r].clone(),l[n].clone()]:[],s=void 0!==a?[t.colors[e].clone(),t.colors[r].clone(),t.colors[n].clone()]:[];t.faces.push(new re.Face3(e,r,n,i,s)),t.faceVertexUvs[0].push([c[e],c[r],c[n]])};if(void 0!==i)for(u=0;u<i.length;u+=3)f(i[u],i[u+1],i[u+2]);else for(u=0;u<n.length/3;u+=3)f(u,u+1,u+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=new re.Vector3;return e.addVectors(this.boundingBox.min,this.boundingBox.max),e.multiplyScalar(-.5),this.applyMatrix((new re.Matrix4).makeTranslation(e.x,e.y,e.z)),this.computeBoundingBox(),e},computeFaceNormals:function(){for(var e=new re.Vector3,t=new re.Vector3,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,r,n,i,o,a;for(a=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)a[t]=new re.Vector3;if(e){var s,l,c,u=new re.Vector3,h=new re.Vector3;new re.Vector3,new re.Vector3,new re.Vector3;for(n=0,i=this.faces.length;n<i;n++)o=this.faces[n],s=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c],u.subVectors(c,l),h.subVectors(s,l),u.cross(h),a[o.a].add(u),a[o.b].add(u),a[o.c].add(u)}else for(n=0,i=this.faces.length;n<i;n++)a[(o=this.faces[n]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,r=this.vertices.length;t<r;t++)a[t].normalize();for(n=0,i=this.faces.length;n<i;n++)(o=this.faces[n]).vertexNormals[0]=a[o.a].clone(),o.vertexNormals[1]=a[o.b].clone(),o.vertexNormals[2]=a[o.c].clone()},computeMorphNormals:function(){var e,t,r,n,i;for(r=0,n=this.faces.length;r<n;r++)for((i=this.faces[r]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new re.Geometry;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(r=0,n=this.faces.length;r<n;r++)l=new re.Vector3,c={a:new re.Vector3,b:new re.Vector3,c:new re.Vector3},a.push(l),s.push(c)}var l,c,u=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),r=0,n=this.faces.length;r<n;r++)i=this.faces[r],l=u.faceNormals[r],c=u.vertexNormals[r],l.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)(i=this.faces[r]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeTangents:function(){var e,t,r,n,i,o,a,s,l,c,u,h,f,d,p,m,g,v,y,x,b,w,_,M,S,A,C,T,E,k,P,L,R,D,F=[],z=[],O=new re.Vector3,B=new re.Vector3,I=new re.Vector3,N=new re.Vector3,U=new re.Vector3;for(r=0,n=this.vertices.length;r<n;r++)F[r]=new re.Vector3,z[r]=new re.Vector3;for(e=0,t=this.faces.length;e<t;e++)a=this.faces[e],s=this.faceVertexUvs[0][e],T=this,E=a.a,k=a.b,P=a.c,L=0,R=1,D=2,l=T.vertices[E],c=T.vertices[k],u=T.vertices[P],h=s[L],f=s[R],d=s[D],p=c.x-l.x,m=u.x-l.x,g=c.y-l.y,v=u.y-l.y,y=c.z-l.z,x=u.z-l.z,b=f.x-h.x,w=d.x-h.x,_=f.y-h.y,M=d.y-h.y,S=1/(b*M-w*_),O.set((M*p-_*m)*S,(M*g-_*v)*S,(M*y-_*x)*S),B.set((b*m-w*p)*S,(b*v-w*g)*S,(b*x-w*y)*S),F[E].add(O),F[k].add(O),F[P].add(O),z[E].add(B),z[k].add(B),z[P].add(B);var V=["a","b","c","d"];for(e=0,t=this.faces.length;e<t;e++)for(a=this.faces[e],i=0;i<Math.min(a.vertexNormals.length,3);i++)U.copy(a.vertexNormals[i]),o=a[V[i]],A=F[o],I.copy(A),I.sub(U.multiplyScalar(U.dot(A))).normalize(),N.crossVectors(a.vertexNormals[i],A),C=N.dot(z[o])<0?-1:1,a.vertexTangents[i]=new re.Vector4(I.x,I.y,I.z,C);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,r=0,n=t.length;r<n;r++)r>0&&(e+=t[r].distanceTo(t[r-1])),this.lineDistances[r]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new re.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new re.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(e instanceof re.Geometry!=!1){var n,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,c=this.faceVertexUvs[0],u=e.faceVertexUvs[0];void 0===r&&(r=0),void 0!==t&&(n=(new re.Matrix3).getNormalMatrix(t));for(var h=0,f=a.length;h<f;h++){var d=a[h].clone();void 0!==t&&d.applyMatrix4(t),o.push(d)}for(h=0,f=l.length;h<f;h++){var p,m,g,v=l[h],y=v.vertexNormals,x=v.vertexColors;(p=new re.Face3(v.a+i,v.b+i,v.c+i)).normal.copy(v.normal),void 0!==n&&p.normal.applyMatrix3(n).normalize();for(var b=0,w=y.length;b<w;b++)m=y[b].clone(),void 0!==n&&m.applyMatrix3(n).normalize(),p.vertexNormals.push(m);p.color.copy(v.color);for(b=0,w=x.length;b<w;b++)g=x[b],p.vertexColors.push(g.clone());p.materialIndex=v.materialIndex+r,s.push(p)}for(h=0,f=u.length;h<f;h++){var _=u[h],M=[];if(void 0!==_){for(b=0,w=_.length;b<w;b++)M.push(new re.Vector2(_[b].x,_[b].y));c.push(M)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeVertices:function(){var e,t,r,n,i,o,a,s,l={},c=[],u=[],h=Math.pow(10,4);for(r=0,n=this.vertices.length;r<n;r++)e=this.vertices[r],void 0===l[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(l[t]=r,c.push(this.vertices[r]),u[r]=c.length-1):u[r]=u[l[t]];var f=[];for(r=0,n=this.faces.length;r<n;r++){(i=this.faces[r]).a=u[i.a],i.b=u[i.b],i.c=u[i.c],o=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(o[d]==o[(d+1)%3]){d,f.push(r);break}}for(r=f.length-1;r>=0;r--){var p=f[r];for(this.faces.splice(p,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},toJSON:function(){var e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};if(""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}for(var n=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];n.push(o.x,o.y,o.z)}var a=[],s=[],l={},c=[],u={},h=[],f={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,g=d.vertexNormals.length>0,v=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,x=0;if(x=M(x,0,0),x=M(x,1,!1),x=M(x,2,!1),x=M(x,3,p),x=M(x,4,m),x=M(x,5,g),x=M(x,6,v),x=M(x,7,y),a.push(x),a.push(d.a,d.b,d.c),p){var b=this.faceVertexUvs[0][i];a.push(C(b[0]),C(b[1]),C(b[2]))}if(m&&a.push(S(d.normal)),g){var w=d.vertexNormals;a.push(S(w[0]),S(w[1]),S(w[2]))}if(v&&a.push(A(d.color)),y){var _=d.vertexColors;a.push(A(_[0]),A(_[1]),A(_[2]))}}function M(e,t,r){return r?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=s.length/3,s.push(e.x,e.y,e.z)),l[t]}function A(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]||(u[t]=c.length,c.push(e.getHex())),u[t]}function C(e){var t=e.x.toString()+e.y.toString();return void 0!==f[t]||(f[t]=h.length/2,h.push(e.x,e.y)),f[t]}return e.data={},e.data.vertices=n,e.data.normals=s,c.length>0&&(e.data.colors=c),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){for(var e=new re.Geometry,t=this.vertices,r=0,n=t.length;r<n;r++)e.vertices.push(t[r].clone());var i=this.faces;for(r=0,n=i.length;r<n;r++)e.faces.push(i[r].clone());var o=this.faceVertexUvs[0];for(r=0,n=o.length;r<n;r++){for(var a=o[r],s=[],l=0,c=a.length;l<c;l++)s.push(new re.Vector2(a[l].x,a[l].y));e.faceVertexUvs[0].push(s)}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},re.EventDispatcher.prototype.apply(re.Geometry.prototype),re.GeometryIdCount=0,re.Camera=function(){re.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new re.Matrix4,this.projectionMatrix=new re.Matrix4},re.Camera.prototype=Object.create(re.Object3D.prototype),re.Camera.prototype.getWorldDirection=function(){var e=new re.Quaternion;return function(t){var r=t||new re.Vector3;return this.getWorldQuaternion(e),r.set(0,0,-1).applyQuaternion(e)}}(),re.Camera.prototype.lookAt=function(){var e=new re.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),re.Camera.prototype.clone=function(e){return void 0===e&&(e=new re.Camera),re.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e},re.CubeCamera=function(e,t,r){re.Object3D.call(this),this.type="CubeCamera";var n=new re.PerspectiveCamera(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new re.Vector3(1,0,0)),this.add(n);var i=new re.PerspectiveCamera(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new re.Vector3(-1,0,0)),this.add(i);var o=new re.PerspectiveCamera(90,1,e,t);o.up.set(0,0,1),o.lookAt(new re.Vector3(0,1,0)),this.add(o);var a=new re.PerspectiveCamera(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new re.Vector3(0,-1,0)),this.add(a);var s=new re.PerspectiveCamera(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new re.Vector3(0,0,1)),this.add(s);var l=new re.PerspectiveCamera(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new re.Vector3(0,0,-1)),this.add(l),this.renderTarget=new re.WebGLRenderTargetCube(r,r,{format:re.RGBFormat,magFilter:re.LinearFilter,minFilter:re.LinearFilter}),this.updateCubeMap=function(e,t){var r=this.renderTarget,c=r.generateMipmaps;r.generateMipmaps=!1,r.activeCubeFace=0,e.render(t,n,r),r.activeCubeFace=1,e.render(t,i,r),r.activeCubeFace=2,e.render(t,o,r),r.activeCubeFace=3,e.render(t,a,r),r.activeCubeFace=4,e.render(t,s,r),r.generateMipmaps=c,r.activeCubeFace=5,e.render(t,l,r)}},re.CubeCamera.prototype=Object.create(re.Object3D.prototype),re.OrthographicCamera=function(e,t,r,n,i,o){re.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=e,this.right=t,this.top=r,this.bottom=n,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()},re.OrthographicCamera.prototype=Object.create(re.Camera.prototype),re.OrthographicCamera.prototype.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(r-e,r+e,n+t,n-t,this.near,this.far)},re.OrthographicCamera.prototype.clone=function(){var e=new re.OrthographicCamera;return re.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},re.PerspectiveCamera=function(e,t,r,n){re.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.updateProjectionMatrix()},re.PerspectiveCamera.prototype=Object.create(re.Camera.prototype),re.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*re.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},re.PerspectiveCamera.prototype.setViewOffset=function(e,t,r,n,i,o){this.fullWidth=e,this.fullHeight=t,this.x=r,this.y=n,this.width=i,this.height=o,this.updateProjectionMatrix()},re.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=re.Math.radToDeg(2*Math.atan(Math.tan(.5*re.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var t=this.fullWidth/this.fullHeight,r=Math.tan(re.Math.degToRad(.5*e))*this.near,n=-r,i=t*n,o=t*r,a=Math.abs(o-i),s=Math.abs(r-n);this.projectionMatrix.makeFrustum(i+this.x*a/this.fullWidth,i+(this.x+this.width)*a/this.fullWidth,r-(this.y+this.height)*s/this.fullHeight,r-this.y*s/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)},re.PerspectiveCamera.prototype.clone=function(){var e=new re.PerspectiveCamera;return re.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},re.Light=function(e){re.Object3D.call(this),this.type="Light",this.color=new re.Color(e)},re.Light.prototype=Object.create(re.Object3D.prototype),re.Light.prototype.clone=function(e){return void 0===e&&(e=new re.Light),re.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},re.AmbientLight=function(e){re.Light.call(this,e),this.type="AmbientLight"},re.AmbientLight.prototype=Object.create(re.Light.prototype),re.AmbientLight.prototype.clone=function(){var e=new re.AmbientLight;return re.Light.prototype.clone.call(this,e),e},re.AreaLight=function(e,t){re.Light.call(this,e),this.type="AreaLight",this.normal=new re.Vector3(0,-1,0),this.right=new re.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},re.AreaLight.prototype=Object.create(re.Light.prototype),re.DirectionalLight=function(e,t){re.Light.call(this,e),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new re.Object3D,this.intensity=void 0!==t?t:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new re.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},re.DirectionalLight.prototype=Object.create(re.Light.prototype),re.DirectionalLight.prototype.clone=function(){var e=new re.DirectionalLight;return re.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraLeft=this.shadowCameraLeft,e.shadowCameraRight=this.shadowCameraRight,e.shadowCameraTop=this.shadowCameraTop,e.shadowCameraBottom=this.shadowCameraBottom,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e.shadowCascade=this.shadowCascade,e.shadowCascadeOffset.copy(this.shadowCascadeOffset),e.shadowCascadeCount=this.shadowCascadeCount,e.shadowCascadeBias=this.shadowCascadeBias.slice(0),e.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),e.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),e.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),e.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),e},re.HemisphereLight=function(e,t,r){re.Light.call(this,e),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new re.Color(t),this.intensity=void 0!==r?r:1},re.HemisphereLight.prototype=Object.create(re.Light.prototype),re.HemisphereLight.prototype.clone=function(){var e=new re.HemisphereLight;return re.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},re.PointLight=function(e,t,r){re.Light.call(this,e),this.type="PointLight",this.intensity=void 0!==t?t:1,this.distance=void 0!==r?r:0},re.PointLight.prototype=Object.create(re.Light.prototype),re.PointLight.prototype.clone=function(){var e=new re.PointLight;return re.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e},re.SpotLight=function(e,t,r,n,i){re.Light.call(this,e),this.type="SpotLight",this.position.set(0,1,0),this.target=new re.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.exponent=void 0!==i?i:10,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},re.SpotLight.prototype=Object.create(re.Light.prototype),re.SpotLight.prototype.clone=function(){var e=new re.SpotLight;return re.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraFov=this.shadowCameraFov,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e},re.Cache=function(){this.files={}},re.Cache.prototype={constructor:re.Cache,add:function(e,t){this.files[e]=t},get:function(e){return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},re.Loader=function(e){this.showStatus=e,this.statusDomElement=e?re.Loader.prototype.addStatusElement():null,this.imageLoader=new re.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},re.Loader.prototype={constructor:re.Loader,crossOrigin:void 0,addStatusElement:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded ";e.total?t+=(100*e.loaded/e.total).toFixed(0)+"%":t+=(e.loaded/1024).toFixed(2)+" KB",this.statusDomElement.innerHTML=t},extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t){for(var r=[],n=0;n<e.length;++n)r[n]=this.createMaterial(e[n],t);return r},needsTangents:function(e){for(var t=0,r=e.length;t<r;t++){if(e[t]instanceof re.ShaderMaterial)return!0}return!1},createMaterial:function(e,t){var r=this;function n(e){var t=Math.log(e)/Math.LN2;return Math.pow(2,Math.round(t))}function i(e,i,o,a,s,l,c){var u,h=t+o,f=re.Loader.Handlers.get(h);if(null!==f?u=f.load(h):(u=new re.Texture,(f=r.imageLoader).crossOrigin=r.crossOrigin,f.load(h,(function(e){if(!1===re.Math.isPowerOfTwo(e.width)||!1===re.Math.isPowerOfTwo(e.height)){var t=n(e.width),r=n(e.height),i=document.createElement("canvas");i.width=t,i.height=r,i.getContext("2d").drawImage(e,0,0,t,r),u.image=i}else u.image=e;u.needsUpdate=!0}))),u.sourceFile=o,a&&(u.repeat.set(a[0],a[1]),1!==a[0]&&(u.wrapS=re.RepeatWrapping),1!==a[1]&&(u.wrapT=re.RepeatWrapping)),s&&u.offset.set(s[0],s[1]),l){var d={repeat:re.RepeatWrapping,mirror:re.MirroredRepeatWrapping};void 0!==d[l[0]]&&(u.wrapS=d[l[0]]),void 0!==d[l[1]]&&(u.wrapT=d[l[1]])}c&&(u.anisotropy=c),e[i]=u}function o(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var a="MeshLambertMaterial",s={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var l=e.shading.toLowerCase();"phong"===l?a="MeshPhongMaterial":"basic"===l&&(a="MeshBasicMaterial")}if(void 0!==e.blending&&void 0!==re[e.blending]&&(s.blending=re[e.blending]),(void 0!==e.transparent||e.opacity<1)&&(s.transparent=e.transparent),void 0!==e.depthTest&&(s.depthTest=e.depthTest),void 0!==e.depthWrite&&(s.depthWrite=e.depthWrite),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.flipSided&&(s.side=re.BackSide),void 0!==e.doubleSided&&(s.side=re.DoubleSide),void 0!==e.wireframe&&(s.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?s.vertexColors=re.FaceColors:e.vertexColors&&(s.vertexColors=re.VertexColors)),e.colorDiffuse?s.color=o(e.colorDiffuse):e.DbgColor&&(s.color=e.DbgColor),e.colorSpecular&&(s.specular=o(e.colorSpecular)),e.colorAmbient&&(s.ambient=o(e.colorAmbient)),e.colorEmissive&&(s.emissive=o(e.colorEmissive)),e.transparency&&(s.opacity=e.transparency),e.specularCoef&&(s.shininess=e.specularCoef),e.mapDiffuse&&t&&i(s,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&i(s,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&i(s,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&i(s,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&i(s,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapAlpha&&t&&i(s,"alphaMap",e.mapAlpha,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy),e.mapBumpScale&&(s.bumpScale=e.mapBumpScale),e.mapNormal){var c=re.ShaderLib.normalmap,u=re.UniformsUtils.clone(c.uniforms);u.tNormal.value=s.normalMap,e.mapNormalFactor&&u.uNormalScale.value.set(e.mapNormalFactor,e.mapNormalFactor),s.map&&(u.tDiffuse.value=s.map,u.enableDiffuse.value=!0),s.specularMap&&(u.tSpecular.value=s.specularMap,u.enableSpecular.value=!0),s.lightMap&&(u.tAO.value=s.lightMap,u.enableAO.value=!0),u.diffuse.value.setHex(s.color),u.specular.value.setHex(s.specular),u.ambient.value.setHex(s.ambient),u.shininess.value=s.shininess,void 0!==s.opacity&&(u.opacity.value=s.opacity);var h={fragmentShader:c.fragmentShader,vertexShader:c.vertexShader,uniforms:u,lights:!0,fog:!0},f=new re.ShaderMaterial(h);s.transparent&&(f.transparent=!0)}else f=new re[a](s);return void 0!==e.DbgName&&(f.name=e.DbgName),f}},re.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=0,r=this.handlers.length;t<r;t+=2){var n=this.handlers[t],i=this.handlers[t+1];if(n.test(e))return i}return null}},re.XHRLoader=function(e){this.cache=new re.Cache,this.manager=void 0!==e?e:re.DefaultLoadingManager},re.XHRLoader.prototype={constructor:re.XHRLoader,load:function(e,t,r,n){var i=this,o=i.cache.get(e);if(void 0===o){var a=new XMLHttpRequest;a.open("GET",e,!0),a.addEventListener("load",(function(r){i.cache.add(e,this.response),t&&t(this.response),i.manager.itemEnd(e)}),!1),void 0!==r&&a.addEventListener("progress",(function(e){r(e)}),!1),void 0!==n&&a.addEventListener("error",(function(e){n(e)}),!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(a.responseType=this.responseType),a.send(null),i.manager.itemStart(e)}else t&&t(o)},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e}},re.ImageLoader=function(e){this.cache=new re.Cache,this.manager=void 0!==e?e:re.DefaultLoadingManager},re.ImageLoader.prototype={constructor:re.ImageLoader,load:function(e,t,r,n){var i=this,o=i.cache.get(e);if(void 0===o){var a=document.createElement("img");return void 0!==t&&a.addEventListener("load",(function(r){i.cache.add(e,this),t(this),i.manager.itemEnd(e)}),!1),void 0!==r&&a.addEventListener("progress",(function(e){r(e)}),!1),void 0!==n&&a.addEventListener("error",(function(e){n(e)}),!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),a.src=e,i.manager.itemStart(e),a}t(o)},setCrossOrigin:function(e){this.crossOrigin=e}},re.JSONLoader=function(e){re.Loader.call(this,e),this.withCredentials=!1},re.JSONLoader.prototype=Object.create(re.Loader.prototype),re.JSONLoader.prototype.load=function(e,t,r){r=r&&"string"==typeof r?r:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,r)},re.JSONLoader.prototype.loadAjaxJSON=function(e,t,r,n,i){var o=new XMLHttpRequest,a=0;o.onreadystatechange=function(){if(o.readyState===o.DONE)if(200===o.status||0===o.status){if(o.responseText){var s=JSON.parse(o.responseText);if(void 0!==s.metadata&&"scene"===s.metadata.type)return void console.error('THREE.JSONLoader: "'+t+'" seems to be a Scene. Use THREE.SceneLoader instead.');var l=e.parse(s,n);r(l.geometry,l.materials)}else console.error('THREE.JSONLoader: "'+t+'" seems to be unreachable or the file is empty.');e.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+t+'" ('+o.status+")");else o.readyState===o.LOADING?i&&(0===a&&(a=o.getResponseHeader("Content-Length")),i({total:a,loaded:o.responseText.length})):o.readyState===o.HEADERS_RECEIVED&&void 0!==i&&(a=o.getResponseHeader("Content-Length"))},o.open("GET",t,!0),o.withCredentials=this.withCredentials,o.send(null)},re.JSONLoader.prototype.parse=function(e,t){var r=new re.Geometry,n=void 0!==e.scale?1/e.scale:1;if(function(t){function n(e,t){return e&1<<t}var i,o,a,s,l,c,u,h,f,d,p,m,g,v,y,x,b,w,_,M,S,A,C,T,E,k,P,L=e.faces,R=e.vertices,D=e.normals,F=e.colors,z=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&z++;for(i=0;i<z;i++)r.faceVertexUvs[i]=[]}s=0,l=R.length;for(;s<l;)(w=new re.Vector3).x=R[s++]*t,w.y=R[s++]*t,w.z=R[s++]*t,r.vertices.push(w);s=0,l=L.length;for(;s<l;)if(d=L[s++],p=n(d,0),m=n(d,1),g=n(d,3),v=n(d,4),y=n(d,5),x=n(d,6),b=n(d,7),p){if((M=new re.Face3).a=L[s],M.b=L[s+1],M.c=L[s+3],(S=new re.Face3).a=L[s+1],S.b=L[s+2],S.c=L[s+3],s+=4,m&&(f=L[s++],M.materialIndex=f,S.materialIndex=f),a=r.faces.length,g)for(i=0;i<z;i++)for(T=e.uvs[i],r.faceVertexUvs[i][a]=[],r.faceVertexUvs[i][a+1]=[],o=0;o<4;o++)h=L[s++],k=T[2*h],P=T[2*h+1],E=new re.Vector2(k,P),2!==o&&r.faceVertexUvs[i][a].push(E),0!==o&&r.faceVertexUvs[i][a+1].push(E);if(v&&(u=3*L[s++],M.normal.set(D[u++],D[u++],D[u]),S.normal.copy(M.normal)),y)for(i=0;i<4;i++)u=3*L[s++],C=new re.Vector3(D[u++],D[u++],D[u]),2!==i&&M.vertexNormals.push(C),0!==i&&S.vertexNormals.push(C);if(x&&(c=L[s++],A=F[c],M.color.setHex(A),S.color.setHex(A)),b)for(i=0;i<4;i++)c=L[s++],A=F[c],2!==i&&M.vertexColors.push(new re.Color(A)),0!==i&&S.vertexColors.push(new re.Color(A));r.faces.push(M),r.faces.push(S)}else{if((_=new re.Face3).a=L[s++],_.b=L[s++],_.c=L[s++],m&&(f=L[s++],_.materialIndex=f),a=r.faces.length,g)for(i=0;i<z;i++)for(T=e.uvs[i],r.faceVertexUvs[i][a]=[],o=0;o<3;o++)h=L[s++],k=T[2*h],P=T[2*h+1],E=new re.Vector2(k,P),r.faceVertexUvs[i][a].push(E);if(v&&(u=3*L[s++],_.normal.set(D[u++],D[u++],D[u])),y)for(i=0;i<3;i++)u=3*L[s++],C=new re.Vector3(D[u++],D[u++],D[u]),_.vertexNormals.push(C);if(x&&(c=L[s++],_.color.setHex(F[c])),b)for(i=0;i<3;i++)c=L[s++],_.vertexColors.push(new re.Color(F[c]));r.faces.push(_)}}(n),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var n=0,i=e.skinWeights.length;n<i;n+=t){var o=e.skinWeights[n],a=t>1?e.skinWeights[n+1]:0,s=t>2?e.skinWeights[n+2]:0,l=t>3?e.skinWeights[n+3]:0;r.skinWeights.push(new re.Vector4(o,a,s,l))}if(e.skinIndices)for(n=0,i=e.skinIndices.length;n<i;n+=t){var c=e.skinIndices[n],u=t>1?e.skinIndices[n+1]:0,h=t>2?e.skinIndices[n+2]:0,f=t>3?e.skinIndices[n+3]:0;r.skinIndices.push(new re.Vector4(c,u,h,f))}r.bones=e.bones,r.bones&&r.bones.length>0&&(r.skinWeights.length!==r.skinIndices.length||r.skinIndices.length!==r.vertices.length)&&console.warn("When skinning, number of vertices ("+r.vertices.length+"), skinIndices ("+r.skinIndices.length+"), and skinWeights ("+r.skinWeights.length+") should match.");r.animation=e.animation,r.animations=e.animations}(),function(t){var n,i,o,a,s,l,c,u,h,f,d;if(void 0!==e.morphTargets)for(s=0,l=e.morphTargets.length;s<l;s++)for(r.morphTargets[s]={},r.morphTargets[s].name=e.morphTargets[s].name,r.morphTargets[s].vertices=[],o=r.morphTargets[s].vertices,a=e.morphTargets[s].vertices,n=0,i=a.length;n<i;n+=3){var p=new re.Vector3;p.x=a[n]*t,p.y=a[n+1]*t,p.z=a[n+2]*t,o.push(p)}if(void 0!==e.morphColors)for(s=0,l=e.morphColors.length;s<l;s++)for(r.morphColors[s]={},r.morphColors[s].name=e.morphColors[s].name,r.morphColors[s].colors=[],h=r.morphColors[s].colors,f=e.morphColors[s].colors,c=0,u=f.length;c<u;c+=3)(d=new re.Color(16755200)).setRGB(f[c],f[c+1],f[c+2]),h.push(d)}(n),r.computeFaceNormals(),r.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:r};var i=this.initMaterials(e.materials,t);return this.needsTangents(i)&&r.computeTangents(),{geometry:r,materials:i}},re.LoadingManager=function(e,t,r){var n=this,i=0,o=0;this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){o++},this.itemEnd=function(e){i++,void 0!==n.onProgress&&n.onProgress(e,i,o),i===o&&void 0!==n.onLoad&&n.onLoad()}},re.DefaultLoadingManager=new re.LoadingManager,re.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:re.DefaultLoadingManager},re.BufferGeometryLoader.prototype={constructor:re.BufferGeometryLoader,load:function(e,t,r,n){var i=this,o=new re.XHRLoader;o.setCrossOrigin(this.crossOrigin),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),r,n)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new re.BufferGeometry,r=e.attributes;for(var n in r){var i=r[n],o=new te[i.type](i.array);t.addAttribute(n,new re.BufferAttribute(o,i.itemSize))}var a=e.offsets;void 0!==a&&(t.offsets=JSON.parse(JSON.stringify(a)));var s=e.boundingSphere;if(void 0!==s){var l=new re.Vector3;void 0!==s.center&&l.fromArray(s.center),t.boundingSphere=new re.Sphere(l,s.radius)}return t}},re.MaterialLoader=function(e){this.manager=void 0!==e?e:re.DefaultLoadingManager},re.MaterialLoader.prototype={constructor:re.MaterialLoader,load:function(e,t,r,n){var i=this,o=new re.XHRLoader;o.setCrossOrigin(this.crossOrigin),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),r,n)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new re[e.type];if(void 0!==e.color&&t.color.setHex(e.color),void 0!==e.ambient&&t.ambient.setHex(e.ambient),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.shading&&(t.shading=e.shading),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.materials)for(var r=0,n=e.materials.length;r<n;r++)t.materials.push(this.parse(e.materials[r]));return t}},re.ObjectLoader=function(e){this.manager=void 0!==e?e:re.DefaultLoadingManager},re.ObjectLoader.prototype={constructor:re.ObjectLoader,load:function(e,t,r,n){var i=this,o=new re.XHRLoader(i.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),r,n)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.parseGeometries(e.geometries),r=this.parseMaterials(e.materials);return this.parseObject(e.object,t,r)},parseGeometries:function(e){var t={};if(void 0!==e)for(var r=new re.JSONLoader,n=new re.BufferGeometryLoader,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":a=new re.PlaneGeometry(s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"CubeGeometry":a=new re.BoxGeometry(s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":a=new re.CircleGeometry(s.radius,s.segments);break;case"CylinderGeometry":a=new re.CylinderGeometry(s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded);break;case"SphereGeometry":a=new re.SphereGeometry(s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"IcosahedronGeometry":a=new re.IcosahedronGeometry(s.radius,s.detail);break;case"TorusGeometry":a=new re.TorusGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":a=new re.TorusKnotGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.p,s.q,s.heightScale);break;case"BufferGeometry":a=n.parse(s.data);break;case"Geometry":a=r.parse(s.data).geometry}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseMaterials:function(e){var t={};if(void 0!==e)for(var r=new re.MaterialLoader,n=0,i=e.length;n<i;n++){var o=e[n],a=r.parse(o);a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),t[o.uuid]=a}return t},parseObject:function(){var e=new re.Matrix4;return function(t,r,n){var i;switch(t.type){case"Scene":i=new re.Scene;break;case"PerspectiveCamera":i=new re.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":i=new re.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":i=new re.AmbientLight(t.color);break;case"DirectionalLight":i=new re.DirectionalLight(t.color,t.intensity);break;case"PointLight":i=new re.PointLight(t.color,t.intensity,t.distance);break;case"SpotLight":i=new re.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent);break;case"HemisphereLight":i=new re.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":var o=r[t.geometry],a=n[t.material];void 0===o&&console.warn("THREE.ObjectLoader: Undefined geometry",t.geometry),void 0===a&&console.warn("THREE.ObjectLoader: Undefined material",t.material),i=new re.Mesh(o,a);break;case"Line":o=r[t.geometry],a=n[t.material];void 0===o&&console.warn("THREE.ObjectLoader: Undefined geometry",t.geometry),void 0===a&&console.warn("THREE.ObjectLoader: Undefined material",t.material),i=new re.Line(o,a);break;case"Sprite":void 0===(a=n[t.material])&&console.warn("THREE.ObjectLoader: Undefined material",t.material),i=new re.Sprite(a);break;case"Group":i=new re.Group;break;default:i=new re.Object3D}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.children)for(var s in t.children)i.add(this.parseObject(t.children[s],r,n));return i}}()},re.TextureLoader=function(e){this.manager=void 0!==e?e:re.DefaultLoadingManager},re.TextureLoader.prototype={constructor:re.TextureLoader,load:function(e,t,r,n){var i=new re.ImageLoader(this.manager);i.setCrossOrigin(this.crossOrigin),i.load(e,(function(e){var r=new re.Texture(e);r.needsUpdate=!0,void 0!==t&&t(r)}),r,n)},setCrossOrigin:function(e){this.crossOrigin=e}},re.CompressedTextureLoader=function(){this._parser=null},re.CompressedTextureLoader.prototype={constructor:re.CompressedTextureLoader,load:function(e,t,r){var n=this,i=[],o=new re.CompressedTexture;o.image=i;var a=new re.XHRLoader;if(a.setResponseType("arraybuffer"),e instanceof Array)for(var s=0,l=function(r){a.load(e[r],(function(e){var a=n._parser(e,!0);i[r]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps},6===(s+=1)&&(1==a.mipmapCount&&(o.minFilter=re.LinearFilter),o.format=a.format,o.needsUpdate=!0,t&&t(o))}))},c=0,u=e.length;c<u;++c)l(c);else a.load(e,(function(e){var r=n._parser(e,!0);if(r.isCubemap)for(var a=r.mipmaps.length/r.mipmapCount,s=0;s<a;s++){i[s]={mipmaps:[]};for(var l=0;l<r.mipmapCount;l++)i[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+l]),i[s].format=r.format,i[s].width=r.width,i[s].height=r.height}else o.image.width=r.width,o.image.height=r.height,o.mipmaps=r.mipmaps;1===r.mipmapCount&&(o.minFilter=re.LinearFilter),o.format=r.format,o.needsUpdate=!0,t&&t(o)}));return o}},re.Material=function(){Object.defineProperty(this,"id",{value:re.MaterialIdCount++}),this.uuid=re.Math.generateUUID(),this.name="",this.type="Material",this.side=re.FrontSide,this.opacity=1,this.transparent=!1,this.blending=re.NormalBlending,this.blendSrc=re.SrcAlphaFactor,this.blendDst=re.OneMinusSrcAlphaFactor,this.blendEquation=re.AddEquation,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this.needsUpdate=!0},re.Material.prototype={constructor:re.Material,setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){if(t in this){var n=this[t];n instanceof re.Color?n.set(r):n instanceof re.Vector3&&r instanceof re.Vector3?n.copy(r):this[t]="overdraw"==t?Number(r):r}}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(){var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};return""!==this.name&&(e.name=this.name),this instanceof re.MeshBasicMaterial?(e.color=this.color.getHex(),this.vertexColors!==re.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==re.NormalBlending&&(e.blending=this.blending),this.side!==re.FrontSide&&(e.side=this.side)):this instanceof re.MeshLambertMaterial?(e.color=this.color.getHex(),e.ambient=this.ambient.getHex(),e.emissive=this.emissive.getHex(),this.vertexColors!==re.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==re.NormalBlending&&(e.blending=this.blending),this.side!==re.FrontSide&&(e.side=this.side)):this instanceof re.MeshPhongMaterial?(e.color=this.color.getHex(),e.ambient=this.ambient.getHex(),e.emissive=this.emissive.getHex(),e.specular=this.specular.getHex(),e.shininess=this.shininess,this.vertexColors!==re.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==re.NormalBlending&&(e.blending=this.blending),this.side!==re.FrontSide&&(e.side=this.side)):this instanceof re.MeshNormalMaterial?(this.shading!==re.FlatShading&&(e.shading=this.shading),this.blending!==re.NormalBlending&&(e.blending=this.blending),this.side!==re.FrontSide&&(e.side=this.side)):this instanceof re.MeshDepthMaterial?(this.blending!==re.NormalBlending&&(e.blending=this.blending),this.side!==re.FrontSide&&(e.side=this.side)):this instanceof re.ShaderMaterial?(e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader):this instanceof re.SpriteMaterial&&(e.color=this.color.getHex()),this.opacity<1&&(e.opacity=this.opacity),!1!==this.transparent&&(e.transparent=this.transparent),!1!==this.wireframe&&(e.wireframe=this.wireframe),e},clone:function(e){return void 0===e&&(e=new re.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},re.EventDispatcher.prototype.apply(re.Material.prototype),re.MaterialIdCount=0,re.LineBasicMaterial=function(e){re.Material.call(this),this.type="LineBasicMaterial",this.color=new re.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=re.NoColors,this.fog=!0,this.setValues(e)},re.LineBasicMaterial.prototype=Object.create(re.Material.prototype),re.LineBasicMaterial.prototype.clone=function(){var e=new re.LineBasicMaterial;return re.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},re.LineDashedMaterial=function(e){re.Material.call(this),this.type="LineDashedMaterial",this.color=new re.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},re.LineDashedMaterial.prototype=Object.create(re.Material.prototype),re.LineDashedMaterial.prototype.clone=function(){var e=new re.LineDashedMaterial;return re.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},re.MeshBasicMaterial=function(e){re.Material.call(this),this.type="MeshBasicMaterial",this.color=new re.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=re.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=re.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=re.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},re.MeshBasicMaterial.prototype=Object.create(re.Material.prototype),re.MeshBasicMaterial.prototype.clone=function(){var e=new re.MeshBasicMaterial;return re.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},re.MeshLambertMaterial=function(e){re.Material.call(this),this.type="MeshLambertMaterial",this.color=new re.Color(16777215),this.ambient=new re.Color(16777215),this.emissive=new re.Color(0),this.wrapAround=!1,this.wrapRGB=new re.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=re.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=re.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=re.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},re.MeshLambertMaterial.prototype=Object.create(re.Material.prototype),re.MeshLambertMaterial.prototype.clone=function(){var e=new re.MeshLambertMaterial;return re.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},re.MeshPhongMaterial=function(e){re.Material.call(this),this.type="MeshPhongMaterial",this.color=new re.Color(16777215),this.ambient=new re.Color(16777215),this.emissive=new re.Color(0),this.specular=new re.Color(1118481),this.shininess=30,this.metal=!1,this.wrapAround=!1,this.wrapRGB=new re.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new re.Vector2(1,1),this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=re.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=re.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=re.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},re.MeshPhongMaterial.prototype=Object.create(re.Material.prototype),re.MeshPhongMaterial.prototype.clone=function(){var e=new re.MeshPhongMaterial;return re.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},re.MeshDepthMaterial=function(e){re.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},re.MeshDepthMaterial.prototype=Object.create(re.Material.prototype),re.MeshDepthMaterial.prototype.clone=function(){var e=new re.MeshDepthMaterial;return re.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},re.MeshNormalMaterial=function(e){re.Material.call(this,e),this.type="MeshNormalMaterial",this.shading=re.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},re.MeshNormalMaterial.prototype=Object.create(re.Material.prototype),re.MeshNormalMaterial.prototype.clone=function(){var e=new re.MeshNormalMaterial;return re.Material.prototype.clone.call(this,e),e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},re.MeshFaceMaterial=function(e){this.uuid=re.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=e instanceof Array?e:[]},re.MeshFaceMaterial.prototype={constructor:re.MeshFaceMaterial,toJSON:function(){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},t=0,r=this.materials.length;t<r;t++)e.materials.push(this.materials[t].toJSON());return e},clone:function(){for(var e=new re.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e}},re.PointCloudMaterial=function(e){re.Material.call(this),this.type="PointCloudMaterial",this.color=new re.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=re.NoColors,this.fog=!0,this.setValues(e)},re.PointCloudMaterial.prototype=Object.create(re.Material.prototype),re.PointCloudMaterial.prototype.clone=function(){var e=new re.PointCloudMaterial;return re.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},re.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new re.PointCloudMaterial(e)},re.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new re.PointCloudMaterial(e)},re.ShaderMaterial=function(e){re.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=re.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=re.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(e)},re.ShaderMaterial.prototype=Object.create(re.Material.prototype),re.ShaderMaterial.prototype.clone=function(){var e=new re.ShaderMaterial;return re.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=re.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},re.RawShaderMaterial=function(e){re.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},re.RawShaderMaterial.prototype=Object.create(re.ShaderMaterial.prototype),re.RawShaderMaterial.prototype.clone=function(){var e=new re.RawShaderMaterial;return re.ShaderMaterial.prototype.clone.call(this,e),e},re.SpriteMaterial=function(e){re.Material.call(this),this.type="SpriteMaterial",this.color=new re.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},re.SpriteMaterial.prototype=Object.create(re.Material.prototype),re.SpriteMaterial.prototype.clone=function(){var e=new re.SpriteMaterial;return re.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.rotation=this.rotation,e.fog=this.fog,e},re.Texture=function(e,t,r,n,i,o,a,s,l){Object.defineProperty(this,"id",{value:re.TextureIdCount++}),this.uuid=re.Math.generateUUID(),this.name="",this.image=void 0!==e?e:re.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:re.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:re.ClampToEdgeWrapping,this.wrapT=void 0!==n?n:re.ClampToEdgeWrapping,this.magFilter=void 0!==i?i:re.LinearFilter,this.minFilter=void 0!==o?o:re.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:re.RGBAFormat,this.type=void 0!==s?s:re.UnsignedByteType,this.offset=new re.Vector2(0,0),this.repeat=new re.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},re.Texture.DEFAULT_IMAGE=void 0,re.Texture.DEFAULT_MAPPING=new re.UVMapping,re.Texture.prototype={constructor:re.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},clone:function(e){return void 0===e&&(e=new re.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},re.EventDispatcher.prototype.apply(re.Texture.prototype),re.TextureIdCount=0,re.CubeTexture=function(e,t,r,n,i,o,a,s,l){re.Texture.call(this,e,t,r,n,i,o,a,s,l),this.images=e},re.CubeTexture.prototype=Object.create(re.Texture.prototype),re.CubeTexture.clone=function(e){return void 0===e&&(e=new re.CubeTexture),re.Texture.prototype.clone.call(this,e),e.images=this.images,e},re.CompressedTexture=function(e,t,r,n,i,o,a,s,l,c,u){re.Texture.call(this,null,o,a,s,l,c,n,i,u),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1},re.CompressedTexture.prototype=Object.create(re.Texture.prototype),re.CompressedTexture.prototype.clone=function(){var e=new re.CompressedTexture;return re.Texture.prototype.clone.call(this,e),e},re.DataTexture=function(e,t,r,n,i,o,a,s,l,c,u){re.Texture.call(this,null,o,a,s,l,c,n,i,u),this.image={data:e,width:t,height:r}},re.DataTexture.prototype=Object.create(re.Texture.prototype),re.DataTexture.prototype.clone=function(){var e=new re.DataTexture;return re.Texture.prototype.clone.call(this,e),e},re.VideoTexture=function(e,t,r,n,i,o,a,s,l){re.Texture.call(this,e,t,r,n,i,o,a,s,l),this.generateMipmaps=!1;var c=this,u=function(){requestAnimationFrame(u),e.readyState===e.HAVE_ENOUGH_DATA&&(c.needsUpdate=!0)};u()},re.VideoTexture.prototype=Object.create(re.Texture.prototype),re.Group=function(){re.Object3D.call(this),this.type="Group"},re.Group.prototype=Object.create(re.Object3D.prototype),re.PointCloud=function(e,t){re.Object3D.call(this),this.type="PointCloud",this.geometry=void 0!==e?e:new re.Geometry,this.material=void 0!==t?t:new re.PointCloudMaterial({color:16777215*Math.random()}),this.sortParticles=!1},re.PointCloud.prototype=Object.create(re.Object3D.prototype),re.PointCloud.prototype.raycast=(D=new re.Matrix4,F=new re.Ray,function(e,t){var r=this,n=r.geometry,i=e.params.PointCloud.threshold;if(D.getInverse(this.matrixWorld),F.copy(e.ray).applyMatrix4(D),null===n.boundingBox||!1!==F.isIntersectionBox(n.boundingBox)){var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=new re.Vector3,s=function(n,i){var a=F.distanceToPoint(n);if(a<o){var s=F.closestPointToPoint(n);s.applyMatrix4(r.matrixWorld);var l=e.ray.origin.distanceTo(s);t.push({distance:l,distanceToRay:a,point:s.clone(),index:i,face:null,object:r})}};if(n instanceof re.BufferGeometry){var l=n.attributes,c=l.position.array;if(void 0!==l.index){var u=l.index.array,h=n.offsets;0===h.length&&(h=[{start:0,count:u.length,index:0}]);for(var f=0,d=h.length;f<d;++f)for(var p=h[f].start,m=h[f].count,g=h[f].index,v=p,y=p+m;v<y;v++){var x=g+u[v];a.fromArray(c,3*x),s(a,x)}}else{var b=c.length/3;for(v=0;v<b;v++)a.set(c[3*v],c[3*v+1],c[3*v+2]),s(a,v)}}else{var w=this.geometry.vertices;for(v=0;v<w.length;v++)s(w[v],v)}}}),re.PointCloud.prototype.clone=function(e){return void 0===e&&(e=new re.PointCloud(this.geometry,this.material)),e.sortParticles=this.sortParticles,re.Object3D.prototype.clone.call(this,e),e},re.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new re.PointCloud(e,t)},re.Line=function(e,t,r){re.Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new re.Geometry,this.material=void 0!==t?t:new re.LineBasicMaterial({color:16777215*Math.random()}),this.mode=void 0!==r?r:re.LineStrip},re.LineStrip=0,re.LinePieces=1,re.Line.prototype=Object.create(re.Object3D.prototype),re.Line.prototype.raycast=function(){var e=new re.Matrix4,t=new re.Ray,r=new re.Sphere;return function(n,i){var o=n.linePrecision,a=o*o,s=this.geometry;if(null===s.boundingSphere&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(this.matrixWorld),!1!==n.ray.isIntersectionSphere(r)&&(e.getInverse(this.matrixWorld),t.copy(n.ray).applyMatrix4(e),s instanceof re.Geometry))for(var l=s.vertices,c=l.length,u=new re.Vector3,h=new re.Vector3,f=this.mode===re.LineStrip?1:2,d=0;d<c-1;d+=f){if(!(t.distanceSqToSegment(l[d],l[d+1],h,u)>a)){var p=t.origin.distanceTo(h);p<n.near||p>n.far||i.push({distance:p,point:u.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}}(),re.Line.prototype.clone=function(e){return void 0===e&&(e=new re.Line(this.geometry,this.material,this.mode)),re.Object3D.prototype.clone.call(this,e),e},re.Mesh=function(e,t){re.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new re.Geometry,this.material=void 0!==t?t:new re.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},re.Mesh.prototype=Object.create(re.Object3D.prototype),re.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;e<t;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},re.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},re.Mesh.prototype.raycast=function(){var e=new re.Matrix4,t=new re.Ray,r=new re.Sphere,n=new re.Vector3,i=new re.Vector3,o=new re.Vector3;return function(a,s){var l=this.geometry;if(null===l.boundingSphere&&l.computeBoundingSphere(),r.copy(l.boundingSphere),r.applyMatrix4(this.matrixWorld),!1!==a.ray.isIntersectionSphere(r)&&(e.getInverse(this.matrixWorld),t.copy(a.ray).applyMatrix4(e),null===l.boundingBox||!1!==t.isIntersectionBox(l.boundingBox)))if(l instanceof re.BufferGeometry){if(void 0===(L=this.material))return;var c=l.attributes,u=a.precision;if(void 0!==c.index){var h=c.index.array,f=c.position.array,d=l.offsets;0===d.length&&(d=[{start:0,count:h.length,index:0}]);for(var p=0,m=d.length;p<m;++p)for(var g=d[p].start,v=d[p].count,y=d[p].index,x=g,b=g+v;x<b;x+=3){if(M=y+h[x],S=y+h[x+1],A=y+h[x+2],n.fromArray(f,3*M),i.fromArray(f,3*S),o.fromArray(f,3*A),L.side===re.BackSide)var w=t.intersectTriangle(o,i,n,!0);else w=t.intersectTriangle(n,i,o,L.side!==re.DoubleSide);if(null!==w)w.applyMatrix4(this.matrixWorld),(N=a.ray.origin.distanceTo(w))<u||N<a.near||N>a.far||s.push({distance:N,point:w,face:new re.Face3(M,S,A,re.Triangle.normal(n,i,o)),faceIndex:null,object:this})}}else{x=0;var _=0;for(b=(f=c.position.array).length;x<b;x+=3,_+=9){if(M=x,S=x+1,A=x+2,n.fromArray(f,_),i.fromArray(f,_+3),o.fromArray(f,_+6),L.side===re.BackSide)w=t.intersectTriangle(o,i,n,!0);else w=t.intersectTriangle(n,i,o,L.side!==re.DoubleSide);if(null!==w)w.applyMatrix4(this.matrixWorld),(N=a.ray.origin.distanceTo(w))<u||N<a.near||N>a.far||s.push({distance:N,point:w,face:new re.Face3(M,S,A,re.Triangle.normal(n,i,o)),faceIndex:null,object:this})}}}else if(l instanceof re.Geometry)for(var M,S,A,C=this.material instanceof re.MeshFaceMaterial,T=!0===C?this.material.materials:null,E=(u=a.precision,l.vertices),k=0,P=l.faces.length;k<P;k++){var L,R=l.faces[k];if(void 0!==(L=!0===C?T[R.materialIndex]:this.material)){if(M=E[R.a],S=E[R.b],A=E[R.c],!0===L.morphTargets){var D=l.morphTargets,F=this.morphTargetInfluences;n.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var z=0,O=D.length;z<O;z++){var B=F[z];if(0!==B){var I=D[z].vertices;n.x+=(I[R.a].x-M.x)*B,n.y+=(I[R.a].y-M.y)*B,n.z+=(I[R.a].z-M.z)*B,i.x+=(I[R.b].x-S.x)*B,i.y+=(I[R.b].y-S.y)*B,i.z+=(I[R.b].z-S.z)*B,o.x+=(I[R.c].x-A.x)*B,o.y+=(I[R.c].y-A.y)*B,o.z+=(I[R.c].z-A.z)*B}}n.add(M),i.add(S),o.add(A),M=n,S=i,A=o}if(L.side===re.BackSide)w=t.intersectTriangle(A,S,M,!0);else w=t.intersectTriangle(M,S,A,L.side!==re.DoubleSide);var N;if(null!==w)w.applyMatrix4(this.matrixWorld),(N=a.ray.origin.distanceTo(w))<u||N<a.near||N>a.far||s.push({distance:N,point:w,face:R,faceIndex:k,object:this})}}}}(),re.Mesh.prototype.clone=function(e,t){return void 0===e&&(e=new re.Mesh(this.geometry,this.material)),re.Object3D.prototype.clone.call(this,e,t),e},re.Bone=function(e){re.Object3D.call(this),this.skin=e},re.Bone.prototype=Object.create(re.Object3D.prototype),re.Skeleton=function(e,t,r){var n;(this.useVertexTexture=void 0===r||r,this.identityMatrix=new re.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture)?(n=this.bones.length>256?64:this.bones.length>64?32:this.bones.length>16?16:8,this.boneTextureWidth=n,this.boneTextureHeight=n,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new re.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,re.RGBAFormat,re.FloatType),this.boneTexture.minFilter=re.NearestFilter,this.boneTexture.magFilter=re.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var i=0,o=this.bones.length;i<o;i++)this.boneInverses.push(new re.Matrix4)}},re.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new re.Matrix4;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},re.Skeleton.prototype.pose=function(){for(var e,t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&(e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},re.Skeleton.prototype.update=(z=new re.Matrix4,function(){for(var e=0,t=this.bones.length;e<t;e++){var r=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;z.multiplyMatrices(r,this.boneInverses[e]),z.flattenToArrayOffset(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}),re.SkinnedMesh=function(e,t,r){re.Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new re.Matrix4,this.bindMatrixInverse=new re.Matrix4;var n=[];if(this.geometry&&void 0!==this.geometry.bones){for(var i,o,a,s,l,c=0,u=this.geometry.bones.length;c<u;++c)a=(o=this.geometry.bones[c]).pos,s=o.rotq,l=o.scl,i=new re.Bone(this),n.push(i),i.name=o.name,i.position.set(a[0],a[1],a[2]),i.quaternion.set(s[0],s[1],s[2],s[3]),void 0!==l?i.scale.set(l[0],l[1],l[2]):i.scale.set(1,1,1);for(c=0,u=this.geometry.bones.length;c<u;++c)-1!==(o=this.geometry.bones[c]).parent?n[o.parent].add(n[c]):this.add(n[c])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new re.Skeleton(n,void 0,r))},re.SkinnedMesh.prototype=Object.create(re.Mesh.prototype),re.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},re.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},re.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof re.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],r=1/t.lengthManhattan();r!==1/0?t.multiplyScalar(r):t.set(1)}},re.SkinnedMesh.prototype.updateMatrixWorld=function(e){re.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},re.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new re.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),re.Mesh.prototype.clone.call(this,e),e},re.MorphAnimMesh=function(e,t){re.Mesh.call(this,e,t),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},re.MorphAnimMesh.prototype=Object.create(re.Mesh.prototype),re.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},re.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},re.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},re.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t,r=e.animations,n=/([a-z]+)_?(\d+)/,i=0,o=e.morphTargets.length;i<o;i++){var a=e.morphTargets[i].name.match(n);if(a&&a.length>1){var s=a[1];a[2];r[s]||(r[s]={start:1/0,end:-1/0});var l=r[s];i<l.start&&(l.start=i),i>l.end&&(l.end=i),t||(t=s)}}e.firstAnimation=t},re.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,r){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:r}},re.MorphAnimMesh.prototype.playAnimation=function(e,t){var r=this.geometry.animations[e];r?(this.setFrameRange(r.start,r.end),this.duration=(r.end-r.start)/t*1e3,this.time=0):console.warn("animation["+e+"] undefined")},re.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||this.time<0)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),this.time<0&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,this.time<0&&(this.time+=this.duration));var r=this.startKeyframe+re.Math.clamp(Math.floor(this.time/t),0,this.length-1);r!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[r]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=r);var n=this.time%t/t;this.directionBackwards&&(n=1-n),this.morphTargetInfluences[this.currentKeyframe]=n,this.morphTargetInfluences[this.lastKeyframe]=1-n},re.MorphAnimMesh.prototype.interpolateTargets=function(e,t,r){for(var n=this.morphTargetInfluences,i=0,o=n.length;i<o;i++)n[i]=0;e>-1&&(n[e]=1-r),t>-1&&(n[t]=r)},re.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new re.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,re.Mesh.prototype.clone.call(this,e),e},re.LOD=function(){re.Object3D.call(this),this.objects=[]},re.LOD.prototype=Object.create(re.Object3D.prototype),re.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=0;r<this.objects.length&&!(t<this.objects[r].distance);r++);this.objects.splice(r,0,{distance:t,object:e}),this.add(e)},re.LOD.prototype.getObjectForDistance=function(e){for(var t=1,r=this.objects.length;t<r&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},re.LOD.prototype.raycast=(O=new re.Vector3,function(e,t){O.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(O);this.getObjectForDistance(r).raycast(e,t)}),re.LOD.prototype.update=function(){var e=new re.Vector3,t=new re.Vector3;return function(r){if(this.objects.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var n=e.distanceTo(t);this.objects[0].object.visible=!0;for(var i=1,o=this.objects.length;i<o&&n>=this.objects[i].distance;i++)this.objects[i-1].object.visible=!1,this.objects[i].object.visible=!0;for(;i<o;i++)this.objects[i].object.visible=!1}}}(),re.LOD.prototype.clone=function(e){void 0===e&&(e=new re.LOD),re.Object3D.prototype.clone.call(this,e);for(var t=0,r=this.objects.length;t<r;t++){var n=this.objects[t].object.clone();n.visible=0===t,e.addLevel(n,this.objects[t].distance)}return e},re.Sprite=(B=new Uint16Array([0,1,2,0,2,3]),I=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),N=new Float32Array([0,0,1,0,1,1,0,1]),(U=new re.BufferGeometry).addAttribute("index",new re.BufferAttribute(B,1)),U.addAttribute("position",new re.BufferAttribute(I,3)),U.addAttribute("uv",new re.BufferAttribute(N,2)),function(e){re.Object3D.call(this),this.type="Sprite",this.geometry=U,this.material=void 0!==e?e:new re.SpriteMaterial}),re.Sprite.prototype=Object.create(re.Object3D.prototype),re.Sprite.prototype.raycast=function(){var e=new re.Vector3;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.distanceToPoint(e);n>this.scale.x||r.push({distance:n,point:this.position,face:null,object:this})}}(),re.Sprite.prototype.clone=function(e){return void 0===e&&(e=new re.Sprite(this.material)),re.Object3D.prototype.clone.call(this,e),e},re.Particle=re.Sprite,re.LensFlare=function(e,t,r,n,i){re.Object3D.call(this),this.lensFlares=[],this.positionScreen=new re.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,r,n,i)},re.LensFlare.prototype=Object.create(re.Object3D.prototype),re.LensFlare.prototype.add=function(e,t,r,n,i,o){void 0===t&&(t=-1),void 0===r&&(r=0),void 0===o&&(o=1),void 0===i&&(i=new re.Color(16777215)),void 0===n&&(n=re.NormalBlending),r=Math.min(r,Math.max(0,r)),this.lensFlares.push({texture:e,size:t,distance:r,x:0,y:0,z:0,scale:1,rotation:1,opacity:o,color:i,blending:n})},re.LensFlare.prototype.updateLensFlares=function(){var e,t,r=this.lensFlares.length,n=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;e<r;e++)(t=this.lensFlares[e]).x=this.positionScreen.x+n*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},re.Scene=function(){re.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},re.Scene.prototype=Object.create(re.Object3D.prototype),re.Scene.prototype.clone=function(e){return void 0===e&&(e=new re.Scene),re.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},re.Fog=function(e,t,r){this.name="",this.color=new re.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3},re.Fog.prototype.clone=function(){return new re.Fog(this.color.getHex(),this.near,this.far)},re.FogExp2=function(e,t){this.name="",this.color=new re.Color(e),this.density=void 0!==t?t:25e-5},re.FogExp2.prototype.clone=function(){return new re.FogExp2(this.color.getHex(),this.density)},re.ShaderChunk={},re.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n",re.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\tvec3 dirVector = normalize( lDirection.xyz );\n\n\tfloat dotProduct = dot( transformedNormal, dirVector );\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t#endif\n\n\t#endif\n\n\t#ifdef WRAP_AROUND\n\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n\t\t#endif\n\n\t#endif\n\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n\t#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\tfloat lDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\t\tlVector = normalize( lVector );\n\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif",re.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif",re.ShaderChunk.default_vertex="vec4 mvPosition;\n\n#ifdef USE_SKINNING\n\n\tmvPosition = modelViewMatrix * skinned;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;",re.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif",re.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\t#ifdef USE_MORPHNORMALS\n\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n\t#else\n\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n\t#endif\n\n#endif\n",re.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif",re.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\n#endif",re.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tvec3 pointDiffuse = vec3( 0.0 );\n\tvec3 pointSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tpointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n\t\t\t\t// specular\n\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tvec3 spotDiffuse = vec3( 0.0 );\n\tvec3 spotSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\t\t\t// diffuse\n\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n\t\t\t#else\n\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t\t#endif\n\n\t\t\tspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n\t\t\t\t\t// specular\n\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tvec3 dirDiffuse = vec3( 0.0 );\n\tvec3 dirSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\tvec3 dirVector = normalize( lDirection.xyz );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, dirVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tdirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n\t\t// specular\n\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n\t\t/*\n\t\t// fresnel term from skin shader\n\t\tconst float F0 = 0.128;\n\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\n\t\tfloat exponential = pow( base, 5.0 );\n\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\n\t\t*/\n\n\t\t/*\n\t\t// fresnel term from fresnel shader\n\t\tconst float mFresnelBias = 0.08;\n\t\tconst float mFresnelScale = 0.3;\n\t\tconst float mFresnelPower = 5.0;\n\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n\t\t*/\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tvec3 hemiDiffuse = vec3( 0.0 );\n\tvec3 hemiSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\themiDiffuse += diffuse * hemiColor;\n\n\t\t// specular (sky light)\n\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n\t\t// specular (ground light)\n\n\t\tvec3 lVectorGround = -lVector;\n\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n\t}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n\ttotalDiffuse += dirDiffuse;\n\ttotalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\ttotalDiffuse += hemiDiffuse;\n\ttotalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\ttotalDiffuse += pointDiffuse;\n\ttotalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\ttotalDiffuse += spotDiffuse;\n\ttotalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif",re.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif",re.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tvec3 morphedNormal = vec3( 0.0 );\n\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n\tmorphedNormal += normal;\n\n#endif",re.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\tuniform samplerCube envMap;\n\tuniform float flipEnvMap;\n\tuniform int combine;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tuniform bool useRefract;\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif",re.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",re.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t\t\t// Per-Pixel Tangent Space Normal Mapping\n\t\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n",re.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n",re.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\tuniform sampler2D lightMap;\n\n#endif",re.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif",re.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif",re.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\t#ifdef GAMMA_INPUT\n\n\t\ttexelColor.xyz *= texelColor.xyz;\n\n\t#endif\n\n\tgl_FragColor = gl_FragColor * texelColor;\n\n#endif",re.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n\tvUv2 = uv2;\n\n#endif",re.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tgl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif",re.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",re.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\t#ifdef GAMMA_INPUT\n\n\t\tvColor = color * color;\n\n\t#else\n\n\t\tvColor = color;\n\n\t#endif\n\n#endif",re.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\t#ifdef USE_MORPHTARGETS\n\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n",re.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\tuniform bool useRefract;\n\n#endif\n",re.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n\tgl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif",re.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif",re.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n",re.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n",re.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\tvec3 reflectVec;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\n\t\tvec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n\t\tif ( useRefract ) {\n\n\t\t\treflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t} else { \n\n\t\t\treflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t}\n\n\t#else\n\n\t\treflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t\tvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#else\n\n\t\tvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#endif\n\n\t#ifdef GAMMA_INPUT\n\n\t\tcubeColor.xyz *= cubeColor.xyz;\n\n\t#endif\n\n\tif ( combine == 1 ) {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n\n\t} else if ( combine == 2 ) {\n\n\t\tgl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n\n\t} else {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n\n\t}\n\n#endif",re.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif",re.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif",re.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif",re.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif",re.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tconst float LOG2 = 1.442695;\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif",re.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t\t\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t\t\t//\thttp://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif",re.ShaderChunk.defaultnormal_vertex="vec3 objectNormal;\n\n#ifdef USE_SKINNING\n\n\tobjectNormal = skinnedNormal.xyz;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n\n\tobjectNormal = morphedNormal;\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n\n\tobjectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;",re.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",re.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",re.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",re.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\tgl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif",re.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",re.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tgl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif",re.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\tvec3 morphed = vec3( 0.0 );\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n\tmorphed += position;\n\n#endif",re.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n\tworldNormal = normalize( worldNormal );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\tif ( useRefract ) {\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t} else {\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t}\n\n#endif",re.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\t#ifdef SHADOWMAP_CASCADE\n\n\t\tint inFrustumCount = 0;\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\t\t// don't shadow pixels outside of light frustum\n\t\t\t\t// use just first frustum (for cascades)\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\n\n\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\tinFrustumCount += int( inFrustum );\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n\t\t#else\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t#endif\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#else\n\n\t\t\t\tif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t}\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\tshadowColor *= shadowColor;\n\n\t#endif\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n",re.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#endif\n\n\t#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n\t#endif\n\n\t#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n#endif",re.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif",re.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",re.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\t#extension GL_EXT_frag_depth : enable\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif",re.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tgl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",re.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",re.UniformsUtils={merge:function(e){for(var t={},r=0;r<e.length;r++){var n=this.clone(e[r]);for(var i in n)t[i]=n[i]}return t},clone:function(e){var t={};for(var r in e)for(var n in t[r]={},e[r]){var i=e[r][n];i instanceof re.Color||i instanceof re.Vector2||i instanceof re.Vector3||i instanceof re.Vector4||i instanceof re.Matrix4||i instanceof re.Texture?t[r][n]=i.clone():t[r][n]=i instanceof Array?i.slice():i}return t}},re.UniformsLib={common:{diffuse:{type:"c",value:new re.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new re.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new re.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new re.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new re.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new re.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},re.ShaderLib={basic:{uniforms:re.UniformsUtils.merge([re.UniformsLib.common,re.UniformsLib.fog,re.UniformsLib.shadowmap]),vertexShader:[re.ShaderChunk.map_pars_vertex,re.ShaderChunk.lightmap_pars_vertex,re.ShaderChunk.envmap_pars_vertex,re.ShaderChunk.color_pars_vertex,re.ShaderChunk.morphtarget_pars_vertex,re.ShaderChunk.skinning_pars_vertex,re.ShaderChunk.shadowmap_pars_vertex,re.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",re.ShaderChunk.map_vertex,re.ShaderChunk.lightmap_vertex,re.ShaderChunk.color_vertex,re.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",re.ShaderChunk.morphnormal_vertex,re.ShaderChunk.skinnormal_vertex,re.ShaderChunk.defaultnormal_vertex,"\t#endif",re.ShaderChunk.morphtarget_vertex,re.ShaderChunk.skinning_vertex,re.ShaderChunk.default_vertex,re.ShaderChunk.logdepthbuf_vertex,re.ShaderChunk.worldpos_vertex,re.ShaderChunk.envmap_vertex,re.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",re.ShaderChunk.color_pars_fragment,re.ShaderChunk.map_pars_fragment,re.ShaderChunk.alphamap_pars_fragment,re.ShaderChunk.lightmap_pars_fragment,re.ShaderChunk.envmap_pars_fragment,re.ShaderChunk.fog_pars_fragment,re.ShaderChunk.shadowmap_pars_fragment,re.ShaderChunk.specularmap_pars_fragment,re.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tgl_FragColor = vec4( diffuse, opacity );",re.ShaderChunk.logdepthbuf_fragment,re.ShaderChunk.map_fragment,re.ShaderChunk.alphamap_fragment,re.ShaderChunk.alphatest_fragment,re.ShaderChunk.specularmap_fragment,re.ShaderChunk.lightmap_fragment,re.ShaderChunk.color_fragment,re.ShaderChunk.envmap_fragment,re.ShaderChunk.shadowmap_fragment,re.ShaderChunk.linear_to_gamma_fragment,re.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:re.UniformsUtils.merge([re.UniformsLib.common,re.UniformsLib.fog,re.UniformsLib.lights,re.UniformsLib.shadowmap,{ambient:{type:"c",value:new re.Color(16777215)},emissive:{type:"c",value:new re.Color(0)},wrapRGB:{type:"v3",value:new re.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","#endif",re.ShaderChunk.map_pars_vertex,re.ShaderChunk.lightmap_pars_vertex,re.ShaderChunk.envmap_pars_vertex,re.ShaderChunk.lights_lambert_pars_vertex,re.ShaderChunk.color_pars_vertex,re.ShaderChunk.morphtarget_pars_vertex,re.ShaderChunk.skinning_pars_vertex,re.ShaderChunk.shadowmap_pars_vertex,re.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",re.ShaderChunk.map_vertex,re.ShaderChunk.lightmap_vertex,re.ShaderChunk.color_vertex,re.ShaderChunk.morphnormal_vertex,re.ShaderChunk.skinbase_vertex,re.ShaderChunk.skinnormal_vertex,re.ShaderChunk.defaultnormal_vertex,re.ShaderChunk.morphtarget_vertex,re.ShaderChunk.skinning_vertex,re.ShaderChunk.default_vertex,re.ShaderChunk.logdepthbuf_vertex,re.ShaderChunk.worldpos_vertex,re.ShaderChunk.envmap_vertex,re.ShaderChunk.lights_lambert_vertex,re.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","#endif",re.ShaderChunk.color_pars_fragment,re.ShaderChunk.map_pars_fragment,re.ShaderChunk.alphamap_pars_fragment,re.ShaderChunk.lightmap_pars_fragment,re.ShaderChunk.envmap_pars_fragment,re.ShaderChunk.fog_pars_fragment,re.ShaderChunk.shadowmap_pars_fragment,re.ShaderChunk.specularmap_pars_fragment,re.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",re.ShaderChunk.logdepthbuf_fragment,re.ShaderChunk.map_fragment,re.ShaderChunk.alphamap_fragment,re.ShaderChunk.alphatest_fragment,re.ShaderChunk.specularmap_fragment,"\t#ifdef DOUBLE_SIDED","\t\tif ( gl_FrontFacing )","\t\t\tgl_FragColor.xyz *= vLightFront;","\t\telse","\t\t\tgl_FragColor.xyz *= vLightBack;","\t#else","\t\tgl_FragColor.xyz *= vLightFront;","\t#endif",re.ShaderChunk.lightmap_fragment,re.ShaderChunk.color_fragment,re.ShaderChunk.envmap_fragment,re.ShaderChunk.shadowmap_fragment,re.ShaderChunk.linear_to_gamma_fragment,re.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:re.UniformsUtils.merge([re.UniformsLib.common,re.UniformsLib.bump,re.UniformsLib.normalmap,re.UniformsLib.fog,re.UniformsLib.lights,re.UniformsLib.shadowmap,{ambient:{type:"c",value:new re.Color(16777215)},emissive:{type:"c",value:new re.Color(0)},specular:{type:"c",value:new re.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new re.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","varying vec3 vNormal;",re.ShaderChunk.map_pars_vertex,re.ShaderChunk.lightmap_pars_vertex,re.ShaderChunk.envmap_pars_vertex,re.ShaderChunk.lights_phong_pars_vertex,re.ShaderChunk.color_pars_vertex,re.ShaderChunk.morphtarget_pars_vertex,re.ShaderChunk.skinning_pars_vertex,re.ShaderChunk.shadowmap_pars_vertex,re.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",re.ShaderChunk.map_vertex,re.ShaderChunk.lightmap_vertex,re.ShaderChunk.color_vertex,re.ShaderChunk.morphnormal_vertex,re.ShaderChunk.skinbase_vertex,re.ShaderChunk.skinnormal_vertex,re.ShaderChunk.defaultnormal_vertex,"\tvNormal = normalize( transformedNormal );",re.ShaderChunk.morphtarget_vertex,re.ShaderChunk.skinning_vertex,re.ShaderChunk.default_vertex,re.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = -mvPosition.xyz;",re.ShaderChunk.worldpos_vertex,re.ShaderChunk.envmap_vertex,re.ShaderChunk.lights_phong_vertex,re.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform float opacity;","uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",re.ShaderChunk.color_pars_fragment,re.ShaderChunk.map_pars_fragment,re.ShaderChunk.alphamap_pars_fragment,re.ShaderChunk.lightmap_pars_fragment,re.ShaderChunk.envmap_pars_fragment,re.ShaderChunk.fog_pars_fragment,re.ShaderChunk.lights_phong_pars_fragment,re.ShaderChunk.shadowmap_pars_fragment,re.ShaderChunk.bumpmap_pars_fragment,re.ShaderChunk.normalmap_pars_fragment,re.ShaderChunk.specularmap_pars_fragment,re.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",re.ShaderChunk.logdepthbuf_fragment,re.ShaderChunk.map_fragment,re.ShaderChunk.alphamap_fragment,re.ShaderChunk.alphatest_fragment,re.ShaderChunk.specularmap_fragment,re.ShaderChunk.lights_phong_fragment,re.ShaderChunk.lightmap_fragment,re.ShaderChunk.color_fragment,re.ShaderChunk.envmap_fragment,re.ShaderChunk.shadowmap_fragment,re.ShaderChunk.linear_to_gamma_fragment,re.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:re.UniformsUtils.merge([re.UniformsLib.particle,re.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",re.ShaderChunk.color_pars_vertex,re.ShaderChunk.shadowmap_pars_vertex,re.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",re.ShaderChunk.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\t#ifdef USE_SIZEATTENUATION","\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );","\t#else","\t\tgl_PointSize = size;","\t#endif","\tgl_Position = projectionMatrix * mvPosition;",re.ShaderChunk.logdepthbuf_vertex,re.ShaderChunk.worldpos_vertex,re.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",re.ShaderChunk.color_pars_fragment,re.ShaderChunk.map_particle_pars_fragment,re.ShaderChunk.fog_pars_fragment,re.ShaderChunk.shadowmap_pars_fragment,re.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tgl_FragColor = vec4( psColor, opacity );",re.ShaderChunk.logdepthbuf_fragment,re.ShaderChunk.map_particle_fragment,re.ShaderChunk.alphatest_fragment,re.ShaderChunk.color_fragment,re.ShaderChunk.shadowmap_fragment,re.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:re.UniformsUtils.merge([re.UniformsLib.common,re.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",re.ShaderChunk.color_pars_vertex,re.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",re.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;","\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * mvPosition;",re.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",re.ShaderChunk.color_pars_fragment,re.ShaderChunk.fog_pars_fragment,re.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tif ( mod( vLineDistance, totalSize ) > dashSize ) {","\t\tdiscard;","\t}","\tgl_FragColor = vec4( diffuse, opacity );",re.ShaderChunk.logdepthbuf_fragment,re.ShaderChunk.color_fragment,re.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[re.ShaderChunk.morphtarget_pars_vertex,re.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",re.ShaderChunk.morphtarget_vertex,re.ShaderChunk.default_vertex,re.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",re.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",re.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;","\t#else","\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;","\t#endif","\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );","\tgl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",re.ShaderChunk.morphtarget_pars_vertex,re.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","\tvNormal = normalize( normalMatrix * normal );",re.ShaderChunk.morphtarget_vertex,re.ShaderChunk.default_vertex,re.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",re.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",re.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},normalmap:{uniforms:re.UniformsUtils.merge([re.UniformsLib.fog,re.UniformsLib.lights,re.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new re.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new re.Color(16777215)},specular:{type:"c",value:new re.Color(1118481)},ambient:{type:"c",value:new re.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new re.Vector2(0,0)},uRepeat:{type:"v2",value:new re.Vector2(1,1)},wrapRGB:{type:"v3",value:new re.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;","uniform bool enableDiffuse;","uniform bool enableSpecular;","uniform bool enableAO;","uniform bool enableReflection;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tSpecular;","uniform sampler2D tAO;","uniform samplerCube tCube;","uniform vec2 uNormalScale;","uniform bool useRefract;","uniform float refractionRatio;","uniform float reflectivity;","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","\tuniform vec3 wrapRGB;","#endif","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",re.ShaderChunk.shadowmap_pars_fragment,re.ShaderChunk.fog_pars_fragment,re.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",re.ShaderChunk.logdepthbuf_fragment,"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );","\tvec3 specularTex = vec3( 1.0 );","\tvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;","\tnormalTex.xy *= uNormalScale;","\tnormalTex = normalize( normalTex );","\tif( enableDiffuse ) {","\t\t#ifdef GAMMA_INPUT","\t\t\tvec4 texelColor = texture2D( tDiffuse, vUv );","\t\t\ttexelColor.xyz *= texelColor.xyz;","\t\t\tgl_FragColor = gl_FragColor * texelColor;","\t\t#else","\t\t\tgl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );","\t\t#endif","\t}","\tif( enableAO ) {","\t\t#ifdef GAMMA_INPUT","\t\t\tvec4 aoColor = texture2D( tAO, vUv );","\t\t\taoColor.xyz *= aoColor.xyz;","\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;","\t\t#else","\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;","\t\t#endif","\t}",re.ShaderChunk.alphatest_fragment,"\tif( enableSpecular )","\t\tspecularTex = texture2D( tSpecular, vUv ).xyz;","\tmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );","\tvec3 finalNormal = tsb * normalTex;","\t#ifdef FLIP_SIDED","\t\tfinalNormal = -finalNormal;","\t#endif","\tvec3 normal = normalize( finalNormal );","\tvec3 viewPosition = normalize( vViewPosition );","\t#if MAX_POINT_LIGHTS > 0","\t\tvec3 pointDiffuse = vec3( 0.0 );","\t\tvec3 pointSpecular = vec3( 0.0 );","\t\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","\t\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","\t\t\tvec3 pointVector = lPosition.xyz + vViewPosition.xyz;","\t\t\tfloat pointDistance = 1.0;","\t\t\tif ( pointLightDistance[ i ] > 0.0 )","\t\t\t\tpointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );","\t\t\tpointVector = normalize( pointVector );","\t\t\t#ifdef WRAP_AROUND","\t\t\t\tfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );","\t\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );","\t\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","\t\t\t#else","\t\t\t\tfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );","\t\t\t#endif","\t\t\tpointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;","\t\t\tvec3 pointHalfVector = normalize( pointVector + viewPosition );","\t\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","\t\t\tfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );","\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;","\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );","\t\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;","\t\t}","\t#endif","\t#if MAX_SPOT_LIGHTS > 0","\t\tvec3 spotDiffuse = vec3( 0.0 );","\t\tvec3 spotSpecular = vec3( 0.0 );","\t\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","\t\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","\t\t\tvec3 spotVector = lPosition.xyz + vViewPosition.xyz;","\t\t\tfloat spotDistance = 1.0;","\t\t\tif ( spotLightDistance[ i ] > 0.0 )","\t\t\t\tspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );","\t\t\tspotVector = normalize( spotVector );","\t\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","\t\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {","\t\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );","\t\t\t\t#ifdef WRAP_AROUND","\t\t\t\t\tfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );","\t\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );","\t\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","\t\t\t\t#else","\t\t\t\t\tfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );","\t\t\t\t#endif","\t\t\t\tspotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;","\t\t\t\tvec3 spotHalfVector = normalize( spotVector + viewPosition );","\t\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","\t\t\t\tfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );","\t\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;","\t\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );","\t\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;","\t\t\t}","\t\t}","\t#endif","\t#if MAX_DIR_LIGHTS > 0","\t\tvec3 dirDiffuse = vec3( 0.0 );","\t\tvec3 dirSpecular = vec3( 0.0 );","\t\tfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {","\t\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","\t\t\tvec3 dirVector = normalize( lDirection.xyz );","\t\t\t#ifdef WRAP_AROUND","\t\t\t\tfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );","\t\t\t\tfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );","\t\t\t\tvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );","\t\t\t#else","\t\t\t\tfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );","\t\t\t#endif","\t\t\tdirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;","\t\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );","\t\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","\t\t\tfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );","\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;","\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );","\t\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","\t\t}","\t#endif","\t#if MAX_HEMI_LIGHTS > 0","\t\tvec3 hemiDiffuse = vec3( 0.0 );","\t\tvec3 hemiSpecular = vec3( 0.0 );","\t\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","\t\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","\t\t\tvec3 lVector = normalize( lDirection.xyz );","\t\t\tfloat dotProduct = dot( normal, lVector );","\t\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","\t\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","\t\t\themiDiffuse += diffuse * hemiColor;","\t\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","\t\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","\t\t\tfloat hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );","\t\t\tvec3 lVectorGround = -lVector;","\t\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","\t\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","\t\t\tfloat hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );","\t\t\tfloat dotProductGround = dot( normal, lVectorGround );","\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;","\t\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );","\t\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );","\t\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","\t\t}","\t#endif","\tvec3 totalDiffuse = vec3( 0.0 );","\tvec3 totalSpecular = vec3( 0.0 );","\t#if MAX_DIR_LIGHTS > 0","\t\ttotalDiffuse += dirDiffuse;","\t\ttotalSpecular += dirSpecular;","\t#endif","\t#if MAX_HEMI_LIGHTS > 0","\t\ttotalDiffuse += hemiDiffuse;","\t\ttotalSpecular += hemiSpecular;","\t#endif","\t#if MAX_POINT_LIGHTS > 0","\t\ttotalDiffuse += pointDiffuse;","\t\ttotalSpecular += pointSpecular;","\t#endif","\t#if MAX_SPOT_LIGHTS > 0","\t\ttotalDiffuse += spotDiffuse;","\t\ttotalSpecular += spotSpecular;","\t#endif","\t#ifdef METAL","\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );","\t#else","\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","\t#endif","\tif ( enableReflection ) {","\t\tvec3 vReflect;","\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","\t\tif ( useRefract ) {","\t\t\tvReflect = refract( cameraToVertex, normal, refractionRatio );","\t\t} else {","\t\t\tvReflect = reflect( cameraToVertex, normal );","\t\t}","\t\tvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","\t\t#ifdef GAMMA_INPUT","\t\t\tcubeColor.xyz *= cubeColor.xyz;","\t\t#endif","\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );","\t}",re.ShaderChunk.shadowmap_fragment,re.ShaderChunk.linear_to_gamma_fragment,re.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;","uniform vec2 uOffset;","uniform vec2 uRepeat;","uniform bool enableDisplacement;","#ifdef VERTEX_TEXTURES","\tuniform sampler2D tDisplacement;","\tuniform float uDisplacementScale;","\tuniform float uDisplacementBias;","#endif","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",re.ShaderChunk.skinning_pars_vertex,re.ShaderChunk.shadowmap_pars_vertex,re.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",re.ShaderChunk.skinbase_vertex,re.ShaderChunk.skinnormal_vertex,"\t#ifdef USE_SKINNING","\t\tvNormal = normalize( normalMatrix * skinnedNormal.xyz );","\t\tvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );","\t\tvTangent = normalize( normalMatrix * skinnedTangent.xyz );","\t#else","\t\tvNormal = normalize( normalMatrix * normal );","\t\tvTangent = normalize( normalMatrix * tangent.xyz );","\t#endif","\tvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );","\tvUv = uv * uRepeat + uOffset;","\tvec3 displacedPosition;","\t#ifdef VERTEX_TEXTURES","\t\tif ( enableDisplacement ) {","\t\t\tvec3 dv = texture2D( tDisplacement, uv ).xyz;","\t\t\tfloat df = uDisplacementScale * dv.x + uDisplacementBias;","\t\t\tdisplacedPosition = position + normalize( normal ) * df;","\t\t} else {","\t\t\t#ifdef USE_SKINNING","\t\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );","\t\t\t\tvec4 skinned = vec4( 0.0 );","\t\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;","\t\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;","\t\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;","\t\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;","\t\t\t\tskinned  = bindMatrixInverse * skinned;","\t\t\t\tdisplacedPosition = skinned.xyz;","\t\t\t#else","\t\t\t\tdisplacedPosition = position;","\t\t\t#endif","\t\t}","\t#else","\t\t#ifdef USE_SKINNING","\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );","\t\t\tvec4 skinned = vec4( 0.0 );","\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;","\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;","\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;","\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;","\t\t\tskinned  = bindMatrixInverse * skinned;","\t\t\tdisplacedPosition = skinned.xyz;","\t\t#else","\t\t\tdisplacedPosition = position;","\t\t#endif","\t#endif","\tvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );","\tgl_Position = projectionMatrix * mvPosition;",re.ShaderChunk.logdepthbuf_vertex,"\tvWorldPosition = worldPosition.xyz;","\tvViewPosition = -mvPosition.xyz;","\t#ifdef USE_SHADOWMAP","\t\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {","\t\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","\t\t}","\t#endif","}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",re.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",re.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",re.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",re.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[re.ShaderChunk.morphtarget_pars_vertex,re.ShaderChunk.skinning_pars_vertex,re.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",re.ShaderChunk.skinbase_vertex,re.ShaderChunk.morphtarget_vertex,re.ShaderChunk.skinning_vertex,re.ShaderChunk.default_vertex,re.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[re.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","\tres -= res.xxyz * bit_mask;","\treturn res;","}","void main() {",re.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","\t#else","\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","\t#endif","}"].join("\n")}},re.WebGLRenderer=function(e){console.log("THREE.WebGLRenderer",re.REVISION);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElement("canvas"),r=void 0!==e.context?e.context:null,n=void 0!==e.precision?e.precision:"highp",i=void 0!==e.alpha&&e.alpha,o=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,l=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.logarithmicDepthBuffer&&e.logarithmicDepthBuffer,h=new re.Color(0),f=0,d=[],p={},m=[],g=[],v=[],y=[],x=[];this.domElement=t,this.context=null,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==te.devicePixelRatio?te.devicePixelRatio:1,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaInput=!1,this.gammaOutput=!1,this.shadowMapEnabled=!1,this.shadowMapType=re.PCFShadowMap,this.shadowMapCullFace=re.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var b,w=this,_=[],M=null,S=null,A=-1,C=-1,T=null,E=0,k=-1,P=-1,L=-1,R=-1,D=-1,F=-1,z=-1,O=-1,B=null,I=null,N=null,U=null,V=0,H=0,G=t.width,j=t.height,W=0,Q=0,X=new Uint8Array(16),q=new Uint8Array(16),Y=new re.Frustum,K=new re.Matrix4,J=new re.Matrix4,Z=new re.Vector3,$=new re.Vector3,ee=!0,ne={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};try{var ie={alpha:i,depth:o,stencil:a,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:c};if(null===(b=r||t.getContext("webgl",ie)||t.getContext("experimental-webgl",ie)))throw null!==t.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context."}catch(e){console.error(e)}void 0===b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var oe=new re.WebGLExtensions(b);oe.get("OES_texture_float"),oe.get("OES_texture_float_linear"),oe.get("OES_standard_derivatives"),u&&oe.get("EXT_frag_depth"),b.clearColor(0,0,0,1),b.clearDepth(1),b.clearStencil(0),b.enable(b.DEPTH_TEST),b.depthFunc(b.LEQUAL),b.frontFace(b.CCW),b.cullFace(b.BACK),b.enable(b.CULL_FACE),b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),b.viewport(V,H,G,j),b.clearColor(h.r,h.g,h.b,f),this.context=b;var ae,se=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS),le=b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ce=b.getParameter(b.MAX_TEXTURE_SIZE),ue=b.getParameter(b.MAX_CUBE_MAP_TEXTURE_SIZE),he=le>0,fe=he&&oe.get("OES_texture_float"),de=b.getShaderPrecisionFormat(b.VERTEX_SHADER,b.HIGH_FLOAT),pe=b.getShaderPrecisionFormat(b.VERTEX_SHADER,b.MEDIUM_FLOAT),me=(b.getShaderPrecisionFormat(b.VERTEX_SHADER,b.LOW_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.HIGH_FLOAT)),ge=b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),ve=(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT),function(){if(void 0!==ae)return ae;if(ae=[],oe.get("WEBGL_compressed_texture_pvrtc")||oe.get("WEBGL_compressed_texture_s3tc"))for(var e=b.getParameter(b.COMPRESSED_TEXTURE_FORMATS),t=0;t<e.length;t++)ae.push(e[t]);return ae}),ye=de.precision>0&&me.precision>0,xe=pe.precision>0&&ge.precision>0;"highp"!==n||ye||(xe?(n="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(n="lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==n||xe||(n="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));var be,we=new re.ShadowMapPlugin(this,d,p,m),_e=new re.SpritePlugin(this,y),Me=new re.LensFlarePlugin(this,x);function Se(e){var t,r;if(e.__webglVertexBuffer=b.createBuffer(),e.__webglNormalBuffer=b.createBuffer(),e.__webglTangentBuffer=b.createBuffer(),e.__webglColorBuffer=b.createBuffer(),e.__webglUVBuffer=b.createBuffer(),e.__webglUV2Buffer=b.createBuffer(),e.__webglSkinIndicesBuffer=b.createBuffer(),e.__webglSkinWeightsBuffer=b.createBuffer(),e.__webglFaceBuffer=b.createBuffer(),e.__webglLineBuffer=b.createBuffer(),e.numMorphTargets)for(e.__webglMorphTargetsBuffers=[],t=0,r=e.numMorphTargets;t<r;t++)e.__webglMorphTargetsBuffers.push(b.createBuffer());if(e.numMorphNormals)for(e.__webglMorphNormalsBuffers=[],t=0,r=e.numMorphNormals;t<r;t++)e.__webglMorphNormalsBuffers.push(b.createBuffer());w.info.memory.geometries++}this.getContext=function(){return b},this.supportsVertexTextures=function(){return he},this.supportsFloatTextures=function(){return oe.get("OES_texture_float")},this.supportsStandardDerivatives=function(){return oe.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return oe.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return oe.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return oe.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){if(void 0!==be)return be;var e=oe.get("EXT_texture_filter_anisotropic");return be=null!==e?b.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},this.getPrecision=function(){return n},this.setSize=function(e,r,n){t.width=e*this.devicePixelRatio,t.height=r*this.devicePixelRatio,!1!==n&&(t.style.width=e+"px",t.style.height=r+"px"),this.setViewport(0,0,e,r)},this.setViewport=function(e,t,r,n){V=e*this.devicePixelRatio,H=t*this.devicePixelRatio,G=r*this.devicePixelRatio,j=n*this.devicePixelRatio,b.viewport(V,H,G,j)},this.setScissor=function(e,t,r,n){b.scissor(e*this.devicePixelRatio,t*this.devicePixelRatio,r*this.devicePixelRatio,n*this.devicePixelRatio)},this.enableScissorTest=function(e){e?b.enable(b.SCISSOR_TEST):b.disable(b.SCISSOR_TEST)},this.setClearColor=function(e,t){h.set(e),f=void 0!==t?t:1,b.clearColor(h.r,h.g,h.b,f)},this.setClearColorHex=function(e,t){console.warn("THREE.WebGLRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return h},this.getClearAlpha=function(){return f},this.clear=function(e,t,r){var n=0;(void 0===e||e)&&(n|=b.COLOR_BUFFER_BIT),(void 0===t||t)&&(n|=b.DEPTH_BUFFER_BIT),(void 0===r||r)&&(n|=b.STENCIL_BUFFER_BIT),b.clear(n)},this.clearColor=function(){b.clear(b.COLOR_BUFFER_BIT)},this.clearDepth=function(){b.clear(b.DEPTH_BUFFER_BIT)},this.clearStencil=function(){b.clear(b.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,r,n){this.setRenderTarget(e),this.clear(t,r,n)},this.resetGLState=function(){M=null,T=null,L=-1,z=-1,O=-1,k=-1,P=-1,C=-1,A=-1,ee=!0};var Ae=function(e){e.target.traverse((function(e){e.removeEventListener("remove",Ae),function(e){e instanceof re.Mesh||e instanceof re.PointCloud||e instanceof re.Line?delete p[e.id]:(e instanceof re.ImmediateRenderObject||e.immediateRenderCallback)&&function(e,t){for(var r=e.length-1;r>=0;r--)e[r].object===t&&e.splice(r,1)}(m,e);delete e.__webglInit,delete e._modelViewMatrix,delete e._normalMatrix,delete e.__webglActive}(e)}))},Ce=function(e){var t=e.target;t.removeEventListener("dispose",Ce),Le(t)},Te=function(e){var t=e.target;t.removeEventListener("dispose",Te),Re(t),w.info.memory.textures--},Ee=function(e){var t=e.target;t.removeEventListener("dispose",Ee),De(t),w.info.memory.textures--},ke=function(e){var t=e.target;t.removeEventListener("dispose",ke),Fe(t)},Pe=function(e){for(var t=["__webglVertexBuffer","__webglNormalBuffer","__webglTangentBuffer","__webglColorBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","__webglLineDistanceBuffer"],r=0,n=t.length;r<n;r++){void 0!==e[i=t[r]]&&(b.deleteBuffer(e[i]),delete e[i])}if(void 0!==e.__webglCustomAttributesList){for(var i in e.__webglCustomAttributesList)b.deleteBuffer(e.__webglCustomAttributesList[i].buffer);delete e.__webglCustomAttributesList}w.info.memory.geometries--},Le=function(e){if(delete e.__webglInit,e instanceof re.BufferGeometry){for(var t in e.attributes){var r=e.attributes[t];void 0!==r.buffer&&(b.deleteBuffer(r.buffer),delete r.buffer)}w.info.memory.geometries--}else{var n=Ke[e.id];if(void 0!==n){for(var i=0,o=n.length;i<o;i++){var a=n[i];if(void 0!==a.numMorphTargets){for(var s=0,l=a.numMorphTargets;s<l;s++)b.deleteBuffer(a.__webglMorphTargetsBuffers[s]);delete a.__webglMorphTargetsBuffers}if(void 0!==a.numMorphNormals){for(s=0,l=a.numMorphNormals;s<l;s++)b.deleteBuffer(a.__webglMorphNormalsBuffers[s]);delete a.__webglMorphNormalsBuffers}Pe(a)}delete Ke[e.id]}else Pe(e)}C=-1},Re=function(e){if(e.image&&e.image.__webglTextureCube)b.deleteTexture(e.image.__webglTextureCube),delete e.image.__webglTextureCube;else{if(void 0===e.__webglInit)return;b.deleteTexture(e.__webglTexture),delete e.__webglTexture,delete e.__webglInit}},De=function(e){if(e&&void 0!==e.__webglTexture){if(b.deleteTexture(e.__webglTexture),delete e.__webglTexture,e instanceof re.WebGLRenderTargetCube)for(var t=0;t<6;t++)b.deleteFramebuffer(e.__webglFramebuffer[t]),b.deleteRenderbuffer(e.__webglRenderbuffer[t]);else b.deleteFramebuffer(e.__webglFramebuffer),b.deleteRenderbuffer(e.__webglRenderbuffer);delete e.__webglFramebuffer,delete e.__webglRenderbuffer}},Fe=function(e){var t=e.program.program;if(void 0!==t){var r,n,i;e.program=void 0;var o=!1;for(r=0,n=_.length;r<n;r++)if((i=_[r]).program===t){i.usedTimes--,0===i.usedTimes&&(o=!0);break}if(!0===o){var a=[];for(r=0,n=_.length;r<n;r++)(i=_[r]).program!==t&&a.push(i);_=a,b.deleteProgram(t),w.info.memory.programs--}}};function ze(e){var t=e.geometry,r=e.material,n=t.vertices.length;if(r.attributes)for(var i in void 0===t.__webglCustomAttributesList&&(t.__webglCustomAttributesList=[]),r.attributes){var o=r.attributes[i];if(!o.__webglInitialized||o.createUniqueBuffers){o.__webglInitialized=!0;var a=1;"v2"===o.type?a=2:"v3"===o.type?a=3:"v4"===o.type?a=4:"c"===o.type&&(a=3),o.size=a,o.array=new Float32Array(n*a),o.buffer=b.createBuffer(),o.buffer.belongsToAttribute=i,o.needsUpdate=!0}t.__webglCustomAttributesList.push(o)}}function Oe(e,t){var r=t.geometry,n=e.faces3,i=3*n.length,o=1*n.length,a=3*n.length,s=Be(t,e);e.__vertexArray=new Float32Array(3*i),e.__normalArray=new Float32Array(3*i),e.__colorArray=new Float32Array(3*i),e.__uvArray=new Float32Array(2*i),r.faceVertexUvs.length>1&&(e.__uv2Array=new Float32Array(2*i)),r.hasTangents&&(e.__tangentArray=new Float32Array(4*i)),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*i),e.__skinWeightArray=new Float32Array(4*i));var l,c,u=null!==oe.get("OES_element_index_uint")&&o>21845?Uint32Array:Uint16Array;if(e.__typeArray=u,e.__faceArray=new u(3*o),e.__lineArray=new u(2*a),e.numMorphTargets)for(e.__morphTargetsArrays=[],l=0,c=e.numMorphTargets;l<c;l++)e.__morphTargetsArrays.push(new Float32Array(3*i));if(e.numMorphNormals)for(e.__morphNormalsArrays=[],l=0,c=e.numMorphNormals;l<c;l++)e.__morphNormalsArrays.push(new Float32Array(3*i));if(e.__webglFaceCount=3*o,e.__webglLineCount=2*a,s.attributes)for(var h in void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]),s.attributes){var f=s.attributes[h],d={};for(var p in f)d[p]=f[p];if(!d.__webglInitialized||d.createUniqueBuffers){d.__webglInitialized=!0;var m=1;"v2"===d.type?m=2:"v3"===d.type?m=3:"v4"===d.type?m=4:"c"===d.type&&(m=3),d.size=m,d.array=new Float32Array(i*m),d.buffer=b.createBuffer(),d.buffer.belongsToAttribute=h,f.needsUpdate=!0,d.__original=f}e.__webglCustomAttributesList.push(d)}e.__inittedArrays=!0}function Be(e,t){return e.material instanceof re.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function Ie(e,t,r,n,i){if(e.__inittedArrays){var o,a,s,l,c,u,h,f,d,p,m,g,v,y,x,w,_,M,S,A,C,T,E,k,P,L,R,D,F,z,O,B,I,N,U,V,H,G,j,W,Q,X=function(e){return e&&void 0!==e.shading&&e.shading===re.SmoothShading}(i),q=0,Y=0,K=0,J=0,Z=0,$=0,ee=0,te=0,ne=0,ie=0,oe=0,ae=0,se=e.__vertexArray,le=e.__uvArray,ce=e.__uv2Array,ue=e.__normalArray,he=e.__tangentArray,fe=e.__colorArray,de=e.__skinIndexArray,pe=e.__skinWeightArray,me=e.__morphTargetsArrays,ge=e.__morphNormalsArrays,ve=e.__webglCustomAttributesList,ye=e.__faceArray,xe=e.__lineArray,be=t.geometry,we=be.verticesNeedUpdate,_e=be.elementsNeedUpdate,Me=be.uvsNeedUpdate,Se=be.normalsNeedUpdate,Ae=be.tangentsNeedUpdate,Ce=be.colorsNeedUpdate,Te=be.morphTargetsNeedUpdate,Ee=be.vertices,ke=e.faces3,Pe=be.faces,Le=be.faceVertexUvs[0],Re=be.faceVertexUvs[1],De=(be.colors,be.skinIndices),Fe=be.skinWeights,ze=be.morphTargets,Oe=be.morphNormals;if(we){for(o=0,a=ke.length;o<a;o++)m=Ee[(s=Pe[ke[o]]).a],g=Ee[s.b],v=Ee[s.c],se[Y]=m.x,se[Y+1]=m.y,se[Y+2]=m.z,se[Y+3]=g.x,se[Y+4]=g.y,se[Y+5]=g.z,se[Y+6]=v.x,se[Y+7]=v.y,se[Y+8]=v.z,Y+=9;b.bindBuffer(b.ARRAY_BUFFER,e.__webglVertexBuffer),b.bufferData(b.ARRAY_BUFFER,se,r)}if(Te)for(N=0,U=ze.length;N<U;N++){for(oe=0,o=0,a=ke.length;o<a;o++)s=Pe[G=ke[o]],m=ze[N].vertices[s.a],g=ze[N].vertices[s.b],v=ze[N].vertices[s.c],(V=me[N])[oe]=m.x,V[oe+1]=m.y,V[oe+2]=m.z,V[oe+3]=g.x,V[oe+4]=g.y,V[oe+5]=g.z,V[oe+6]=v.x,V[oe+7]=v.y,V[oe+8]=v.z,i.morphNormals&&(X?(_=(j=Oe[N].vertexNormals[G]).a,M=j.b,S=j.c):(M=_=Oe[N].faceNormals[G],S=_),(H=ge[N])[oe]=_.x,H[oe+1]=_.y,H[oe+2]=_.z,H[oe+3]=M.x,H[oe+4]=M.y,H[oe+5]=M.z,H[oe+6]=S.x,H[oe+7]=S.y,H[oe+8]=S.z),oe+=9;b.bindBuffer(b.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[N]),b.bufferData(b.ARRAY_BUFFER,me[N],r),i.morphNormals&&(b.bindBuffer(b.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[N]),b.bufferData(b.ARRAY_BUFFER,ge[N],r))}if(Fe.length){for(o=0,a=ke.length;o<a;o++)E=Fe[(s=Pe[ke[o]]).a],k=Fe[s.b],P=Fe[s.c],pe[ie]=E.x,pe[ie+1]=E.y,pe[ie+2]=E.z,pe[ie+3]=E.w,pe[ie+4]=k.x,pe[ie+5]=k.y,pe[ie+6]=k.z,pe[ie+7]=k.w,pe[ie+8]=P.x,pe[ie+9]=P.y,pe[ie+10]=P.z,pe[ie+11]=P.w,L=De[s.a],R=De[s.b],D=De[s.c],de[ie]=L.x,de[ie+1]=L.y,de[ie+2]=L.z,de[ie+3]=L.w,de[ie+4]=R.x,de[ie+5]=R.y,de[ie+6]=R.z,de[ie+7]=R.w,de[ie+8]=D.x,de[ie+9]=D.y,de[ie+10]=D.z,de[ie+11]=D.w,ie+=12;ie>0&&(b.bindBuffer(b.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),b.bufferData(b.ARRAY_BUFFER,de,r),b.bindBuffer(b.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),b.bufferData(b.ARRAY_BUFFER,pe,r))}if(Ce){for(o=0,a=ke.length;o<a;o++)u=(s=Pe[ke[o]]).vertexColors,h=s.color,3===u.length&&i.vertexColors===re.VertexColors?(A=u[0],C=u[1],T=u[2]):(A=h,C=h,T=h),fe[ne]=A.r,fe[ne+1]=A.g,fe[ne+2]=A.b,fe[ne+3]=C.r,fe[ne+4]=C.g,fe[ne+5]=C.b,fe[ne+6]=T.r,fe[ne+7]=T.g,fe[ne+8]=T.b,ne+=9;ne>0&&(b.bindBuffer(b.ARRAY_BUFFER,e.__webglColorBuffer),b.bufferData(b.ARRAY_BUFFER,fe,r))}if(Ae&&be.hasTangents){for(o=0,a=ke.length;o<a;o++)y=(f=(s=Pe[ke[o]]).vertexTangents)[0],x=f[1],w=f[2],he[ee]=y.x,he[ee+1]=y.y,he[ee+2]=y.z,he[ee+3]=y.w,he[ee+4]=x.x,he[ee+5]=x.y,he[ee+6]=x.z,he[ee+7]=x.w,he[ee+8]=w.x,he[ee+9]=w.y,he[ee+10]=w.z,he[ee+11]=w.w,ee+=12;b.bindBuffer(b.ARRAY_BUFFER,e.__webglTangentBuffer),b.bufferData(b.ARRAY_BUFFER,he,r)}if(Se){for(o=0,a=ke.length;o<a;o++)if(l=(s=Pe[ke[o]]).vertexNormals,c=s.normal,3===l.length&&X)for(F=0;F<3;F++)O=l[F],ue[$]=O.x,ue[$+1]=O.y,ue[$+2]=O.z,$+=3;else for(F=0;F<3;F++)ue[$]=c.x,ue[$+1]=c.y,ue[$+2]=c.z,$+=3;b.bindBuffer(b.ARRAY_BUFFER,e.__webglNormalBuffer),b.bufferData(b.ARRAY_BUFFER,ue,r)}if(Me&&Le){for(o=0,a=ke.length;o<a;o++)if(void 0!==(d=Le[ke[o]]))for(F=0;F<3;F++)B=d[F],le[K]=B.x,le[K+1]=B.y,K+=2;K>0&&(b.bindBuffer(b.ARRAY_BUFFER,e.__webglUVBuffer),b.bufferData(b.ARRAY_BUFFER,le,r))}if(Me&&Re){for(o=0,a=ke.length;o<a;o++)if(void 0!==(p=Re[ke[o]]))for(F=0;F<3;F++)I=p[F],ce[J]=I.x,ce[J+1]=I.y,J+=2;J>0&&(b.bindBuffer(b.ARRAY_BUFFER,e.__webglUV2Buffer),b.bufferData(b.ARRAY_BUFFER,ce,r))}if(_e){for(o=0,a=ke.length;o<a;o++)ye[Z]=q,ye[Z+1]=q+1,ye[Z+2]=q+2,Z+=3,xe[te]=q,xe[te+1]=q+1,xe[te+2]=q,xe[te+3]=q+2,xe[te+4]=q+1,xe[te+5]=q+2,te+=6,q+=3;b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,ye,r),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,xe,r)}if(ve)for(F=0,z=ve.length;F<z;F++)if((Q=ve[F]).__original.needsUpdate){if(ae=0,0,1===Q.size){if(void 0===Q.boundTo||"vertices"===Q.boundTo)for(o=0,a=ke.length;o<a;o++)s=Pe[ke[o]],Q.array[ae]=Q.value[s.a],Q.array[ae+1]=Q.value[s.b],Q.array[ae+2]=Q.value[s.c],ae+=3;else if("faces"===Q.boundTo)for(o=0,a=ke.length;o<a;o++)W=Q.value[ke[o]],Q.array[ae]=W,Q.array[ae+1]=W,Q.array[ae+2]=W,ae+=3}else if(2===Q.size){if(void 0===Q.boundTo||"vertices"===Q.boundTo)for(o=0,a=ke.length;o<a;o++)s=Pe[ke[o]],m=Q.value[s.a],g=Q.value[s.b],v=Q.value[s.c],Q.array[ae]=m.x,Q.array[ae+1]=m.y,Q.array[ae+2]=g.x,Q.array[ae+3]=g.y,Q.array[ae+4]=v.x,Q.array[ae+5]=v.y,ae+=6;else if("faces"===Q.boundTo)for(o=0,a=ke.length;o<a;o++)m=W=Q.value[ke[o]],g=W,v=W,Q.array[ae]=m.x,Q.array[ae+1]=m.y,Q.array[ae+2]=g.x,Q.array[ae+3]=g.y,Q.array[ae+4]=v.x,Q.array[ae+5]=v.y,ae+=6}else if(3===Q.size){var Be;if(Be="c"===Q.type?["r","g","b"]:["x","y","z"],void 0===Q.boundTo||"vertices"===Q.boundTo)for(o=0,a=ke.length;o<a;o++)s=Pe[ke[o]],m=Q.value[s.a],g=Q.value[s.b],v=Q.value[s.c],Q.array[ae]=m[Be[0]],Q.array[ae+1]=m[Be[1]],Q.array[ae+2]=m[Be[2]],Q.array[ae+3]=g[Be[0]],Q.array[ae+4]=g[Be[1]],Q.array[ae+5]=g[Be[2]],Q.array[ae+6]=v[Be[0]],Q.array[ae+7]=v[Be[1]],Q.array[ae+8]=v[Be[2]],ae+=9;else if("faces"===Q.boundTo)for(o=0,a=ke.length;o<a;o++)m=W=Q.value[ke[o]],g=W,v=W,Q.array[ae]=m[Be[0]],Q.array[ae+1]=m[Be[1]],Q.array[ae+2]=m[Be[2]],Q.array[ae+3]=g[Be[0]],Q.array[ae+4]=g[Be[1]],Q.array[ae+5]=g[Be[2]],Q.array[ae+6]=v[Be[0]],Q.array[ae+7]=v[Be[1]],Q.array[ae+8]=v[Be[2]],ae+=9;else if("faceVertices"===Q.boundTo)for(o=0,a=ke.length;o<a;o++)m=(W=Q.value[ke[o]])[0],g=W[1],v=W[2],Q.array[ae]=m[Be[0]],Q.array[ae+1]=m[Be[1]],Q.array[ae+2]=m[Be[2]],Q.array[ae+3]=g[Be[0]],Q.array[ae+4]=g[Be[1]],Q.array[ae+5]=g[Be[2]],Q.array[ae+6]=v[Be[0]],Q.array[ae+7]=v[Be[1]],Q.array[ae+8]=v[Be[2]],ae+=9}else if(4===Q.size)if(void 0===Q.boundTo||"vertices"===Q.boundTo)for(o=0,a=ke.length;o<a;o++)s=Pe[ke[o]],m=Q.value[s.a],g=Q.value[s.b],v=Q.value[s.c],Q.array[ae]=m.x,Q.array[ae+1]=m.y,Q.array[ae+2]=m.z,Q.array[ae+3]=m.w,Q.array[ae+4]=g.x,Q.array[ae+5]=g.y,Q.array[ae+6]=g.z,Q.array[ae+7]=g.w,Q.array[ae+8]=v.x,Q.array[ae+9]=v.y,Q.array[ae+10]=v.z,Q.array[ae+11]=v.w,ae+=12;else if("faces"===Q.boundTo)for(o=0,a=ke.length;o<a;o++)m=W=Q.value[ke[o]],g=W,v=W,Q.array[ae]=m.x,Q.array[ae+1]=m.y,Q.array[ae+2]=m.z,Q.array[ae+3]=m.w,Q.array[ae+4]=g.x,Q.array[ae+5]=g.y,Q.array[ae+6]=g.z,Q.array[ae+7]=g.w,Q.array[ae+8]=v.x,Q.array[ae+9]=v.y,Q.array[ae+10]=v.z,Q.array[ae+11]=v.w,ae+=12;else if("faceVertices"===Q.boundTo)for(o=0,a=ke.length;o<a;o++)m=(W=Q.value[ke[o]])[0],g=W[1],v=W[2],Q.array[ae]=m.x,Q.array[ae+1]=m.y,Q.array[ae+2]=m.z,Q.array[ae+3]=m.w,Q.array[ae+4]=g.x,Q.array[ae+5]=g.y,Q.array[ae+6]=g.z,Q.array[ae+7]=g.w,Q.array[ae+8]=v.x,Q.array[ae+9]=v.y,Q.array[ae+10]=v.z,Q.array[ae+11]=v.w,ae+=12;b.bindBuffer(b.ARRAY_BUFFER,Q.buffer),b.bufferData(b.ARRAY_BUFFER,Q.array,r)}n&&(delete e.__inittedArrays,delete e.__colorArray,delete e.__normalArray,delete e.__tangentArray,delete e.__uvArray,delete e.__uv2Array,delete e.__faceArray,delete e.__vertexArray,delete e.__lineArray,delete e.__skinIndexArray,delete e.__skinWeightArray)}}function Ne(e,t,r,n){for(var i=r.attributes,o=t.attributes,a=t.attributesKeys,s=0,l=a.length;s<l;s++){var c=a[s],u=o[c];if(u>=0){var h=i[c];if(void 0!==h){var f=h.itemSize;b.bindBuffer(b.ARRAY_BUFFER,h.buffer),Ve(u),b.vertexAttribPointer(u,f,b.FLOAT,!1,0,n*f*4)}else void 0!==e.defaultAttributeValues&&(2===e.defaultAttributeValues[c].length?b.vertexAttrib2fv(u,e.defaultAttributeValues[c]):3===e.defaultAttributeValues[c].length&&b.vertexAttrib3fv(u,e.defaultAttributeValues[c]))}}He()}function Ue(){for(var e=0,t=X.length;e<t;e++)X[e]=0}function Ve(e){X[e]=1,0===q[e]&&(b.enableVertexAttribArray(e),q[e]=1)}function He(){for(var e=0,t=q.length;e<t;e++)q[e]!==X[e]&&(b.disableVertexAttribArray(e),q[e]=0)}function Ge(e,t){return e.material.id!==t.material.id?t.material.id-e.material.id:e.z!==t.z?t.z-e.z:e.id-t.id}function je(e,t){return e.z!==t.z?e.z-t.z:e.id-t.id}function We(e,t){return t[0]-e[0]}function Qe(e,t,r,n,i,o){for(var a,s=e.length-1;-1!==s;s--){var l=e[s],c=l.object,u=l.buffer;if(st(c,t),o)a=o;else{if(!(a=l.material))continue;i&&w.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst),w.setDepthTest(a.depthTest),w.setDepthWrite(a.depthWrite),ht(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}w.setMaterialFaces(a),u instanceof re.BufferGeometry?w.renderBufferDirect(t,r,n,a,u,c):w.renderBuffer(t,r,n,a,u,c)}}function Xe(e,t,r,n,i,o,a){for(var s,l=0,c=e.length;l<c;l++){var u=e[l],h=u.object;if(h.visible){if(a)s=a;else{if(!(s=u[t]))continue;o&&w.setBlending(s.blending,s.blendEquation,s.blendSrc,s.blendDst),w.setDepthTest(s.depthTest),w.setDepthWrite(s.depthWrite),ht(s.polygonOffset,s.polygonOffsetFactor,s.polygonOffsetUnits)}w.renderImmediateObject(r,n,i,s,h)}}}function qe(e){var t=e.object.material;t.transparent?(e.transparent=t,e.opaque=null):(e.opaque=t,e.transparent=null)}function Ye(e){var t=e.object,r=e.buffer,n=t.geometry,i=t.material;if(i instanceof re.MeshFaceMaterial){var o=n instanceof re.BufferGeometry?0:r.materialIndex;i=i.materials[o],e.material=i,i.transparent?v.push(e):g.push(e)}else i&&(e.material=i,i.transparent?v.push(e):g.push(e))}this.renderBufferImmediate=function(e,t,r){if(Ue(),e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=b.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=b.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=b.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=b.createBuffer()),e.hasPositions&&(b.bindBuffer(b.ARRAY_BUFFER,e.__webglVertexBuffer),b.bufferData(b.ARRAY_BUFFER,e.positionArray,b.DYNAMIC_DRAW),Ve(t.attributes.position),b.vertexAttribPointer(t.attributes.position,3,b.FLOAT,!1,0,0)),e.hasNormals){if(b.bindBuffer(b.ARRAY_BUFFER,e.__webglNormalBuffer),r.shading===re.FlatShading){var n,i,o,a,s,l,c,u,h,f,d,p=3*e.count;for(d=0;d<p;d+=9)a=(f=e.normalArray)[d],l=f[d+1],u=f[d+2],s=f[d+3],c=f[d+4],h=f[d+5],n=(a+s+f[d+6])/3,i=(l+c+f[d+7])/3,o=(u+h+f[d+8])/3,f[d]=n,f[d+1]=i,f[d+2]=o,f[d+3]=n,f[d+4]=i,f[d+5]=o,f[d+6]=n,f[d+7]=i,f[d+8]=o}b.bufferData(b.ARRAY_BUFFER,e.normalArray,b.DYNAMIC_DRAW),Ve(t.attributes.normal),b.vertexAttribPointer(t.attributes.normal,3,b.FLOAT,!1,0,0)}e.hasUvs&&r.map&&(b.bindBuffer(b.ARRAY_BUFFER,e.__webglUvBuffer),b.bufferData(b.ARRAY_BUFFER,e.uvArray,b.DYNAMIC_DRAW),Ve(t.attributes.uv),b.vertexAttribPointer(t.attributes.uv,2,b.FLOAT,!1,0,0)),e.hasColors&&r.vertexColors!==re.NoColors&&(b.bindBuffer(b.ARRAY_BUFFER,e.__webglColorBuffer),b.bufferData(b.ARRAY_BUFFER,e.colorArray,b.DYNAMIC_DRAW),Ve(t.attributes.color),b.vertexAttribPointer(t.attributes.color,3,b.FLOAT,!1,0,0)),He(),b.drawArrays(b.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,r,n,i,o){if(!1!==n.visible){var a=nt(e,t,r,n,o),s=!1,l=n.wireframe?1:0,c=16777215*i.id+2*a.id+l;if(c!==C&&(C=c,s=!0),s&&Ue(),o instanceof re.Mesh){var u=!0===n.wireframe?b.LINES:b.TRIANGLES;if(m=i.attributes.index){if(m.array instanceof Uint32Array&&oe.get("OES_element_index_uint")?(g=b.UNSIGNED_INT,v=4):(g=b.UNSIGNED_SHORT,v=2),0===(y=i.offsets).length)s&&(Ne(n,a,i,0),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,m.buffer)),b.drawElements(u,m.array.length,g,0),w.info.render.calls++,w.info.render.vertices+=m.array.length,w.info.render.faces+=m.array.length/3;else{s=!0;for(var h=0,f=y.length;h<f;h++){var d=y[h].index;s&&(Ne(n,a,i,d),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,m.buffer)),b.drawElements(u,y[h].count,g,y[h].start*v),w.info.render.calls++,w.info.render.vertices+=y[h].count,w.info.render.faces+=y[h].count/3}}}else{s&&Ne(n,a,i,0);var p=i.attributes.position;b.drawArrays(u,0,p.array.length/3),w.info.render.calls++,w.info.render.vertices+=p.array.length/3,w.info.render.faces+=p.array.length/9}}else if(o instanceof re.PointCloud){s&&Ne(n,a,i,0);p=i.attributes.position;b.drawArrays(b.POINTS,0,p.array.length/3),w.info.render.calls++,w.info.render.points+=p.array.length/3}else if(o instanceof re.Line){var m;u=o.mode===re.LineStrip?b.LINE_STRIP:b.LINES;if(ut(n.linewidth),m=i.attributes.index){var g,v,y;if(m.array instanceof Uint32Array?(g=b.UNSIGNED_INT,v=4):(g=b.UNSIGNED_SHORT,v=2),0===(y=i.offsets).length)s&&(Ne(n,a,i,0),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,m.buffer)),b.drawElements(u,m.array.length,g,0),w.info.render.calls++,w.info.render.vertices+=m.array.length;else{y.length>1&&(s=!0);for(h=0,f=y.length;h<f;h++){d=y[h].index;s&&(Ne(n,a,i,d),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,m.buffer)),b.drawElements(u,y[h].count,g,y[h].start*v),w.info.render.calls++,w.info.render.vertices+=y[h].count}}}else{s&&Ne(n,a,i,0);p=i.attributes.position;b.drawArrays(u,0,p.array.length/3),w.info.render.calls++,w.info.render.points+=p.array.length/3}}}},this.renderBuffer=function(e,t,r,n,i,o){if(!1!==n.visible){var a=nt(e,t,r,n,o),s=a.attributes,l=!1,c=n.wireframe?1:0,u=16777215*i.id+2*a.id+c;if(u!==C&&(C=u,l=!0),l&&Ue(),!n.morphTargets&&s.position>=0?l&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglVertexBuffer),Ve(s.position),b.vertexAttribPointer(s.position,3,b.FLOAT,!1,0,0)):o.morphTargetBase&&function(e,t,r){var n=e.program.attributes;-1!==r.morphTargetBase&&n.position>=0?(b.bindBuffer(b.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[r.morphTargetBase]),Ve(n.position),b.vertexAttribPointer(n.position,3,b.FLOAT,!1,0,0)):n.position>=0&&(b.bindBuffer(b.ARRAY_BUFFER,t.__webglVertexBuffer),Ve(n.position),b.vertexAttribPointer(n.position,3,b.FLOAT,!1,0,0));if(r.morphTargetForcedOrder.length)for(var i=0,o=r.morphTargetForcedOrder,a=r.morphTargetInfluences;i<e.numSupportedMorphTargets&&i<o.length;)n["morphTarget"+i]>=0&&(b.bindBuffer(b.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[o[i]]),Ve(n["morphTarget"+i]),b.vertexAttribPointer(n["morphTarget"+i],3,b.FLOAT,!1,0,0)),n["morphNormal"+i]>=0&&e.morphNormals&&(b.bindBuffer(b.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[o[i]]),Ve(n["morphNormal"+i]),b.vertexAttribPointer(n["morphNormal"+i],3,b.FLOAT,!1,0,0)),r.__webglMorphTargetInfluences[i]=a[o[i]],i++;else{var s,l,c=[],u=(a=r.morphTargetInfluences).length;for(l=0;l<u;l++)(s=a[l])>0&&c.push([s,l]);c.length>e.numSupportedMorphTargets?(c.sort(We),c.length=e.numSupportedMorphTargets):c.length>e.numSupportedMorphNormals?c.sort(We):0===c.length&&c.push([0,0]);var h;for(i=0;i<e.numSupportedMorphTargets;)c[i]?(h=c[i][1],n["morphTarget"+i]>=0&&(b.bindBuffer(b.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[h]),Ve(n["morphTarget"+i]),b.vertexAttribPointer(n["morphTarget"+i],3,b.FLOAT,!1,0,0)),n["morphNormal"+i]>=0&&e.morphNormals&&(b.bindBuffer(b.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[h]),Ve(n["morphNormal"+i]),b.vertexAttribPointer(n["morphNormal"+i],3,b.FLOAT,!1,0,0)),r.__webglMorphTargetInfluences[i]=a[h]):r.__webglMorphTargetInfluences[i]=0,i++}null!==e.program.uniforms.morphTargetInfluences&&b.uniform1fv(e.program.uniforms.morphTargetInfluences,r.__webglMorphTargetInfluences)}(n,i,o),l){if(i.__webglCustomAttributesList)for(var h=0,f=i.__webglCustomAttributesList.length;h<f;h++){var d=i.__webglCustomAttributesList[h];s[d.buffer.belongsToAttribute]>=0&&(b.bindBuffer(b.ARRAY_BUFFER,d.buffer),Ve(s[d.buffer.belongsToAttribute]),b.vertexAttribPointer(s[d.buffer.belongsToAttribute],d.size,b.FLOAT,!1,0,0))}s.color>=0&&(o.geometry.colors.length>0||o.geometry.faces.length>0?(b.bindBuffer(b.ARRAY_BUFFER,i.__webglColorBuffer),Ve(s.color),b.vertexAttribPointer(s.color,3,b.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&b.vertexAttrib3fv(s.color,n.defaultAttributeValues.color)),s.normal>=0&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglNormalBuffer),Ve(s.normal),b.vertexAttribPointer(s.normal,3,b.FLOAT,!1,0,0)),s.tangent>=0&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglTangentBuffer),Ve(s.tangent),b.vertexAttribPointer(s.tangent,4,b.FLOAT,!1,0,0)),s.uv>=0&&(o.geometry.faceVertexUvs[0]?(b.bindBuffer(b.ARRAY_BUFFER,i.__webglUVBuffer),Ve(s.uv),b.vertexAttribPointer(s.uv,2,b.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&b.vertexAttrib2fv(s.uv,n.defaultAttributeValues.uv)),s.uv2>=0&&(o.geometry.faceVertexUvs[1]?(b.bindBuffer(b.ARRAY_BUFFER,i.__webglUV2Buffer),Ve(s.uv2),b.vertexAttribPointer(s.uv2,2,b.FLOAT,!1,0,0)):void 0!==n.defaultAttributeValues&&b.vertexAttrib2fv(s.uv2,n.defaultAttributeValues.uv2)),n.skinning&&s.skinIndex>=0&&s.skinWeight>=0&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglSkinIndicesBuffer),Ve(s.skinIndex),b.vertexAttribPointer(s.skinIndex,4,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,i.__webglSkinWeightsBuffer),Ve(s.skinWeight),b.vertexAttribPointer(s.skinWeight,4,b.FLOAT,!1,0,0)),s.lineDistance>=0&&(b.bindBuffer(b.ARRAY_BUFFER,i.__webglLineDistanceBuffer),Ve(s.lineDistance),b.vertexAttribPointer(s.lineDistance,1,b.FLOAT,!1,0,0))}if(He(),o instanceof re.Mesh){var p=i.__typeArray===Uint32Array?b.UNSIGNED_INT:b.UNSIGNED_SHORT;n.wireframe?(ut(n.wireframeLinewidth),l&&b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,i.__webglLineBuffer),b.drawElements(b.LINES,i.__webglLineCount,p,0)):(l&&b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,i.__webglFaceBuffer),b.drawElements(b.TRIANGLES,i.__webglFaceCount,p,0)),w.info.render.calls++,w.info.render.vertices+=i.__webglFaceCount,w.info.render.faces+=i.__webglFaceCount/3}else if(o instanceof re.Line){var m=o.mode===re.LineStrip?b.LINE_STRIP:b.LINES;ut(n.linewidth),b.drawArrays(m,0,i.__webglLineCount),w.info.render.calls++}else o instanceof re.PointCloud&&(b.drawArrays(b.POINTS,0,i.__webglParticleCount),w.info.render.calls++,w.info.render.points+=i.__webglParticleCount)}},this.render=function(e,t,r,n){if(t instanceof re.Camera!=!1){var i=e.fog;C=-1,A=-1,T=null,ee=!0,!0===e.autoUpdate&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),e.traverse((function(e){e instanceof re.SkinnedMesh&&e.skeleton.update()})),t.matrixWorldInverse.getInverse(t.matrixWorld),K.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Y.setFromMatrix(K),d.length=0,g.length=0,v.length=0,y.length=0,x.length=0,function e(t,r){if(!1===r.visible)return;if(r instanceof re.Scene||r instanceof re.Group);else if(function(e,t){void 0===e.__webglInit&&(e.__webglInit=!0,e._modelViewMatrix=new re.Matrix4,e._normalMatrix=new re.Matrix3,e.addEventListener("removed",Ae));var r=e.geometry;void 0===r||void 0===r.__webglInit&&(r.__webglInit=!0,r.addEventListener("dispose",Ce),r instanceof re.BufferGeometry||(e instanceof re.Mesh?Ze(t,e,r):e instanceof re.Line?void 0===r.__webglVertexBuffer&&(!function(e){e.__webglVertexBuffer=b.createBuffer(),e.__webglColorBuffer=b.createBuffer(),e.__webglLineDistanceBuffer=b.createBuffer(),w.info.memory.geometries++}(r),function(e,t){var r=e.vertices.length;e.__vertexArray=new Float32Array(3*r),e.__colorArray=new Float32Array(3*r),e.__lineDistanceArray=new Float32Array(1*r),e.__webglLineCount=r,ze(t)}(r,e),r.verticesNeedUpdate=!0,r.colorsNeedUpdate=!0,r.lineDistancesNeedUpdate=!0):e instanceof re.PointCloud&&void 0===r.__webglVertexBuffer&&(!function(e){e.__webglVertexBuffer=b.createBuffer(),e.__webglColorBuffer=b.createBuffer(),w.info.memory.geometries++}(r),function(e,t){var r=e.vertices.length;e.__vertexArray=new Float32Array(3*r),e.__colorArray=new Float32Array(3*r),e.__sortArray=[],e.__webglParticleCount=r,ze(t)}(r,e),r.verticesNeedUpdate=!0,r.colorsNeedUpdate=!0)));if(void 0===e.__webglActive)if(e.__webglActive=!0,e instanceof re.Mesh){if(r instanceof re.BufferGeometry)$e(p,r,e);else if(r instanceof re.Geometry)for(var n=Ke[r.id],i=0,o=n.length;i<o;i++)$e(p,n[i],e)}else e instanceof re.Line||e instanceof re.PointCloud?$e(p,r,e):(e instanceof re.ImmediateRenderObject||e.immediateRenderCallback)&&function(e,t){e.push({id:null,object:t,opaque:null,transparent:null,z:0})}(m,e)}(r,t),r instanceof re.Light)d.push(r);else if(r instanceof re.Sprite)y.push(r);else if(r instanceof re.LensFlare)x.push(r);else{var n=p[r.id];if(n&&(!1===r.frustumCulled||!0===Y.intersectsObject(r))){!function(e,t){var r,n,i=e.geometry;if(i instanceof re.BufferGeometry)!function(e){for(var t=e.attributes,r=e.attributesKeys,n=0,i=r.length;n<i;n++){var o=r[n],a=t[o];if(void 0===a.buffer&&(a.buffer=b.createBuffer(),a.needsUpdate=!0),!0===a.needsUpdate){var s="index"===o?b.ELEMENT_ARRAY_BUFFER:b.ARRAY_BUFFER;b.bindBuffer(s,a.buffer),b.bufferData(s,a.array,b.STATIC_DRAW),a.needsUpdate=!1}}}(i);else if(e instanceof re.Mesh){!0===i.groupsNeedUpdate&&Ze(t,e,i);for(var o=Ke[i.id],a=0,s=o.length;a<s;a++){var l=o[a];n=Be(e,l),!0===i.groupsNeedUpdate&&Oe(l,e),r=n.attributes&&et(n),(i.verticesNeedUpdate||i.morphTargetsNeedUpdate||i.elementsNeedUpdate||i.uvsNeedUpdate||i.normalsNeedUpdate||i.colorsNeedUpdate||i.tangentsNeedUpdate||r)&&Ie(l,e,b.DYNAMIC_DRAW,!i.dynamic,n)}i.verticesNeedUpdate=!1,i.morphTargetsNeedUpdate=!1,i.elementsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.tangentsNeedUpdate=!1,n.attributes&&tt(n)}else e instanceof re.Line?(n=Be(e,i),r=n.attributes&&et(n),(i.verticesNeedUpdate||i.colorsNeedUpdate||i.lineDistancesNeedUpdate||r)&&function(e,t){var r,n,i,o,a,s,l,c,u,h,f,d,p=e.vertices,m=e.colors,g=e.lineDistances,v=p.length,y=m.length,x=g.length,w=e.__vertexArray,_=e.__colorArray,M=e.__lineDistanceArray,S=e.verticesNeedUpdate,A=e.colorsNeedUpdate,C=e.lineDistancesNeedUpdate,T=e.__webglCustomAttributesList;if(S){for(r=0;r<v;r++)o=p[r],w[a=3*r]=o.x,w[a+1]=o.y,w[a+2]=o.z;b.bindBuffer(b.ARRAY_BUFFER,e.__webglVertexBuffer),b.bufferData(b.ARRAY_BUFFER,w,t)}if(A){for(n=0;n<y;n++)s=m[n],_[a=3*n]=s.r,_[a+1]=s.g,_[a+2]=s.b;b.bindBuffer(b.ARRAY_BUFFER,e.__webglColorBuffer),b.bufferData(b.ARRAY_BUFFER,_,t)}if(C){for(i=0;i<x;i++)M[i]=g[i];b.bindBuffer(b.ARRAY_BUFFER,e.__webglLineDistanceBuffer),b.bufferData(b.ARRAY_BUFFER,M,t)}if(T)for(l=0,c=T.length;l<c;l++)if((d=T[l]).needsUpdate&&(void 0===d.boundTo||"vertices"===d.boundTo)){if(a=0,h=d.value.length,1===d.size)for(u=0;u<h;u++)d.array[u]=d.value[u];else if(2===d.size)for(u=0;u<h;u++)f=d.value[u],d.array[a]=f.x,d.array[a+1]=f.y,a+=2;else if(3===d.size)if("c"===d.type)for(u=0;u<h;u++)f=d.value[u],d.array[a]=f.r,d.array[a+1]=f.g,d.array[a+2]=f.b,a+=3;else for(u=0;u<h;u++)f=d.value[u],d.array[a]=f.x,d.array[a+1]=f.y,d.array[a+2]=f.z,a+=3;else if(4===d.size)for(u=0;u<h;u++)f=d.value[u],d.array[a]=f.x,d.array[a+1]=f.y,d.array[a+2]=f.z,d.array[a+3]=f.w,a+=4;b.bindBuffer(b.ARRAY_BUFFER,d.buffer),b.bufferData(b.ARRAY_BUFFER,d.array,t)}}(i,b.DYNAMIC_DRAW),i.verticesNeedUpdate=!1,i.colorsNeedUpdate=!1,i.lineDistancesNeedUpdate=!1,n.attributes&&tt(n)):e instanceof re.PointCloud&&(n=Be(e,i),r=n.attributes&&et(n),(i.verticesNeedUpdate||i.colorsNeedUpdate||e.sortParticles||r)&&function(e,t,r){var n,i,o,a,s,l,c,u,h,f,d,p,m=e.vertices,g=m.length,v=e.colors,y=v.length,x=e.__vertexArray,w=e.__colorArray,_=e.__sortArray,M=e.verticesNeedUpdate,S=(e.elementsNeedUpdate,e.colorsNeedUpdate),A=e.__webglCustomAttributesList;if(r.sortParticles){for(J.copy(K),J.multiply(r.matrixWorld),n=0;n<g;n++)o=m[n],Z.copy(o),Z.applyProjection(J),_[n]=[Z.z,n];for(_.sort(We),n=0;n<g;n++)o=m[_[n][1]],x[a=3*n]=o.x,x[a+1]=o.y,x[a+2]=o.z;for(i=0;i<y;i++)a=3*i,l=v[_[i][1]],w[a]=l.r,w[a+1]=l.g,w[a+2]=l.b;if(A)for(c=0,u=A.length;c<u;c++)if(void 0===(p=A[c]).boundTo||"vertices"===p.boundTo)if(a=0,f=p.value.length,1===p.size)for(h=0;h<f;h++)s=_[h][1],p.array[h]=p.value[s];else if(2===p.size)for(h=0;h<f;h++)s=_[h][1],d=p.value[s],p.array[a]=d.x,p.array[a+1]=d.y,a+=2;else if(3===p.size)if("c"===p.type)for(h=0;h<f;h++)s=_[h][1],d=p.value[s],p.array[a]=d.r,p.array[a+1]=d.g,p.array[a+2]=d.b,a+=3;else for(h=0;h<f;h++)s=_[h][1],d=p.value[s],p.array[a]=d.x,p.array[a+1]=d.y,p.array[a+2]=d.z,a+=3;else if(4===p.size)for(h=0;h<f;h++)s=_[h][1],d=p.value[s],p.array[a]=d.x,p.array[a+1]=d.y,p.array[a+2]=d.z,p.array[a+3]=d.w,a+=4}else{if(M)for(n=0;n<g;n++)o=m[n],x[a=3*n]=o.x,x[a+1]=o.y,x[a+2]=o.z;if(S)for(i=0;i<y;i++)l=v[i],w[a=3*i]=l.r,w[a+1]=l.g,w[a+2]=l.b;if(A)for(c=0,u=A.length;c<u;c++)if((p=A[c]).needsUpdate&&(void 0===p.boundTo||"vertices"===p.boundTo))if(f=p.value.length,a=0,1===p.size)for(h=0;h<f;h++)p.array[h]=p.value[h];else if(2===p.size)for(h=0;h<f;h++)d=p.value[h],p.array[a]=d.x,p.array[a+1]=d.y,a+=2;else if(3===p.size)if("c"===p.type)for(h=0;h<f;h++)d=p.value[h],p.array[a]=d.r,p.array[a+1]=d.g,p.array[a+2]=d.b,a+=3;else for(h=0;h<f;h++)d=p.value[h],p.array[a]=d.x,p.array[a+1]=d.y,p.array[a+2]=d.z,a+=3;else if(4===p.size)for(h=0;h<f;h++)d=p.value[h],p.array[a]=d.x,p.array[a+1]=d.y,p.array[a+2]=d.z,p.array[a+3]=d.w,a+=4}if((M||r.sortParticles)&&(b.bindBuffer(b.ARRAY_BUFFER,e.__webglVertexBuffer),b.bufferData(b.ARRAY_BUFFER,x,t)),(S||r.sortParticles)&&(b.bindBuffer(b.ARRAY_BUFFER,e.__webglColorBuffer),b.bufferData(b.ARRAY_BUFFER,w,t)),A)for(c=0,u=A.length;c<u;c++)((p=A[c]).needsUpdate||r.sortParticles)&&(b.bindBuffer(b.ARRAY_BUFFER,p.buffer),b.bufferData(b.ARRAY_BUFFER,p.array,t))}(i,b.DYNAMIC_DRAW,e),i.verticesNeedUpdate=!1,i.colorsNeedUpdate=!1,n.attributes&&tt(n))}(r,t);for(var i=0,o=n.length;i<o;i++){var a=n[i];Ye(a),a.render=!0,!0===w.sortObjects&&(null!==r.renderDepth?a.z=r.renderDepth:(Z.setFromMatrixPosition(r.matrixWorld),Z.applyProjection(K),a.z=Z.z))}}}for(i=0,o=r.children.length;i<o;i++)e(t,r.children[i])}(e,e),!0===w.sortObjects&&(g.sort(Ge),v.sort(je)),we.render(e,t),w.info.render.calls=0,w.info.render.vertices=0,w.info.render.faces=0,w.info.render.points=0,this.setRenderTarget(r),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);for(var o=0,a=m.length;o<a;o++){var s=m[o],l=s.object;l.visible&&(st(l,t),qe(s))}if(e.overrideMaterial){var c=e.overrideMaterial;this.setBlending(c.blending,c.blendEquation,c.blendSrc,c.blendDst),this.setDepthTest(c.depthTest),this.setDepthWrite(c.depthWrite),ht(c.polygonOffset,c.polygonOffsetFactor,c.polygonOffsetUnits),Qe(g,t,d,i,!0,c),Qe(v,t,d,i,!0,c),Xe(m,"",t,d,i,!1,c)}else{c=null;this.setBlending(re.NoBlending),Qe(g,t,d,i,!1,c),Xe(m,"opaque",t,d,i,!1,c),Qe(v,t,d,i,!0,c),Xe(m,"transparent",t,d,i,!0,c)}_e.render(e,t),Me.render(e,t,W,Q),r&&r.generateMipmaps&&r.minFilter!==re.NearestFilter&&r.minFilter!==re.LinearFilter&&function(e){e instanceof re.WebGLRenderTargetCube?(b.bindTexture(b.TEXTURE_CUBE_MAP,e.__webglTexture),b.generateMipmap(b.TEXTURE_CUBE_MAP),b.bindTexture(b.TEXTURE_CUBE_MAP,null)):(b.bindTexture(b.TEXTURE_2D,e.__webglTexture),b.generateMipmap(b.TEXTURE_2D),b.bindTexture(b.TEXTURE_2D,null))}(r),this.setDepthTest(!0),this.setDepthWrite(!0)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.renderImmediateObject=function(e,t,r,n,i){var o=nt(e,t,r,n,i);C=-1,w.setMaterialFaces(n),i.immediateRenderCallback?i.immediateRenderCallback(o,b,Y):i.render((function(e){w.renderBufferImmediate(e,o,n)}))};var Ke={},Je=0;function Ze(e,t,r){var n=t.material,i=!1;void 0!==Ke[r.id]&&!0!==r.groupsNeedUpdate||(delete p[t.id],Ke[r.id]=function(e,t){for(var r,n,i=oe.get("OES_element_index_uint")?4294967296:65535,o={},a=e.morphTargets.length,s=e.morphNormals.length,l={},c=[],u=0,h=e.faces.length;u<h;u++){var f=e.faces[u],d=t?f.materialIndex:0;d in o||(o[d]={hash:d,counter:0}),(r=o[d].hash+"_"+o[d].counter)in l||(n={id:Je++,faces3:[],materialIndex:d,vertices:0,numMorphTargets:a,numMorphNormals:s},l[r]=n,c.push(n)),l[r].vertices+3>i&&(o[d].counter+=1,(r=o[d].hash+"_"+o[d].counter)in l||(n={id:Je++,faces3:[],materialIndex:d,vertices:0,numMorphTargets:a,numMorphNormals:s},l[r]=n,c.push(n))),l[r].faces3.push(u),l[r].vertices+=3}return c}(r,n instanceof re.MeshFaceMaterial),r.groupsNeedUpdate=!1);for(var o=Ke[r.id],a=0,s=o.length;a<s;a++){var l=o[a];void 0===l.__webglVertexBuffer?(Se(l),Oe(l,t),r.verticesNeedUpdate=!0,r.morphTargetsNeedUpdate=!0,r.elementsNeedUpdate=!0,r.uvsNeedUpdate=!0,r.normalsNeedUpdate=!0,r.tangentsNeedUpdate=!0,r.colorsNeedUpdate=!0,i=!0):i=!1,(i||void 0===t.__webglActive)&&$e(p,l,t)}t.__webglActive=!0}function $e(e,t,r){var n=r.id;e[n]=e[n]||[],e[n].push({id:n,buffer:t,object:r,material:null,z:0})}function et(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function tt(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function rt(e,t,r,i){var o;if(e.addEventListener("dispose",ke),e instanceof re.MeshDepthMaterial?o="depth":e instanceof re.MeshNormalMaterial?o="normal":e instanceof re.MeshBasicMaterial?o="basic":e instanceof re.MeshLambertMaterial?o="lambert":e instanceof re.MeshPhongMaterial?o="phong":e instanceof re.LineBasicMaterial?o="basic":e instanceof re.LineDashedMaterial?o="dashed":e instanceof re.PointCloudMaterial&&(o="particle_basic"),o){var a=re.ShaderLib[o];e.__webglShader={uniforms:re.UniformsUtils.clone(a.uniforms),vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}}else e.__webglShader={uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};var s=function(e){for(var t=0,r=0,n=0,i=0,o=0,a=e.length;o<a;o++){var s=e[o];s.onlyShadow||!1===s.visible||(s instanceof re.DirectionalLight&&t++,s instanceof re.PointLight&&r++,s instanceof re.SpotLight&&n++,s instanceof re.HemisphereLight&&i++)}return{directional:t,point:r,spot:n,hemi:i}}(t),l=function(e){for(var t=0,r=0,n=e.length;r<n;r++){var i=e[r];i.castShadow&&(i instanceof re.SpotLight&&t++,i instanceof re.DirectionalLight&&!i.shadowCascade&&t++)}return t}(t),c=function(e){if(fe&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var t=b.getParameter(b.MAX_VERTEX_UNIFORM_VECTORS),r=Math.floor((t-20)/4);return void 0!==e&&e instanceof re.SkinnedMesh&&(r=Math.min(e.skeleton.bones.length,r))<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)"),r}(i),h={precision:n,supportsVertexTextures:he,map:!!e.map,envMap:!!e.envMap,lightMap:!!e.lightMap,bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,vertexColors:e.vertexColors,fog:r,useFog:e.fog,fogExp:r instanceof re.FogExp2,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:u,skinning:e.skinning,maxBones:c,useVertexTexture:fe&&i&&i.skeleton&&i.skeleton.useVertexTexture,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:w.maxMorphTargets,maxMorphNormals:w.maxMorphNormals,maxDirLights:s.directional,maxPointLights:s.point,maxSpotLights:s.spot,maxHemiLights:s.hemi,maxShadows:l,shadowMapEnabled:w.shadowMapEnabled&&i.receiveShadow&&l>0,shadowMapType:w.shadowMapType,shadowMapDebug:w.shadowMapDebug,shadowMapCascade:w.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,wrapAround:e.wrapAround,doubleSided:e.side===re.DoubleSide,flipSided:e.side===re.BackSide},f=[];if(o?f.push(o):(f.push(e.fragmentShader),f.push(e.vertexShader)),void 0!==e.defines)for(var d in e.defines)f.push(d),f.push(e.defines[d]);for(var d in h)f.push(d),f.push(h[d]);for(var p,m=f.join(),g=0,v=_.length;g<v;g++){var y=_[g];if(y.code===m){(p=y).usedTimes++;break}}void 0===p&&(p=new re.WebGLProgram(w,m,e,h),_.push(p),w.info.memory.programs=_.length),e.program=p;var x=p.attributes;if(e.morphTargets){e.numSupportedMorphTargets=0;for(var M="morphTarget",S=0;S<w.maxMorphTargets;S++)x[M+S]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;M="morphNormal";for(S=0;S<w.maxMorphNormals;S++)x[M+S]>=0&&e.numSupportedMorphNormals++}for(var A in e.uniformsList=[],e.__webglShader.uniforms){var C=e.program.uniforms[A];C&&e.uniformsList.push([e.__webglShader.uniforms[A],C])}}function nt(e,r,n,i,o){E=0,i.needsUpdate&&(i.program&&Fe(i),rt(i,r,n,o),i.needsUpdate=!1),i.morphTargets&&(o.__webglMorphTargetInfluences||(o.__webglMorphTargetInfluences=new Float32Array(w.maxMorphTargets)));var a=!1,s=!1,l=!1,c=i.program,h=c.uniforms,f=i.__webglShader.uniforms;if(c.id!==M&&(b.useProgram(c.program),M=c.id,a=!0,s=!0,l=!0),i.id!==A&&(-1===A&&(l=!0),A=i.id,s=!0),(a||e!==T)&&(b.uniformMatrix4fv(h.projectionMatrix,!1,e.projectionMatrix.elements),u&&b.uniform1f(h.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==T&&(T=e),(i instanceof re.ShaderMaterial||i instanceof re.MeshPhongMaterial||i.envMap)&&null!==h.cameraPosition&&(Z.setFromMatrixPosition(e.matrixWorld),b.uniform3f(h.cameraPosition,Z.x,Z.y,Z.z)),(i instanceof re.MeshPhongMaterial||i instanceof re.MeshLambertMaterial||i instanceof re.ShaderMaterial||i.skinning)&&null!==h.viewMatrix&&b.uniformMatrix4fv(h.viewMatrix,!1,e.matrixWorldInverse.elements)),i.skinning)if(o.bindMatrix&&null!==h.bindMatrix&&b.uniformMatrix4fv(h.bindMatrix,!1,o.bindMatrix.elements),o.bindMatrixInverse&&null!==h.bindMatrixInverse&&b.uniformMatrix4fv(h.bindMatrixInverse,!1,o.bindMatrixInverse.elements),fe&&o.skeleton&&o.skeleton.useVertexTexture){if(null!==h.boneTexture){var d=at();b.uniform1i(h.boneTexture,d),w.setTexture(o.skeleton.boneTexture,d)}null!==h.boneTextureWidth&&b.uniform1i(h.boneTextureWidth,o.skeleton.boneTextureWidth),null!==h.boneTextureHeight&&b.uniform1i(h.boneTextureHeight,o.skeleton.boneTextureHeight)}else o.skeleton&&o.skeleton.boneMatrices&&null!==h.boneGlobalMatrices&&b.uniformMatrix4fv(h.boneGlobalMatrices,!1,o.skeleton.boneMatrices);return s&&(n&&i.fog&&function(e,t){e.fogColor.value=t.color,t instanceof re.Fog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t instanceof re.FogExp2&&(e.fogDensity.value=t.density)}(f,n),(i instanceof re.MeshPhongMaterial||i instanceof re.MeshLambertMaterial||i.lights)&&(ee&&(l=!0,function(e){var t,r,n,i,o,a,s,l,c,u=0,h=0,f=0,d=ne,p=d.directional.colors,m=d.directional.positions,g=d.point.colors,v=d.point.positions,y=d.point.distances,x=d.spot.colors,b=d.spot.positions,_=d.spot.distances,M=d.spot.directions,S=d.spot.anglesCos,A=d.spot.exponents,C=d.hemi.skyColors,T=d.hemi.groundColors,E=d.hemi.positions,k=0,P=0,L=0,R=0,D=0,F=0,z=0,O=0,B=0,I=0,N=0,U=0;for(t=0,r=e.length;t<r;t++)if(!(n=e[t]).onlyShadow)if(i=n.color,s=n.intensity,c=n.distance,n instanceof re.AmbientLight){if(!n.visible)continue;w.gammaInput?(u+=i.r*i.r,h+=i.g*i.g,f+=i.b*i.b):(u+=i.r,h+=i.g,f+=i.b)}else if(n instanceof re.DirectionalLight){if(D+=1,!n.visible)continue;$.setFromMatrixPosition(n.matrixWorld),Z.setFromMatrixPosition(n.target.matrixWorld),$.sub(Z),$.normalize(),m[B=3*k]=$.x,m[B+1]=$.y,m[B+2]=$.z,w.gammaInput?lt(p,B,i,s*s):ct(p,B,i,s),k+=1}else if(n instanceof re.PointLight){if(F+=1,!n.visible)continue;I=3*P,w.gammaInput?lt(g,I,i,s*s):ct(g,I,i,s),Z.setFromMatrixPosition(n.matrixWorld),v[I]=Z.x,v[I+1]=Z.y,v[I+2]=Z.z,y[P]=c,P+=1}else if(n instanceof re.SpotLight){if(z+=1,!n.visible)continue;N=3*L,w.gammaInput?lt(x,N,i,s*s):ct(x,N,i,s),$.setFromMatrixPosition(n.matrixWorld),b[N]=$.x,b[N+1]=$.y,b[N+2]=$.z,_[L]=c,Z.setFromMatrixPosition(n.target.matrixWorld),$.sub(Z),$.normalize(),M[N]=$.x,M[N+1]=$.y,M[N+2]=$.z,S[L]=Math.cos(n.angle),A[L]=n.exponent,L+=1}else if(n instanceof re.HemisphereLight){if(O+=1,!n.visible)continue;$.setFromMatrixPosition(n.matrixWorld),$.normalize(),E[U=3*R]=$.x,E[U+1]=$.y,E[U+2]=$.z,o=n.color,a=n.groundColor,w.gammaInput?(lt(C,U,o,l=s*s),lt(T,U,a,l)):(ct(C,U,o,s),ct(T,U,a,s)),R+=1}for(t=3*k,r=Math.max(p.length,3*D);t<r;t++)p[t]=0;for(t=3*P,r=Math.max(g.length,3*F);t<r;t++)g[t]=0;for(t=3*L,r=Math.max(x.length,3*z);t<r;t++)x[t]=0;for(t=3*R,r=Math.max(C.length,3*O);t<r;t++)C[t]=0;for(t=3*R,r=Math.max(T.length,3*O);t<r;t++)T[t]=0;d.directional.length=k,d.point.length=P,d.spot.length=L,d.hemi.length=R,d.ambient[0]=u,d.ambient[1]=h,d.ambient[2]=f}(r),ee=!1),l?(!function(e,t){e.ambientLightColor.value=t.ambient,e.directionalLightColor.value=t.directional.colors,e.directionalLightDirection.value=t.directional.positions,e.pointLightColor.value=t.point.colors,e.pointLightPosition.value=t.point.positions,e.pointLightDistance.value=t.point.distances,e.spotLightColor.value=t.spot.colors,e.spotLightPosition.value=t.spot.positions,e.spotLightDistance.value=t.spot.distances,e.spotLightDirection.value=t.spot.directions,e.spotLightAngleCos.value=t.spot.anglesCos,e.spotLightExponent.value=t.spot.exponents,e.hemisphereLightSkyColor.value=t.hemi.skyColors,e.hemisphereLightGroundColor.value=t.hemi.groundColors,e.hemisphereLightDirection.value=t.hemi.positions}(f,ne),ot(f,!0)):ot(f,!1)),(i instanceof re.MeshBasicMaterial||i instanceof re.MeshLambertMaterial||i instanceof re.MeshPhongMaterial)&&function(e,t){e.opacity.value=t.opacity,w.gammaInput?e.diffuse.value.copyGammaToLinear(t.color):e.diffuse.value=t.color;e.map.value=t.map,e.lightMap.value=t.lightMap,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale);t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));var r;t.map?r=t.map:t.specularMap?r=t.specularMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.alphaMap&&(r=t.alphaMap);if(void 0!==r){var n=r.offset,i=r.repeat;e.offsetRepeat.value.set(n.x,n.y,i.x,i.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof re.WebGLRenderTargetCube?1:-1,w.gammaInput,e.reflectivity.value=t.reflectivity;e.refractionRatio.value=t.refractionRatio,e.combine.value=t.combine,e.useRefract.value=t.envMap&&t.envMap.mapping instanceof re.CubeRefractionMapping}(f,i),i instanceof re.LineBasicMaterial?it(f,i):i instanceof re.LineDashedMaterial?(it(f,i),function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(f,i)):i instanceof re.PointCloudMaterial?function(e,r){e.psColor.value=r.color,e.opacity.value=r.opacity,e.size.value=r.size,e.scale.value=t.height/2,e.map.value=r.map}(f,i):i instanceof re.MeshPhongMaterial?function(e,t){e.shininess.value=t.shininess,w.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive),e.specular.value.copyGammaToLinear(t.specular)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive,e.specular.value=t.specular);t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}(f,i):i instanceof re.MeshLambertMaterial?function(e,t){w.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive);t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}(f,i):i instanceof re.MeshDepthMaterial?(f.mNear.value=e.near,f.mFar.value=e.far,f.opacity.value=i.opacity):i instanceof re.MeshNormalMaterial&&(f.opacity.value=i.opacity),o.receiveShadow&&!i._shadowPass&&function(e,t){if(e.shadowMatrix)for(var r=0,n=0,i=t.length;n<i;n++){var o=t[n];o.castShadow&&((o instanceof re.SpotLight||o instanceof re.DirectionalLight&&!o.shadowCascade)&&(e.shadowMap.value[r]=o.shadowMap,e.shadowMapSize.value[r]=o.shadowMapSize,e.shadowMatrix.value[r]=o.shadowMatrix,e.shadowDarkness.value[r]=o.shadowDarkness,e.shadowBias.value[r]=o.shadowBias,r++))}}(f,r),function(e){for(var t,r,n,i=0,o=e.length;i<o;i++){var a=e[i][0];if(!1!==a.needsUpdate){var s=a.type,l=a.value,c=e[i][1];switch(s){case"1i":b.uniform1i(c,l);break;case"1f":b.uniform1f(c,l);break;case"2f":b.uniform2f(c,l[0],l[1]);break;case"3f":b.uniform3f(c,l[0],l[1],l[2]);break;case"4f":b.uniform4f(c,l[0],l[1],l[2],l[3]);break;case"1iv":b.uniform1iv(c,l);break;case"3iv":b.uniform3iv(c,l);break;case"1fv":b.uniform1fv(c,l);break;case"2fv":b.uniform2fv(c,l);break;case"3fv":b.uniform3fv(c,l);break;case"4fv":b.uniform4fv(c,l);break;case"Matrix3fv":b.uniformMatrix3fv(c,!1,l);break;case"Matrix4fv":b.uniformMatrix4fv(c,!1,l);break;case"i":b.uniform1i(c,l);break;case"f":b.uniform1f(c,l);break;case"v2":b.uniform2f(c,l.x,l.y);break;case"v3":b.uniform3f(c,l.x,l.y,l.z);break;case"v4":b.uniform4f(c,l.x,l.y,l.z,l.w);break;case"c":b.uniform3f(c,l.r,l.g,l.b);break;case"iv1":b.uniform1iv(c,l);break;case"iv":b.uniform3iv(c,l);break;case"fv1":b.uniform1fv(c,l);break;case"fv":b.uniform3fv(c,l);break;case"v2v":void 0===a._array&&(a._array=new Float32Array(2*l.length));for(var u=0,h=l.length;u<h;u++)n=2*u,a._array[n]=l[u].x,a._array[n+1]=l[u].y;b.uniform2fv(c,a._array);break;case"v3v":void 0===a._array&&(a._array=new Float32Array(3*l.length));for(u=0,h=l.length;u<h;u++)n=3*u,a._array[n]=l[u].x,a._array[n+1]=l[u].y,a._array[n+2]=l[u].z;b.uniform3fv(c,a._array);break;case"v4v":void 0===a._array&&(a._array=new Float32Array(4*l.length));for(u=0,h=l.length;u<h;u++)n=4*u,a._array[n]=l[u].x,a._array[n+1]=l[u].y,a._array[n+2]=l[u].z,a._array[n+3]=l[u].w;b.uniform4fv(c,a._array);break;case"m3":b.uniformMatrix3fv(c,!1,l.elements);break;case"m3v":void 0===a._array&&(a._array=new Float32Array(9*l.length));for(u=0,h=l.length;u<h;u++)l[u].flattenToArrayOffset(a._array,9*u);b.uniformMatrix3fv(c,!1,a._array);break;case"m4":b.uniformMatrix4fv(c,!1,l.elements);break;case"m4v":void 0===a._array&&(a._array=new Float32Array(16*l.length));for(u=0,h=l.length;u<h;u++)l[u].flattenToArrayOffset(a._array,16*u);b.uniformMatrix4fv(c,!1,a._array);break;case"t":if(t=l,r=at(),b.uniform1i(c,r),!t)continue;t instanceof re.CubeTexture||t.image instanceof Array&&6===t.image.length?pt(t,r):t instanceof re.WebGLRenderTargetCube?mt(t,r):w.setTexture(t,r);break;case"tv":void 0===a._array&&(a._array=[]);for(u=0,h=a.value.length;u<h;u++)a._array[u]=at();b.uniform1iv(c,a._array);for(u=0,h=a.value.length;u<h;u++)t=a.value[u],r=a._array[u],t&&w.setTexture(t,r);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+s)}}}}(i.uniformsList)),function(e,t){b.uniformMatrix4fv(e.modelViewMatrix,!1,t._modelViewMatrix.elements),e.normalMatrix&&b.uniformMatrix3fv(e.normalMatrix,!1,t._normalMatrix.elements)}(h,o),null!==h.modelMatrix&&b.uniformMatrix4fv(h.modelMatrix,!1,o.matrixWorld.elements),c}function it(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function ot(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLightColor.needsUpdate=t,e.directionalLightDirection.needsUpdate=t,e.pointLightColor.needsUpdate=t,e.pointLightPosition.needsUpdate=t,e.pointLightDistance.needsUpdate=t,e.spotLightColor.needsUpdate=t,e.spotLightPosition.needsUpdate=t,e.spotLightDistance.needsUpdate=t,e.spotLightDirection.needsUpdate=t,e.spotLightAngleCos.needsUpdate=t,e.spotLightExponent.needsUpdate=t,e.hemisphereLightSkyColor.needsUpdate=t,e.hemisphereLightGroundColor.needsUpdate=t,e.hemisphereLightDirection.needsUpdate=t}function at(){var e=E;return e>=se&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+se),E+=1,e}function st(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function lt(e,t,r,n){e[t]=r.r*r.r*n,e[t+1]=r.g*r.g*n,e[t+2]=r.b*r.b*n}function ct(e,t,r,n){e[t]=r.r*n,e[t+1]=r.g*n,e[t+2]=r.b*n}function ut(e){e!==U&&(b.lineWidth(e),U=e)}function ht(e,t,r){B!==e&&(e?b.enable(b.POLYGON_OFFSET_FILL):b.disable(b.POLYGON_OFFSET_FILL),B=e),!e||I===t&&N===r||(b.polygonOffset(t,r),I=t,N=r)}function ft(e,t,r){var n;r?(b.texParameteri(e,b.TEXTURE_WRAP_S,xt(t.wrapS)),b.texParameteri(e,b.TEXTURE_WRAP_T,xt(t.wrapT)),b.texParameteri(e,b.TEXTURE_MAG_FILTER,xt(t.magFilter)),b.texParameteri(e,b.TEXTURE_MIN_FILTER,xt(t.minFilter))):(b.texParameteri(e,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(e,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(e,b.TEXTURE_MAG_FILTER,yt(t.magFilter)),b.texParameteri(e,b.TEXTURE_MIN_FILTER,yt(t.minFilter))),(n=oe.get("EXT_texture_filter_anisotropic"))&&t.type!==re.FloatType&&(t.anisotropy>1||t.__oldAnisotropy)&&(b.texParameterf(e,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,w.getMaxAnisotropy())),t.__oldAnisotropy=t.anisotropy)}function dt(e,t){if(e.width>t||e.height>t){var r=t/Math.max(e.width,e.height),n=document.createElement("canvas");return n.width=Math.floor(e.width*r),n.height=Math.floor(e.height*r),n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),console.log("THREE.WebGLRenderer:",e,"is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height+"."),n}return e}function pt(e,t){if(6===e.image.length)if(e.needsUpdate){e.image.__webglTextureCube||(e.addEventListener("dispose",Te),e.image.__webglTextureCube=b.createTexture(),w.info.memory.textures++),b.activeTexture(b.TEXTURE0+t),b.bindTexture(b.TEXTURE_CUBE_MAP,e.image.__webglTextureCube),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var r=e instanceof re.CompressedTexture,n=e.image[0]instanceof re.DataTexture,i=[],o=0;o<6;o++)!w.autoScaleCubemaps||r||n?i[o]=n?e.image[o].image:e.image[o]:i[o]=dt(e.image[o],ue);var a=i[0],s=re.Math.isPowerOfTwo(a.width)&&re.Math.isPowerOfTwo(a.height),l=xt(e.format),c=xt(e.type);ft(b.TEXTURE_CUBE_MAP,e,s);for(o=0;o<6;o++)if(r)for(var u,h=i[o].mipmaps,f=0,d=h.length;f<d;f++)u=h[f],e.format!==re.RGBAFormat&&e.format!==re.RGBFormat?ve().indexOf(l)>-1?b.compressedTexImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+o,f,l,u.width,u.height,0,u.data):console.warn("Attempt to load unsupported compressed texture format"):b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+o,f,l,u.width,u.height,0,l,c,u.data);else n?b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,l,i[o].width,i[o].height,0,l,c,i[o].data):b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,l,l,c,i[o]);e.generateMipmaps&&s&&b.generateMipmap(b.TEXTURE_CUBE_MAP),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else b.activeTexture(b.TEXTURE0+t),b.bindTexture(b.TEXTURE_CUBE_MAP,e.image.__webglTextureCube)}function mt(e,t){b.activeTexture(b.TEXTURE0+t),b.bindTexture(b.TEXTURE_CUBE_MAP,e.__webglTexture)}function gt(e,t,r){b.bindFramebuffer(b.FRAMEBUFFER,e),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,r,t.__webglTexture,0)}function vt(e,t){b.bindRenderbuffer(b.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,t.width,t.height),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_STENCIL,t.width,t.height),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,e)):b.renderbufferStorage(b.RENDERBUFFER,b.RGBA4,t.width,t.height)}function yt(e){return e===re.NearestFilter||e===re.NearestMipMapNearestFilter||e===re.NearestMipMapLinearFilter?b.NEAREST:b.LINEAR}function xt(e){var t;if(e===re.RepeatWrapping)return b.REPEAT;if(e===re.ClampToEdgeWrapping)return b.CLAMP_TO_EDGE;if(e===re.MirroredRepeatWrapping)return b.MIRRORED_REPEAT;if(e===re.NearestFilter)return b.NEAREST;if(e===re.NearestMipMapNearestFilter)return b.NEAREST_MIPMAP_NEAREST;if(e===re.NearestMipMapLinearFilter)return b.NEAREST_MIPMAP_LINEAR;if(e===re.LinearFilter)return b.LINEAR;if(e===re.LinearMipMapNearestFilter)return b.LINEAR_MIPMAP_NEAREST;if(e===re.LinearMipMapLinearFilter)return b.LINEAR_MIPMAP_LINEAR;if(e===re.UnsignedByteType)return b.UNSIGNED_BYTE;if(e===re.UnsignedShort4444Type)return b.UNSIGNED_SHORT_4_4_4_4;if(e===re.UnsignedShort5551Type)return b.UNSIGNED_SHORT_5_5_5_1;if(e===re.UnsignedShort565Type)return b.UNSIGNED_SHORT_5_6_5;if(e===re.ByteType)return b.BYTE;if(e===re.ShortType)return b.SHORT;if(e===re.UnsignedShortType)return b.UNSIGNED_SHORT;if(e===re.IntType)return b.INT;if(e===re.UnsignedIntType)return b.UNSIGNED_INT;if(e===re.FloatType)return b.FLOAT;if(e===re.AlphaFormat)return b.ALPHA;if(e===re.RGBFormat)return b.RGB;if(e===re.RGBAFormat)return b.RGBA;if(e===re.LuminanceFormat)return b.LUMINANCE;if(e===re.LuminanceAlphaFormat)return b.LUMINANCE_ALPHA;if(e===re.AddEquation)return b.FUNC_ADD;if(e===re.SubtractEquation)return b.FUNC_SUBTRACT;if(e===re.ReverseSubtractEquation)return b.FUNC_REVERSE_SUBTRACT;if(e===re.ZeroFactor)return b.ZERO;if(e===re.OneFactor)return b.ONE;if(e===re.SrcColorFactor)return b.SRC_COLOR;if(e===re.OneMinusSrcColorFactor)return b.ONE_MINUS_SRC_COLOR;if(e===re.SrcAlphaFactor)return b.SRC_ALPHA;if(e===re.OneMinusSrcAlphaFactor)return b.ONE_MINUS_SRC_ALPHA;if(e===re.DstAlphaFactor)return b.DST_ALPHA;if(e===re.OneMinusDstAlphaFactor)return b.ONE_MINUS_DST_ALPHA;if(e===re.DstColorFactor)return b.DST_COLOR;if(e===re.OneMinusDstColorFactor)return b.ONE_MINUS_DST_COLOR;if(e===re.SrcAlphaSaturateFactor)return b.SRC_ALPHA_SATURATE;if(null!==(t=oe.get("WEBGL_compressed_texture_s3tc"))){if(e===re.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===re.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===re.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===re.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(null!==(t=oe.get("WEBGL_compressed_texture_pvrtc"))){if(e===re.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===re.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===re.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===re.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(null!==(t=oe.get("EXT_blend_minmax"))){if(e===re.MinEquation)return t.MIN_EXT;if(e===re.MaxEquation)return t.MAX_EXT}return 0}this.setFaceCulling=function(e,t){e===re.CullFaceNone?b.disable(b.CULL_FACE):(t===re.FrontFaceDirectionCW?b.frontFace(b.CW):b.frontFace(b.CCW),e===re.CullFaceBack?b.cullFace(b.BACK):e===re.CullFaceFront?b.cullFace(b.FRONT):b.cullFace(b.FRONT_AND_BACK),b.enable(b.CULL_FACE))},this.setMaterialFaces=function(e){var t=e.side===re.DoubleSide,r=e.side===re.BackSide;k!==t&&(t?b.disable(b.CULL_FACE):b.enable(b.CULL_FACE),k=t),P!==r&&(r?b.frontFace(b.CW):b.frontFace(b.CCW),P=r)},this.setDepthTest=function(e){z!==e&&(e?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST),z=e)},this.setDepthWrite=function(e){O!==e&&(b.depthMask(e),O=e)},this.setBlending=function(e,t,r,n){e!==L&&(e===re.NoBlending?b.disable(b.BLEND):e===re.AdditiveBlending?(b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.SRC_ALPHA,b.ONE)):e===re.SubtractiveBlending?(b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ZERO,b.ONE_MINUS_SRC_COLOR)):e===re.MultiplyBlending?(b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ZERO,b.SRC_COLOR)):e===re.CustomBlending?b.enable(b.BLEND):(b.enable(b.BLEND),b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA)),L=e),e===re.CustomBlending?(t!==R&&(b.blendEquation(xt(t)),R=t),r===D&&n===F||(b.blendFunc(xt(r),xt(n)),D=r,F=n)):(R=null,D=null,F=null)},this.uploadTexture=function(e){void 0===e.__webglInit&&(e.__webglInit=!0,e.addEventListener("dispose",Te),e.__webglTexture=b.createTexture(),w.info.memory.textures++),b.bindTexture(b.TEXTURE_2D,e.__webglTexture),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,e.flipY),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),b.pixelStorei(b.UNPACK_ALIGNMENT,e.unpackAlignment),e.image=dt(e.image,ce);var t=e.image,r=re.Math.isPowerOfTwo(t.width)&&re.Math.isPowerOfTwo(t.height),n=xt(e.format),i=xt(e.type);ft(b.TEXTURE_2D,e,r);var o,a=e.mipmaps;if(e instanceof re.DataTexture)if(a.length>0&&r){for(var s=0,l=a.length;s<l;s++)o=a[s],b.texImage2D(b.TEXTURE_2D,s,n,o.width,o.height,0,n,i,o.data);e.generateMipmaps=!1}else b.texImage2D(b.TEXTURE_2D,0,n,t.width,t.height,0,n,i,t.data);else if(e instanceof re.CompressedTexture)for(s=0,l=a.length;s<l;s++)o=a[s],e.format!==re.RGBAFormat&&e.format!==re.RGBFormat?ve().indexOf(n)>-1?b.compressedTexImage2D(b.TEXTURE_2D,s,n,o.width,o.height,0,o.data):console.warn("Attempt to load unsupported compressed texture format"):b.texImage2D(b.TEXTURE_2D,s,n,o.width,o.height,0,n,i,o.data);else if(a.length>0&&r){for(s=0,l=a.length;s<l;s++)o=a[s],b.texImage2D(b.TEXTURE_2D,s,n,n,i,o);e.generateMipmaps=!1}else b.texImage2D(b.TEXTURE_2D,0,n,n,i,e.image);e.generateMipmaps&&r&&b.generateMipmap(b.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()},this.setTexture=function(e,t){b.activeTexture(b.TEXTURE0+t),e.needsUpdate?w.uploadTexture(e):b.bindTexture(b.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t,r,n,i,o,a=e instanceof re.WebGLRenderTargetCube;if(e&&void 0===e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",Ee),e.__webglTexture=b.createTexture(),w.info.memory.textures++;var s=re.Math.isPowerOfTwo(e.width)&&re.Math.isPowerOfTwo(e.height),l=xt(e.format),c=xt(e.type);if(a){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],b.bindTexture(b.TEXTURE_CUBE_MAP,e.__webglTexture),ft(b.TEXTURE_CUBE_MAP,e,s);for(var u=0;u<6;u++)e.__webglFramebuffer[u]=b.createFramebuffer(),e.__webglRenderbuffer[u]=b.createRenderbuffer(),b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+u,0,l,e.width,e.height,0,l,c,null),gt(e.__webglFramebuffer[u],e,b.TEXTURE_CUBE_MAP_POSITIVE_X+u),vt(e.__webglRenderbuffer[u],e);s&&b.generateMipmap(b.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=b.createFramebuffer(),e.shareDepthFrom?e.__webglRenderbuffer=e.shareDepthFrom.__webglRenderbuffer:e.__webglRenderbuffer=b.createRenderbuffer(),b.bindTexture(b.TEXTURE_2D,e.__webglTexture),ft(b.TEXTURE_2D,e,s),b.texImage2D(b.TEXTURE_2D,0,l,e.width,e.height,0,l,c,null),gt(e.__webglFramebuffer,e,b.TEXTURE_2D),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,e.__webglRenderbuffer):vt(e.__webglRenderbuffer,e),s&&b.generateMipmap(b.TEXTURE_2D);a?b.bindTexture(b.TEXTURE_CUBE_MAP,null):b.bindTexture(b.TEXTURE_2D,null),b.bindRenderbuffer(b.RENDERBUFFER,null),b.bindFramebuffer(b.FRAMEBUFFER,null)}e?(t=a?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,r=e.width,n=e.height,i=0,o=0):(t=null,r=G,n=j,i=V,o=H),t!==S&&(b.bindFramebuffer(b.FRAMEBUFFER,t),b.viewport(i,o,r,n),S=t),W=r,Q=n},this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},re.WebGLRenderTarget=function(e,t,r){this.width=e,this.height=t,r=r||{},this.wrapS=void 0!==r.wrapS?r.wrapS:re.ClampToEdgeWrapping,this.wrapT=void 0!==r.wrapT?r.wrapT:re.ClampToEdgeWrapping,this.magFilter=void 0!==r.magFilter?r.magFilter:re.LinearFilter,this.minFilter=void 0!==r.minFilter?r.minFilter:re.LinearMipMapLinearFilter,this.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,this.offset=new re.Vector2(0,0),this.repeat=new re.Vector2(1,1),this.format=void 0!==r.format?r.format:re.RGBAFormat,this.type=void 0!==r.type?r.type:re.UnsignedByteType,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.generateMipmaps=!0,this.shareDepthFrom=null},re.WebGLRenderTarget.prototype={constructor:re.WebGLRenderTarget,setSize:function(e,t){this.width=e,this.height=t},clone:function(){var e=new re.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},re.EventDispatcher.prototype.apply(re.WebGLRenderTarget.prototype),re.WebGLRenderTargetCube=function(e,t,r){re.WebGLRenderTarget.call(this,e,t,r),this.activeCubeFace=0},re.WebGLRenderTargetCube.prototype=Object.create(re.WebGLRenderTarget.prototype),re.WebGLExtensions=function(e){var t={};this.get=function(r){if(void 0!==t[r])return t[r];var n;switch(r){case"OES_texture_float":n=e.getExtension("OES_texture_float");break;case"OES_texture_float_linear":n=e.getExtension("OES_texture_float_linear");break;case"OES_standard_derivatives":n=e.getExtension("OES_standard_derivatives");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"OES_element_index_uint":n=e.getExtension("OES_element_index_uint");break;case"EXT_blend_minmax":n=e.getExtension("EXT_blend_minmax");break;case"EXT_frag_depth":n=e.getExtension("EXT_frag_depth")}return null===n&&console.log("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=n,n}},re.WebGLProgram=(V=0,function(e,t,r,n){var i=e,o=i.context,a=r.defines,s=r.__webglShader.uniforms,l=r.attributes,c=r.__webglShader.vertexShader,u=r.__webglShader.fragmentShader,h=r.index0AttributeName;void 0===h&&!0===n.morphTargets&&(h="position");var f="SHADOWMAP_TYPE_BASIC";n.shadowMapType===re.PCFShadowMap?f="SHADOWMAP_TYPE_PCF":n.shadowMapType===re.PCFSoftShadowMap&&(f="SHADOWMAP_TYPE_PCF_SOFT");var d,p,m=function(e){var t,r,n=[];for(var i in e)!1!==(t=e[i])&&(r="#define "+i+" "+t,n.push(r));return n.join("\n")}(a),g=o.createProgram();r instanceof re.RawShaderMaterial?(d="",p=""):(d=["precision "+n.precision+" float;","precision "+n.precision+" int;",m,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.gammaInput?"#define GAMMA_INPUT":"",i.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+n.maxDirLights,"#define MAX_POINT_LIGHTS "+n.maxPointLights,"#define MAX_SPOT_LIGHTS "+n.maxSpotLights,"#define MAX_HEMI_LIGHTS "+n.maxHemiLights,"#define MAX_SHADOWS "+n.maxShadows,"#define MAX_BONES "+n.maxBones,n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.lightMap?"#define USE_LIGHTMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals?"#define USE_MORPHNORMALS":"",n.wrapAround?"#define WRAP_AROUND":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",n.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif",""].join("\n"),p=["precision "+n.precision+" float;","precision "+n.precision+" int;",n.bumpMap||n.normalMap?"#extension GL_OES_standard_derivatives : enable":"",m,"#define MAX_DIR_LIGHTS "+n.maxDirLights,"#define MAX_POINT_LIGHTS "+n.maxPointLights,"#define MAX_SPOT_LIGHTS "+n.maxSpotLights,"#define MAX_HEMI_LIGHTS "+n.maxHemiLights,"#define MAX_SHADOWS "+n.maxShadows,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"",i.gammaInput?"#define GAMMA_INPUT":"",i.gammaOutput?"#define GAMMA_OUTPUT":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.lightMap?"#define USE_LIGHTMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.metal?"#define METAL":"",n.wrapAround?"#define WRAP_AROUND":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",n.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n"));var v=new re.WebGLShader(o,o.VERTEX_SHADER,d+c),y=new re.WebGLShader(o,o.FRAGMENT_SHADER,p+u);o.attachShader(g,v),o.attachShader(g,y),void 0!==h&&o.bindAttribLocation(g,0,h),o.linkProgram(g),!1===o.getProgramParameter(g,o.LINK_STATUS)&&(console.error("THREE.WebGLProgram: Could not initialise shader."),console.error("gl.VALIDATE_STATUS",o.getProgramParameter(g,o.VALIDATE_STATUS)),console.error("gl.getError()",o.getError())),""!==o.getProgramInfoLog(g)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",o.getProgramInfoLog(g)),o.deleteShader(v),o.deleteShader(y);var x=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences","bindMatrix","bindMatrixInverse"];for(var b in n.useVertexTexture?(x.push("boneTexture"),x.push("boneTextureWidth"),x.push("boneTextureHeight")):x.push("boneGlobalMatrices"),n.logarithmicDepthBuffer&&x.push("logDepthBufFC"),s)x.push(b);this.uniforms=function(e,t,r){for(var n={},i=0,o=r.length;i<o;i++){var a=r[i];n[a]=e.getUniformLocation(t,a)}return n}(o,g,x),x=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"];for(var w=0;w<n.maxMorphTargets;w++)x.push("morphTarget"+w);for(w=0;w<n.maxMorphNormals;w++)x.push("morphNormal"+w);for(var _ in l)x.push(_);return this.attributes=function(e,t,r){for(var n={},i=0,o=r.length;i<o;i++){var a=r[i];n[a]=e.getAttribLocation(t,a)}return n}(o,g,x),this.attributesKeys=Object.keys(this.attributes),this.id=V++,this.code=t,this.usedTimes=1,this.program=g,this.vertexShader=v,this.fragmentShader=y,this}),re.WebGLShader=function(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),!1===e.getShaderParameter(n,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(n)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e.getShaderInfoLog(n)),console.warn(function(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}(r))),n},re.LensFlarePlugin=function(e,t){var r,n,i,o,a,s,l,c,u=e.context,h=function(){var t,h=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),f=new Uint16Array([0,1,2,0,2,3]);r=u.createBuffer(),n=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,r),u.bufferData(u.ARRAY_BUFFER,h,u.STATIC_DRAW),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,n),u.bufferData(u.ELEMENT_ARRAY_BUFFER,f,u.STATIC_DRAW),l=u.createTexture(),c=u.createTexture(),u.bindTexture(u.TEXTURE_2D,l),u.texImage2D(u.TEXTURE_2D,0,u.RGB,16,16,0,u.RGB,u.UNSIGNED_BYTE,null),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),u.bindTexture(u.TEXTURE_2D,c),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,16,16,0,u.RGBA,u.UNSIGNED_BYTE,null),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),t=(s=u.getParameter(u.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0)?{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},i=function(t){var r=u.createProgram(),n=u.createShader(u.FRAGMENT_SHADER),i=u.createShader(u.VERTEX_SHADER),o="precision "+e.getPrecision()+" float;\n";return u.shaderSource(n,o+t.fragmentShader),u.shaderSource(i,o+t.vertexShader),u.compileShader(n),u.compileShader(i),u.attachShader(r,n),u.attachShader(r,i),u.linkProgram(r),r}(t),o={vertex:u.getAttribLocation(i,"position"),uv:u.getAttribLocation(i,"uv")},a={renderType:u.getUniformLocation(i,"renderType"),map:u.getUniformLocation(i,"map"),occlusionMap:u.getUniformLocation(i,"occlusionMap"),opacity:u.getUniformLocation(i,"opacity"),color:u.getUniformLocation(i,"color"),scale:u.getUniformLocation(i,"scale"),rotation:u.getUniformLocation(i,"rotation"),screenPosition:u.getUniformLocation(i,"screenPosition")}};this.render=function(f,d,p,m){if(0!==t.length){var g=new re.Vector3,v=m/p,y=.5*p,x=.5*m,b=16/m,w=new re.Vector2(b*v,b),_=new re.Vector3(1,1,0),M=new re.Vector2(1,1);void 0===i&&h(),u.useProgram(i),u.enableVertexAttribArray(o.vertex),u.enableVertexAttribArray(o.uv),u.uniform1i(a.occlusionMap,0),u.uniform1i(a.map,1),u.bindBuffer(u.ARRAY_BUFFER,r),u.vertexAttribPointer(o.vertex,2,u.FLOAT,!1,16,0),u.vertexAttribPointer(o.uv,2,u.FLOAT,!1,16,8),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,n),u.disable(u.CULL_FACE),u.depthMask(!1);for(var S=0,A=t.length;S<A;S++){b=16/m,w.set(b*v,b);var C=t[S];if(g.set(C.matrixWorld.elements[12],C.matrixWorld.elements[13],C.matrixWorld.elements[14]),g.applyMatrix4(d.matrixWorldInverse),g.applyProjection(d.projectionMatrix),_.copy(g),M.x=_.x*y+y,M.y=_.y*x+x,s||M.x>0&&M.x<p&&M.y>0&&M.y<m){u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,l),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGB,M.x-8,M.y-8,16,16,0),u.uniform1i(a.renderType,0),u.uniform2f(a.scale,w.x,w.y),u.uniform3f(a.screenPosition,_.x,_.y,_.z),u.disable(u.BLEND),u.enable(u.DEPTH_TEST),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGBA,M.x-8,M.y-8,16,16,0),u.uniform1i(a.renderType,1),u.disable(u.DEPTH_TEST),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,l),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0),C.positionScreen.copy(_),C.customUpdateCallback?C.customUpdateCallback(C):C.updateLensFlares(),u.uniform1i(a.renderType,2),u.enable(u.BLEND);for(var T=0,E=C.lensFlares.length;T<E;T++){var k=C.lensFlares[T];k.opacity>.001&&k.scale>.001&&(_.x=k.x,_.y=k.y,_.z=k.z,b=k.size*k.scale/m,w.x=b*v,w.y=b,u.uniform3f(a.screenPosition,_.x,_.y,_.z),u.uniform2f(a.scale,w.x,w.y),u.uniform1f(a.rotation,k.rotation),u.uniform1f(a.opacity,k.opacity),u.uniform3f(a.color,k.color.r,k.color.g,k.color.b),e.setBlending(k.blending,k.blendEquation,k.blendSrc,k.blendDst),e.setTexture(k.texture,1),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0))}}}u.enable(u.CULL_FACE),u.enable(u.DEPTH_TEST),u.depthMask(!0),e.resetGLState()}}},re.ShadowMapPlugin=function(e,t,r,n){var i,o,a,s,l=e.context,c=new re.Frustum,u=new re.Matrix4,h=new re.Vector3,f=new re.Vector3,d=new re.Vector3,p=[],m=re.ShaderLib.depthRGBA,g=re.UniformsUtils.clone(m.uniforms);function v(e,t,n){if(t.visible){var i=r[t.id];if(i&&t.castShadow&&(!1===t.frustumCulled||!0===c.intersectsObject(t)))for(var o=0,a=i.length;o<a;o++){var s=i[o];t._modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),p.push(s)}for(o=0,a=t.children.length;o<a;o++)v(e,t.children[o],n)}}function y(e,t){var r=new re.DirectionalLight;r.isVirtual=!0,r.onlyShadow=!0,r.castShadow=!0,r.shadowCameraNear=e.shadowCameraNear,r.shadowCameraFar=e.shadowCameraFar,r.shadowCameraLeft=e.shadowCameraLeft,r.shadowCameraRight=e.shadowCameraRight,r.shadowCameraBottom=e.shadowCameraBottom,r.shadowCameraTop=e.shadowCameraTop,r.shadowCameraVisible=e.shadowCameraVisible,r.shadowDarkness=e.shadowDarkness,r.shadowBias=e.shadowCascadeBias[t],r.shadowMapWidth=e.shadowCascadeWidth[t],r.shadowMapHeight=e.shadowCascadeHeight[t],r.pointsWorld=[],r.pointsFrustum=[];for(var n=r.pointsWorld,i=r.pointsFrustum,o=0;o<8;o++)n[o]=new re.Vector3,i[o]=new re.Vector3;var a=e.shadowCascadeNearZ[t],s=e.shadowCascadeFarZ[t];return i[0].set(-1,-1,a),i[1].set(1,-1,a),i[2].set(-1,1,a),i[3].set(1,1,a),i[4].set(-1,-1,s),i[5].set(1,-1,s),i[6].set(-1,1,s),i[7].set(1,1,s),r}function x(e,t){var r=e.shadowCascadeArray[t];r.position.copy(e.position),r.target.position.copy(e.target.position),r.lookAt(r.target),r.shadowCameraVisible=e.shadowCameraVisible,r.shadowDarkness=e.shadowDarkness,r.shadowBias=e.shadowCascadeBias[t];var n=e.shadowCascadeNearZ[t],i=e.shadowCascadeFarZ[t],o=r.pointsFrustum;o[0].z=n,o[1].z=n,o[2].z=n,o[3].z=n,o[4].z=i,o[5].z=i,o[6].z=i,o[7].z=i}function b(e,t){var r=t.shadowCamera,n=t.pointsFrustum,i=t.pointsWorld;h.set(1/0,1/0,1/0),f.set(-1/0,-1/0,-1/0);for(var o=0;o<8;o++){var a=i[o];a.copy(n[o]),a.unproject(e),a.applyMatrix4(r.matrixWorldInverse),a.x<h.x&&(h.x=a.x),a.x>f.x&&(f.x=a.x),a.y<h.y&&(h.y=a.y),a.y>f.y&&(f.y=a.y),a.z<h.z&&(h.z=a.z),a.z>f.z&&(f.z=a.z)}r.left=h.x,r.right=f.x,r.top=f.y,r.bottom=h.y,r.updateProjectionMatrix()}function w(e){return e.material instanceof re.MeshFaceMaterial?e.material.materials[0]:e.material}i=new re.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader}),o=new re.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,morphTargets:!0}),a=new re.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,skinning:!0}),s=new re.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,morphTargets:!0,skinning:!0}),i._shadowPass=!0,o._shadowPass=!0,a._shadowPass=!0,s._shadowPass=!0,this.render=function(r,h){if(!1!==e.shadowMapEnabled){var f,m,g,_,M,S,A,C,T,E,k,P,L,R=[],D=0;for(l.clearColor(1,1,1,1),l.disable(l.BLEND),l.enable(l.CULL_FACE),l.frontFace(l.CCW),e.shadowMapCullFace===re.CullFaceFront?l.cullFace(l.FRONT):l.cullFace(l.BACK),e.setDepthTest(!0),f=0,m=t.length;f<m;f++)if((L=t[f]).castShadow)if(L instanceof re.DirectionalLight&&L.shadowCascade)for(M=0;M<L.shadowCascadeCount;M++){var F;if(L.shadowCascadeArray[M])F=L.shadowCascadeArray[M];else{(F=y(L,M)).originalCamera=h;var z=new re.Gyroscope;z.position.copy(L.shadowCascadeOffset),z.add(F),z.add(F.target),h.add(z),L.shadowCascadeArray[M]=F,console.log("Created virtualLight",F)}x(L,M),R[D]=F,D++}else R[D]=L,D++;for(f=0,m=R.length;f<m;f++){if(!(L=R[f]).shadowMap){var O=re.LinearFilter;e.shadowMapType===re.PCFSoftShadowMap&&(O=re.NearestFilter);var B={minFilter:O,magFilter:O,format:re.RGBAFormat};L.shadowMap=new re.WebGLRenderTarget(L.shadowMapWidth,L.shadowMapHeight,B),L.shadowMapSize=new re.Vector2(L.shadowMapWidth,L.shadowMapHeight),L.shadowMatrix=new re.Matrix4}if(!L.shadowCamera){if(L instanceof re.SpotLight)L.shadowCamera=new re.PerspectiveCamera(L.shadowCameraFov,L.shadowMapWidth/L.shadowMapHeight,L.shadowCameraNear,L.shadowCameraFar);else{if(!(L instanceof re.DirectionalLight)){console.error("Unsupported light type for shadow");continue}L.shadowCamera=new re.OrthographicCamera(L.shadowCameraLeft,L.shadowCameraRight,L.shadowCameraTop,L.shadowCameraBottom,L.shadowCameraNear,L.shadowCameraFar)}r.add(L.shadowCamera),!0===r.autoUpdate&&r.updateMatrixWorld()}var I,N,U;for(L.shadowCameraVisible&&!L.cameraHelper&&(L.cameraHelper=new re.CameraHelper(L.shadowCamera),r.add(L.cameraHelper)),L.isVirtual&&F.originalCamera==h&&b(h,L),S=L.shadowMap,A=L.shadowMatrix,(C=L.shadowCamera).position.setFromMatrixPosition(L.matrixWorld),d.setFromMatrixPosition(L.target.matrixWorld),C.lookAt(d),C.updateMatrixWorld(),C.matrixWorldInverse.getInverse(C.matrixWorld),L.cameraHelper&&(L.cameraHelper.visible=L.shadowCameraVisible),L.shadowCameraVisible&&L.cameraHelper.update(),A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(C.projectionMatrix),A.multiply(C.matrixWorldInverse),u.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse),c.setFromMatrix(u),e.setRenderTarget(S),e.clear(),p.length=0,v(r,r,C),g=0,_=p.length;g<_;g++)P=(k=p[g]).object,T=k.buffer,I=w(P),N=void 0!==P.geometry.morphTargets&&P.geometry.morphTargets.length>0&&I.morphTargets,U=P instanceof re.SkinnedMesh&&I.skinning,E=P.customDepthMaterial?P.customDepthMaterial:U?N?s:a:N?o:i,e.setMaterialFaces(I),T instanceof re.BufferGeometry?e.renderBufferDirect(C,t,null,E,T,P):e.renderBuffer(C,t,null,E,T,P);for(g=0,_=n.length;g<_;g++)(P=(k=n[g]).object).visible&&P.castShadow&&(P._modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,P.matrixWorld),e.renderImmediateObject(C,t,null,i,P))}var V=e.getClearColor(),H=e.getClearAlpha();l.clearColor(V.r,V.g,V.b,H),l.enable(l.BLEND),e.shadowMapCullFace===re.CullFaceFront&&l.cullFace(l.BACK),e.resetGLState()}}},re.SpritePlugin=function(e,t){var r,n,i,o,a,s,l=e.context,c=function(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),c=new Uint16Array([0,1,2,0,2,3]);r=l.createBuffer(),n=l.createBuffer(),l.bindBuffer(l.ARRAY_BUFFER,r),l.bufferData(l.ARRAY_BUFFER,t,l.STATIC_DRAW),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,n),l.bufferData(l.ELEMENT_ARRAY_BUFFER,c,l.STATIC_DRAW),i=function(){var t=l.createProgram(),r=l.createShader(l.VERTEX_SHADER),n=l.createShader(l.FRAGMENT_SHADER);return l.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),l.shaderSource(n,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),l.compileShader(r),l.compileShader(n),l.attachShader(t,r),l.attachShader(t,n),l.linkProgram(t),t}(),o={position:l.getAttribLocation(i,"position"),uv:l.getAttribLocation(i,"uv")},a={uvOffset:l.getUniformLocation(i,"uvOffset"),uvScale:l.getUniformLocation(i,"uvScale"),rotation:l.getUniformLocation(i,"rotation"),scale:l.getUniformLocation(i,"scale"),color:l.getUniformLocation(i,"color"),map:l.getUniformLocation(i,"map"),opacity:l.getUniformLocation(i,"opacity"),modelViewMatrix:l.getUniformLocation(i,"modelViewMatrix"),projectionMatrix:l.getUniformLocation(i,"projectionMatrix"),fogType:l.getUniformLocation(i,"fogType"),fogDensity:l.getUniformLocation(i,"fogDensity"),fogNear:l.getUniformLocation(i,"fogNear"),fogFar:l.getUniformLocation(i,"fogFar"),fogColor:l.getUniformLocation(i,"fogColor"),alphaTest:l.getUniformLocation(i,"alphaTest")};var u=document.createElement("canvas");u.width=8,u.height=8;var h=u.getContext("2d");h.fillStyle="white",h.fillRect(0,0,8,8),(s=new re.Texture(u)).needsUpdate=!0};function u(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(h,f){if(0!==t.length){void 0===i&&c(),l.useProgram(i),l.enableVertexAttribArray(o.position),l.enableVertexAttribArray(o.uv),l.disable(l.CULL_FACE),l.enable(l.BLEND),l.bindBuffer(l.ARRAY_BUFFER,r),l.vertexAttribPointer(o.position,2,l.FLOAT,!1,16,0),l.vertexAttribPointer(o.uv,2,l.FLOAT,!1,16,8),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,n),l.uniformMatrix4fv(a.projectionMatrix,!1,f.projectionMatrix.elements),l.activeTexture(l.TEXTURE0),l.uniform1i(a.map,0);var d=0,p=0,m=h.fog;m?(l.uniform3f(a.fogColor,m.color.r,m.color.g,m.color.b),m instanceof re.Fog?(l.uniform1f(a.fogNear,m.near),l.uniform1f(a.fogFar,m.far),l.uniform1i(a.fogType,1),d=1,p=1):m instanceof re.FogExp2&&(l.uniform1f(a.fogDensity,m.density),l.uniform1i(a.fogType,2),d=2,p=2)):(l.uniform1i(a.fogType,0),d=0,p=0);for(var g=0,v=t.length;g<v;g++){(x=t[g])._modelViewMatrix.multiplyMatrices(f.matrixWorldInverse,x.matrixWorld),null===x.renderDepth?x.z=-x._modelViewMatrix.elements[14]:x.z=x.renderDepth}t.sort(u);var y=[];for(g=0,v=t.length;g<v;g++){var x,b=(x=t[g]).material;l.uniform1f(a.alphaTest,b.alphaTest),l.uniformMatrix4fv(a.modelViewMatrix,!1,x._modelViewMatrix.elements),y[0]=x.scale.x,y[1]=x.scale.y;var w=0;h.fog&&b.fog&&(w=p),d!==w&&(l.uniform1i(a.fogType,w),d=w),null!==b.map?(l.uniform2f(a.uvOffset,b.map.offset.x,b.map.offset.y),l.uniform2f(a.uvScale,b.map.repeat.x,b.map.repeat.y)):(l.uniform2f(a.uvOffset,0,0),l.uniform2f(a.uvScale,1,1)),l.uniform1f(a.opacity,b.opacity),l.uniform3f(a.color,b.color.r,b.color.g,b.color.b),l.uniform1f(a.rotation,b.rotation),l.uniform2fv(a.scale,y),e.setBlending(b.blending,b.blendEquation,b.blendSrc,b.blendDst),e.setDepthTest(b.depthTest),e.setDepthWrite(b.depthWrite),b.map&&b.map.image&&b.map.image.width?e.setTexture(b.map,0):e.setTexture(s,0),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0)}l.enable(l.CULL_FACE),e.resetGLState()}}},re.GeometryUtils={merge:function(e,t,r){var n;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t instanceof re.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},re.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,r,n){var i=new re.ImageLoader;i.crossOrigin=this.crossOrigin;var o=new re.Texture(void 0,t);return i.load(e,(function(e){o.image=e,o.needsUpdate=!0,r&&r(o)}),void 0,(function(e){n&&n(e)})),o.sourceFile=e,o},loadTextureCube:function(e,t,r,n){var i=new re.ImageLoader;i.crossOrigin=this.crossOrigin;var o=new re.CubeTexture([],t);o.flipY=!1;for(var a=0,s=function(t){i.load(e[t],(function(e){o.images[t]=e,6===(a+=1)&&(o.needsUpdate=!0,r&&r(o))}))},l=0,c=e.length;l<c;++l)s(l);return o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(e,t){var r=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},n=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]};t|=1;var i=e.width,o=e.height,a=document.createElement("canvas");a.width=i,a.height=o;var s=a.getContext("2d");s.drawImage(e,0,0);for(var l,c,u=s.getImageData(0,0,i,o).data,h=s.createImageData(i,o),f=h.data,d=0;d<i;d++)for(var p=0;p<o;p++){var m=p-1<0?0:p-1,g=p+1>o-1?o-1:p+1,v=d-1<0?0:d-1,y=d+1>i-1?i-1:d+1,x=[],b=[0,0,u[4*(p*i+d)]/255*t];x.push([-1,0,u[4*(p*i+v)]/255*t]),x.push([-1,-1,u[4*(m*i+v)]/255*t]),x.push([0,-1,u[4*(m*i+d)]/255*t]),x.push([1,-1,u[4*(m*i+y)]/255*t]),x.push([1,0,u[4*(p*i+y)]/255*t]),x.push([1,1,u[4*(g*i+y)]/255*t]),x.push([0,1,u[4*(g*i+d)]/255*t]),x.push([-1,1,u[4*(g*i+v)]/255*t]);for(var w=[],_=x.length,M=0;M<_;M++){var S=x[M],A=x[(M+1)%_];S=r(S,b),A=r(A,b),w.push(n((c=A,[(l=S)[1]*c[2]-l[2]*c[1],l[2]*c[0]-l[0]*c[2],l[0]*c[1]-l[1]*c[0]])))}var C=[0,0,0];for(M=0;M<w.length;M++)C[0]+=w[M][0],C[1]+=w[M][1],C[2]+=w[M][2];C[0]/=w.length,C[1]/=w.length,C[2]/=w.length;var T=4*(p*i+d);f[T]=(C[0]+1)/2*255|0,f[T+1]=(C[1]+1)/2*255|0,f[T+2]=255*C[2]|0,f[T+3]=255}return s.putImageData(h,0,0),a},generateDataTexture:function(e,t,r){for(var n=e*t,i=new Uint8Array(3*n),o=Math.floor(255*r.r),a=Math.floor(255*r.g),s=Math.floor(255*r.b),l=0;l<n;l++)i[3*l]=o,i[3*l+1]=a,i[3*l+2]=s;var c=new re.DataTexture(i,e,t,re.RGBFormat);return c.needsUpdate=!0,c}},re.SceneUtils={createMultiMaterialObject:function(e,t){for(var r=new re.Object3D,n=0,i=t.length;n<i;n++)r.add(new re.Mesh(e,t[n]));return r},detach:function(e,t,r){e.applyMatrix(t.matrixWorld),t.remove(e),r.add(e)},attach:function(e,t,r){var n=new re.Matrix4;n.getInverse(r.matrixWorld),e.applyMatrix(n),t.remove(e),r.add(e)}},re.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(e){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(e){var t=e.familyName.toLowerCase();this.faces[t]=this.faces[t]||{},this.faces[t][e.cssFontWeight]=this.faces[t][e.cssFontWeight]||{},this.faces[t][e.cssFontWeight][e.cssFontStyle]=e;this.faces[t][e.cssFontWeight][e.cssFontStyle]=e;return e},drawText:function(e){var t,r=this.getFace(),n=this.size/r.resolution,i=0,o=String(e).split(""),a=o.length,s=[];for(t=0;t<a;t++){var l=new re.Path,c=this.extractGlyphPoints(o[t],r,n,i,l);i+=c.offset,s.push(c.path)}return{paths:s,offset:i/2}},extractGlyphPoints:function(e,t,r,n,i){var o,a,s,l,c,u,h,f,d,p,m,g,v,y,x,b,w,_,M=[],S=t.glyphs[e]||t.glyphs["?"];if(S){if(S.o)for(c=(l=S._cachedOutline||(S._cachedOutline=S.o.split(" "))).length,u=r,h=r,o=0;o<c;)switch(l[o++]){case"m":f=l[o++]*u+n,d=l[o++]*h,i.moveTo(f,d);break;case"l":f=l[o++]*u+n,d=l[o++]*h,i.lineTo(f,d);break;case"q":if(p=l[o++]*u+n,m=l[o++]*h,y=l[o++]*u+n,x=l[o++]*h,i.quadraticCurveTo(y,x,p,m),_=M[M.length-1])for(g=_.x,v=_.y,a=1,s=this.divisions;a<=s;a++){var A=a/s;re.Shape.Utils.b2(A,g,y,p),re.Shape.Utils.b2(A,v,x,m)}break;case"b":if(p=l[o++]*u+n,m=l[o++]*h,y=l[o++]*u+n,x=l[o++]*h,b=l[o++]*u+n,w=l[o++]*h,i.bezierCurveTo(y,x,b,w,p,m),_=M[M.length-1])for(g=_.x,v=_.y,a=1,s=this.divisions;a<=s;a++)A=a/s,re.Shape.Utils.b3(A,g,y,b,p),re.Shape.Utils.b3(A,v,x,w,m)}return{offset:S.ha*r,path:i}}}},re.FontUtils.generateShapes=function(e,t){var r=void 0!==(t=t||{}).size?t.size:100,n=void 0!==t.curveSegments?t.curveSegments:4,i=void 0!==t.font?t.font:"helvetiker",o=void 0!==t.weight?t.weight:"normal",a=void 0!==t.style?t.style:"normal";re.FontUtils.size=r,re.FontUtils.divisions=n,re.FontUtils.face=i,re.FontUtils.weight=o,re.FontUtils.style=a;for(var s=re.FontUtils.drawText(e).paths,l=[],c=0,u=s.length;c<u;c++)Array.prototype.push.apply(l,s[c].toShapes());return l},H=re.FontUtils,G=function(e){for(var t=e.length,r=0,n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return.5*r},j=function(e,t,r,n,i,o){var a,s,l,c,u,h,f,d,p,m,g,v,y,x,b;if(s=e[o[t]].x,l=e[o[t]].y,c=e[o[r]].x,u=e[o[r]].y,h=e[o[n]].x,1e-10>(c-s)*((f=e[o[n]].y)-l)-(u-l)*(h-s))return!1;for(m=h-c,g=f-u,v=s-h,y=l-f,x=c-s,b=u-l,a=0;a<i;a++)if(d=e[o[a]].x,p=e[o[a]].y,!(d===s&&p===l||d===c&&p===u||d===h&&p===f)&&m*(p-u)-g*(d-c)>=-1e-10&&v*(p-f)-y*(d-h)>=-1e-10&&x*(p-l)-b*(d-s)>=-1e-10)return!1;return!0},H.Triangulate=function(e,t){var r=e.length;if(r<3)return null;var n,i,o,a=[],s=[],l=[];if(G(e)>0)for(i=0;i<r;i++)s[i]=i;else for(i=0;i<r;i++)s[i]=r-1-i;var c=r,u=2*c;for(i=c-1;c>2;){if(u--<=0)return console.log("Warning, unable to triangulate polygon!"),t?l:a;if(c<=(n=i)&&(n=0),c<=(i=n+1)&&(i=0),c<=(o=i+1)&&(o=0),j(e,n,i,o,c,s)){var h,f,d,p,m;for(h=s[n],f=s[i],d=s[o],a.push([e[h],e[f],e[d]]),l.push([s[n],s[i],s[o]]),p=i,m=i+1;m<c;p++,m++)s[p]=s[m];u=2*--c}}return t?l:a},H.Triangulate.area=G,te._typeface_js={faces:re.FontUtils.faces,loadFace:re.FontUtils.loadFace},re.typeface_js=te._typeface_js,re.Audio=function(e){re.Object3D.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},re.Audio.prototype=Object.create(re.Object3D.prototype),re.Audio.prototype.load=function(e){var t=this,r=new XMLHttpRequest;return r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(e){t.context.decodeAudioData(this.response,(function(e){t.source.buffer=e,t.source.connect(t.panner),t.source.start(0)}))},r.send(),this},re.Audio.prototype.setLoop=function(e){this.source.loop=e},re.Audio.prototype.setRefDistance=function(e){this.panner.refDistance=e},re.Audio.prototype.setRolloffFactor=function(e){this.panner.rolloffFactor=e},re.Audio.prototype.updateMatrixWorld=function(){var e=new re.Vector3;return function(t){re.Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}(),re.AudioListener=function(){re.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},re.AudioListener.prototype=Object.create(re.Object3D.prototype),re.AudioListener.prototype.updateMatrixWorld=function(){var e=new re.Vector3,t=new re.Quaternion,r=new re.Vector3,n=new re.Vector3,i=new re.Vector3,o=new re.Vector3;return function(a){re.Object3D.prototype.updateMatrixWorld.call(this,a);var s=this.context.listener;this.matrixWorld.decompose(e,t,r),n.set(0,0,-1).applyQuaternion(t),i.subVectors(e,o),s.setPosition(e.x,e.y,e.z),s.setOrientation(n.x,n.y,n.z,this.up.x,this.up.y,this.up.z),s.setVelocity(i.x,i.y,i.z),o.copy(e)}}(),re.Curve=function(){},re.Curve.prototype.getPoint=function(e){return console.log("Warning, getPoint() not implemented!"),null},re.Curve.prototype.getPointAt=function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},re.Curve.prototype.getPoints=function(e){e||(e=5);var t,r=[];for(t=0;t<=e;t++)r.push(this.getPoint(t/e));return r},re.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t,r=[];for(t=0;t<=e;t++)r.push(this.getPointAt(t/e));return r},re.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},re.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,n=[],i=this.getPoint(0),o=0;for(n.push(0),r=1;r<=e;r++)o+=(t=this.getPoint(r/e)).distanceTo(i),n.push(o),i=t;return this.cacheArcLengths=n,n},re.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},re.Curve.prototype.getUtoTmapping=function(e,t){var r,n=this.getLengths(),i=0,o=n.length;r=t||e*n[o-1];for(var a,s=0,l=o-1;s<=l;)if((a=n[i=Math.floor(s+(l-s)/2)]-r)<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(n[i=l]==r)return i/(o-1);var c=n[i];return(i+(r-c)/(n[i+1]-c))/(o-1)},re.Curve.prototype.getTangent=function(e){var t=e-1e-4,r=e+1e-4;t<0&&(t=0),r>1&&(r=1);var n=this.getPoint(t);return this.getPoint(r).clone().sub(n).normalize()},re.Curve.prototype.getTangentAt=function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},re.Curve.Utils={tangentQuadraticBezier:function(e,t,r,n){return 2*(1-e)*(r-t)+2*e*(n-r)},tangentCubicBezier:function(e,t,r,n,i){return-3*t*(1-e)*(1-e)+3*r*(1-e)*(1-e)-6*e*r*(1-e)+6*e*n*(1-e)-3*e*e*n+3*e*e*i},tangentSpline:function(e,t,r,n,i){return 6*e*e-6*e+(3*e*e-4*e+1)+(-6*e*e+6*e)+(3*e*e-2*e)},interpolate:function(e,t,r,n,i){var o=.5*(r-e),a=.5*(n-t),s=i*i;return(2*t-2*r+o+a)*(i*s)+(-3*t+3*r-2*o-a)*s+o*i+t}},re.Curve.create=function(e,t){return e.prototype=Object.create(re.Curve.prototype),e.prototype.getPoint=t,e},re.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},re.CurvePath.prototype=Object.create(re.Curve.prototype),re.CurvePath.prototype.add=function(e){this.curves.push(e)},re.CurvePath.prototype.checkConnection=function(){},re.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new re.LineCurve(t,e))},re.CurvePath.prototype.getPoint=function(e){for(var t,r=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=r){var o=1-(n[i]-r)/(t=this.curves[i]).getLength();return t.getPointAt(o)}i++}return null},re.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},re.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e,t=[],r=0,n=this.curves.length;for(e=0;e<n;e++)r+=this.curves[e].getLength(),t.push(r);return this.cacheLengths=t,t},re.CurvePath.prototype.getBoundingBox=function(){var e,t,r,n,i,o,a,s,l,c,u=this.getPoints();e=t=Number.NEGATIVE_INFINITY,n=i=Number.POSITIVE_INFINITY;var h=u[0]instanceof re.Vector3;for(c=h?new re.Vector3:new re.Vector2,s=0,l=u.length;s<l;s++)(a=u[s]).x>e?e=a.x:a.x<n&&(n=a.x),a.y>t?t=a.y:a.y<i&&(i=a.y),h&&(a.z>r?r=a.z:a.z<o&&(o=a.z)),c.add(a);var f={minX:n,minY:i,maxX:e,maxY:t};return h&&(f.maxZ=r,f.minZ=o),f},re.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e,!0);return this.createGeometry(t)},re.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e,!0);return this.createGeometry(t)},re.CurvePath.prototype.createGeometry=function(e){for(var t=new re.Geometry,r=0;r<e.length;r++)t.vertices.push(new re.Vector3(e[r].x,e[r].y,e[r].z||0));return t},re.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},re.CurvePath.prototype.getTransformedPoints=function(e,t){var r,n,i=this.getPoints(e);for(t||(t=this.bends),r=0,n=t.length;r<n;r++)i=this.getWrapPoints(i,t[r]);return i},re.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var r,n,i=this.getSpacedPoints(e);for(t||(t=this.bends),r=0,n=t.length;r<n;r++)i=this.getWrapPoints(i,t[r]);return i},re.CurvePath.prototype.getWrapPoints=function(e,t){var r,n,i,o,a,s,l=this.getBoundingBox();for(r=0,n=e.length;r<n;r++){o=(i=e[r]).x,a=i.y,s=o/l.maxX,s=t.getUtoTmapping(s,o);var c=t.getPoint(s),u=t.getTangent(s);u.set(-u.y,u.x).multiplyScalar(a),i.x=c.x+u.x,i.y=c.y+u.y}return e},re.Gyroscope=function(){re.Object3D.call(this)},re.Gyroscope.prototype=Object.create(re.Object3D.prototype),re.Gyroscope.prototype.updateMatrixWorld=(W=new re.Vector3,Q=new re.Quaternion,X=new re.Vector3,q=new re.Vector3,Y=new re.Quaternion,K=new re.Vector3,function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(q,Y,K),this.matrix.decompose(W,Q,X),this.matrixWorld.compose(q,Q,K)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,r=this.children.length;t<r;t++)this.children[t].updateMatrixWorld(e)}),re.Path=function(e){re.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},re.Path.prototype=Object.create(re.CurvePath.prototype),re.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},re.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},re.Path.prototype.moveTo=function(e,t){var r=Array.prototype.slice.call(arguments);this.actions.push({action:re.PathActions.MOVE_TO,args:r})},re.Path.prototype.lineTo=function(e,t){var r=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,i=n[n.length-2],o=n[n.length-1],a=new re.LineCurve(new re.Vector2(i,o),new re.Vector2(e,t));this.curves.push(a),this.actions.push({action:re.PathActions.LINE_TO,args:r})},re.Path.prototype.quadraticCurveTo=function(e,t,r,n){var i=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,a=o[o.length-2],s=o[o.length-1],l=new re.QuadraticBezierCurve(new re.Vector2(a,s),new re.Vector2(e,t),new re.Vector2(r,n));this.curves.push(l),this.actions.push({action:re.PathActions.QUADRATIC_CURVE_TO,args:i})},re.Path.prototype.bezierCurveTo=function(e,t,r,n,i,o){var a=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,l=s[s.length-2],c=s[s.length-1],u=new re.CubicBezierCurve(new re.Vector2(l,c),new re.Vector2(e,t),new re.Vector2(r,n),new re.Vector2(i,o));this.curves.push(u),this.actions.push({action:re.PathActions.BEZIER_CURVE_TO,args:a})},re.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,n=r[r.length-2],i=r[r.length-1],o=[new re.Vector2(n,i)];Array.prototype.push.apply(o,e);var a=new re.SplineCurve(o);this.curves.push(a),this.actions.push({action:re.PathActions.CSPLINE_THRU,args:t})},re.Path.prototype.arc=function(e,t,r,n,i,o){var a=this.actions[this.actions.length-1].args,s=a[a.length-2],l=a[a.length-1];this.absarc(e+s,t+l,r,n,i,o)},re.Path.prototype.absarc=function(e,t,r,n,i,o){this.absellipse(e,t,r,r,n,i,o)},re.Path.prototype.ellipse=function(e,t,r,n,i,o,a){var s=this.actions[this.actions.length-1].args,l=s[s.length-2],c=s[s.length-1];this.absellipse(e+l,t+c,r,n,i,o,a)},re.Path.prototype.absellipse=function(e,t,r,n,i,o,a){var s=Array.prototype.slice.call(arguments),l=new re.EllipseCurve(e,t,r,n,i,o,a);this.curves.push(l);var c=l.getPoint(1);s.push(c.x),s.push(c.y),this.actions.push({action:re.PathActions.ELLIPSE,args:s})},re.Path.prototype.getSpacedPoints=function(e,t){e||(e=40);for(var r=[],n=0;n<e;n++)r.push(this.getPoint(n/e));return r},re.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(e,t);e=e||12;var r,n,i,o,a,s,l,c,u,h,f,d,p,m,g,v,y,x,b=[];for(r=0,n=this.actions.length;r<n;r++)switch(o=(i=this.actions[r]).action,a=i.args,o){case re.PathActions.MOVE_TO:case re.PathActions.LINE_TO:b.push(new re.Vector2(a[0],a[1]));break;case re.PathActions.QUADRATIC_CURVE_TO:for(s=a[2],l=a[3],h=a[0],f=a[1],b.length>0?(d=(m=b[b.length-1]).x,p=m.y):(d=(m=this.actions[r-1].args)[m.length-2],p=m[m.length-1]),g=1;g<=e;g++)v=g/e,y=re.Shape.Utils.b2(v,d,h,s),x=re.Shape.Utils.b2(v,p,f,l),b.push(new re.Vector2(y,x));break;case re.PathActions.BEZIER_CURVE_TO:for(s=a[4],l=a[5],h=a[0],f=a[1],c=a[2],u=a[3],b.length>0?(d=(m=b[b.length-1]).x,p=m.y):(d=(m=this.actions[r-1].args)[m.length-2],p=m[m.length-1]),g=1;g<=e;g++)v=g/e,y=re.Shape.Utils.b3(v,d,h,c,s),x=re.Shape.Utils.b3(v,p,f,u,l),b.push(new re.Vector2(y,x));break;case re.PathActions.CSPLINE_THRU:m=this.actions[r-1].args;var w=[new re.Vector2(m[m.length-2],m[m.length-1])],_=e*a[0].length;w=w.concat(a[0]);var M=new re.SplineCurve(w);for(g=1;g<=_;g++)b.push(M.getPointAt(g/_));break;case re.PathActions.ARC:var S=a[0],A=a[1],C=a[2],T=a[3],E=a[4],k=!!a[5],P=E-T,L=2*e;for(g=1;g<=L;g++)v=g/L,k||(v=1-v),R=T+v*P,y=S+C*Math.cos(R),x=A+C*Math.sin(R),b.push(new re.Vector2(y,x));break;case re.PathActions.ELLIPSE:S=a[0],A=a[1];var R,D=a[2],F=a[3];T=a[4],E=a[5],k=!!a[6],P=E-T,L=2*e;for(g=1;g<=L;g++)v=g/L,k||(v=1-v),R=T+v*P,y=S+D*Math.cos(R),x=A+F*Math.sin(R),b.push(new re.Vector2(y,x))}var z=b[b.length-1];return Math.abs(z.x-b[0].x)<1e-10&&Math.abs(z.y-b[0].y)<1e-10&&b.splice(b.length-1,1),t&&b.push(b[0]),b},re.Path.prototype.toShapes=function(e,t){function r(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r],o=new re.Shape;o.actions=i.actions,o.curves=i.curves,t.push(o)}return t}function n(e,t){for(var r=t.length,n=!1,i=r-1,o=0;o<r;i=o++){var a=t[i],s=t[o],l=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>1e-10){if(c<0&&(a=t[o],l=-l,s=t[i],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y==a.y){if(e.x==a.x)return!0}else{var u=c*(e.x-a.x)-l*(e.y-a.y);if(0==u)return!0;if(u<0)continue;n=!n}}else{if(e.y!=a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return n}var i=function(e){var t,r,n,i,o,a=[],s=new re.Path;for(t=0,r=e.length;t<r;t++)o=(n=e[t]).args,(i=n.action)==re.PathActions.MOVE_TO&&0!=s.actions.length&&(a.push(s),s=new re.Path),s[i].apply(s,o);return 0!=s.actions.length&&a.push(s),a}(this.actions);if(0==i.length)return[];if(!0===t)return r(i);var o,a,s,l=[];if(1==i.length)return a=i[0],(s=new re.Shape).actions=a.actions,s.curves=a.curves,l.push(s),l;var c=!re.Shape.Utils.isClockWise(i[0].getPoints());c=e?!c:c;var u,h,f,d,p,m,g=[],v=[],y=[],x=0;for(v[x]=void 0,y[x]=[],h=0,f=i.length;h<f;h++)u=(a=i[h]).getPoints(),o=re.Shape.Utils.isClockWise(u),(o=e?!o:o)?(!c&&v[x]&&x++,v[x]={s:new re.Shape,p:u},v[x].s.actions=a.actions,v[x].s.curves=a.curves,c&&x++,y[x]=[]):y[x].push({h:a,p:u[0]});if(!v[0])return r(i);if(v.length>1){for(var b=!1,w=[],_=0,M=v.length;_<M;_++)g[_]=[];for(_=0,M=v.length;_<M;_++){v[_];for(var S=y[_],A=0;A<S.length;A++){for(var C=S[A],T=!0,E=0;E<v.length;E++)n(C.p,v[E].p)&&(_!=E&&w.push({froms:_,tos:E,hole:A}),T?(T=!1,g[E].push(C)):b=!0);T&&g[_].push(C)}}w.length>0&&(b||(y=g))}for(h=0,f=v.length;h<f;h++)for(s=v[h].s,l.push(s),p=0,m=(d=y[h]).length;p<m;p++)s.holes.push(d[p].h);return l},re.Shape=function(){re.Path.apply(this,arguments),this.holes=[]},re.Shape.prototype=Object.create(re.Path.prototype),re.Shape.prototype.extrude=function(e){return new re.ExtrudeGeometry(this,e)},re.Shape.prototype.makeGeometry=function(e){return new re.ShapeGeometry(this,e)},re.Shape.prototype.getPointsHoles=function(e){var t,r=this.holes.length,n=[];for(t=0;t<r;t++)n[t]=this.holes[t].getTransformedPoints(e,this.bends);return n},re.Shape.prototype.getSpacedPointsHoles=function(e){var t,r=this.holes.length,n=[];for(t=0;t<r;t++)n[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return n},re.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},re.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},re.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},re.Shape.Utils={triangulateShape:function(e,t){function r(e,t,r){return e.x!=t.x?e.x<t.x?e.x<=r.x&&r.x<=t.x:t.x<=r.x&&r.x<=e.x:e.y<t.y?e.y<=r.y&&r.y<=t.y:t.y<=r.y&&r.y<=e.y}function n(e,t,n,i,o){var a=t.x-e.x,s=t.y-e.y,l=i.x-n.x,c=i.y-n.y,u=e.x-n.x,h=e.y-n.y,f=s*l-a*c,d=s*u-a*h;if(Math.abs(f)>1e-10){var p;if(f>0){if(d<0||d>f)return[];if((p=c*u-l*h)<0||p>f)return[]}else{if(d>0||d<f)return[];if((p=c*u-l*h)>0||p<f)return[]}if(0==p)return!o||0!=d&&d!=f?[e]:[];if(p==f)return!o||0!=d&&d!=f?[t]:[];if(0==d)return[n];if(d==f)return[i];var m=p/f;return[{x:e.x+m*a,y:e.y+m*s}]}if(0!=d||c*u!=l*h)return[];var g,v,y,x,b,w,_,M,S=0==a&&0==s,A=0==l&&0==c;return S&&A?e.x!=n.x||e.y!=n.y?[]:[e]:S?r(n,i,e)?[e]:[]:A?r(e,t,n)?[n]:[]:(0!=a?(e.x<t.x?(g=e,y=e.x,v=t,x=t.x):(g=t,y=t.x,v=e,x=e.x),n.x<i.x?(b=n,_=n.x,w=i,M=i.x):(b=i,_=i.x,w=n,M=n.x)):(e.y<t.y?(g=e,y=e.y,v=t,x=t.y):(g=t,y=t.y,v=e,x=e.y),n.y<i.y?(b=n,_=n.y,w=i,M=i.y):(b=i,_=i.y,w=n,M=n.y)),y<=_?x<_?[]:x==_?o?[]:[b]:x<=M?[b,v]:[b,w]:y>M?[]:y==M?o?[]:[g]:x<=M?[g,v]:[g,w])}function i(e,t,r,n){var i=t.x-e.x,o=t.y-e.y,a=r.x-e.x,s=r.y-e.y,l=n.x-e.x,c=n.y-e.y,u=i*s-o*a,h=i*c-o*l;if(Math.abs(u)>1e-10){var f=l*s-c*a;return u>0?h>=0&&f>=0:h>=0||f>=0}return h>0}for(var o,a,s,l,c,u,h={},f=e.concat(),d=0,p=t.length;d<p;d++)Array.prototype.push.apply(f,t[d]);for(o=0,a=f.length;o<a;o++)void 0!==h[c=f[o].x+":"+f[o].y]&&console.log("Duplicate point",c),h[c]=o;var m=function(e,t){var r,o=e.concat();function a(e,t){var n=o.length-1,a=e-1;a<0&&(a=n);var s=e+1;s>n&&(s=0);var l=i(o[e],o[a],o[s],r[t]);if(!l)return!1;var c=r.length-1,u=t-1;u<0&&(u=c);var h=t+1;return h>c&&(h=0),!!(l=i(r[t],r[u],r[h],o[e]))}function s(e,t){var r,i;for(r=0;r<o.length;r++)if(i=r+1,i%=o.length,n(e,t,o[r],o[i],!0).length>0)return!0;return!1}var l=[];function c(e,r){var i,o,a,s;for(i=0;i<l.length;i++)for(o=t[l[i]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,n(e,r,o[a],o[s],!0).length>0)return!0;return!1}for(var u,h,f,d,p,m,g,v,y,x,b=[],w=0,_=t.length;w<_;w++)l.push(w);for(var M=0,S=2*l.length;l.length>0;){if(--S<0){console.log("Infinite Loop! Holes left:"+l.length+", Probably Hole outside Shape!");break}for(h=M;h<o.length;h++){f=o[h],u=-1;for(w=0;w<l.length;w++)if(p=l[w],void 0===b[m=f.x+":"+f.y+":"+p]){r=t[p];for(var A=0;A<r.length;A++)if(d=r[A],a(h,A)&&!s(f,d)&&!c(f,d)){u=A,l.splice(w,1),g=o.slice(0,h+1),v=o.slice(h),y=r.slice(u),x=r.slice(0,u+1),o=g.concat(y).concat(x).concat(v),M=h;break}if(u>=0)break;b[m]=!0}if(u>=0)break}}return o}(e,t),g=re.FontUtils.Triangulate(m,!1);for(o=0,a=g.length;o<a;o++)for(l=g[o],s=0;s<3;s++)void 0!==(u=h[c=l[s].x+":"+l[s].y])&&(l[s]=u);return g.concat()},isClockWise:function(e){return re.FontUtils.Triangulate.area(e)<0},b2p0:function(e,t){var r=1-e;return r*r*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,r,n){return this.b2p0(e,t)+this.b2p1(e,r)+this.b2p2(e,n)},b3p0:function(e,t){var r=1-e;return r*r*r*t},b3p1:function(e,t){var r=1-e;return 3*r*r*e*t},b3p2:function(e,t){return 3*(1-e)*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,r,n,i){return this.b3p0(e,t)+this.b3p1(e,r)+this.b3p2(e,n)+this.b3p3(e,i)}},re.LineCurve=function(e,t){this.v1=e,this.v2=t},re.LineCurve.prototype=Object.create(re.Curve.prototype),re.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},re.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},re.LineCurve.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},re.QuadraticBezierCurve=function(e,t,r){this.v0=e,this.v1=t,this.v2=r},re.QuadraticBezierCurve.prototype=Object.create(re.Curve.prototype),re.QuadraticBezierCurve.prototype.getPoint=function(e){var t=new re.Vector2;return t.x=re.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=re.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t},re.QuadraticBezierCurve.prototype.getTangent=function(e){var t=new re.Vector2;return t.x=re.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),t.y=re.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y),t.normalize()},re.CubicBezierCurve=function(e,t,r,n){this.v0=e,this.v1=t,this.v2=r,this.v3=n},re.CubicBezierCurve.prototype=Object.create(re.Curve.prototype),re.CubicBezierCurve.prototype.getPoint=function(e){var t,r;return t=re.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),r=re.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new re.Vector2(t,r)},re.CubicBezierCurve.prototype.getTangent=function(e){var t,r;t=re.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),r=re.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var n=new re.Vector2(t,r);return n.normalize(),n},re.SplineCurve=function(e){this.points=null==e?[]:e},re.SplineCurve.prototype=Object.create(re.Curve.prototype),re.SplineCurve.prototype.getPoint=function(e){var t=this.points,r=(t.length-1)*e,n=Math.floor(r),i=r-n,o=t[0==n?n:n-1],a=t[n],s=t[n>t.length-2?t.length-1:n+1],l=t[n>t.length-3?t.length-1:n+2],c=new re.Vector2;return c.x=re.Curve.Utils.interpolate(o.x,a.x,s.x,l.x,i),c.y=re.Curve.Utils.interpolate(o.y,a.y,s.y,l.y,i),c},re.EllipseCurve=function(e,t,r,n,i,o,a){this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=n,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a},re.EllipseCurve.prototype=Object.create(re.Curve.prototype),re.EllipseCurve.prototype.getPoint=function(e){var t,r=this.aEndAngle-this.aStartAngle;r<0&&(r+=2*Math.PI),r>2*Math.PI&&(r-=2*Math.PI),t=!0===this.aClockwise?this.aEndAngle+(1-e)*(2*Math.PI-r):this.aStartAngle+e*r;var n=new re.Vector2;return n.x=this.aX+this.xRadius*Math.cos(t),n.y=this.aY+this.yRadius*Math.sin(t),n},re.ArcCurve=function(e,t,r,n,i,o){re.EllipseCurve.call(this,e,t,r,r,n,i,o)},re.ArcCurve.prototype=Object.create(re.EllipseCurve.prototype),re.LineCurve3=re.Curve.create((function(e,t){this.v1=e,this.v2=t}),(function(e){var t=new re.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t})),re.QuadraticBezierCurve3=re.Curve.create((function(e,t,r){this.v0=e,this.v1=t,this.v2=r}),(function(e){var t=new re.Vector3;return t.x=re.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=re.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t.z=re.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),t})),re.CubicBezierCurve3=re.Curve.create((function(e,t,r,n){this.v0=e,this.v1=t,this.v2=r,this.v3=n}),(function(e){var t=new re.Vector3;return t.x=re.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t.y=re.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t.z=re.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),t})),re.SplineCurve3=re.Curve.create((function(e){this.points=null==e?[]:e}),(function(e){var t=this.points,r=(t.length-1)*e,n=Math.floor(r),i=r-n,o=t[0==n?n:n-1],a=t[n],s=t[n>t.length-2?t.length-1:n+1],l=t[n>t.length-3?t.length-1:n+2],c=new re.Vector3;return c.x=re.Curve.Utils.interpolate(o.x,a.x,s.x,l.x,i),c.y=re.Curve.Utils.interpolate(o.y,a.y,s.y,l.y,i),c.z=re.Curve.Utils.interpolate(o.z,a.z,s.z,l.z,i),c})),re.ClosedSplineCurve3=re.Curve.create((function(e){this.points=null==e?[]:e}),(function(e){var t=this.points,r=(t.length-0)*e,n=Math.floor(r),i=r-n,o=t[((n+=n>0?0:(Math.floor(Math.abs(n)/t.length)+1)*t.length)-1)%t.length],a=t[n%t.length],s=t[(n+1)%t.length],l=t[(n+2)%t.length],c=new re.Vector3;return c.x=re.Curve.Utils.interpolate(o.x,a.x,s.x,l.x,i),c.y=re.Curve.Utils.interpolate(o.y,a.y,s.y,l.y,i),c.z=re.Curve.Utils.interpolate(o.z,a.z,s.z,l.z,i),c})),re.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(e){if(!0!==e.initialized){for(var t=0;t<e.hierarchy.length;t++){for(var r=0;r<e.hierarchy[t].keys.length;r++)if(e.hierarchy[t].keys[r].time<0&&(e.hierarchy[t].keys[r].time=0),void 0!==e.hierarchy[t].keys[r].rot&&!(e.hierarchy[t].keys[r].rot instanceof re.Quaternion)){var n=e.hierarchy[t].keys[r].rot;e.hierarchy[t].keys[r].rot=(new re.Quaternion).fromArray(n)}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){var i={};for(r=0;r<e.hierarchy[t].keys.length;r++)for(var o=0;o<e.hierarchy[t].keys[r].morphTargets.length;o++){i[s=e.hierarchy[t].keys[r].morphTargets[o]]=-1}e.hierarchy[t].usedMorphTargets=i;for(r=0;r<e.hierarchy[t].keys.length;r++){var a={};for(var s in i){for(o=0;o<e.hierarchy[t].keys[r].morphTargets.length;o++)if(e.hierarchy[t].keys[r].morphTargets[o]===s){a[s]=e.hierarchy[t].keys[r].morphTargetsInfluences[o];break}o===e.hierarchy[t].keys[r].morphTargets.length&&(a[s]=0)}e.hierarchy[t].keys[r].morphTargetsInfluences=a}}for(r=1;r<e.hierarchy[t].keys.length;r++)e.hierarchy[t].keys[r].time===e.hierarchy[t].keys[r-1].time&&(e.hierarchy[t].keys.splice(r,1),r--);for(r=0;r<e.hierarchy[t].keys.length;r++)e.hierarchy[t].keys[r].index=r}return e.initialized=!0,e}},parse:function(e){var t=function(e,r){r.push(e);for(var n=0;n<e.children.length;n++)t(e.children[n],r)},r=[];if(e instanceof re.SkinnedMesh)for(var n=0;n<e.skeleton.bones.length;n++)r.push(e.skeleton.bones[n]);else t(e,r);return r},play:function(e){-1===this.animations.indexOf(e)&&this.animations.push(e)},stop:function(e){var t=this.animations.indexOf(e);-1!==t&&this.animations.splice(t,1)},update:function(e){for(var t=0;t<this.animations.length;t++)this.animations[t].resetBlendWeights();for(t=0;t<this.animations.length;t++)this.animations[t].update(e)}},re.Animation=function(e,t){this.root=e,this.data=re.AnimationHandler.init(t),this.hierarchy=re.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=re.AnimationHandler.LINEAR},re.Animation.prototype.keyTypes=["pos","rot","scl"],re.Animation.prototype.play=function(e,t){this.currentTime=void 0!==e?e:0,this.weight=void 0!==t?t:1,this.isPlaying=!0,this.reset(),re.AnimationHandler.play(this)},re.Animation.prototype.stop=function(){this.isPlaying=!1,re.AnimationHandler.stop(this)},re.Animation.prototype.reset=function(){for(var e=0,t=this.hierarchy.length;e<t;e++){var r=this.hierarchy[e];r.matrixAutoUpdate=!0,void 0===r.animationCache&&(r.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}}),void 0===r.animationCache.animations[this.data.name]&&(r.animationCache.animations[this.data.name]={},r.animationCache.animations[this.data.name].prevKey={pos:0,rot:0,scl:0},r.animationCache.animations[this.data.name].nextKey={pos:0,rot:0,scl:0},r.animationCache.animations[this.data.name].originalMatrix=r.matrix);for(var n=r.animationCache.animations[this.data.name],i=0;i<3;i++){for(var o=this.keyTypes[i],a=this.data.hierarchy[e].keys[0],s=this.getNextKeyWith(o,e,1);s.time<this.currentTime&&s.index>a.index;)a=s,s=this.getNextKeyWith(o,e,s.index+1);n.prevKey[o]=a,n.nextKey[o]=s}}},re.Animation.prototype.resetBlendWeights=function(){for(var e=0,t=this.hierarchy.length;e<t;e++){var r=this.hierarchy[e];void 0!==r.animationCache&&(r.animationCache.blending.positionWeight=0,r.animationCache.blending.quaternionWeight=0,r.animationCache.blending.scaleWeight=0)}},re.Animation.prototype.update=function(){var e=[],t=new re.Vector3,r=new re.Vector3,n=new re.Quaternion,i=function(e,t){var r,n,i,a,s,l,c,u,h,f=[],d=[];return i=(r=(e.length-1)*t)-(n=Math.floor(r)),f[0]=0===n?n:n-1,f[1]=n,f[2]=n>e.length-2?n:n+1,f[3]=n>e.length-3?n:n+2,l=e[f[0]],c=e[f[1]],u=e[f[2]],h=e[f[3]],s=i*(a=i*i),d[0]=o(l[0],c[0],u[0],h[0],i,a,s),d[1]=o(l[1],c[1],u[1],h[1],i,a,s),d[2]=o(l[2],c[2],u[2],h[2],i,a,s),d},o=function(e,t,r,n,i,o,a){var s=.5*(r-e),l=.5*(n-t);return(2*(t-r)+s+l)*a+(-3*(t-r)-2*s-l)*o+s*i+t};return function(o){if(!1!==this.isPlaying&&(this.currentTime+=o*this.timeScale,0!==this.weight)){var a=this.data.length;if(this.currentTime>a||this.currentTime<0){if(!this.loop)return void this.stop();this.currentTime%=a,this.currentTime<0&&(this.currentTime+=a),this.reset()}for(var s=0,l=this.hierarchy.length;s<l;s++)for(var c=this.hierarchy[s],u=c.animationCache.animations[this.data.name],h=c.animationCache.blending,f=0;f<3;f++){var d=this.keyTypes[f],p=u.prevKey[d],m=u.nextKey[d];if(this.timeScale>0&&m.time<=this.currentTime||this.timeScale<0&&p.time>=this.currentTime){for(p=this.data.hierarchy[s].keys[0],m=this.getNextKeyWith(d,s,1);m.time<this.currentTime&&m.index>p.index;)p=m,m=this.getNextKeyWith(d,s,m.index+1);u.prevKey[d]=p,u.nextKey[d]=m}c.matrixAutoUpdate=!0,c.matrixWorldNeedsUpdate=!0;var g=(this.currentTime-p.time)/(m.time-p.time),v=p[d],y=m[d];if(g<0&&(g=0),g>1&&(g=1),"pos"===d){if(this.interpolationType===re.AnimationHandler.LINEAR){r.x=v[0]+(y[0]-v[0])*g,r.y=v[1]+(y[1]-v[1])*g,r.z=v[2]+(y[2]-v[2])*g;var x=this.weight/(this.weight+h.positionWeight);c.position.lerp(r,x),h.positionWeight+=this.weight}else if(this.interpolationType===re.AnimationHandler.CATMULLROM||this.interpolationType===re.AnimationHandler.CATMULLROM_FORWARD){e[0]=this.getPrevKeyWith("pos",s,p.index-1).pos,e[1]=v,e[2]=y,e[3]=this.getNextKeyWith("pos",s,m.index+1).pos;var b=i(e,g=.33*g+.33);x=this.weight/(this.weight+h.positionWeight);h.positionWeight+=this.weight;var w=c.position;if(w.x=w.x+(b[0]-w.x)*x,w.y=w.y+(b[1]-w.y)*x,w.z=w.z+(b[2]-w.z)*x,this.interpolationType===re.AnimationHandler.CATMULLROM_FORWARD){var _=i(e,1.01*g);t.set(_[0],_[1],_[2]),t.sub(w),t.y=0,t.normalize();var M=Math.atan2(t.x,t.z);c.rotation.set(0,M,0)}}}else if("rot"===d)if(re.Quaternion.slerp(v,y,n,g),0===h.quaternionWeight)c.quaternion.copy(n),h.quaternionWeight=this.weight;else{x=this.weight/(this.weight+h.quaternionWeight);re.Quaternion.slerp(c.quaternion,n,c.quaternion,x),h.quaternionWeight+=this.weight}else if("scl"===d){r.x=v[0]+(y[0]-v[0])*g,r.y=v[1]+(y[1]-v[1])*g,r.z=v[2]+(y[2]-v[2])*g;x=this.weight/(this.weight+h.scaleWeight);c.scale.lerp(r,x),h.scaleWeight+=this.weight}}return!0}}}(),re.Animation.prototype.getNextKeyWith=function(e,t,r){var n=this.data.hierarchy[t].keys;for(this.interpolationType===re.AnimationHandler.CATMULLROM||this.interpolationType===re.AnimationHandler.CATMULLROM_FORWARD?r=r<n.length-1?r:n.length-1:r%=n.length;r<n.length;r++)if(void 0!==n[r][e])return n[r];return this.data.hierarchy[t].keys[0]},re.Animation.prototype.getPrevKeyWith=function(e,t,r){var n=this.data.hierarchy[t].keys;for(r=this.interpolationType===re.AnimationHandler.CATMULLROM||this.interpolationType===re.AnimationHandler.CATMULLROM_FORWARD?r>0?r:0:r>=0?r:r+n.length;r>=0;r--)if(void 0!==n[r][e])return n[r];return this.data.hierarchy[t].keys[n.length-1]},re.KeyFrameAnimation=function(e){this.root=e.node,this.data=re.AnimationHandler.init(e),this.hierarchy=re.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0;for(var t=0,r=this.hierarchy.length;t<r;t++){var n=this.data.hierarchy[t].keys,i=this.data.hierarchy[t].sids,o=this.hierarchy[t];if(n.length&&i){for(var a=0;a<i.length;a++){var s=i[a],l=this.getNextKeyWith(s,t,0);l&&l.apply(s)}o.matrixAutoUpdate=!1,this.data.hierarchy[t].node.updateMatrix(),o.matrixWorldNeedsUpdate=!0}}},re.KeyFrameAnimation.prototype.play=function(e){if(this.currentTime=void 0!==e?e:0,!1===this.isPlaying){this.isPlaying=!0;var t,r,n,i=this.hierarchy.length;for(t=0;t<i;t++){r=this.hierarchy[t],void 0===(n=this.data.hierarchy[t]).animationCache&&(n.animationCache={},n.animationCache.prevKey=null,n.animationCache.nextKey=null,n.animationCache.originalMatrix=r.matrix);var o=this.data.hierarchy[t].keys;o.length&&(n.animationCache.prevKey=o[0],n.animationCache.nextKey=o[1],this.startTime=Math.min(o[0].time,this.startTime),this.endTime=Math.max(o[o.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,re.AnimationHandler.play(this)},re.KeyFrameAnimation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,re.AnimationHandler.stop(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],r=this.data.hierarchy[e];if(void 0!==r.animationCache){var n=r.animationCache.originalMatrix;n.copy(t.matrix),t.matrix=n,delete r.animationCache}}},re.KeyFrameAnimation.prototype.update=function(e){if(!1!==this.isPlaying){this.currentTime+=e*this.timeScale;var t=this.data.length;!0===this.loop&&this.currentTime>t&&(this.currentTime%=t),this.currentTime=Math.min(this.currentTime,t);for(var r=0,n=this.hierarchy.length;r<n;r++){var i=this.hierarchy[r],o=this.data.hierarchy[r],a=o.keys,s=o.animationCache;if(a.length){var l=s.prevKey,c=s.nextKey;if(c.time<=this.currentTime){for(;c.time<this.currentTime&&c.index>l.index;)c=a[(l=c).index+1];s.prevKey=l,s.nextKey=c}c.time>=this.currentTime?l.interpolate(c,this.currentTime):l.interpolate(c,c.time),this.data.hierarchy[r].node.updateMatrix(),i.matrixWorldNeedsUpdate=!0}}}},re.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,r){var n=this.data.hierarchy[t].keys;for(r%=n.length;r<n.length;r++)if(n[r].hasTarget(e))return n[r];return n[0]},re.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,r){var n=this.data.hierarchy[t].keys;for(r=r>=0?r:r+n.length;r>=0;r--)if(n[r].hasTarget(e))return n[r];return n[n.length-1]},re.MorphAnimation=function(e){this.mesh=e,this.frames=e.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.isPlaying=!1},re.MorphAnimation.prototype={play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:(J=0,Z=0,function(e){if(!1!==this.isPlaying){this.currentTime+=e,!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration);var t=this.duration/this.frames,r=Math.floor(this.currentTime/t);r!=Z&&(this.mesh.morphTargetInfluences[J]=0,this.mesh.morphTargetInfluences[Z]=1,this.mesh.morphTargetInfluences[r]=0,J=Z,Z=r),this.mesh.morphTargetInfluences[r]=this.currentTime%t/t,this.mesh.morphTargetInfluences[J]=1-this.mesh.morphTargetInfluences[r]}})},re.BoxGeometry=function(e,t,r,n,i,o){re.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:o},this.widthSegments=n||1,this.heightSegments=i||1,this.depthSegments=o||1;var a=this,s=e/2,l=t/2,c=r/2;function u(e,t,r,n,i,o,s,l){var c,u,h,f=a.widthSegments,d=a.heightSegments,p=i/2,m=o/2,g=a.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?c="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(c="y",d=a.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(c="x",f=a.depthSegments);var v=f+1,y=d+1,x=i/f,b=o/d,w=new re.Vector3;for(w[c]=s>0?1:-1,h=0;h<y;h++)for(u=0;u<v;u++){var _=new re.Vector3;_[e]=(u*x-p)*r,_[t]=(h*b-m)*n,_[c]=s,a.vertices.push(_)}for(h=0;h<d;h++)for(u=0;u<f;u++){var M=u+v*h,S=u+v*(h+1),A=u+1+v*(h+1),C=u+1+v*h,T=new re.Vector2(u/f,1-h/d),E=new re.Vector2(u/f,1-(h+1)/d),k=new re.Vector2((u+1)/f,1-(h+1)/d),P=new re.Vector2((u+1)/f,1-h/d),L=new re.Face3(M+g,S+g,C+g);L.normal.copy(w),L.vertexNormals.push(w.clone(),w.clone(),w.clone()),L.materialIndex=l,a.faces.push(L),a.faceVertexUvs[0].push([T,E,P]),(L=new re.Face3(S+g,A+g,C+g)).normal.copy(w),L.vertexNormals.push(w.clone(),w.clone(),w.clone()),L.materialIndex=l,a.faces.push(L),a.faceVertexUvs[0].push([E.clone(),k,P.clone()])}}u("z","y",-1,-1,r,t,s,0),u("z","y",1,-1,r,t,-s,1),u("x","z",1,1,e,r,l,2),u("x","z",1,-1,e,r,-l,3),u("x","y",1,-1,e,t,c,4),u("x","y",-1,-1,e,t,-c,5),this.mergeVertices()},re.BoxGeometry.prototype=Object.create(re.Geometry.prototype),re.CircleGeometry=function(e,t,r,n){re.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},e=e||50,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var i,o=[],a=new re.Vector3,s=new re.Vector2(.5,.5);for(this.vertices.push(a),o.push(s),i=0;i<=t;i++){var l=new re.Vector3,c=r+i/t*n;l.x=e*Math.cos(c),l.y=e*Math.sin(c),this.vertices.push(l),o.push(new re.Vector2((l.x/e+1)/2,(l.y/e+1)/2))}var u=new re.Vector3(0,0,1);for(i=1;i<=t;i++)this.faces.push(new re.Face3(i,i+1,0,[u.clone(),u.clone(),u.clone()])),this.faceVertexUvs[0].push([o[i].clone(),o[i+1].clone(),s.clone()]);this.computeFaceNormals(),this.boundingSphere=new re.Sphere(new re.Vector3,e)},re.CircleGeometry.prototype=Object.create(re.Geometry.prototype),re.CubeGeometry=function(e,t,r,n,i,o){return console.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),new re.BoxGeometry(e,t,r,n,i,o)},re.CylinderGeometry=function(e,t,r,n,i,o){re.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:o},e=void 0!==e?e:20,t=void 0!==t?t:20,n=n||8,i=i||1,o=void 0!==o&&o;var a,s,l=(r=void 0!==r?r:100)/2,c=[],u=[];for(s=0;s<=i;s++){var h=[],f=[],d=s/i,p=d*(t-e)+e;for(a=0;a<=n;a++){var m=a/n,g=new re.Vector3;g.x=p*Math.sin(m*Math.PI*2),g.y=-d*r+l,g.z=p*Math.cos(m*Math.PI*2),this.vertices.push(g),h.push(this.vertices.length-1),f.push(new re.Vector2(m,1-d))}c.push(h),u.push(f)}var v,y,x=(t-e)/r;for(a=0;a<n;a++)for(0!==e?(v=this.vertices[c[0][a]].clone(),y=this.vertices[c[0][a+1]].clone()):(v=this.vertices[c[1][a]].clone(),y=this.vertices[c[1][a+1]].clone()),v.setY(Math.sqrt(v.x*v.x+v.z*v.z)*x).normalize(),y.setY(Math.sqrt(y.x*y.x+y.z*y.z)*x).normalize(),s=0;s<i;s++){var b=c[s][a],w=c[s+1][a],_=c[s+1][a+1],M=c[s][a+1],S=v.clone(),A=v.clone(),C=y.clone(),T=y.clone(),E=u[s][a].clone(),k=u[s+1][a].clone(),P=u[s+1][a+1].clone(),L=u[s][a+1].clone();this.faces.push(new re.Face3(b,w,M,[S,A,T])),this.faceVertexUvs[0].push([E,k,L]),this.faces.push(new re.Face3(w,_,M,[A.clone(),C,T.clone()])),this.faceVertexUvs[0].push([k.clone(),P,L.clone()])}if(!1===o&&e>0)for(this.vertices.push(new re.Vector3(0,l,0)),a=0;a<n;a++){b=c[0][a],w=c[0][a+1],_=this.vertices.length-1,S=new re.Vector3(0,1,0),A=new re.Vector3(0,1,0),C=new re.Vector3(0,1,0),E=u[0][a].clone(),k=u[0][a+1].clone(),P=new re.Vector2(k.x,0);this.faces.push(new re.Face3(b,w,_,[S,A,C])),this.faceVertexUvs[0].push([E,k,P])}if(!1===o&&t>0)for(this.vertices.push(new re.Vector3(0,-l,0)),a=0;a<n;a++){b=c[s][a+1],w=c[s][a],_=this.vertices.length-1,S=new re.Vector3(0,-1,0),A=new re.Vector3(0,-1,0),C=new re.Vector3(0,-1,0),E=u[s][a+1].clone(),k=u[s][a].clone(),P=new re.Vector2(k.x,1);this.faces.push(new re.Face3(b,w,_,[S,A,C])),this.faceVertexUvs[0].push([E,k,P])}this.computeFaceNormals()},re.CylinderGeometry.prototype=Object.create(re.Geometry.prototype),re.ExtrudeGeometry=function(e,t){void 0!==e?(re.Geometry.call(this),this.type="ExtrudeGeometry",e=e instanceof Array?e:[e],this.addShapeList(e,t),this.computeFaceNormals()):e=[]},re.ExtrudeGeometry.prototype=Object.create(re.Geometry.prototype),re.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var r=e.length,n=0;n<r;n++){var i=e[n];this.addShape(i,t)}},re.ExtrudeGeometry.prototype.addShape=function(e,t){var r,n,i,o,a,s,l,c,u=void 0!==t.amount?t.amount:100,h=void 0!==t.bevelThickness?t.bevelThickness:6,f=void 0!==t.bevelSize?t.bevelSize:h-2,d=void 0!==t.bevelSegments?t.bevelSegments:3,p=void 0===t.bevelEnabled||t.bevelEnabled,m=void 0!==t.curveSegments?t.curveSegments:12,g=void 0!==t.steps?t.steps:1,v=t.extrudePath,y=!1,x=t.material,b=t.extrudeMaterial,w=void 0!==t.UVGenerator?t.UVGenerator:re.ExtrudeGeometry.WorldUVGenerator;v&&(r=v.getSpacedPoints(g),y=!0,p=!1,n=void 0!==t.frames?t.frames:new re.TubeGeometry.FrenetFrames(v,g,!1),i=new re.Vector3,o=new re.Vector3,a=new re.Vector3),p||(d=0,h=0,f=0);var _=this,M=this.vertices.length,S=e.extractPoints(m),A=S.shape,C=S.holes,T=!re.Shape.Utils.isClockWise(A);if(T){for(A=A.reverse(),l=0,c=C.length;l<c;l++)s=C[l],re.Shape.Utils.isClockWise(s)&&(C[l]=s.reverse());T=!1}var E=re.Shape.Utils.triangulateShape(A,C),k=A;for(l=0,c=C.length;l<c;l++)s=C[l],A=A.concat(s);function P(e,t,r){return t||console.log("die"),t.clone().multiplyScalar(r).add(e)}var L,R,D,F,z,O,B=A.length,I=E.length;k.length,Math.PI;function N(e,t,r){var n,i,o=1,a=e.x-t.x,s=e.y-t.y,l=r.x-e.x,c=r.y-e.y,u=a*a+s*s,h=a*c-s*l;if(Math.abs(h)>1e-10){var f=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=t.x-s/f,m=t.y+a/f,g=((r.x-c/d-p)*c-(r.y+l/d-m)*l)/(a*c-s*l),v=(n=p+a*g-e.x)*n+(i=m+s*g-e.y)*i;if(v<=2)return new re.Vector2(n,i);o=Math.sqrt(v/2)}else{var y=!1;a>1e-10?l>1e-10&&(y=!0):a<-1e-10?l<-1e-10&&(y=!0):Math.sign(s)==Math.sign(c)&&(y=!0),y?(n=-s,i=a,o=Math.sqrt(u)):(n=a,i=s,o=Math.sqrt(u/2))}return new re.Vector2(n/o,i/o)}for(var U=[],V=0,H=k.length,G=H-1,j=V+1;V<H;V++,G++,j++){G===H&&(G=0),j===H&&(j=0);k[V],k[G],k[j];U[V]=N(k[V],k[G],k[j])}var W,Q,X=[],q=U.concat();for(l=0,c=C.length;l<c;l++){for(s=C[l],W=[],V=0,G=(H=s.length)-1,j=V+1;V<H;V++,G++,j++)G===H&&(G=0),j===H&&(j=0),W[V]=N(s[V],s[G],s[j]);X.push(W),q=q.concat(W)}for(L=0;L<d;L++){for(F=h*(1-(D=L/d)),R=f*Math.sin(D*Math.PI/2),V=0,H=k.length;V<H;V++)K((z=P(k[V],U[V],R)).x,z.y,-F);for(l=0,c=C.length;l<c;l++)for(s=C[l],W=X[l],V=0,H=s.length;V<H;V++)K((z=P(s[V],W[V],R)).x,z.y,-F)}for(R=f,V=0;V<B;V++)z=p?P(A[V],q[V],R):A[V],y?(o.copy(n.normals[0]).multiplyScalar(z.x),i.copy(n.binormals[0]).multiplyScalar(z.y),a.copy(r[0]).add(o).add(i),K(a.x,a.y,a.z)):K(z.x,z.y,0);for(Q=1;Q<=g;Q++)for(V=0;V<B;V++)z=p?P(A[V],q[V],R):A[V],y?(o.copy(n.normals[Q]).multiplyScalar(z.x),i.copy(n.binormals[Q]).multiplyScalar(z.y),a.copy(r[Q]).add(o).add(i),K(a.x,a.y,a.z)):K(z.x,z.y,u/g*Q);for(L=d-1;L>=0;L--){for(F=h*(1-(D=L/d)),R=f*Math.sin(D*Math.PI/2),V=0,H=k.length;V<H;V++)K((z=P(k[V],U[V],R)).x,z.y,u+F);for(l=0,c=C.length;l<c;l++)for(s=C[l],W=X[l],V=0,H=s.length;V<H;V++)z=P(s[V],W[V],R),y?K(z.x,z.y+r[g-1].y,r[g-1].x+F):K(z.x,z.y,u+F)}function Y(e,t){var r,n;for(V=e.length;--V>=0;){r=V,(n=V-1)<0&&(n=e.length-1);var i=0,o=g+2*d;for(i=0;i<o;i++){var a=B*i,s=B*(i+1);Z(t+r+a,t+n+a,t+n+s,t+r+s,e,i,o,r,n)}}}function K(e,t,r){_.vertices.push(new re.Vector3(e,t,r))}function J(e,t,r){e+=M,t+=M,r+=M,_.faces.push(new re.Face3(e,t,r,null,null,x));var n=w.generateTopUV(_,e,t,r);_.faceVertexUvs[0].push(n)}function Z(e,t,r,n,i,o,a,s,l){e+=M,t+=M,r+=M,n+=M,_.faces.push(new re.Face3(e,t,n,null,null,b)),_.faces.push(new re.Face3(t,r,n,null,null,b));var c=w.generateSideWallUV(_,e,t,r,n);_.faceVertexUvs[0].push([c[0],c[1],c[3]]),_.faceVertexUvs[0].push([c[1],c[2],c[3]])}!function(){if(p){var e=0,t=B*e;for(V=0;V<I;V++)J((O=E[V])[2]+t,O[1]+t,O[0]+t);for(t=B*(e=g+2*d),V=0;V<I;V++)J((O=E[V])[0]+t,O[1]+t,O[2]+t)}else{for(V=0;V<I;V++)J((O=E[V])[2],O[1],O[0]);for(V=0;V<I;V++)J((O=E[V])[0]+B*g,O[1]+B*g,O[2]+B*g)}}(),function(){var e=0;for(Y(k,e),e+=k.length,l=0,c=C.length;l<c;l++)Y(s=C[l],e),e+=s.length}()},re.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,r,n){var i=e.vertices,o=i[t],a=i[r],s=i[n];return[new re.Vector2(o.x,o.y),new re.Vector2(a.x,a.y),new re.Vector2(s.x,s.y)]},generateSideWallUV:function(e,t,r,n,i){var o=e.vertices,a=o[t],s=o[r],l=o[n],c=o[i];return Math.abs(a.y-s.y)<.01?[new re.Vector2(a.x,1-a.z),new re.Vector2(s.x,1-s.z),new re.Vector2(l.x,1-l.z),new re.Vector2(c.x,1-c.z)]:[new re.Vector2(a.y,1-a.z),new re.Vector2(s.y,1-s.z),new re.Vector2(l.y,1-l.z),new re.Vector2(c.y,1-c.z)]}},re.ShapeGeometry=function(e,t){re.Geometry.call(this),this.type="ShapeGeometry",e instanceof Array==!1&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},re.ShapeGeometry.prototype=Object.create(re.Geometry.prototype),re.ShapeGeometry.prototype.addShapeList=function(e,t){for(var r=0,n=e.length;r<n;r++)this.addShape(e[r],t);return this},re.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var r,n,i,o=void 0!==t.curveSegments?t.curveSegments:12,a=t.material,s=void 0===t.UVGenerator?re.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,l=this.vertices.length,c=e.extractPoints(o),u=c.shape,h=c.holes,f=!re.Shape.Utils.isClockWise(u);if(f){for(u=u.reverse(),r=0,n=h.length;r<n;r++)i=h[r],re.Shape.Utils.isClockWise(i)&&(h[r]=i.reverse());f=!1}var d=re.Shape.Utils.triangulateShape(u,h),p=u;for(r=0,n=h.length;r<n;r++)i=h[r],u=u.concat(i);var m,g,v=u.length,y=d.length;p.length;for(r=0;r<v;r++)m=u[r],this.vertices.push(new re.Vector3(m.x,m.y,0));for(r=0;r<y;r++){var x=(g=d[r])[0]+l,b=g[1]+l,w=g[2]+l;this.faces.push(new re.Face3(x,b,w,null,null,a)),this.faceVertexUvs[0].push(s.generateTopUV(this,x,b,w))}},re.LatheGeometry=function(e,t,r,n){re.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},t=t||12,r=r||0,n=n||2*Math.PI;for(var i=1/(e.length-1),o=1/t,a=0,s=t;a<=s;a++)for(var l=r+a*o*n,c=Math.cos(l),u=Math.sin(l),h=0,f=e.length;h<f;h++){var d=e[h],p=new re.Vector3;p.x=c*d.x-u*d.y,p.y=u*d.x+c*d.y,p.z=d.z,this.vertices.push(p)}var m=e.length;for(a=0,s=t;a<s;a++)for(h=0,f=e.length-1;h<f;h++){var g=h+m*a,v=g,y=g+m,x=(c=g+1+m,g+1),b=a*o,w=h*i,_=b+o,M=w+i;this.faces.push(new re.Face3(v,y,x)),this.faceVertexUvs[0].push([new re.Vector2(b,w),new re.Vector2(_,w),new re.Vector2(b,M)]),this.faces.push(new re.Face3(y,c,x)),this.faceVertexUvs[0].push([new re.Vector2(_,w),new re.Vector2(_,M),new re.Vector2(b,M)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},re.LatheGeometry.prototype=Object.create(re.Geometry.prototype),re.PlaneGeometry=function(e,t,r,n){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),re.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new re.PlaneBufferGeometry(e,t,r,n))},re.PlaneGeometry.prototype=Object.create(re.Geometry.prototype),re.PlaneBufferGeometry=function(e,t,r,n){re.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};for(var i=e/2,o=t/2,a=r||1,s=n||1,l=a+1,c=s+1,u=e/a,h=t/s,f=new Float32Array(l*c*3),d=new Float32Array(l*c*3),p=new Float32Array(l*c*2),m=0,g=0,v=0;v<c;v++)for(var y=v*h-o,x=0;x<l;x++){var b=x*u-i;f[m]=b,f[m+1]=-y,d[m+2]=1,p[g]=x/a,p[g+1]=1-v/s,m+=3,g+=2}m=0;var w=new(f.length/3>65535?Uint32Array:Uint16Array)(a*s*6);for(v=0;v<s;v++)for(x=0;x<a;x++){var _=x+l*v,M=x+l*(v+1),S=x+1+l*(v+1),A=x+1+l*v;w[m]=_,w[m+1]=M,w[m+2]=A,w[m+3]=M,w[m+4]=S,w[m+5]=A,m+=6}this.addAttribute("index",new re.BufferAttribute(w,1)),this.addAttribute("position",new re.BufferAttribute(f,3)),this.addAttribute("normal",new re.BufferAttribute(d,3)),this.addAttribute("uv",new re.BufferAttribute(p,2))},re.PlaneBufferGeometry.prototype=Object.create(re.BufferGeometry.prototype),re.RingGeometry=function(e,t,r,n,i,o){re.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o},e=e||0,t=t||50,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,r=void 0!==r?Math.max(3,r):8;var a,s,l=[],c=e,u=(t-e)/(n=void 0!==n?Math.max(1,n):8);for(a=0;a<n+1;a++){for(s=0;s<r+1;s++){var h=new re.Vector3,f=i+s/r*o;h.x=c*Math.cos(f),h.y=c*Math.sin(f),this.vertices.push(h),l.push(new re.Vector2((h.x/t+1)/2,(h.y/t+1)/2))}c+=u}var d=new re.Vector3(0,0,1);for(a=0;a<n;a++){var p=a*(r+1);for(s=0;s<r;s++){var m=f=s+p,g=f+r+1,v=f+r+2;this.faces.push(new re.Face3(m,g,v,[d.clone(),d.clone(),d.clone()])),this.faceVertexUvs[0].push([l[m].clone(),l[g].clone(),l[v].clone()]),m=f,g=f+r+2,v=f+1,this.faces.push(new re.Face3(m,g,v,[d.clone(),d.clone(),d.clone()])),this.faceVertexUvs[0].push([l[m].clone(),l[g].clone(),l[v].clone()])}}this.computeFaceNormals(),this.boundingSphere=new re.Sphere(new re.Vector3,c)},re.RingGeometry.prototype=Object.create(re.Geometry.prototype),re.SphereGeometry=function(e,t,r,n,i,o,a){re.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a},e=e||50,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,l,c=[],u=[];for(l=0;l<=r;l++){var h=[],f=[];for(s=0;s<=t;s++){var d=s/t,p=l/r,m=new re.Vector3;m.x=-e*Math.cos(n+d*i)*Math.sin(o+p*a),m.y=e*Math.cos(o+p*a),m.z=e*Math.sin(n+d*i)*Math.sin(o+p*a),this.vertices.push(m),h.push(this.vertices.length-1),f.push(new re.Vector2(d,1-p))}c.push(h),u.push(f)}for(l=0;l<r;l++)for(s=0;s<t;s++){var g=c[l][s+1],v=c[l][s],y=c[l+1][s],x=c[l+1][s+1],b=this.vertices[g].clone().normalize(),w=this.vertices[v].clone().normalize(),_=this.vertices[y].clone().normalize(),M=this.vertices[x].clone().normalize(),S=u[l][s+1].clone(),A=u[l][s].clone(),C=u[l+1][s].clone(),T=u[l+1][s+1].clone();Math.abs(this.vertices[g].y)===e?(S.x=(S.x+A.x)/2,this.faces.push(new re.Face3(g,y,x,[b,_,M])),this.faceVertexUvs[0].push([S,C,T])):Math.abs(this.vertices[y].y)===e?(C.x=(C.x+T.x)/2,this.faces.push(new re.Face3(g,v,y,[b,w,_])),this.faceVertexUvs[0].push([S,A,C])):(this.faces.push(new re.Face3(g,v,x,[b,w,M])),this.faceVertexUvs[0].push([S,A,T]),this.faces.push(new re.Face3(v,y,x,[w.clone(),_,M.clone()])),this.faceVertexUvs[0].push([A.clone(),C,T.clone()]))}this.computeFaceNormals(),this.boundingSphere=new re.Sphere(new re.Vector3,e)},re.SphereGeometry.prototype=Object.create(re.Geometry.prototype),re.TextGeometry=function(e,t){t=t||{};var r=re.FontUtils.generateShapes(e,t);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),re.ExtrudeGeometry.call(this,r,t),this.type="TextGeometry"},re.TextGeometry.prototype=Object.create(re.ExtrudeGeometry.prototype),re.TorusGeometry=function(e,t,r,n,i){re.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},e=e||100,t=t||40,r=r||8,n=n||6,i=i||2*Math.PI;for(var o=new re.Vector3,a=[],s=[],l=0;l<=r;l++)for(var c=0;c<=n;c++){var u=c/n*i,h=l/r*Math.PI*2;o.x=e*Math.cos(u),o.y=e*Math.sin(u);var f=new re.Vector3;f.x=(e+t*Math.cos(h))*Math.cos(u),f.y=(e+t*Math.cos(h))*Math.sin(u),f.z=t*Math.sin(h),this.vertices.push(f),a.push(new re.Vector2(c/n,l/r)),s.push(f.clone().sub(o).normalize())}for(l=1;l<=r;l++)for(c=1;c<=n;c++){var d=(n+1)*l+c-1,p=(n+1)*(l-1)+c-1,m=(n+1)*(l-1)+c,g=(n+1)*l+c,v=new re.Face3(d,p,g,[s[d].clone(),s[p].clone(),s[g].clone()]);this.faces.push(v),this.faceVertexUvs[0].push([a[d].clone(),a[p].clone(),a[g].clone()]),v=new re.Face3(p,m,g,[s[p].clone(),s[m].clone(),s[g].clone()]),this.faces.push(v),this.faceVertexUvs[0].push([a[p].clone(),a[m].clone(),a[g].clone()])}this.computeFaceNormals()},re.TorusGeometry.prototype=Object.create(re.Geometry.prototype),re.TorusKnotGeometry=function(e,t,r,n,i,o,a){re.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,p:i,q:o,heightScale:a},e=e||100,t=t||40,r=r||64,n=n||8,i=i||2,o=o||3,a=a||1;for(var s=new Array(r),l=new re.Vector3,c=new re.Vector3,u=new re.Vector3,h=0;h<r;++h){s[h]=new Array(n);var f=h/r*2*i*Math.PI,d=P(f,o,i,e,a),p=P(f+.01,o,i,e,a);l.subVectors(p,d),c.addVectors(p,d),u.crossVectors(l,c),c.crossVectors(u,l),u.normalize(),c.normalize();for(var m=0;m<n;++m){var g=m/n*2*Math.PI,v=-t*Math.cos(g),y=t*Math.sin(g),x=new re.Vector3;x.x=d.x+v*c.x+y*u.x,x.y=d.y+v*c.y+y*u.y,x.z=d.z+v*c.z+y*u.z,s[h][m]=this.vertices.push(x)-1}}for(h=0;h<r;++h)for(m=0;m<n;++m){var b=(h+1)%r,w=(m+1)%n,_=s[h][m],M=s[b][m],S=s[b][w],A=s[h][w],C=new re.Vector2(h/r,m/n),T=new re.Vector2((h+1)/r,m/n),E=new re.Vector2((h+1)/r,(m+1)/n),k=new re.Vector2(h/r,(m+1)/n);this.faces.push(new re.Face3(_,M,A)),this.faceVertexUvs[0].push([C,T,k]),this.faces.push(new re.Face3(M,S,A)),this.faceVertexUvs[0].push([T.clone(),E,k.clone()])}function P(e,t,r,n,i){var o=Math.cos(e),a=Math.sin(e),s=t/r*e,l=Math.cos(s),c=n*(2+l)*.5*o,u=n*(2+l)*a*.5,h=i*n*Math.sin(s)*.5;return new re.Vector3(c,u,h)}this.computeFaceNormals(),this.computeVertexNormals()},re.TorusKnotGeometry.prototype=Object.create(re.Geometry.prototype),re.TubeGeometry=function(e,t,r,n,i){re.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,segments:t,radius:r,radialSegments:n,closed:i},r=r||1,n=n||8,i=i||!1;var o,a,s,l,c,u,h,f,d,p,m,g,v,y,x,b,w,_,M,S=[],A=this,C=(t=t||64)+1,T=new re.Vector3,E=new re.TubeGeometry.FrenetFrames(e,t,i),k=E.tangents,P=E.normals,L=E.binormals;function R(e,t,r){return A.vertices.push(new re.Vector3(e,t,r))-1}for(this.tangents=k,this.normals=P,this.binormals=L,f=0;f<C;f++)for(S[f]=[],s=f/(C-1),h=e.getPointAt(s),k[f],o=P[f],a=L[f],d=0;d<n;d++)l=d/n*2*Math.PI,c=-r*Math.cos(l),u=r*Math.sin(l),T.copy(h),T.x+=c*o.x+u*a.x,T.y+=c*o.y+u*a.y,T.z+=c*o.z+u*a.z,S[f][d]=R(T.x,T.y,T.z);for(f=0;f<t;f++)for(d=0;d<n;d++)p=i?(f+1)%t:f+1,m=(d+1)%n,g=S[f][d],v=S[p][d],y=S[p][m],x=S[f][m],b=new re.Vector2(f/t,d/n),w=new re.Vector2((f+1)/t,d/n),_=new re.Vector2((f+1)/t,(d+1)/n),M=new re.Vector2(f/t,(d+1)/n),this.faces.push(new re.Face3(g,v,x)),this.faceVertexUvs[0].push([b,w,M]),this.faces.push(new re.Face3(v,y,x)),this.faceVertexUvs[0].push([w.clone(),_,M.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},re.TubeGeometry.prototype=Object.create(re.Geometry.prototype),re.TubeGeometry.FrenetFrames=function(e,t,r){new re.Vector3;var n,i,o,a,s,l,c,u=new re.Vector3,h=(new re.Vector3,[]),f=[],d=[],p=new re.Vector3,m=new re.Matrix4,g=t+1;for(this.tangents=h,this.normals=f,this.binormals=d,l=0;l<g;l++)c=l/(g-1),h[l]=e.getTangentAt(c),h[l].normalize();for(function(){f[0]=new re.Vector3,d[0]=new re.Vector3,i=Number.MAX_VALUE,o=Math.abs(h[0].x),a=Math.abs(h[0].y),s=Math.abs(h[0].z),o<=i&&(i=o,u.set(1,0,0));a<=i&&(i=a,u.set(0,1,0));s<=i&&u.set(0,0,1);p.crossVectors(h[0],u).normalize(),f[0].crossVectors(h[0],p),d[0].crossVectors(h[0],f[0])}(),l=1;l<g;l++)f[l]=f[l-1].clone(),d[l]=d[l-1].clone(),p.crossVectors(h[l-1],h[l]),p.length()>1e-4&&(p.normalize(),n=Math.acos(re.Math.clamp(h[l-1].dot(h[l]),-1,1)),f[l].applyMatrix4(m.makeRotationAxis(p,n))),d[l].crossVectors(h[l],f[l]);if(r)for(n=Math.acos(re.Math.clamp(f[0].dot(f[g-1]),-1,1)),n/=g-1,h[0].dot(p.crossVectors(f[0],f[g-1]))>0&&(n=-n),l=1;l<g;l++)f[l].applyMatrix4(m.makeRotationAxis(h[l],n*l)),d[l].crossVectors(h[l],f[l])},re.PolyhedronGeometry=function(e,t,r,n){re.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},r=r||1,n=n||0;for(var i=this,o=0,a=e.length;o<a;o+=3)b(new re.Vector3(e[o],e[o+1],e[o+2]));var s=this.vertices,l=[],c=(o=0,0);for(a=t.length;o<a;o+=3,c++){var u=s[t[o]],h=s[t[o+1]],f=s[t[o+2]];l[c]=new re.Face3(u.index,h.index,f.index,[u.clone(),h.clone(),f.clone()])}var d=new re.Vector3;for(o=0,a=l.length;o<a;o++)_(l[o],n);for(o=0,a=this.faceVertexUvs[0].length;o<a;o++){var p=this.faceVertexUvs[0][o],m=p[0].x,g=p[1].x,v=p[2].x,y=Math.max(m,Math.max(g,v)),x=Math.min(m,Math.min(g,v));y>.9&&x<.1&&(m<.2&&(p[0].x+=1),g<.2&&(p[1].x+=1),v<.2&&(p[2].x+=1))}for(o=0,a=this.vertices.length;o<a;o++)this.vertices[o].multiplyScalar(r);function b(e){var t=e.normalize().clone();t.index=i.vertices.push(t)-1;var r=M(e)/2/Math.PI+.5,n=function(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}(e)/Math.PI+.5;return t.uv=new re.Vector2(r,1-n),t}function w(e,t,r){var n=new re.Face3(e.index,t.index,r.index,[e.clone(),t.clone(),r.clone()]);i.faces.push(n),d.copy(e).add(t).add(r).divideScalar(3);var o=M(d);i.faceVertexUvs[0].push([S(e.uv,e,o),S(t.uv,t,o),S(r.uv,r,o)])}function _(e,t){for(var r=Math.pow(2,t),n=(Math.pow(4,t),b(i.vertices[e.a])),o=b(i.vertices[e.b]),a=b(i.vertices[e.c]),s=[],l=0;l<=r;l++){s[l]=[];for(var c=b(n.clone().lerp(a,l/r)),u=b(o.clone().lerp(a,l/r)),h=r-l,f=0;f<=h;f++)s[l][f]=0==f&&l==r?c:b(c.clone().lerp(u,f/h))}for(l=0;l<r;l++)for(f=0;f<2*(r-l)-1;f++){var d=Math.floor(f/2);f%2==0?w(s[l][d+1],s[l+1][d],s[l][d]):w(s[l][d+1],s[l+1][d+1],s[l+1][d])}}function M(e){return Math.atan2(e.z,-e.x)}function S(e,t,r){return r<0&&1===e.x&&(e=new re.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new re.Vector2(r/2/Math.PI+.5,e.y)),e.clone()}this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new re.Sphere(new re.Vector3,r)},re.PolyhedronGeometry.prototype=Object.create(re.Geometry.prototype),re.DodecahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n];re.PolyhedronGeometry.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t)},re.DodecahedronGeometry.prototype=Object.create(re.Geometry.prototype),re.IcosahedronGeometry=function(e,t){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1];re.PolyhedronGeometry.call(this,n,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}},re.IcosahedronGeometry.prototype=Object.create(re.Geometry.prototype),re.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};re.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},re.OctahedronGeometry.prototype=Object.create(re.Geometry.prototype),re.TetrahedronGeometry=function(e,t){re.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}},re.TetrahedronGeometry.prototype=Object.create(re.Geometry.prototype),re.ParametricGeometry=function(e,t,r){re.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r};var n,i,o,a,s,l,c,u,h,f,d,p,m=this.vertices,g=this.faces,v=this.faceVertexUvs[0],y=t+1;for(n=0;n<=r;n++)for(a=n/r,i=0;i<=t;i++)o=e(i/t,a),m.push(o);for(n=0;n<r;n++)for(i=0;i<t;i++)s=n*y+i,l=n*y+i+1,c=(n+1)*y+i+1,u=(n+1)*y+i,h=new re.Vector2(i/t,n/r),f=new re.Vector2((i+1)/t,n/r),d=new re.Vector2((i+1)/t,(n+1)/r),p=new re.Vector2(i/t,(n+1)/r),g.push(new re.Face3(s,l,u)),v.push([h,f,p]),g.push(new re.Face3(l,c,u)),v.push([f.clone(),d,p.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},re.ParametricGeometry.prototype=Object.create(re.Geometry.prototype),re.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),r=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),n=new re.BufferGeometry;n.addAttribute("position",new re.BufferAttribute(t,3)),n.addAttribute("color",new re.BufferAttribute(r,3));var i=new re.LineBasicMaterial({vertexColors:re.VertexColors});re.Line.call(this,n,i,re.LinePieces)},re.AxisHelper.prototype=Object.create(re.Line.prototype),re.ArrowHelper=function(){var e=new re.Geometry;e.vertices.push(new re.Vector3(0,0,0),new re.Vector3(0,1,0));var t=new re.CylinderGeometry(0,.5,1,5,1);return t.applyMatrix((new re.Matrix4).makeTranslation(0,-.5,0)),function(r,n,i,o,a,s){re.Object3D.call(this),void 0===o&&(o=16776960),void 0===i&&(i=1),void 0===a&&(a=.2*i),void 0===s&&(s=.2*a),this.position.copy(n),this.line=new re.Line(e,new re.LineBasicMaterial({color:o})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new re.Mesh(t,new re.MeshBasicMaterial({color:o})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(r),this.setLength(i,a,s)}}(),re.ArrowHelper.prototype=Object.create(re.Object3D.prototype),re.ArrowHelper.prototype.setDirection=(ee=new re.Vector3,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(ee.set(e.z,0,-e.x).normalize(),$=Math.acos(e.y),this.quaternion.setFromAxisAngle(ee,$))}),re.ArrowHelper.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,e,1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},re.ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},re.BoxHelper=function(e){var t=new re.BufferGeometry;t.addAttribute("position",new re.BufferAttribute(new Float32Array(72),3)),re.Line.call(this,t,new re.LineBasicMaterial({color:16776960}),re.LinePieces),void 0!==e&&this.update(e)},re.BoxHelper.prototype=Object.create(re.Line.prototype),re.BoxHelper.prototype.update=function(e){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox();var r=t.boundingBox.min,n=t.boundingBox.max,i=this.geometry.attributes.position.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=r.x,i[4]=n.y,i[5]=n.z,i[6]=r.x,i[7]=n.y,i[8]=n.z,i[9]=r.x,i[10]=r.y,i[11]=n.z,i[12]=r.x,i[13]=r.y,i[14]=n.z,i[15]=n.x,i[16]=r.y,i[17]=n.z,i[18]=n.x,i[19]=r.y,i[20]=n.z,i[21]=n.x,i[22]=n.y,i[23]=n.z,i[24]=n.x,i[25]=n.y,i[26]=r.z,i[27]=r.x,i[28]=n.y,i[29]=r.z,i[30]=r.x,i[31]=n.y,i[32]=r.z,i[33]=r.x,i[34]=r.y,i[35]=r.z,i[36]=r.x,i[37]=r.y,i[38]=r.z,i[39]=n.x,i[40]=r.y,i[41]=r.z,i[42]=n.x,i[43]=r.y,i[44]=r.z,i[45]=n.x,i[46]=n.y,i[47]=r.z,i[48]=n.x,i[49]=n.y,i[50]=n.z,i[51]=n.x,i[52]=n.y,i[53]=r.z,i[54]=r.x,i[55]=n.y,i[56]=n.z,i[57]=r.x,i[58]=n.y,i[59]=r.z,i[60]=r.x,i[61]=r.y,i[62]=n.z,i[63]=r.x,i[64]=r.y,i[65]=r.z,i[66]=n.x,i[67]=r.y,i[68]=n.z,i[69]=n.x,i[70]=r.y,i[71]=r.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},re.BoundingBoxHelper=function(e,t){var r=void 0!==t?t:8947848;this.object=e,this.box=new re.Box3,re.Mesh.call(this,new re.BoxGeometry(1,1,1),new re.MeshBasicMaterial({color:r,wireframe:!0}))},re.BoundingBoxHelper.prototype=Object.create(re.Mesh.prototype),re.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},re.CameraHelper=function(e){var t=new re.Geometry,r=new re.LineBasicMaterial({color:16777215,vertexColors:re.FaceColors}),n={};function i(e,t,r){o(e,r),o(t,r)}function o(e,r){t.vertices.push(new re.Vector3),t.colors.push(new re.Color(r)),void 0===n[e]&&(n[e]=[]),n[e].push(t.vertices.length-1)}i("n1","n2",16755200),i("n2","n4",16755200),i("n4","n3",16755200),i("n3","n1",16755200),i("f1","f2",16755200),i("f2","f4",16755200),i("f4","f3",16755200),i("f3","f1",16755200),i("n1","f1",16755200),i("n2","f2",16755200),i("n3","f3",16755200),i("n4","f4",16755200),i("p","n1",16711680),i("p","n2",16711680),i("p","n3",16711680),i("p","n4",16711680),i("u1","u2",43775),i("u2","u3",43775),i("u3","u1",43775),i("c","t",16777215),i("p","c",3355443),i("cn1","cn2",3355443),i("cn3","cn4",3355443),i("cf1","cf2",3355443),i("cf3","cf4",3355443),re.Line.call(this,t,r,re.LinePieces),this.camera=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=n,this.update()},re.CameraHelper.prototype=Object.create(re.Line.prototype),re.CameraHelper.prototype.update=function(){var e,t,r=new re.Vector3,n=new re.Camera,i=function(i,o,a,s){r.set(o,a,s).unproject(n);var l=t[i];if(void 0!==l)for(var c=0,u=l.length;c<u;c++)e.vertices[l[c]].copy(r)};return function(){e=this.geometry,t=this.pointMap;n.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.verticesNeedUpdate=!0}}(),re.DirectionalLightHelper=function(e,t){re.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var r=new re.Geometry;r.vertices.push(new re.Vector3(-t,t,0),new re.Vector3(t,t,0),new re.Vector3(t,-t,0),new re.Vector3(-t,-t,0),new re.Vector3(-t,t,0));var n=new re.LineBasicMaterial({fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new re.Line(r,n),this.add(this.lightPlane),(r=new re.Geometry).vertices.push(new re.Vector3,new re.Vector3),(n=new re.LineBasicMaterial({fog:!1})).color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new re.Line(r,n),this.add(this.targetLine),this.update()},re.DirectionalLightHelper.prototype=Object.create(re.Object3D.prototype),re.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},re.DirectionalLightHelper.prototype.update=function(){var e=new re.Vector3,t=new re.Vector3,r=new re.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e),this.lightPlane.lookAt(r),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(r),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),re.EdgesHelper=function(e,t){var r=void 0!==t?t:16777215,n=[0,0],i={},o=function(e,t){return e-t},a=["a","b","c"],s=new re.BufferGeometry,l=e.geometry.clone();l.mergeVertices(),l.computeFaceNormals();for(var c=l.vertices,u=l.faces,h=0,f=0,d=u.length;f<d;f++)for(var p=u[f],m=0;m<3;m++){n[0]=p[a[m]],n[1]=p[a[(m+1)%3]],n.sort(o),void 0===i[y=n.toString()]?(i[y]={vert1:n[0],vert2:n[1],face1:f,face2:void 0},h++):i[y].face2=f}var g=new Float32Array(2*h*3),v=0;for(var y in i){var x=i[y];if(void 0===x.face2||u[x.face1].normal.dot(u[x.face2].normal)<.9999){var b=c[x.vert1];g[v++]=b.x,g[v++]=b.y,g[v++]=b.z,b=c[x.vert2],g[v++]=b.x,g[v++]=b.y,g[v++]=b.z}}s.addAttribute("position",new re.BufferAttribute(g,3)),re.Line.call(this,s,new re.LineBasicMaterial({color:r}),re.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},re.EdgesHelper.prototype=Object.create(re.Line.prototype),re.FaceNormalsHelper=function(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;for(var i=void 0!==r?r:16776960,o=void 0!==n?n:1,a=new re.Geometry,s=0,l=this.object.geometry.faces.length;s<l;s++)a.vertices.push(new re.Vector3,new re.Vector3);re.Line.call(this,a,new re.LineBasicMaterial({color:i,linewidth:o}),re.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new re.Matrix3,this.update()},re.FaceNormalsHelper.prototype=Object.create(re.Line.prototype),re.FaceNormalsHelper.prototype.update=function(){var e=this.geometry.vertices,t=this.object,r=t.geometry.vertices,n=t.geometry.faces,i=t.matrixWorld;t.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(i);for(var o=0,a=0,s=n.length;o<s;o++,a+=2){var l=n[o];e[a].copy(r[l.a]).add(r[l.b]).add(r[l.c]).divideScalar(3).applyMatrix4(i),e[a+1].copy(l.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[a])}return this.geometry.verticesNeedUpdate=!0,this},re.GridHelper=function(e,t){var r=new re.Geometry,n=new re.LineBasicMaterial({vertexColors:re.VertexColors});this.color1=new re.Color(4473924),this.color2=new re.Color(8947848);for(var i=-e;i<=e;i+=t){r.vertices.push(new re.Vector3(-e,0,i),new re.Vector3(e,0,i),new re.Vector3(i,0,-e),new re.Vector3(i,0,e));var o=0===i?this.color1:this.color2;r.colors.push(o,o,o,o)}re.Line.call(this,r,n,re.LinePieces)},re.GridHelper.prototype=Object.create(re.Line.prototype),re.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},re.HemisphereLightHelper=function(e,t,r,n){re.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new re.Color,new re.Color];var i=new re.SphereGeometry(t,4,2);i.applyMatrix((new re.Matrix4).makeRotationX(-Math.PI/2));for(var o=0;o<8;o++)i.faces[o].color=this.colors[o<4?0:1];var a=new re.MeshBasicMaterial({vertexColors:re.FaceColors,wireframe:!0});this.lightSphere=new re.Mesh(i,a),this.add(this.lightSphere),this.update()},re.HemisphereLightHelper.prototype=Object.create(re.Object3D.prototype),re.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},re.HemisphereLightHelper.prototype.update=function(){var e=new re.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),re.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var r=new re.SphereGeometry(t,4,2),n=new re.MeshBasicMaterial({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),re.Mesh.call(this,r,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},re.PointLightHelper.prototype=Object.create(re.Mesh.prototype),re.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},re.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},re.SkeletonHelper=function(e){this.bones=this.getBoneList(e);for(var t=new re.Geometry,r=0;r<this.bones.length;r++){this.bones[r].parent instanceof re.Bone&&(t.vertices.push(new re.Vector3),t.vertices.push(new re.Vector3),t.colors.push(new re.Color(0,0,1)),t.colors.push(new re.Color(0,1,0)))}var n=new re.LineBasicMaterial({vertexColors:re.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});re.Line.call(this,t,n,re.LinePieces),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},re.SkeletonHelper.prototype=Object.create(re.Line.prototype),re.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof re.Bone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,this.getBoneList(e.children[r]));return t},re.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new re.Matrix4).getInverse(this.root.matrixWorld),r=new re.Matrix4,n=0,i=0;i<this.bones.length;i++){var o=this.bones[i];o.parent instanceof re.Bone&&(r.multiplyMatrices(t,o.matrixWorld),e.vertices[n].setFromMatrixPosition(r),r.multiplyMatrices(t,o.parent.matrixWorld),e.vertices[n+1].setFromMatrixPosition(r),n+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},re.SpotLightHelper=function(e){re.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new re.CylinderGeometry(0,1,1,8,1,!0);t.applyMatrix((new re.Matrix4).makeTranslation(0,-.5,0)),t.applyMatrix((new re.Matrix4).makeRotationX(-Math.PI/2));var r=new re.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new re.Mesh(t,r),this.add(this.cone),this.update()},re.SpotLightHelper.prototype=Object.create(re.Object3D.prototype),re.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},re.SpotLightHelper.prototype.update=function(){var e=new re.Vector3,t=new re.Vector3;return function(){var r=this.light.distance?this.light.distance:1e4,n=r*Math.tan(this.light.angle);this.cone.scale.set(n,n,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),re.VertexNormalsHelper=function(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;for(var i=void 0!==r?r:16711680,o=void 0!==n?n:1,a=new re.Geometry,s=(e.geometry.vertices,e.geometry.faces),l=0,c=s.length;l<c;l++)for(var u=0,h=s[l].vertexNormals.length;u<h;u++)a.vertices.push(new re.Vector3,new re.Vector3);re.Line.call(this,a,new re.LineBasicMaterial({color:i,linewidth:o}),re.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new re.Matrix3,this.update()},re.VertexNormalsHelper.prototype=Object.create(re.Line.prototype),re.VertexNormalsHelper.prototype.update=function(e){var t=new re.Vector3;return function(e){var r=["a","b","c","d"];this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var n=this.geometry.vertices,i=this.object.geometry.vertices,o=this.object.geometry.faces,a=this.object.matrixWorld,s=0,l=0,c=o.length;l<c;l++)for(var u=o[l],h=0,f=u.vertexNormals.length;h<f;h++){var d=i[u[r[h]]],p=u.vertexNormals[h];n[s].copy(d).applyMatrix4(a),t.copy(p).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),t.add(n[s]),n[s+=1].copy(t),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),re.VertexTangentsHelper=function(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;for(var i=void 0!==r?r:255,o=void 0!==n?n:1,a=new re.Geometry,s=(e.geometry.vertices,e.geometry.faces),l=0,c=s.length;l<c;l++)for(var u=0,h=s[l].vertexTangents.length;u<h;u++)a.vertices.push(new re.Vector3),a.vertices.push(new re.Vector3);re.Line.call(this,a,new re.LineBasicMaterial({color:i,linewidth:o}),re.LinePieces),this.matrixAutoUpdate=!1,this.update()},re.VertexTangentsHelper.prototype=Object.create(re.Line.prototype),re.VertexTangentsHelper.prototype.update=function(e){var t=new re.Vector3;return function(e){var r=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var n=this.geometry.vertices,i=this.object.geometry.vertices,o=this.object.geometry.faces,a=this.object.matrixWorld,s=0,l=0,c=o.length;l<c;l++)for(var u=o[l],h=0,f=u.vertexTangents.length;h<f;h++){var d=i[u[r[h]]],p=u.vertexTangents[h];n[s].copy(d).applyMatrix4(a),t.copy(p).transformDirection(a).multiplyScalar(this.size),t.add(n[s]),n[s+=1].copy(t),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),re.WireframeHelper=function(e,t){var r=void 0!==t?t:16777215,n=[0,0],i={},o=function(e,t){return e-t},a=["a","b","c"],s=new re.BufferGeometry;if(e.geometry instanceof re.Geometry){for(var l=e.geometry.vertices,c=e.geometry.faces,u=0,h=new Uint32Array(6*c.length),f=0,d=c.length;f<d;f++)for(var p=c[f],m=0;m<3;m++){n[0]=p[a[m]],n[1]=p[a[(m+1)%3]],n.sort(o),void 0===i[C=n.toString()]&&(h[2*u]=n[0],h[2*u+1]=n[1],i[C]=!0,u++)}var g=new Float32Array(2*u*3);for(f=0,d=u;f<d;f++)for(m=0;m<2;m++){var v=l[h[2*f+m]];g[(S=6*f+3*m)+0]=v.x,g[S+1]=v.y,g[S+2]=v.z}s.addAttribute("position",new re.BufferAttribute(g,3))}else if(e.geometry instanceof re.BufferGeometry)if(void 0!==e.geometry.attributes.index){l=e.geometry.attributes.position.array;var y=e.geometry.attributes.index.array,x=e.geometry.drawcalls;u=0;0===x.length&&(x=[{count:y.length,index:0,start:0}]);h=new Uint32Array(2*y.length);for(var b=0,w=x.length;b<w;++b)for(var _=x[b].start,M=x[b].count,S=x[b].index,A=(f=_,_+M);f<A;f+=3)for(m=0;m<3;m++){var C;n[0]=S+y[f+m],n[1]=S+y[f+(m+1)%3],n.sort(o),void 0===i[C=n.toString()]&&(h[2*u]=n[0],h[2*u+1]=n[1],i[C]=!0,u++)}for(g=new Float32Array(2*u*3),f=0,d=u;f<d;f++)for(m=0;m<2;m++){S=6*f+3*m;var T=3*h[2*f+m];g[S+0]=l[T],g[S+1]=l[T+1],g[S+2]=l[T+2]}s.addAttribute("position",new re.BufferAttribute(g,3))}else{var E=(u=(l=e.geometry.attributes.position.array).length/3)/3;for(g=new Float32Array(2*u*3),f=0,d=E;f<d;f++)for(m=0;m<3;m++){var k=9*f+3*m;g[(S=18*f+6*m)+0]=l[k],g[S+1]=l[k+1],g[S+2]=l[k+2];T=9*f+(m+1)%3*3;g[S+3]=l[T],g[S+4]=l[T+1],g[S+5]=l[T+2]}s.addAttribute("position",new re.BufferAttribute(g,3))}re.Line.call(this,s,new re.LineBasicMaterial({color:r}),re.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},re.WireframeHelper.prototype=Object.create(re.Line.prototype),re.ImmediateRenderObject=function(){re.Object3D.call(this),this.render=function(e){}},re.ImmediateRenderObject.prototype=Object.create(re.Object3D.prototype),re.MorphBlendMesh=function(e,t){re.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var r=this.geometry.morphTargets.length,n=r-1,i=r/1;this.createAnimation("__default",0,n,i),this.setAnimationWeight("__default",1)},re.MorphBlendMesh.prototype=Object.create(re.Mesh.prototype),re.MorphBlendMesh.prototype.createAnimation=function(e,t,r,n){var i={startFrame:t,endFrame:r,length:r-t+1,fps:n,duration:(r-t)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=i,this.animationsList.push(i)},re.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,r=/([a-z]+)_?(\d+)/,n={},i=this.geometry,o=0,a=i.morphTargets.length;o<a;o++){var s=i.morphTargets[o].name.match(r);if(s&&s.length>1){var l=s[1];s[2];n[l]||(n[l]={start:1/0,end:-1/0}),o<(c=n[l]).start&&(c.start=o),o>c.end&&(c.end=o),t||(t=l)}}for(var l in n){var c=n[l];this.createAnimation(l,c.start,c.end,e)}this.firstAnimation=t},re.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},re.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},re.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var r=this.animationsMap[e];r&&(r.fps=t,r.duration=(r.end-r.start)/r.fps)},re.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var r=this.animationsMap[e];r&&(r.duration=t,r.fps=(r.end-r.start)/r.duration)},re.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var r=this.animationsMap[e];r&&(r.weight=t)},re.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var r=this.animationsMap[e];r&&(r.time=t)},re.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,r=this.animationsMap[e];return r&&(t=r.time),t},re.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,r=this.animationsMap[e];return r&&(t=r.duration),t},re.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("animation["+e+"] undefined")},re.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},re.MorphBlendMesh.prototype.update=function(e){for(var t=0,r=this.animationsList.length;t<r;t++){var n=this.animationsList[t];if(n.active){var i=n.duration/n.length;n.time+=n.direction*e,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration));var o=n.startFrame+re.Math.clamp(Math.floor(n.time/i),0,n.length-1),a=n.weight;o!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*a,this.morphTargetInfluences[o]=0,n.lastFrame=n.currentFrame,n.currentFrame=o);var s=n.time%i/i;n.directionBackwards&&(s=1-s),this.morphTargetInfluences[n.currentFrame]=s*a,this.morphTargetInfluences[n.lastFrame]=(1-s)*a}}},e.exports&&(t=e.exports=re),t.THREE=re},function(e,t,r){(function(e){!function(t,r){"use strict";var n={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(null==e)return"";var t,r,i,o,a,s,l,c="",u=0;for(e=n.compress(e);u<2*e.length;)u%2==0?(t=e.charCodeAt(u/2)>>8,r=255&e.charCodeAt(u/2),i=u/2+1<e.length?e.charCodeAt(u/2+1)>>8:NaN):(t=255&e.charCodeAt((u-1)/2),(u+1)/2<e.length?(r=e.charCodeAt((u+1)/2)>>8,i=255&e.charCodeAt((u+1)/2)):r=i=NaN),u+=3,o=t>>2,a=(3&t)<<4|r>>4,s=(15&r)<<2|i>>6,l=63&i,isNaN(r)?s=l=64:isNaN(i)&&(l=64),c=c+n._keyStr.charAt(o)+n._keyStr.charAt(a)+n._keyStr.charAt(s)+n._keyStr.charAt(l);return c},decompressFromBase64:function(e){if(null==e)return"";var t,r,i,o,a,s,l,c="",u=0,h=0,f=n._f;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<e.length;)r=n._keyStr.indexOf(e.charAt(h++))<<2|(a=n._keyStr.indexOf(e.charAt(h++)))>>4,i=(15&a)<<4|(s=n._keyStr.indexOf(e.charAt(h++)))>>2,o=(3&s)<<6|(l=n._keyStr.indexOf(e.charAt(h++))),u%2==0?(t=r<<8,64!=s&&(c+=f(t|i)),64!=l&&(t=o<<8)):(c+=f(t|r),64!=s&&(t=i<<8),64!=l&&(c+=f(t|o))),u+=3;return n.decompress(c)},compressToUTF16:function(e){if(null==e)return"";var t,r,i,o="",a=0,s=n._f;for(e=n.compress(e),t=0;t<e.length;t++)switch(r=e.charCodeAt(t),a++){case 0:o+=s(32+(r>>1)),i=(1&r)<<14;break;case 1:o+=s(i+(r>>2)+32),i=(3&r)<<13;break;case 2:o+=s(i+(r>>3)+32),i=(7&r)<<12;break;case 3:o+=s(i+(r>>4)+32),i=(15&r)<<11;break;case 4:o+=s(i+(r>>5)+32),i=(31&r)<<10;break;case 5:o+=s(i+(r>>6)+32),i=(63&r)<<9;break;case 6:o+=s(i+(r>>7)+32),i=(127&r)<<8;break;case 7:o+=s(i+(r>>8)+32),i=(255&r)<<7;break;case 8:o+=s(i+(r>>9)+32),i=(511&r)<<6;break;case 9:o+=s(i+(r>>10)+32),i=(1023&r)<<5;break;case 10:o+=s(i+(r>>11)+32),i=(2047&r)<<4;break;case 11:o+=s(i+(r>>12)+32),i=(4095&r)<<3;break;case 12:o+=s(i+(r>>13)+32),i=(8191&r)<<2;break;case 13:o+=s(i+(r>>14)+32),i=(16383&r)<<1;break;case 14:o+=s(i+(r>>15)+32,32+(32767&r)),a=0}return o+s(i+32)},decompressFromUTF16:function(e){if(null==e)return"";for(var t,r,i="",o=0,a=0,s=n._f;a<e.length;){switch(r=e.charCodeAt(a)-32,o++){case 0:t=r<<1;break;case 1:i+=s(t|r>>14),t=(16383&r)<<2;break;case 2:i+=s(t|r>>13),t=(8191&r)<<3;break;case 3:i+=s(t|r>>12),t=(4095&r)<<4;break;case 4:i+=s(t|r>>11),t=(2047&r)<<5;break;case 5:i+=s(t|r>>10),t=(1023&r)<<6;break;case 6:i+=s(t|r>>9),t=(511&r)<<7;break;case 7:i+=s(t|r>>8),t=(255&r)<<8;break;case 8:i+=s(t|r>>7),t=(127&r)<<9;break;case 9:i+=s(t|r>>6),t=(63&r)<<10;break;case 10:i+=s(t|r>>5),t=(31&r)<<11;break;case 11:i+=s(t|r>>4),t=(15&r)<<12;break;case 12:i+=s(t|r>>3),t=(7&r)<<13;break;case 13:i+=s(t|r>>2),t=(3&r)<<14;break;case 14:i+=s(t|r>>1),t=(1&r)<<15;break;case 15:i+=s(t|r),o=0}a++}return n.decompress(i)},compress:function(e){if(null==e)return"";var t,r,i,o={},a={},s="",l="",c="",u=2,h=3,f=2,d="",p=0,m=0,g=n._f;for(i=0;i<e.length;i+=1)if(s=e.charAt(i),Object.prototype.hasOwnProperty.call(o,s)||(o[s]=h++,a[s]=!0),l=c+s,Object.prototype.hasOwnProperty.call(o,l))c=l;else{if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(t=0;t<f;t++)p<<=1,15==m?(m=0,d+=g(p),p=0):m++;for(r=c.charCodeAt(0),t=0;t<8;t++)p=p<<1|1&r,15==m?(m=0,d+=g(p),p=0):m++,r>>=1}else{for(r=1,t=0;t<f;t++)p=p<<1|r,15==m?(m=0,d+=g(p),p=0):m++,r=0;for(r=c.charCodeAt(0),t=0;t<16;t++)p=p<<1|1&r,15==m?(m=0,d+=g(p),p=0):m++,r>>=1}0==--u&&(u=Math.pow(2,f),f++),delete a[c]}else for(r=o[c],t=0;t<f;t++)p=p<<1|1&r,15==m?(m=0,d+=g(p),p=0):m++,r>>=1;0==--u&&(u=Math.pow(2,f),f++),o[l]=h++,c=String(s)}if(""!==c){if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(t=0;t<f;t++)p<<=1,15==m?(m=0,d+=g(p),p=0):m++;for(r=c.charCodeAt(0),t=0;t<8;t++)p=p<<1|1&r,15==m?(m=0,d+=g(p),p=0):m++,r>>=1}else{for(r=1,t=0;t<f;t++)p=p<<1|r,15==m?(m=0,d+=g(p),p=0):m++,r=0;for(r=c.charCodeAt(0),t=0;t<16;t++)p=p<<1|1&r,15==m?(m=0,d+=g(p),p=0):m++,r>>=1}0==--u&&(u=Math.pow(2,f),f++),delete a[c]}else for(r=o[c],t=0;t<f;t++)p=p<<1|1&r,15==m?(m=0,d+=g(p),p=0):m++,r>>=1;0==--u&&(u=Math.pow(2,f),f++)}for(r=2,t=0;t<f;t++)p=p<<1|1&r,15==m?(m=0,d+=g(p),p=0):m++,r>>=1;for(;;){if(p<<=1,15==m){d+=g(p);break}m++}return d},decompress:function(e){if(null==e)return"";if(""==e)return null;var t,r,i,o,a,s,l,c=[],u=4,h=4,f=3,d="",p="",m=n._f,g={string:e,val:e.charCodeAt(0),position:32768,index:1};for(t=0;t<3;t+=1)c[t]=t;for(i=0,a=Math.pow(2,2),s=1;s!=a;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),i|=(o>0?1:0)*s,s<<=1;switch(i){case 0:for(i=0,a=Math.pow(2,8),s=1;s!=a;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),i|=(o>0?1:0)*s,s<<=1;l=m(i);break;case 1:for(i=0,a=Math.pow(2,16),s=1;s!=a;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),i|=(o>0?1:0)*s,s<<=1;l=m(i);break;case 2:return""}for(c[3]=l,r=p=l;;){if(g.index>g.string.length)return"";for(i=0,a=Math.pow(2,f),s=1;s!=a;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),i|=(o>0?1:0)*s,s<<=1;switch(l=i){case 0:for(i=0,a=Math.pow(2,8),s=1;s!=a;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),i|=(o>0?1:0)*s,s<<=1;c[h++]=m(i),l=h-1,u--;break;case 1:for(i=0,a=Math.pow(2,16),s=1;s!=a;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),i|=(o>0?1:0)*s,s<<=1;c[h++]=m(i),l=h-1,u--;break;case 2:return p}if(0==u&&(u=Math.pow(2,f),f++),c[l])d=c[l];else{if(l!==h)return null;d=r+r.charAt(0)}p+=d,c[h++]=r+d.charAt(0),r=d,0==--u&&(u=Math.pow(2,f),f++)}}};function i(e){this.options=e||(e={}),this.loading=!1,this.timeBetweenLoops=e.timeBetweenLoops||50,this.packingStructure=["id","timestamp",{hands:[["id","type","direction","palmNormal","palmPosition","palmVelocity","stabilizedPalmPosition","pinchStrength","grabStrength","confidence","armBasis","armWidth","elbow","wrist"]]},{pointables:[["id","direction","handId","length","stabilizedTipPosition","tipPosition","tipVelocity","tool","carpPosition","mcpPosition","pipPosition","dipPosition","btipPosition","bases","type"]]},{interactionBox:["center","size"]}],this.setFrames(e.frames||[])}null!=e&&(e.exports=n),function(){if(void 0===t.performance&&(t.performance={}),!t.performance.now){var e=Date.now();performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),t.performance.now=function(){return Date.now()-e}}}(),i.prototype={setFrames:function(e){this.frameData=e,this.frameIndex=0,this.frameCount=e.length,this.leftCropPosition=0,this.rightCropPosition=this.frameCount,this.setMetaData()},addFrame:function(e){this.frameData.push(e)},currentFrame:function(){return this.frameData[this.frameIndex]},nextFrame:function(){var e=this.frameIndex+1;return(e%=this.rightCropPosition||1)<this.leftCropPosition&&(e=this.leftCropPosition),this.frameData[e]},advanceFrame:function(){return this.frameIndex++,this.frameIndex>=this.rightCropPosition&&!this.options.loop?(this.frameIndex--,!1):(this.frameIndex=this.frameIndex%(this.rightCropPosition||1),this.frameIndex<this.leftCropPosition&&(this.frameIndex=this.leftCropPosition),!0)},readyPlay:function(){this.frameIndex++,this.frameIndex>=this.rightCropPosition?(this.frameIndex=this.frameIndex%(this.rightCropPosition||1),this.frameIndex<this.leftCropPosition&&(this.frameIndex=this.leftCropPosition)):this.frameIndex--},cloneCurrentFrame:function(){return JSON.parse(JSON.stringify(this.currentFrame()))},createLerpFrameData:function(e){for(var t,r,n,i=this.currentFrame(),o=this.nextFrame(),a=["palmPosition","stabilizedPalmPosition","sphereCenter","direction","palmNormal","palmVelocity"],s=["mcpPosition","pipPosition","dipPosition","tipPosition","direction"],l=this.cloneCurrentFrame(),c=l.hands.length,u=l.pointables.length,h=a.length,f=s.length,d=0;d<c;d++){r=l.hands[d];for(var p=0;p<h;p++)t=a[p],i.hands[d][t]&&o.hands[d]&&Leap.vec3.lerp(r[t],i.hands[d][t],o.hands[d][t],e)}for(d=0;d<u;d++)for(n=l.pointables[d],p=0;p<f;p++)t=s[p],i.pointables[d][t]&&o.hands[d]&&Leap.vec3.lerp(n[t],i.pointables[d][t],o.pointables[d][t],0);return l},timeToNextFrame:function(){var e=(this.nextFrame().timestamp-this.currentFrame().timestamp)/1e3;return e<0&&(e=this.timeBetweenLoops),e},blank:function(){return 0===this.frameData.length},leftCrop:function(){this.leftCropPosition=this.frameIndex},rightCrop:function(){this.rightCropPosition=this.frameIndex},cullFrames:function(e){console.log("cull frames",e),e||(e=1);for(var t=0;t<this.frameData.length;t++)this.frameData.splice(t,e);this.setMetaData()},frameRate:function(){return 0==this.frameData.length?0:this.frameData.length/(this.frameData[this.frameData.length-1].timestamp-this.frameData[0].timestamp)*1e6},croppedFrameData:function(){return this.frameData.slice(this.leftCropPosition,this.rightCropPosition)},setMetaData:function(){var e={formatVersion:2,generatedBy:"LeapJS Playback 0.2.0",frames:this.rightCropPosition-this.leftCropPosition,protocolVersion:this.options.requestProtocolVersion,serviceVersion:this.options.serviceVersion,frameRate:this.frameRate().toPrecision(2),modified:(new Date).toString()};for(var t in this.metadata||(this.metadata={}),e)this.metadata[t]=e[t]},packedFrameData:function(){var e,t=this.croppedFrameData(),r=[];r.push(this.packingStructure);for(var n=0,i=t.length;n<i;n++)e=t[n],r.push(this.packArray(this.packingStructure,e));return r},packArray:function(e,t){for(var r,n=[],i=0,o=e.length;i<o;i++)if("string"==typeof(r=e[i]))n.push(t[r]);else if("[object Array]"==Object.prototype.toString.call(r))for(var a=0,s=t.length;a<s;a++)n.push(this.packArray(r,t[a]));else{for(var l in r)break;n.push(this.packArray(r[l],t[l]))}return n},unPackFrameData:function(e){for(var t,r=e[0],n=[],i=1,o=e.length;i<o;i++)t=e[i],n.push(this.unPackArray(r,t));return n},unPackArray:function(e,t){for(var r,n={},i=0,o=e.length;i<o;i++)if("string"==typeof(r=e[i]))n[r]=t[i];else{if("[object Array]"==Object.prototype.toString.call(r)){for(var a=[],s=0,l=t.length;s<l;s++)a.push(this.unPackArray(r,t[s]));return a}for(var c in r)break;n[c]=this.unPackArray(r[c],t[i])}return n},toHash:function(){return this.setMetaData(),{metadata:this.metadata,frames:this.packedFrameData()}},export:function(e){var t=JSON.stringify(this.toHash());return"json"==e?t:n.compressToBase64(t)},save:function(e){var t;t=this.metadata.title?this.metadata.title.replace(/\s/g,""):"leap-playback-recording",this.metadata.frameRate&&(t+="-"+Math.round(this.metadata.frameRate)+"fps"),"json"===e?saveAs(new Blob([this.export("json")],{type:"text/JSON;charset=utf-8"}),t+".json"):saveAs(new Blob([this.export("lz")],{type:"application/x-gzip;charset=utf-8"}),t+".json.lz")},decompress:function(e){return n.decompressFromBase64(e)},loaded:function(){return!(!this.frameData||!this.frameData.length)},loadFrameData:function(e){var t=new XMLHttpRequest,r=this.url,n=this;t.onreadystatechange=function(){t.readyState===t.DONE&&(200===t.status||0===t.status?t.responseText?n.finishLoad(t.responseText,e):console.error('Leap Playback: "'+r+'" seems to be unreachable or the file is empty.'):console.error("Leap Playback: Couldn't load \""+r+'" ('+t.status+")"))},t.addEventListener("progress",(function(e){if(n.options.loadProgress&&e.lengthComputable){var t=e.loaded/e.total;n.options.loadProgress(n,t,e)}})),this.loading=!0,t.open("GET",r,!0),t.send(null)},finishLoad:function(e,t){var r=this.url;"lz"==r.split(".")[r.split(".").length-1]&&(e=this.decompress(e)),2==(e=JSON.parse(e)).metadata.formatVersion&&(e.frames=this.unPackFrameData(e.frames)),this.metadata=e.metadata,console.log("Recording loaded:",this.metadata),this.loading=!1,t&&t.call(this,e.frames)},loadCompressedRecording:function(e,t){var r=this.decompress(e);2==(r=JSON.parse(r)).metadata.formatVersion&&(r.frames=this.unPackFrameData(r.frames)),this.metadata=r.metadata,console.log("Recording loaded:",this.metadata),this.loading=!1,t&&t.call(this,r.frames)}},function(){function r(e,t){var r=this;t||(t={}),this.options=t,this.recording=t.recording,this.controller=e,this.resetTimers(),this.setupLoops(),this.controller.connection.on("ready",(function(){r.setupProtocols()})),this.userHasControl=!1,t.recording&&("[object String]"==Object.prototype.toString.call(t.recording)&&(t.recording={url:t.recording}),this.setRecording(t.recording)),document.addEventListener("DOMContentLoaded",(function(e){document.body.addEventListener("keydown",(function(e){e.which===r.options.pauseHotkey&&r.toggle()}),!1)}))}r.prototype={resetTimers:function(){this.timeSinceLastFrame=0,this.lastFrameTime=null},setupLoops:function(){var e=this;this.stepFrameLoop=function(t){"playing"==e.state&&(e.sendFrameAt(t||performance.now()),requestAnimationFrame(e.stepFrameLoop))}},setupProtocols:function(){var e=this;for(var t in this.stopProtocol=this.controller.connection.protocol,this.playbackProtocol=function(t){var r=e.stopProtocol(t);return r instanceof Leap.Frame?(e.pauseOnHand&&(t.hands.length>0?(e.userHasControl=!0,e.controller.emit("playback.userTakeControl"),e.setGraphic(),e.idle()):0==t.hands.length&&e.userHasControl&&e.resumeOnHandLost&&(e.userHasControl=!1,e.controller.emit("playback.userReleaseControl"),e.setGraphic("wave"))),{type:"playback"}):r},this.recordProtocol=function(t){var r=e.stopProtocol(t);return r instanceof Leap.Frame&&e.recordFrameHandler(t),r},this.stopProtocol)this.stopProtocol.hasOwnProperty(t)&&(this.playbackProtocol[t]=this.stopProtocol[t],this.recordProtocol[t]=this.stopProtocol[t]);"playing"==this.state&&(this.controller.connection.protocol=this.playbackProtocol)},sendFrameAt:function(e){var t;for(this.lastFrameTime&&(e<this.lastFrameTime?this.lastFrameTime=e:this.timeSinceLastFrame+=e-this.lastFrameTime),this.lastFrameTime=e;this.timeSinceLastFrame>(t=this.recording.timeToNextFrame());)if(this.timeSinceLastFrame-=t,!this.recording.advanceFrame())return this.pause(),void this.controller.emit("playback.playbackFinished",this);this.sendFrame(this.recording.createLerpFrameData(this.timeSinceLastFrame/t))},sendFrame:function(e){if(!e)throw"Frame data not provided";var t=new Leap.Frame(e);return this.controller.processFrame(t),!0},sendImmediateFrame:function(e){if(!e)throw"Frame data not provided";var t=new Leap.Frame(e);return this.controller.processFinishedFrame(t),!0},setFrameIndex:function(e){e!=this.recording.frameIndex&&(this.recording.frameIndex=e%this.recording.frameCount,this.sendFrame(this.recording.currentFrame()))},stop:function(){this.idle(),delete this.recording,this.recording=new i({timeBetweenLoops:this.options.timeBetweenLoops,loop:this.options.loop,requestProtocolVersion:this.controller.connection.opts.requestProtocolVersion,serviceVersion:this.controller.connection.protocol.serviceVersion}),this.controller.emit("playback.stop",this)},pause:function(){this.state="idle",this.hideOverlay(),this.controller.emit("playback.pause",this)},idle:function(){this.state="idle",this.controller.connection.protocol=this.stopProtocol},toggle:function(){"idle"==this.state?this.play():"playing"==this.state&&this.pause()},record:function(){this.clear(),this.stop(),this.state="recording",this.controller.connection.protocol=this.recordProtocol,this.setGraphic("connect"),this.controller.emit("playback.record",this)},clear:function(){if(this.recording&&!this.recording.blank()){var e=this.recording.cloneCurrentFrame();e.hands=[],e.fingers=[],e.pointables=[],e.tools=[],this.sendImmediateFrame(e)}},recordPending:function(){return"recording"==this.state&&this.recording.blank()},isRecording:function(){return"recording"==this.state&&!this.recording.blank()},finishRecording:function(){this.controller.connection.protocol=this.playbackProtocol,this.recording.setFrames(this.recording.frameData),this.controller.emit("playback.recordingFinished",this)},loaded:function(){return this.recording.loaded()},loading:function(){return this.recording.loading},play:function(){if("playing"!==this.state&&!this.loading()&&!this.recording.blank()){this.state="playing",this.controller.connection.protocol=this.playbackProtocol;var e=this;this.controller.connection.removeAllListeners("frame"),this.controller.connection.on("frame",(function(t){e.resumeOnHandLost&&e.autoPlay&&"idle"==e.state&&0==t.hands.length&&e.play(),e.controller.processFrame(t)})),this.resetTimers(),this.recording.readyPlay(),this.stepFrameLoop(),this.controller.emit("playback.play",this)}},recordFrameHandler:function(e){this.setGraphic("wave"),e.hands.length>0?(this.recording.addFrame(e),this.hideOverlay()):this.recording.blank()||this.finishRecording()},setRecording:function(e){var t=this;this.pause();var r=function(e){this.setFrames(e),t.recording==this?(t.autoPlay&&(t.play(),t.pauseOnHand&&!t.controller.streaming()&&t.setGraphic("connect")),t.controller.emit("playback.recordingSet",this)):console.log("recordings changed during load")};return this.recording=e,e instanceof i||(this.recording.__proto__=i.prototype,i.call(this.recording,{timeBetweenLoops:this.options.timeBetweenLoops,loop:this.options.loop,loadProgress:function(e,r,n){t.controller.emit("playback.ajax:progress",e,r,n)}})),this.recording.loaded()?r.call(this.recording,this.recording.frameData):e.url?(this.controller.emit("playback.ajax:begin",this,this.recording),this.recording.loadFrameData((function(e){r.call(this,e),t.controller.emit("playback.ajax:complete",t,this)}))):e.compressedRecording&&this.recording.loadCompressedRecording(e.compressedRecording,(function(e){r.call(this,e)})),this},hideOverlay:function(){this.overlay&&(this.overlay.style.display="none")},setGraphic:function(e){if(this.overlay&&this.graphicName!=e)switch(this.graphicName=e,e){case"connect":this.overlay.style.display="block",this.overlay.innerHTML='<img class="playback-connect-leap" style="margin: 0px 2px -2px 0px; max-width: 100%;" src="data:image/gif;base64,R0lGODlh9AHmAPf/AOnxtbS0tc3eVTMzNM3NztvnhtbX1/Hy86ioqezs7Z6entzd3r7UJdHhZcnKzOjo6sXZO319fkJCQurq6xMTFPj65q2treHh4vT42uXl5/Lz9JCQkfP09FxcXebm54yMjsvMzSgoKdfleLGxsUtLTPDx8cHCwlNTVSIiI6CgoYSEhAUFBpmZmtHS1Li5ucHDxNHR0err7HZ2duDrl8XFxvP09vv98/Dx8trb3MjIyN7e3x4eHmZmZj4+PrzTHtDQ0uvs7dra2uzt7ZWVldfY2cPExtbX2AsLDImJiff4+MbHysjIyoCBgsXGyHp6er6+vsDVKm5ucOTk5XFxc83O0MbGx2FhYm1tbsDWLKWlpu70xRkZGkVFRtPU1pydoM/Q0bKztKamqCQkJeLi5O/w8Glpab/AwtjY2f7+/WtrbcfIytjZ26qrrDc4OdHS0nBxc7/VJ5KTlI6Oj9LS0/v8/b7UI3JzdMPDxIqKi5aWl7y9vi4uL8fHx3BwcNvc3pKSk62usCsrLN/f4Ly8vZydnp2dndXV1snJycXGym5vcefn6IuMjYWFhYODhiMjJCYmJ+fo6UhISR8fH/7+/hsbHP39/ejo6cHWLu/v8Lq7vPv7++nq6+3u7q+wsby9wL6/wvj4+Pz8/Pr6+vLy8+bn6O7u7vj4+e3u7/f3+PT19fn5+ff39/T09Pb29+jo6MHWL/b29vLy8vT09e7v8L2+v/Pz9O7u7/39/vHy9L2+wbi6ve/v7+no6fz9/fn6+vj5+fv7/Pr7+////v7//8XGx/X19vX29vb39+7v7/z8/enp6uPk5fr6+/n5+g8PENTU1Hh4eYeHh05OT+fo6JGSk0BAQOTl6CAgIS8vML+/wHNzc5eYmLa3t+Xm54OEhfn4+Y+PkFdXV1hZWv3++IiIiJGRkZubm3t8ff7+/35/gOjp6ru8vmRkZMTFyLO0tWJiY6eoqycnKGxsbkNDQ77TIl5eX6Kjo+Xm6QcHBwgICZSUlvLz8y0tLv///wAAAP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQyMUExNDAzQjE2NzExRTNBMUE1RTA3Qjc0NDg0NDMxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQyMUExNDA0QjE2NzExRTNBMUE1RTA3Qjc0NDg0NDMxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDIxQTE0MDFCMTY3MTFFM0ExQTVFMDdCNzQ0ODQ0MzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDIxQTE0MDJCMTY3MTFFM0ExQTVFMDdCNzQ0ODQ0MzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQBAAD/ACwAAAAA9AHmAAAI/wD/CRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6bNmzhz6tzJs6fPn0CDCh1KtKjRo0iTKl3KtKnTp1CjSp1KtarVq1izat3KtavXr2DDih1LtqzZs2jTql3Ltq3bt3Djyp1Lt67du3jz6t3Lt6/fv4ADCx5MuLDhw4gTK17MuLHjx5AjS55MubLly5gza97MubPnz6BDix5NurTp06hTq17NurXr17Bjy55Nu7bt27hz697Nu7fv38CDCx9OvLjx48iTK1/OvLnz59CjS59Ovbr169iza9/Ovbv37+DDi/8fT768+fPo06tfz769+/fw48ufT7++/fv48+vfz7+///8ABijggAQWaOCBCCao4IIMNujggxBGKOGEFFZIYD+gZKDDMzB06OGHIIYo4ogklmjiiSimqOKKLK54hg4TVGJhSqEYEscAR6zgz4489ujjj0AGKeSQRBZp5JFIJqnkkjuusIUELEgxyYwi7WLODv6s4Eg9TLCgwJdghinmmGSWaeaZaKap5ppstunmm3mccwIlOu7RiSZUdqQJHkf4MwAeMATTz6CEFmrooYgmquiijDbq6KOQRirppIdyUIU2lPhzzQhT5onRGVi20QkwlJZq6qmopqrqqoSOQogY/pD/kICnFfUzhD8UEEIHq7z26uuvwC5Khh0rOEMArRJN4oQ/PayBKBpCqKEHLdRWa60eL4Cg7bbcduvtt+CGK+645JZr7rnoptvtArAkOkimKSD7UD8y+NPBMYZOAkI0J7TBTwgABywwwPHkuMLBCCes8MIMN+zwwxBHLPHEFFdsMcL5oHDCNtMcisMA/pgjb0NI+FMPqYVmU08IkjwSQiAwxyxzzPxsweTNOOes8848A0lBGhcYqkgb/mQzskJ3+CONoIROIMMjYgTCz9RUV2311Hs40/PWXHftdc65GroACkdkcPRBuziDghSFrhHJNVJfLbfV2Dyi49d456033lbI/1KoCSsM0OnZA5XhjwuFztGDI3M3TrfNe0cu+eRKSuM3oUz4EwDhAxlgcqEXVMO446Tzswc/fVKu+uqs+yNOobEEQkExnP8jDT5zEKqJFSiU7js2KLQu/PB5b1BoGP7ow3kMK3RQaArX+C49NhQQb/31Oh9hAKGrBHKNjGfn4Q8thCZQTTzS+75HIPhg7/77R5ZRKB7+6HBaJZrkr//+/Pfv//8ADCD/QtGPnQwgBO0alD16l77fYQl+EIxgj5xxBkJ1wR9MMM0qBkCBDnrwgyAMoQhHSMISgnALZ9AJK/LBg0KJQwwNnJ7WJEhD+CFBd20IRAFJowh/RGIRKgiiEP+HSMQiGvGISEyiCshhOAvohAD+sAehcICNuMWQdNiIx91qyEXi9aBQVnAGK0rjCn8cQoX+cGJOkJcDQnEDhlf8HeS6SEfWUaJjgxJfDMjojxygUY04kYM/gjYoOYwujr5LXR0XOTkQEGoE/pgDH/2YE1akUSeMoIAtCBUBBiISi7BipCj3FgBCFcEfnZgkGs0xiQAObiXaoIAQCHUOT37ScdQbpS6/FgZCEcMfI1BlTkqQjxWU8AjQcEksZzmoTt6ydOvLxy6n2TMEEIoG/mCDMHEiBH/sIBLzCKc4w8kFZ8QDfLCUJSdt+cy5YeMa1Ixnzqw5KGwu4pWgKSMlcVL/Cn/0YVFcCAE6E9IPDAjDI8tcZztLh40ZyvOhSKJnP+y5CtLoUyf9TEM/asHRjnK0HxIQaEMEIIIdbiShzWTnQq+2hxBsEaIwFZJEsfmBG9xiNBfNST950AoP+PSnPr1BD0TKkAb4QARo4AhK++HMleIyUzGNKpBm6o+aVlQ0OeWnP3iACkV49atercVQB5qQBsCBAQ0Yx0nVmVKnOm4Pe1CkVOdK1Q+MwhY47SNGt9pVsH5VrERdiFkvAQcIVEAjS22qW935iLk61h91HYUlTPqZrN5kp331qyIAS1aEDPYSWIACBjKSWJUutmrYmONjYRrZDISCMV+wwAhmS9va/9q2ti6Ihhn3ylXNhnWsDfksaOugBYyU9rSNi+ZqY9paUSwGBjszAW8z61fOBhcOl8hudn0wA8pK5LjIdWfwlgvR1qpiMdzwxwYuEIT2uve97fXDM9iQhTCEARBT8McTEMIM7w5EFK0IsICT4N9JOPcgqhBwK1bRWYHs9Bu8iLCEIywL4BYVu9rNLgNEcFCKgDe8cssleeXZWlAsxgX+qMJDWrEGHODAGizQ70GGwYcDF6QSTQABDL7A4y8YAZ//EIQZ8FSQJLyACj/4wg9A0A51HKSf78CEIKZM5SlPoAfnvG6Gs/sKtNrAw2xlqmlBbLpAvHTEuizxYgLgjztAZP8ZP2jBAuIgY4NMQg02JkgoilBRQxlEEw4AwRgMkoomyIhQtjADGQzSzxOAIBeQjjSklXDABhtEuBl+RWEP+90wK5bMdHsgmnep5q/AIgaCMAAITOACC9iDBRtgxDmmUIZ6nEAa86iGrnfN6177ugfzIEEI/CHdh2giznOuc0EmsYQ8D2TPSWDIMogwinaQtdA3JcgFjMBof5ygCboIt7jD/YJKa3nLWx5tRD4MaqtlbdSkvmZVR5EBE3+FFa4IwhfuwA02pCAO0ThHH9ghDlz7yxGSSLjCF87whl/jGiGoHjciAudk79fOzT4ItBfC7Bv8AwRCKAi2CwIEKnS7A2P/6ILKV65yQbQhsArBNLpBC4B1e3rMoK7bmeFNx1KHhVCTCLrQhV6Johv96EhP+tH/oQgcvEFzEZHFFyx+EGY7WyAbV4gQHDClBIDglSMfSD9aMOiC9POfigqopQsi85lz178JYXe7Uatanvdc3natd2Jg4Qc7QB0ilfgB1TF+9X+Eoh2gqIQpTKEK7/YDBBMQyCSaUAKCpEIJlQgFKJpxgBY0IRndRnui1H7umWv3FXUoQIcZIve5Yw11dl+kzw1jDBzkd3MQmYQRBr/sjBvk8EnoBggI8IXXEqQVRTD+Py4AA8urIRQXAAEVqCAIIpvdH/LDhPa3r31ghHTtBGn7/8w1LQC1sv7mrg+xI2Jfx9kXpva3j0g/1sB7glhd40VAxT8IZRAjVN8WQsAKoFAEpjAQI8d/CLFTPQVUPyVUMFdWGGZ6mXYJr/BlC9F66ccPIsZ+NeR+hAF/f/cQuld/A3F/v1cE0YYQqvACzCAKa0AEHvAPLmaATZBtC4FZvrVZFiZYESiBXEYPBQB3BYGB6bc+7cOBNOSBg2EK9wANIegQlSBndHZxvVd4WXcQOtACBrEKL0BkYXeDfJWD1nVhPqhdWOADACCEQ4h+GXg12CAJSJiEeEdv9uYVoFACysBecwACNKAH3NAJCJACLBAHi8AI6QANMpCIiriIjNiITv/QAT0AT7j3EMUwdVNYdb5XEHtWhzfWDgdgEI9nCQLxhQqBg741hjxYhqB1CcXlEESYgQ0VhxGkhFnBCooQBARgAgGAAIVQDioADVdgBeFAAj1wQDuwBciYjMq4jMy4BZIgO8QWERkgeJeIcaOQeaGQjVNyeCWAjdkIPg/wdQdhC0owJbJADOA3EKaoWagYcz04c1jwCpzmimzYhnTjUrIIP7SYFUA3dEOndAAZkEj3D5DEB4DXAlKobATRD0agBg7wkA7QBGZzC1QAkQ+5BF8wJYawCwgxCVRAO6LQAkD2ZGF4ijvojhLYZRBggQ/xirAIVfmIPfsYGP0ACP6QCf3/4I86OXSkYARGMAbiQ4UFkZP+uENE6Y8CMSgEZZQOsY7VdZIQKIF1IALmBxEuWYRxFZMyOYd6lxiTAA7+sA0LMAdkiZBm2QI7xmMw4AB60JZK4A0KaRNOCVbtGJXohnqqNxFXmX7YEEpaSTwzCRiToA87YzQ6VZLsCJWe9Y7ZRQ8zUBF76XqBwEF/CZhcyYmGIQqCwAiJ8Aae+QaJEJqJEAWkWZpXUJpRYAcnoFeH2Vsm+YCLuWWhVXOQWY/2yFKBIE2V2TqB+RemAATFEJw1MJzEyQEchQvImZzJSQfrwJpa5ZqJCZsHgWlYcAnzCGbMJGa32TjvtJu8eZlgkS///2h02ZiNwAAM+RMMorCeouALqqAKv/ALiwcKSYAK9mmfq3ADMQAE/BkDE7AJABqgm6AOBFqgkHCgB8BmBtma1EWXijmdGKZphmVctrmddFM93qk6vTkVhUJ0ldALoZA/66kKpgAKqNAKwSkLHMAB+xALB1ACJUAGu4AMp3AKnCAE/Nmfm5Cj/fmfAgqgBWqgCKqgvGUKlnCkSHqkFSadl4ZdXZZWpFWhFko1LbVzGZo3GyoVHRp0RQeiIaoJI1qiq7AKsFAMqZAKK1oLLgqjMYoJszALNWqjOMqjQOCfPwqkQaoOBwoJCeoPC/qcC8iAHuCA6SgQZoWXSRWl2flpU/+KWjB5pXuTpVGxpZPQpdkooqJAoqAwpmV6pmm6pjBKBm4KpzV6o3Rapz76o3mqp0Pqp3slDmtgkRbZBS9XqP9gVm+3VouKc1OKDXIFqXgjqVBBqZb6pWG6qWRqpmhqnKDapm8ap6ZKp3Z6p6u6p336pzfRTVwAD17Qrd7arVkQCI9gq0bVirqqUI0aYo0FrHojrE9BrB96qWCaqWKarJ7KrC8aqqMKrXPKo9OqqnlqrUSqU1bqI9gwkkPZAOqmVFKarlOTWuyKpeDpFfDqpZiqqZyqrJ+ar85KqnJ6qv8qoNXaqvt0E6zgDG2AB0ywsizLBI2wDfYgCA3RDyzJsLv/6rBysz6/GrHVNLFdUbHG+p4mmqyyoKJqegD5OqM0eqP9GgMxsKP+mqoiG7AI6g761Q8CmbVau7UCOQkJ4AzyowFiO7YacAAIixJLVUs4G2LjxbNc00uD8kt5h5lbcSjD4I9HlwzJUJ7yuj/q2Z6+ELjN8J7v6QuxsJ89eqcDSrV8CgYrkA5q8AmSO7mUW7mWe7mYm7ma+wlFAAgrYAVJsKeiSwq2OhKZxAmEkg68mq4b6LY8ww2E8gL+sAh0qBi/ALWoqrgj27grEAGI4AnAG7zCO7zEW7zGe7zI6wkmwAb+8A6hK7oHSrowUQ7+IAiEQg2HtLZVsz4F67pL8gWE/9IJ/sACtdCViHG7ORqyAbq7B+C4jdACShC/8ju/9Fu/9nu/+Ju/SgACjgu60Bu9pSsSCNBmhJINcKS9oea9O3MN2QmWAUAG5nsY6Ju41Mq4BzAC+DAPU5AGHNzBHvzBIBzCIjzCJJwGwegP7PC80Cu9L7EAIUMogjAAVoTAVBOLCowzXOBC+dACCRDBhgEKkLC+BPq/pFDERmzEp6AGj1pDcpAK/wsJLOwSxeAM71Ao7JC9NGw6WnTDN/MH3OMI8aAOluDDhXGUO3nGQ5cKQJADgDACnfDGcBzHcjzHdFzHdnzHbwwILkAKrLrCASwSbeAItUAogIDFWQyxXKwkFP9gvYNCBf5UC4pAxpvxC6QwC2WLtJicyZq8yZzcyZ78yZl8A33sxzGhAJpDKLVAAo+QxdsLe4mMJFFQKOcATDcQyXS7GaZACk+8y7zcy778y8AMxX8cErtwBCdQKJ3gCDN8yOv3ykYiCWNAKDewAyGQAcpgy6GRy8G8zdzczbwcxS+RXw5QKFEgCayMWhjqzEMiRYSyDf4gB5CMzaChzd5cz/YMzODsEsqwAtJQKAkgDaubrsqlzkHiBIWiDDvgCDoQA14lyZpBz/cc0RK9p/nsEhHgD1kAOpEQ0I3anQT9I++ADoUiD/4wBLLwVQ6dGRA90SxdzxXdEqxwjBVEKFL/0AHPeM4a6FAfjUGGYgH+wAUxcM0NfcsPrcstfdTd/NIt4TltkACFcgzgADzLvLZVutOBAAaGQgUUsAUtYAtglQHnNc9GjdRkHSNmrJNquBL9QGcn0AqGQgR2MAAogAIvMzN2fdd4ndd6jdd7UHdcHAJ4QAaG4gZ0wgbxjNKFV9RkvdgxkNY3UQzawCxs06FjkALywAVtIMMI7AwrgA+e/dmgHdqiPdqkXdqmfdqondqqTdpHsANcoA0ugC+GQgA2Qwgn7VceoHyesdKLzdKNHRSmgAl+dw00kCiwEAt+EGjqstznAgNEYADQHd3SPd3UXd3Wfd3Ynd3avd3cbd2K/8AKipICnK0AsmAJmjVZ2TzWve3bjm0TmmAJozAEfQINJRAs9n3f+J3fjaID4aApYFDevsWR6b3eR/3bQNEPSmoCRLMD+lAK+v3gEB7hqqIDTtAn4hAEh43bRK3YBM7eQlELHqAIZGAJcmAzFCAPLjABkyDhLN7iLo61YxAGt+MPbYAANyAEOehVZ5sZogAEcfrjnBDkQj7kRF7kRn7kSF7kQiDYQhEKIa4IylALc0Y0/nAEe8ADEQAOG7DlXN7lXv7lYB7mYj7mZF7mZn7maJ7mao7m5bAI0LAy7ZMPXIAAExAL5p3ji1Y7/+DVXxUDtTABL8AIkRACurnT2OMMgf+wMQRwA7Eg1DnuWnpueBngV8qACbJwA1JgCC+QCZze6Z7+6aAe6qI+6qRe6qZ+6qie6qq+6qzOB0FAChwlBHee44rgAZUX6f8A4r5lCROQANz368Ae7MI+7MRe7MZ+7Mie7Mq+7Mwe7Lbgn7NO615lCTsuL/0gBE8u7dq+7dze7d7+7eAe7uI+7uOeAYlNOJUQ7eS+7uze7u7+7vAe7h4wRriuZ+oe7/ie7/q+7/zuVR4wCu19NqFw7/1e8AZ/8Aj/Vf8e8OieANme8BAf8RJP7h4AC/WuEP3ACj418Rzf8R7vVxmQALp98QhRCTeQAQ//8Sq/8vnuARkwAY1H8lDdyAoxAFQsf/M4/+0/pQiYEPMyDxH9EAqwUAu2MAHKkKRIn/RKv/RM3/RO//RQH/VSP/VUX/VJqgwxEAusIArV/vMMMShoHPZiP/ZkX/Zmf/Zon/Zqf/ZK6fVu//ZwH/dyP/d0X/d2f/d4n/d6v/d83/d+//eAH/iCP/iEX/iGf/iIn/iKv/iM3/iO//iQH/mSP/mUX/mWf/mYn/mav/mc3/me//mgH/qiP/qkX/qmf/qon/qqv/qs3/qu//qwH/uyP/u0X/u2f/u4n/u6v/u83/u+//vAH/zCP/zXERAAOw==">';break;case"wave":this.overlay.style.display="block",this.overlay.innerHTML='<img class="playback-move-hand" style="margin: 0px 2px -2px 0px; max-width: 100%;" src="data:image/gif;base64,R0lGODlh9AHtAPf/AJ2dnfT09KWlpZWVlejo6bGxsRwcHHl5eYmJiRMTFOrq66GhoYWFhcHCxObm54GBgdjY2GFhYcXGydPT0+Dg4OPj4319fQsLC0ZGRuTk5GlpaVVVVV5eXpGRkXFxcd7e3kFBQXV1ddbW1lJSUsDAwNvb221tbk1OTgMDAykpKaurqzw9PdTU1FlZWdzc3JiYmMjKzLu7u8jIyJubnPLy9M7Ozr2/wUlJSTo6OsLCwmRkZDY2NtDQ0DIyMr29vaytsKysrC4uLra2ttHS1CUlJtXX2MrKy6+vr5qamiEhIczMzM3O0LS0tMTExMbGxsbIyt7e4I2Njby8vOTl5qioqMPEx+rr7KqqrOjo6np6fNTV17i4uMzNzo+Pj3Z3ePHx8rm7veDh4uzt7r/AwoeHh8PDxM/Q0sTFx42OkMDBw+fo6bW3utjZ2vHy8tHR0sjJyru8v+Xl5d3d3dzc3mNjZJ+fn2pra+np6t/f4OLj5NPT1V9fYFdXV8HCxsDBxbO0tq6vsqqsrk9PT0tLS5KTlGdnZ4uMjn1+gHd4e1JTUzs7PEJCQzMzMysrK+fn6P7+/v////39/fPz8+7u7/z8/Pv7+/f39/b29vr6+vj4+Pn5+e7u7vLy8u/v7+3t7ezs7PDw8Ozs7fHx8fDw8fb29/Ly8/X19fr6+/z8/fn5+tvc3e/v8HNzdKmpqvf3+CMjJPDx8fP09OPk5ZmZmvj5+Xt8flBQUP39/mtsbvLz8+/w8Nra3NXW15+govr7+x8fH7m5uicnJ+fn6ezt7Zqcn7Kzs7S0s1hYWLe4uvz9/aanqq2trf3+/ouLi2NkZqOjo5aXmqKkppeYmmBgYPv7/JSVl4ODg4eHihcXFw8PD/7//9HS0kBAQOHh4mhoa0RERDAwMPf4+AcHB+vr7NfX11xcXKenp5manJqameXm6ExMTcjHyfv8/G9vb/j4+UdHRywsLHN0dj4+PsrLzTQ0NObm6Obn6efm6Ly9v39/fzc4OL2+v+3s7fb39wAAAP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQyMUExNDA3QjE2NzExRTNBMUE1RTA3Qjc0NDg0NDMxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQyMUExNDA4QjE2NzExRTNBMUE1RTA3Qjc0NDg0NDMxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDIxQTE0MDVCMTY3MTFFM0ExQTVFMDdCNzQ0ODQ0MzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDIxQTE0MDZCMTY3MTFFM0ExQTVFMDdCNzQ0ODQ0MzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQBAAD/ACwAAAAA9AHtAAAI/wD/CRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6bNmzhz6tzJs6fPn0CDCh1KtKjRo0iTKl3KtKnTp1CjSp1KtarVq1izat3KtavXr2DDih1LtqzZs2jTql3Ltq3bt3Djyp1Lt67du3jz6t1LMtInOUwOeBBgia/hw3TrpPDHuPErB4gjS07LgPEKDz5YiPDgL0WlyaBDe92EIgEESAQh7fHXRLTr11UF+BtwUIi/BbBz62b6wh+Jg3H8WdhNvPjQGP6oHMyEIsgj49Cj59zkj85BSr8ufJbOvfvLAOLgPf83GMEfKO/o05+klOQCpYNdWKufT/9j+QwHr/hTUb+/f4sI+OPEQSL4k8V/CCbYkH4FHGQKCjuMp+CEFP4T3DQHaWJAAu9V6CGCnKDAiIQECeLPJh+m2F8lG5I4kDX+vKHijPPx4U8nBwHgzxY09ujdAf7UcBAb/njh45HR6SfFQZz4gwNqSEapWwb+HLBcAthEIuWWr33iDzdQFjSIP5dwaSZomBhggIsCeeHPBGfGGZmJnhw0i29y5skXZyIctIs/HegpKF4DyGeQl98MqihdEFR5kCXZvMLmopSmpYA/NyCEgT+mVOrpWplkQ8SkdvgDwaeoosWNeQcFaESqsJL/VR4eBxnhTxSx5gpWoWUcdIc/J+gqLFcFHmiQJOIEEeawzFLVjT8tHAQJPeJ02uy1UllyQQ/LDrQaBdiG+xQk+ogTwEGVCSnuuktt4E8FtfqDALv0ItUbCwc9y0G9/BLFw60HiYLCk/0W/JMc/mBoECSNZKOJwRDvlIk4OCBkIrwRZ2wTJClcUKZB+fjDhsYk0zSmAvE+U/LKMD3w5kEu+KMDyzSz1ASgB3mJQc08o1SgBwdF8gs2mPRs9EgCL4LQO/6gfPTTHj2SRDaFGWSCPx9ArfVGkKxap0HA+FPH1mRj5HI3B7HgD9Bltz3RPrf56o8tbtcNUQ2OGhQJNkTb/+33Qk1uIO0KJ/5teNBYbleQBv44cvjjA5GLAie1+SME5JhXhrZBSgiHOeRM+CPAQQT4s+/nh8sgb9AXBKMl6n+XHq1BjwQhDuWw+01JNgYoTtDVTude9yM9oPBxQQX4U4zwfpcKrkFl+NMM83a34s8yB+HhjwbU103CbAdVIg4Rr3dP9qV8HPRIMOIcb77WmFxA/kEj+DPO+2RHkoI4mRy0gOX4IxtnPnEQ5LwggFurAwANoj07IFBrtsGNQTCBghSU74E9G8fagja1/mHQaBOz4EFa4A9JfNBokSDCBYpmECT4o1cn7NnV7meQI8QthjybAZ4MQgF/PACHNIsEOf844I8rLAcF9JgUEAvGhUY0xoEGwU42WLjEiKmgMRfwR4QOsgh/4K6KBusGChozRmx0qCDNiFFaHqEJTWCiEm1soyUs4YAJeBCMXIlEEBrDmDHe4SDWw55YTKGAJjgBGF2wnTgukABxOFIcfPzSMyBARTxaBW6RzKIMDuIGH4YlEkSMpD+IkIIUBKOUKZCHCUyQhRC8ojHYMMEyzmPJqTxiB6LMIhMOEgAndWsroTNACAbQASQ0QRKReEQklrnMglACD+YYQTYawwdy/LKWStFeJMvROTJkiG9n7Eoi/IGfimBCBF34BWNusA0lYrMoAeIjChzAHH1cc1Nf7Mo3/BH/B2lFohLUcCdBKEECXPpDEQIYh+/eSRTiRTJTlMBGAi44kMq86ivL8Ic+KvBGX7hCDWFgwxP60AAJDEEOklgo7WSwKsZgQwMsCCdDgfKJMfLRiP8YZz4HosPLfYUS8mAMOPjgjAdcAxeFyAIaiBEIODSgChLQwzBkWhBIuKAZi8iiP5IggDvO1CdSiCQKvuYmHhxkAv6YxSeRsBhRMmaR4HjHMbIAjR9UgaLSqkQZTuDSOljrqzwhIR9dJ5D//cYgTUqUWCLhgG3UYAAR6IFb+5gAeXTgaw0hAGf8cYED/BGwObFEAiJprH8864cGCZUB8PoVSKigrRcIgi00wIFF/4yWj+LARfAYMg4LQNIfhcAYaGsSs0huYyCe+NIvIbFPr4KFBOpMmBM2QSJTdAMJ5cBGY8SBood0ggG3LUcJrjlcllggkti4I6QkdRBW+IMcYpHEavwRAQIuxBJ4iEIPDDCyiFziCElgzAg2949IWOISVC3vSCixRz5GoCCLmNxBOrBDr1ACANP8xUUfAgmVPqQSW9ijOFTwAVakYIxEyEefFFySHkayQQTh00HIkdavsEER/kABA9x3kkgs4Lf+MMAiVqBdfxyBxSSJDx8vgCOCUHhABknuO7oSiUL54x1Zi2IlKkGJSJBXI3fY1EHdAIk71GG05UTyRxzKx0wVBP+tqC1IAC6QAoFGxRPuugAQXAQJWJjhDH3wgwSesARV5OELp1gzCRYjDjt8ABJo8AcD1AwSB9i0McopyK+CRbse8C8rkYCRPxhBq9R8YQhpAMQh9sCHQlyjDldYgw1scK6PUKIA2r2AB7iQnapRmiM6lKd9CXIJOpPKH7vAyiN04I8E1KGS/zAFL9aAhhOM9tIXyAY2cHACOpzBBc7ViCQ6kOFXAuDXHIGEifhoz4PIAwWiQJcar9K5RtByIJTgRTWmEQyXLmIHQHZraT3SiQdoFRv9RHdGOBFwf6jsINPwR6kLEr0DXgVIG/7HLT5wCCf6IxsgUIc+bouCX3CDAyb/QAIJSPACE/Q3JJvIRxZR0I6EK7wiNowkgQsSBX+4QW4jwAoZZoOaR3wgBP32xyBU8IJvjDEbhSCBA7zckk0wYJoye/TNJ+IuPoowbf6weEEYzq2rgCKL3CgHN2yaiG5QwhxZ7ME+fB0TTnTAAIyRBzCgvXWFmEKrjYmzQSrgD8HRDhwewwoEApxjelgDXJZg2gWEwNqYYEIIDU5AIYDhiS/3/R+2ieTLjyWOdhukHP7YeVU0oQACdGI8LNAuBjCbE6NrAOsaXcDUP2+QrjcmCQkWCCQQT/eBnPe4XiEBJDWQYGVS4vmosPNJLuECBLR1lA+oAd8VfgncM2bgB3GX/3AJorojc+URGfUHjAlyinHgYR4SqIL8JWCGdAR/JYwVAF9dyoo38PjX3xNJK5YQ8TGABPEs5UAs+yQOMCQQlHAHvGADyoAIdOAN8cAKGOgFD5AFPFB5LREAQtACWnUBuFAAO4VkggVL9ycQeCN2BEEdYKIVYeMkJTAQlwAFEvADiKAP3udW8lBrNXEJOfAAt4UNHCAE8YZkxRZJIcAQCGMdtJMCCeBhUuEJKCAOQjAe0tYA5yAIt5UEJkAC+3AEZEiGxXAFjOAkHggTlcACCNADWKIPIUACoOB5lhSAfKQuCtEJX4IQ9WNzVoE3xgIJUwAH5zAIT6cDbLCGj3ADAv/CE5GABwuwB9wAAi0QBW8gCtIHRPMFS1RIEI9ABFRzEJwxelVBJHTzD6pwDSswRgZAGAvxCBXwDK9Ugz7xCATwBgxgBxpgAQCQiZuIQZpwW43RhA3hiLs1EMkDBFlRCQEGAFTgccHQVQthCjPQYAZihzcBCaYAAQLQAV0AAEIAAQEQjPijOpEkIw0RAqZyEAjDPVkhA0DGDUbwiQMBd+s0AJBxFJpQAWVQDAXgAzWQAZZgjtRTHnw0RQ4RPbRhEJfiZlmhAAIADHGgjY/AOD40bEtRCZ6wCzVQAxCQAZ2wfQGUCUXWGO3wEDSWklFkANhgj2BBCSSEDQb4FI+QCZ//4ACudwkwyTzbIErq2BDUkYoGsU80dBaUYCM9QHu2RAmZYAk9KTznxUcJ8DAO8QjY0DsHUQj+8DxmIQr7xAj/JxCoIAmrMAqlUAnJxHstEQmM1xhs4xCQQDhMKRChk2ll4Qaj9Q3F9w+PAAssIAFjEAi9AAhp8ARKwAZxkAkGyZYYQSSRtEsQkQXvAnZxORYsME0IIFOQwAlcAAiE4A30gA0XgA30QAdkAAgNcAYygAe0oI2OiRFT2RjZYEIQgRz8YRDBYXiL1QFj5E2p0QY/YAdE9nvyEF3NtgheEA1gUAZmQAG5sIaxWRGU8Ep8xJsPwQUGgjjB0JhREQnlgQLP/7AssdAKi/BbRlgAcfAelDAOMdAORSYOr7AHdZAGVdAHLIAHuYAJsDmdDPEnkbQ8EUEdxyAtOIACTQYWfwIPO4cJy9BgSTADLnB/lbAND6APY4QCilALfxB/+AAH80AOanAJmOCd/vkPs8kYFwCED/EICaCV5OEP+wgWnTM9AvEIWtBS+lAAJKk+4yAARMAYCTAC1QAGEvAGZ5AGcAAHUbUL4xAAlpAKvvAIkNCfn0cJQXqdE0E8EmYQxVBhX/EsPTB1EEAHWZQCE2CiBSYCt8cYrzAIdGAIzFkFTwADT1AGaTAGevoEXDAEReAAsHAJzGCllIYwAUoREQeIA2Ergv/nFZBwDH3EGNkwAOE2EZZQAIPgfcHADepwDAdwDYQAa3+ADGsABjbQAE9wBjAwBAqQaNNZGUtmmxJhQ7lZEFTyYGJBCSpwAjhQDkDwVxshCnigAh6AAwlwaVRJBK8AD/QgD7bgBdJgAxLQAGFAqMOlR5FElBKhOsBZEJFAZ9IpGQFwBxUAATNABqwQAYKAA2pCmnwED7VgA2fAC6nAli7GR7UqEbeqPrZzgtEhR5zwCd0wCzggVL0AAw0wBWqKTUO3ZAkqEZRwAcB3ECZylPUBCSywKReQBTAgAfOgC9aKTZEADw9lEY8AD9VyEAoUAwnyCOYwRosQCGZQBhBQqQr/dq+Nka8TQQeFYxA3My8KwgJ7dAEmYANLcAZQEJXvFE/b9bATYQ7+4AMHUQL+YAIUUgkdkEVJwABvsARvoAbhWkuR4HGNMWUXEVaBYhCakCwLaxx4xhj6cA5LsARmQF03K0rMeBEO4A+soD6vkHgewgOEo3RXYAZuoAVtELIflEa45bQTIT6NwFpjopEU8ghN0G8o0ALFUARaoAruAFgpFElKgxEpdAGVqkMsqyKasAB4lwAHQAJsUATd0KNLhLOMIUgYwZWO+w9hgwQ9YgkDcKz08AI8oAC7kA60G0M9h1vdhRE6IrUGQSTgpyIBQAhE8AsRYAQikAd4UA+WoLjC/xMJ1tkYIAC+BmEbY6O2KCAPbaseomANjKAIc9gNCuAADhALYWs+2sRHuIsRjWIlLZkNNqsiFMAAG7AB+UAC20ABCqAGo3AK5vs4SrZdzYsRzOEcB8FXLIokklAMXtAOUSAEItANoTAMkxAO7Ws34htJMagR7KGQBtEbSnAmmuAGM4AAMxADE+ACk9AGukAKlBDBbrO/jdG/GVE/dfkPySNBZ/IIdxADAnAETTABHzAK/RAAPEml7zPBfVTBGUFhOXAQ3SQomuACJFAG21AC3YBotKAJ7KDFzPMI45t3QmwQgcRL/iAPivIIoLAL5NANDuAIARAJydBl2lDHPfMBov+ksxnxJ8boTBKVvFyiCZvgepzQCa6QTHAMO1zsD9zlEZeARJNCOBs8KGzEk11WpYhcM6HIwqtMEJggUQnmKqkiIVWaO7brD60AErZAJgchGz51ot2xvBQMEi6jhwRhI2YlzNzxCNfHGIvwygURNuVQPpFwCSGTAivIzLCRy3jpEZXgRD2wADMwDVl6AcjHzdFBzG+1uxvRCS2loo2AAJSrzsRxspGEAdKsPt1QDHRYkPbMHc8SSeYQ0JTCzp7sxQYtJ7UTSWa70IIy0Hw0OhAtKIxbzBWdJ5EgWXz00BkdJ4QXSRT90XGC0OKQxCSNJI+gDw6d0nEiCoDHGDjl0lz/Yqjb9Vk0vSX/w0cwmtNSQmF8pA4+zSUhw0czM9RSQpl8BI9IjSSdrK1XsQklkAGXsM9NHRM6wkevsM1OUQczlw09MAIeAAw8QAGaeNVGQWORFMZXQbWTpaIpcAOFQAUyUAKcQHVozRPdF0ngoLRJIWpv7VbikAQrMA1AQAITEACUkMJ57RE2kq19CRVWFtiU3RgGQA+CMAvAUAOfUAmM3dgV0SiilAQqENlN4QjIWtmq3RgJEASC8AJHIAOgoAn5C9oYoW6TlQAbAADA8AagIAnAHdzCPdzEXdzGfdzIDdzlWBFusAINt9rQTZspwAdRIAAk4AhrCApI8ALc3d3e//3dA3BYtv0PnkCM0X3e6H3eGFDKLRrPb2Xe6b3aQYDTBuED51124/0PjoB38d3f/u1WUDgRkJCljTEDlRAAXGAM6LAHONAe4pDa//0KVJgDc9MFwJADK5fhGV4GhhAPF1Ax+U2lJMDf/13i/Z0Apr0QkOAlkSQEqlylAaAAccAFUeAB5YABPYCc/p2MA3EziKAHnicLP3AB3PDZzGwK9msKelAOz23iTk7ZBmCVEEEJomAEyIoCb+AJ9mu/oTAKo/AFpBDmXyALEFAGgdAB7aAOOPAKEE7ZCv0PlGDfWVAEnmcPgIACfEAKtZ3RlBAHjvDnk/AFwLAHJ/nkhj5ZB/9grStOAFawf4xxAuNwB38+6ZT+5wSgAKGwCl8gCabwBcIwB+vwA7PAComwAuzz1owgqwOBCpMADCgAAlnwBhMw67Re682wGi1AA53X2AEQyJNOAGipBa1gAoNADwlwAY+U7Mq+7Mze7M7+7Mt+AdMwB9YaCX4uBuQwAhdwARvAAvxQ6eAe7o5AAHcwDpOAlqTQBliAB1xQDABgAeXwDR0jDiCwDv+XCpOwD23+1tMgCQ5wC41NCr5O6QQQCl9gCmIgC7swAXjaAA7/8BAf8RI/8RRf8RafBjywCuPQmI/g66EQCm7ABR9/D+Je8iVP7uPgCehOAwrQDTUwD3fgCV/7MEEOIAutMAszkPM6v/M8zwXjQABGPp2PIAwDD+53oADjEAqTsPRM3/RO//RQH/VSP/VMHwr3MAoTMQq+fgeh4AmSbvJgH/bjfvSe4PVxIOUD4cSOsOnJLdyhEAelYNuUMAkEIPZ2f/d4H/YEIAmKCwml8PV5H/jiPg6ugBCP0Al5rwB8H+KP0PiO//iQH/mSP/mUX/mW//hCDAmXv/mcH/l22PmNb9X5PfqkX/qmf/qon/qqv/qs3/qu//qwH/uyP/u0X/u2f/u4n/u6v/u83/u+//vAH/zCP/zEX/zGf/zIn/zKv/zM3/zO//zQH/3SP/3UX/3Wf/1GERAAOw==" />';break;case void 0:this.overlay.innerHTML=""}}};var n=function(e){var n=this,i=e.autoPlay;void 0===i&&(i=!0);var o=e.pauseOnHand;void 0===o&&(o=!0);var a=e.resumeOnHandLost;void 0===a&&(a=!0);var s=e.timeBetweenLoops;void 0===s&&(s=50);var l=e.requiredProtocolVersion,c=e.pauseHotkey;void 0===c&&(c=32);var u=e.loop;void 0===u&&(u=!0);var h=e.overlay;void 0===h&&document.body&&(h=document.createElement("div"),document.body.appendChild(h),h.style.width="100%",h.style.position="absolute",h.style.top="0",h.style.left="-"+t.getComputedStyle(document.body).getPropertyValue("margin"),h.style.padding="10px",h.style.textAlign="center",h.style.fontSize="18px",h.style.opacity="0.8",h.style.display="none",h.style.zIndex="10",h.id="connect-leap",h.style.cursor="pointer",h.addEventListener("click",(function(){return this.style.display="none",!1}),!1)),e.player=new r(this,{recording:e.recording,loop:u,pauseHotkey:c,timeBetweenLoops:s}),e.player.overlay=h,e.player.pauseOnHand=o,e.player.resumeOnHandLost=a,e.player.requiredProtocolVersion=l,e.player.autoPlay=i;var f=function(){if(e.player.pauseOnHand&&n.connection.opts.requestProtocolVersion<e.requiredProtocolVersion)return console.log("Protocol Version too old ("+n.connection.opts.requestProtocolVersion+"), disabling device interaction."),void(e.player.pauseOnHand=!1);i&&(n.on("streamingStarted",(function(){"recording"==e.player.state?(e.player.pause(),e.player.setGraphic("wave")):o?e.player.setGraphic("wave"):e.player.setGraphic()})),n.on("streamingStopped",(function(){e.player.play()}))),n.on("streamingStopped",(function(){e.player.setGraphic("connect")}))};return this.connection.connected?f():this.on("ready",f),{}};"undefined"!=typeof Leap&&Leap.Controller?Leap.Controller.plugin("playback",n):e.exports.playback=n}.call(this)}(window)}).call(this,r(52)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){(function(){var t;t=function(e){var t,r;return null==e&&(e={}),e.positioning||(e.positioning="absolute"),e.scale||(e.scale=1),e.scaleX||(e.scaleX=1),e.scaleY||(e.scaleY=1),e.scaleZ||(e.scaleZ=1),e.verticalOffset||(e.verticalOffset=0),6,-100,r={absolute:function(t){return[window.innerWidth/2+6*t[0]*e.scale*e.scaleX,window.innerHeight+-100+e.verticalOffset-6*t[1]*e.scale*e.scaleY,6*t[2]*e.scale*e.scaleZ]}},t=function(t,n){var i;return null==n&&(n=!1),i="function"==typeof e.positioning?e.positioning.call(this,t):r[e.positioning].call(this,t),n&&(this.screenPositionVec3=i),i},{hand:{screenPosition:function(e){return t.call(this,e||this.palmPosition,!e)}},pointable:{screenPosition:function(e){return t.call(this,e||this.tipPosition,!e)}}}},"undefined"!=typeof Leap&&Leap.Controller?Leap.Controller.plugin("screenPosition",t):e.exports.screenPosition=t}).call(this)},function(e,t){(function(){Leap.plugin("transform",(function(e){var t,r,n,i,o,a;return null==e&&(e={}),t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a=new THREE.Matrix4,!0===e.vr&&(this.setOptimizeHMD(!0),e.quaternion=(new THREE.Quaternion).setFromRotationMatrix((new THREE.Matrix4).set(-1,0,0,0,0,0,-1,0,0,-1,0,0,0,0,0,1)),e.scale=.001,e.position=new THREE.Vector3(0,0,-.08)),"desktop"===e.vr&&(e.scale=.001),e.getTransform=function(r){var n;return e.matrix?(n="function"==typeof e.matrix?e.matrix(r):e.matrix,window.THREE&&n instanceof THREE.Matrix4?n.elements:n):e.position||e.quaternion||e.scale?(a.set.apply(a,t),e.quaternion&&a.makeRotationFromQuaternion("function"==typeof e.quaternion?e.quaternion(r):e.quaternion),e.position&&a.setPosition("function"==typeof e.position?e.position(r):e.position),a.elements):t},e.getScale=function(t){return isNaN(e.scale)||(e.scale=new THREE.Vector3(e.scale,e.scale,e.scale)),"function"==typeof e.scale?e.scale(t):e.scale},i=function(e,t){var r,n,i,o;for(o=[],n=0,i=t.length;n<i;n++)(r=t[n])?o.push(Leap.vec3.transformMat4(r,r,e)):o.push(void 0);return o},n=function(e,t,r){var n,i,o;return n=t[0],i=t[1],o=t[2],e[0]=r[0]*n+r[4]*i+r[8]*o,e[1]=r[1]*n+r[5]*i+r[9]*o,e[2]=r[2]*n+r[6]*i+r[10]*o,e},r=function(e,t){var r,i,o,a;for(a=[],i=0,o=t.length;i<o;i++)(r=t[i])?a.push(n(r,r,e)):a.push(void 0);return a},o=function(e,t,n){var o,a,s,l,c,u,h,f;for(r(t,[e.direction,e.palmNormal,e.palmVelocity,e.arm.basis[0],e.arm.basis[1],e.arm.basis[2]]),s=0,c=(h=e.fingers).length;s<c;s++)o=h[s],r(t,[o.direction,o.metacarpal.basis[0],o.metacarpal.basis[1],o.metacarpal.basis[2],o.proximal.basis[0],o.proximal.basis[1],o.proximal.basis[2],o.medial.basis[0],o.medial.basis[1],o.medial.basis[2],o.distal.basis[0],o.distal.basis[1],o.distal.basis[2]]);for(Leap.glMatrix.mat4.scale(t,t,n),i(t,[e.palmPosition,e.stabilizedPalmPosition,e.sphereCenter,e.arm.nextJoint,e.arm.prevJoint]),l=0,u=(f=e.fingers).length;l<u;l++)o=f[l],i(t,[o.carpPosition,o.mcpPosition,o.pipPosition,o.dipPosition,o.distal.nextJoint,o.tipPosition]);return a=(n[0]+n[1]+n[2])/3,e.arm.width*=a},{frame:function(t){var r,n,i,a,s,l,c,u,h,f;if(t.valid&&!t.data.transformed){for(t.data.transformed=!0,f=[],a=0,l=(u=t.hands).length;a<l;a++){for(n=u[a],o(n,e.getTransform(n),(e.getScale(n)||new THREE.Vector3(1,1,1)).toArray()),e.effectiveParent&&o(n,e.effectiveParent.matrixWorld.elements,e.effectiveParent.scale.toArray()),i=null,s=0,c=(h=n.fingers).length;s<c;s++)r=h[s],i=Leap.vec3.create(),Leap.vec3.sub(i,r.mcpPosition,r.carpPosition),r.metacarpal.length=Leap.vec3.length(i),Leap.vec3.sub(i,r.pipPosition,r.mcpPosition),r.proximal.length=Leap.vec3.length(i),Leap.vec3.sub(i,r.dipPosition,r.pipPosition),r.medial.length=Leap.vec3.length(i),Leap.vec3.sub(i,r.tipPosition,r.dipPosition),r.distal.length=Leap.vec3.length(i);Leap.vec3.sub(i,n.arm.prevJoint,n.arm.nextJoint),f.push(n.arm.length=Leap.vec3.length(i))}return f}}}}))}).call(this)},function(e,t,r){var n=r(15),i=r(56);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};n(i,o);e.exports=i.locals||{}},function(e,t,r){(t=r(16)(!1)).push([e.i,'.leapStandalone .cursor{position:fixed;width:50px;height:50px;z-index:1000}.leapStandalone .selector{position:fixed;width:50px;height:50px;z-index:1000}.leapStandalone .selector .indicator{width:100%;height:100%;position:relative}.leapStandalone .selector .indicator::before,.leapStandalone .selector .indicator::after{content:"";position:absolute;top:50%;left:50%;width:100%;height:100%;border-radius:50%;transform:translate(-50%, -50%)}.leapStandalone .selector .indicator::before{background:red;transform:translate(-50%, -50%) scale(0.1);animation:pulse1 2s ease-in-out}.leapStandalone .selector .indicator::after{transform:translate(-50%, -50%) scale(1);border:10px solid red;animation:pulse2 2s ease-in-out;opacity:0}@keyframes pulse1{50%{opacity:1}100%{opacity:0}}@keyframes pulse2{0%{transform:translate(-50%, -50%) scale(1);opacity:0}75%{opacity:1}100%{transform:translate(-50%, -50%) scale(0);opacity:1}}',""]),e.exports=t},function(e,t,r){"use strict";e.exports=r(58)},function(e,t,r){"use strict";
/** @license React v16.12.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(7),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var g="function"==typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x={};function b(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||y}function w(){}function _(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||y}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=b.prototype;var M=_.prototype=new w;M.constructor=_,n(M,b.prototype),M.isPureReactComponent=!0;var S={current:null},A={current:null},C=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var n,i={},a=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)C.call(t,n)&&!T.hasOwnProperty(n)&&(i[n]=t[n]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===i[n]&&(i[n]=l[n]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:A.current}}function k(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var P=/\/+/g,L=[];function R(e,t,r,n){if(L.length){var i=L.pop();return i.result=e,i.keyPrefix=t,i.func=r,i.context=n,i.count=0,i}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function D(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>L.length&&L.push(e)}function F(e,t,r){return null==e?0:function e(t,r,n,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case o:case a:l=!0}}if(l)return n(i,t,""===r?"."+z(t,0):r),1;if(l=0,r=""===r?".":r+":",Array.isArray(t))for(var c=0;c<t.length;c++){var u=r+z(s=t[c],c);l+=e(s,u,n,i)}else if(null===t||"object"!=typeof t?u=null:u="function"==typeof(u=g&&t[g]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),c=0;!(s=t.next()).done;)l+=e(s=s.value,u=r+z(s,c++),n,i);else if("object"===s)throw n=""+t,Error(v(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return l}(e,"",t,r)}function z(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function O(e,t){e.func.call(e.context,t,e.count++)}function B(e,t,r){var n=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?I(e,n,r,(function(e){return e})):null!=e&&(k(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+r)),n.push(e))}function I(e,t,r,n,i){var o="";null!=r&&(o=(""+r).replace(P,"$&/")+"/"),F(e,B,t=R(t,o,n,i)),D(t)}function N(){var e=S.current;if(null===e)throw Error(v(321));return e}var U={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return I(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;F(e,O,t=R(null,null,t,r)),D(t)},count:function(e){return F(e,(function(){return null}),null)},toArray:function(e){var t=[];return I(e,t,null,(function(e){return e})),t},only:function(e){if(!k(e))throw Error(v(143));return e}},createRef:function(){return{current:null}},Component:b,PureComponent:_,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return N().useCallback(e,t)},useContext:function(e,t){return N().useContext(e,t)},useEffect:function(e,t){return N().useEffect(e,t)},useImperativeHandle:function(e,t,r){return N().useImperativeHandle(e,t,r)},useDebugValue:function(){},useLayoutEffect:function(e,t){return N().useLayoutEffect(e,t)},useMemo:function(e,t){return N().useMemo(e,t)},useReducer:function(e,t,r){return N().useReducer(e,t,r)},useRef:function(e){return N().useRef(e)},useState:function(e){return N().useState(e)},Fragment:s,Profiler:c,StrictMode:l,Suspense:d,createElement:E,cloneElement:function(e,t,r){if(null==e)throw Error(v(267,e));var i=n({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=A.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)C.call(t,u)&&!T.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:l}},createFactory:function(e){var t=E.bind(null,e);return t.type=e,t},isValidElement:k,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:S,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:A,IsSomeRendererActing:{current:!1},assign:n}},V={default:U},H=V&&U||V;e.exports=H.default||H},function(e,t,r){e.exports=r(60)()},function(e,t,r){"use strict";var n=r(61),i=r(62),o=r(63);e.exports=function(){function e(e,t,r,n,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return r.checkPropTypes=n,r.PropTypes=r,r}},function(e,t,r){"use strict";function n(e){return function(){return e}}var i=function(){};i.thatReturns=n,i.thatReturnsFalse=n(!1),i.thatReturnsTrue=n(!0),i.thatReturnsNull=n(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,i,o,a,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=f(["\n  100% {\n    transform: rotate(360deg)\n  }\n"],["\n  100% {\n    transform: rotate(360deg)\n  }\n"]),o=f(["\n  10%, 90% {\n    transform: translate3d(-1px, 0, 0);\n  }\n\n  20%, 80% {\n    transform: translate3d(2px, 0, 0);\n  }\n\n  30%, 50%, 70% {\n    transform: translate3d(-4px, 0, 0);\n  }\n\n  40%, 60% {\n    transform: translate3d(4px, 0, 0);\n  }\n"],["\n  10%, 90% {\n    transform: translate3d(-1px, 0, 0);\n  }\n\n  20%, 80% {\n    transform: translate3d(2px, 0, 0);\n  }\n\n  30%, 50%, 70% {\n    transform: translate3d(-4px, 0, 0);\n  }\n\n  40%, 60% {\n    transform: translate3d(4px, 0, 0);\n  }\n"]),a=f(["\n  0% {\n    transform: scale(.75);\n  }\n\n  20% {\n    transform: scale(1);\n  }\n\n  40% {\n    transform: scale(.75);\n  }\n\n  60% {\n    transform: scale(1);\n  }\n\n  80% {\n    transform: scale(.75);\n  }\n\n  100% {\n    transform: scale(.75);\n  }\n"],["\n  0% {\n    transform: scale(.75);\n  }\n\n  20% {\n    transform: scale(1);\n  }\n\n  40% {\n    transform: scale(.75);\n  }\n\n  60% {\n    transform: scale(1);\n  }\n\n  80% {\n    transform: scale(.75);\n  }\n\n  100% {\n    transform: scale(.75);\n  }\n"]),s=f(["\n\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n\n  ",";\n\n  ",";\n\n  ",";\n"],["\n\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n\n  ",";\n\n  ",";\n\n  ",";\n"]),l=f(["\n    animation-name: ",";\n    animation-duration: 0.82s;\n  "],["\n    animation-name: ",";\n    animation-duration: 0.82s;\n  "]),c=f(["\n    animation-name: ",";\n    animation-duration: 2s;\n  "],["\n    animation-name: ",";\n    animation-duration: 2s;\n  "]),u=r(65),h=(n=u)&&n.__esModule?n:{default:n};function f(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=(0,u.keyframes)(i),p=(0,u.keyframes)(o),m=(0,u.keyframes)(a);t.default=h.default.svg(s,(function(e){return e.shake&&(0,u.css)(l,p)}),(function(e){return e.rotate&&(0,u.css)(c,d)}),(function(e){return e.beat&&(0,u.css)(l,m)})),e.exports=t.default},function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"createGlobalStyle",(function(){return rt})),r.d(t,"css",(function(){return xe})),r.d(t,"isStyledComponent",(function(){return C})),r.d(t,"keyframes",(function(){return it})),r.d(t,"ServerStyleSheet",(function(){return Xe})),r.d(t,"StyleSheetConsumer",(function(){return Ye})),r.d(t,"StyleSheetContext",(function(){return qe})),r.d(t,"StyleSheetManager",(function(){return Ke})),r.d(t,"ThemeConsumer",(function(){return We})),r.d(t,"ThemeContext",(function(){return je})),r.d(t,"ThemeProvider",(function(){return Qe})),r.d(t,"withTheme",(function(){return ot})),r.d(t,"__DO_NOT_USE_OR_YOU_WILL_BE_HAUNTED_BY_SPOOKY_GHOSTS",(function(){return at}));var n=r(12),i=r.n(n),o=r(26),a=r.n(o),s=r(0),l=r.n(s),c=r(27),u=r(13),h=r(14),f=(r(67),r(28)),d=r(29),p=function(e,t){for(var r=[e[0]],n=0,i=t.length;n<i;n+=1)r.push(t[n],e[n+1]);return r},m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},b=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},w=function(e){return"object"===(void 0===e?"undefined":m(e))&&e.constructor===Object},_=Object.freeze([]),M=Object.freeze({});function S(e){return"function"==typeof e}function A(e){return e.displayName||e.name||"Component"}function C(e){return e&&"string"==typeof e.styledComponentId}var T=void 0!==e&&(e.env.REACT_APP_SC_ATTR||e.env.SC_ATTR)||"data-styled",E="undefined"!=typeof window&&"HTMLElement"in window,k="boolean"==typeof SC_DISABLE_SPEEDY&&SC_DISABLE_SPEEDY||void 0!==e&&(e.env.REACT_APP_SC_DISABLE_SPEEDY||e.env.SC_DISABLE_SPEEDY)||!1,P={};var L=function(e){function t(r){g(this,t);for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=b(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+r+" for more information."+(i.length>0?" Additional arguments: "+i.join(", "):"")));return b(a)}return x(t,e),t}(Error),R=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,D=function(e){var t=""+(e||""),r=[];return t.replace(R,(function(e,t,n){return r.push({componentId:t,matchIndex:n}),e})),r.map((function(e,n){var i=e.componentId,o=e.matchIndex,a=r[n+1];return{componentId:i,cssFromDOM:a?t.slice(o,a.matchIndex):t.slice(o)}}))},F=/^\s*\/\/.*$/gm,z=new i.a({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),O=new i.a({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),B=[],I=function(e){if(-2===e){var t=B;return B=[],t}},N=a()((function(e){B.push(e)})),U=void 0,V=void 0,H=void 0,G=function(e,t,r){return t>0&&-1!==r.slice(0,t).indexOf(V)&&r.slice(t-V.length,t)!==V?"."+U:e};O.use([function(e,t,r){2===e&&r.length&&r[0].lastIndexOf(V)>0&&(r[0]=r[0].replace(H,G))},N,I]),z.use([N,I]);var j=function(e){return z("",e)};function W(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&",i=e.join("").replace(F,""),o=t&&r?r+" "+t+" { "+i+" }":i;return U=n,V=t,H=new RegExp("\\"+V+"\\b","g"),O(r||!t?"":t,o)}var Q=function(){return r.nc},X=function(e,t,r){r&&((e[t]||(e[t]=Object.create(null)))[r]=!0)},q=function(e,t){e[t]=Object.create(null)},Y=function(e){return function(t,r){return void 0!==e[t]&&e[t][r]}},K=function(e){var t="";for(var r in e)t+=Object.keys(e[r]).join(" ")+" ";return t.trim()},J=function(e){if(e.sheet)return e.sheet;for(var t=e.ownerDocument.styleSheets.length,r=0;r<t;r+=1){var n=e.ownerDocument.styleSheets[r];if(n.ownerNode===e)return n}throw new L(10)},Z=function(e,t,r){if(!t)return!1;var n=e.cssRules.length;try{e.insertRule(t,r<=n?r:n)}catch(e){return!1}return!0},$=function(e){return"\n/* sc-component-id: "+e+" */\n"},ee=function(e,t){for(var r=0,n=0;n<=t;n+=1)r+=e[n];return r},te=function(e,t){return function(r){var n=Q();return"<style "+[n&&'nonce="'+n+'"',T+'="'+K(t)+'"','data-styled-version="4.4.1"',r].filter(Boolean).join(" ")+">"+e()+"</style>"}},re=function(e,t){return function(){var r,n=((r={})[T]=K(t),r["data-styled-version"]="4.4.1",r),i=Q();return i&&(n.nonce=i),l.a.createElement("style",y({},n,{dangerouslySetInnerHTML:{__html:e()}}))}},ne=function(e){return function(){return Object.keys(e)}},ie=function(e,t){return e.createTextNode($(t))},oe=function e(t,r){var n=void 0===t?Object.create(null):t,i=void 0===r?Object.create(null):r,o=function(e){var t=i[e];return void 0!==t?t:i[e]=[""]},a=function(){var e="";for(var t in i){var r=i[t][0];r&&(e+=$(t)+r)}return e};return{clone:function(){var t=function(e){var t=Object.create(null);for(var r in e)t[r]=y({},e[r]);return t}(n),r=Object.create(null);for(var o in i)r[o]=[i[o][0]];return e(t,r)},css:a,getIds:ne(i),hasNameForId:Y(n),insertMarker:o,insertRules:function(e,t,r){o(e)[0]+=t.join(" "),X(n,e,r)},removeRules:function(e){var t=i[e];void 0!==t&&(t[0]="",q(n,e))},sealed:!1,styleTag:null,toElement:re(a,n),toHTML:te(a,n)}},ae=function(e,t,r,n,i){if(E&&!r){var o=function(e,t,r){var n=document;e?n=e.ownerDocument:t&&(n=t.ownerDocument);var i=n.createElement("style");i.setAttribute(T,""),i.setAttribute("data-styled-version","4.4.1");var o=Q();if(o&&i.setAttribute("nonce",o),i.appendChild(n.createTextNode("")),e&&!t)e.appendChild(i);else{if(!t||!e||!t.parentNode)throw new L(6);t.parentNode.insertBefore(i,r?t:t.nextSibling)}return i}(e,t,n);return k?function(e,t){var r=Object.create(null),n=Object.create(null),i=void 0!==t,o=!1,a=function(t){var i=n[t];return void 0!==i?i:(n[t]=ie(e.ownerDocument,t),e.appendChild(n[t]),r[t]=Object.create(null),n[t])},s=function(){var e="";for(var t in n)e+=n[t].data;return e};return{clone:function(){throw new L(5)},css:s,getIds:ne(n),hasNameForId:Y(r),insertMarker:a,insertRules:function(e,n,s){for(var l=a(e),c=[],u=n.length,h=0;h<u;h+=1){var f=n[h],d=i;if(d&&-1!==f.indexOf("@import"))c.push(f);else{d=!1;var p=h===u-1?"":" ";l.appendData(""+f+p)}}X(r,e,s),i&&c.length>0&&(o=!0,t().insertRules(e+"-import",c))},removeRules:function(a){var s=n[a];if(void 0!==s){var l=ie(e.ownerDocument,a);e.replaceChild(l,s),n[a]=l,q(r,a),i&&o&&t().removeRules(a+"-import")}},sealed:!1,styleTag:e,toElement:re(s,r),toHTML:te(s,r)}}(o,i):function(e,t){var r=Object.create(null),n=Object.create(null),i=[],o=void 0!==t,a=!1,s=function(e){var t=n[e];return void 0!==t?t:(n[e]=i.length,i.push(0),q(r,e),n[e])},l=function(){var t=J(e).cssRules,r="";for(var o in n){r+=$(o);for(var a=n[o],s=ee(i,a),l=s-i[a];l<s;l+=1){var c=t[l];void 0!==c&&(r+=c.cssText)}}return r};return{clone:function(){throw new L(5)},css:l,getIds:ne(n),hasNameForId:Y(r),insertMarker:s,insertRules:function(n,l,c){for(var u=s(n),h=J(e),f=ee(i,u),d=0,p=[],m=l.length,g=0;g<m;g+=1){var v=l[g],y=o;y&&-1!==v.indexOf("@import")?p.push(v):Z(h,v,f+d)&&(y=!1,d+=1)}o&&p.length>0&&(a=!0,t().insertRules(n+"-import",p)),i[u]+=d,X(r,n,c)},removeRules:function(s){var l=n[s];if(void 0!==l&&!1!==e.isConnected){var c=i[l];!function(e,t,r){for(var n=t-r,i=t;i>n;i-=1)e.deleteRule(i)}(J(e),ee(i,l)-1,c),i[l]=0,q(r,s),o&&a&&t().removeRules(s+"-import")}},sealed:!1,styleTag:e,toElement:re(l,r),toHTML:te(l,r)}}(o,i)}return oe()},se=/\s+/,le=void 0;le=E?k?40:1e3:-1;var ce=0,ue=void 0,he=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E?document.head:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];g(this,e),this.getImportRuleTag=function(){var e=t.importRuleTag;if(void 0!==e)return e;var r=t.tags[0];return t.importRuleTag=ae(t.target,r?r.styleTag:null,t.forceServer,!0)},ce+=1,this.id=ce,this.forceServer=n,this.target=n?null:r,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!E||this.forceServer)return this;var e=[],t=[],r=!1,n=document.querySelectorAll("style["+T+'][data-styled-version="4.4.1"]'),i=n.length;if(!i)return this;for(var o=0;o<i;o+=1){var a=n[o];r||(r=!!a.getAttribute("data-styled-streamed"));for(var s,l=(a.getAttribute(T)||"").trim().split(se),c=l.length,u=0;u<c;u+=1)s=l[u],this.rehydratedNames[s]=!0;t.push.apply(t,D(a.textContent)),e.push(a)}var h=t.length;if(!h)return this;var f=this.makeTag(null);!function(e,t,r){for(var n=0,i=r.length;n<i;n+=1){var o=r[n],a=o.componentId,s=o.cssFromDOM,l=j(s);e.insertRules(a,l)}for(var c=0,u=t.length;c<u;c+=1){var h=t[c];h.parentNode&&h.parentNode.removeChild(h)}}(f,e,t),this.capacity=Math.max(1,le-h),this.tags.push(f);for(var d=0;d<h;d+=1)this.tagMap[t[d].componentId]=f;return this},e.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ue=new e(void 0,t).rehydrate()},e.prototype.clone=function(){var t=new e(this.target,this.forceServer);return this.clones.push(t),t.tags=this.tags.map((function(e){for(var r=e.getIds(),n=e.clone(),i=0;i<r.length;i+=1)t.tagMap[r[i]]=n;return n})),t.rehydratedNames=y({},this.rehydratedNames),t.deferred=y({},this.deferred),t},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach((function(e){e.sealed=!0}))},e.prototype.makeTag=function(e){var t=e?e.styleTag:null;return ae(this.target,t,this.forceServer,!1,this.getImportRuleTag)},e.prototype.getTagForId=function(e){var t=this.tagMap[e];if(void 0!==t&&!t.sealed)return t;var r=this.tags[this.tags.length-1];return this.capacity-=1,0===this.capacity&&(this.capacity=le,r=this.makeTag(r),this.tags.push(r)),this.tagMap[e]=r},e.prototype.hasId=function(e){return void 0!==this.tagMap[e]},e.prototype.hasNameForId=function(e,t){if(void 0===this.ignoreRehydratedNames[e]&&this.rehydratedNames[t])return!0;var r=this.tagMap[e];return void 0!==r&&r.hasNameForId(e,t)},e.prototype.deferredInject=function(e,t){if(void 0===this.tagMap[e]){for(var r=this.clones,n=0;n<r.length;n+=1)r[n].deferredInject(e,t);this.getTagForId(e).insertMarker(e),this.deferred[e]=t}},e.prototype.inject=function(e,t,r){for(var n=this.clones,i=0;i<n.length;i+=1)n[i].inject(e,t,r);var o=this.getTagForId(e);if(void 0!==this.deferred[e]){var a=this.deferred[e].concat(t);o.insertRules(e,a,r),this.deferred[e]=void 0}else o.insertRules(e,t,r)},e.prototype.remove=function(e){var t=this.tagMap[e];if(void 0!==t){for(var r=this.clones,n=0;n<r.length;n+=1)r[n].remove(e);t.removeRules(e),this.ignoreRehydratedNames[e]=!0,this.deferred[e]=void 0}},e.prototype.toHTML=function(){return this.tags.map((function(e){return e.toHTML()})).join("")},e.prototype.toReactElements=function(){var e=this.id;return this.tags.map((function(t,r){var n="sc-"+e+"-"+r;return Object(s.cloneElement)(t.toElement(),{key:n})}))},v(e,null,[{key:"master",get:function(){return ue||(ue=(new e).rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),fe=function(){function e(t,r){var n=this;g(this,e),this.inject=function(e){e.hasNameForId(n.id,n.name)||e.inject(n.id,n.rules,n.name)},this.toString=function(){throw new L(12,String(n.name))},this.name=t,this.rules=r,this.id="sc-keyframes-"+t}return e.prototype.getName=function(){return this.name},e}(),de=/([A-Z])/g,pe=/^ms-/;function me(e){return e.replace(de,"-$1").toLowerCase().replace(pe,"-ms-")}var ge=function(e){return null==e||!1===e||""===e},ve=function e(t,r){var n=[];return Object.keys(t).forEach((function(r){if(!ge(t[r])){if(w(t[r]))return n.push.apply(n,e(t[r],r)),n;if(S(t[r]))return n.push(me(r)+":",t[r],";"),n;n.push(me(r)+": "+(i=r,(null==(o=t[r])||"boolean"==typeof o||""===o?"":"number"!=typeof o||0===o||i in c.a?String(o).trim():o+"px")+";"))}var i,o;return n})),r?[r+" {"].concat(n,["}"]):n};function ye(e,t,r){if(Array.isArray(e)){for(var n,i=[],o=0,a=e.length;o<a;o+=1)null!==(n=ye(e[o],t,r))&&(Array.isArray(n)?i.push.apply(i,n):i.push(n));return i}return ge(e)?null:C(e)?"."+e.styledComponentId:S(e)?"function"!=typeof(s=e)||s.prototype&&s.prototype.isReactComponent||!t?e:ye(e(t),t,r):e instanceof fe?r?(e.inject(r),e.getName()):e:w(e)?ve(e):e.toString();var s}function xe(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return S(e)||w(e)?ye(p(_,[e].concat(r))):ye(p(e,r))}function be(e){for(var t,r=0|e.length,n=0|r,i=0;r>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(t>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),r-=4,++i;switch(r){case 3:n^=(255&e.charCodeAt(i+2))<<16;case 2:n^=(255&e.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(i)))+((1540483477*(n>>>16)&65535)<<16)}return((n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16))^n>>>15)>>>0}var we=function(e){return String.fromCharCode(e+(e>25?39:97))};function _e(e){var t="",r=void 0;for(r=e;r>52;r=Math.floor(r/52))t=we(r%52)+t;return we(r%52)+t}function Me(e,t){for(var r=0;r<e.length;r+=1){var n=e[r];if(Array.isArray(n)&&!Me(n,t))return!1;if(S(n)&&!C(n))return!1}return!t.some((function(e){return S(e)||function(e){for(var t in e)if(S(e[t]))return!0;return!1}(e)}))}var Se,Ae=function(e){return _e(be(e))},Ce=function(){function e(t,r,n){g(this,e),this.rules=t,this.isStatic=Me(t,r),this.componentId=n,he.master.hasId(n)||he.master.deferredInject(n,[])}return e.prototype.generateAndInjectStyles=function(e,t){var r=this.isStatic,n=this.componentId,i=this.lastClassName;if(E&&r&&"string"==typeof i&&t.hasNameForId(n,i))return i;var o=ye(this.rules,e,t),a=Ae(this.componentId+o.join(""));return t.hasNameForId(n,a)||t.inject(this.componentId,W(o,"."+a,void 0,n),a),this.lastClassName=a,a},e.generateName=function(e){return Ae(e)},e}(),Te=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M,n=!!r&&e.theme===r.theme,i=e.theme&&!n?e.theme:t||r.theme;return i},Ee=/[[\].#*$><+~=|^:(),"'`-]+/g,ke=/(^-|-$)/g;function Pe(e){return e.replace(Ee,"-").replace(ke,"")}function Le(e){return"string"==typeof e&&!0}var Re={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},De={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Fe=((Se={})[u.ForwardRef]={$$typeof:!0,render:!0},Se),ze=Object.defineProperty,Oe=Object.getOwnPropertyNames,Be=Object.getOwnPropertySymbols,Ie=void 0===Be?function(){return[]}:Be,Ne=Object.getOwnPropertyDescriptor,Ue=Object.getPrototypeOf,Ve=Object.prototype,He=Array.prototype;function Ge(e,t,r){if("string"!=typeof t){var n=Ue(t);n&&n!==Ve&&Ge(e,n,r);for(var i=He.concat(Oe(t),Ie(t)),o=Fe[e.$$typeof]||Re,a=Fe[t.$$typeof]||Re,s=i.length,l=void 0,c=void 0;s--;)if(c=i[s],!(De[c]||r&&r[c]||a&&a[c]||o&&o[c])&&(l=Ne(t,c)))try{ze(e,c,l)}catch(e){}return e}return e}var je=Object(s.createContext)(),We=je.Consumer,Qe=function(e){function t(r){g(this,t);var n=b(this,e.call(this,r));return n.getContext=Object(h.a)(n.getContext.bind(n)),n.renderInner=n.renderInner.bind(n),n}return x(t,e),t.prototype.render=function(){return this.props.children?l.a.createElement(je.Consumer,null,this.renderInner):null},t.prototype.renderInner=function(e){var t=this.getContext(this.props.theme,e);return l.a.createElement(je.Provider,{value:t},this.props.children)},t.prototype.getTheme=function(e,t){if(S(e))return e(t);if(null===e||Array.isArray(e)||"object"!==(void 0===e?"undefined":m(e)))throw new L(8);return y({},t,e)},t.prototype.getContext=function(e,t){return this.getTheme(e,t)},t}(s.Component),Xe=function(){function e(){g(this,e),this.masterSheet=he.master,this.instance=this.masterSheet.clone(),this.sealed=!1}return e.prototype.seal=function(){if(!this.sealed){var e=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(e,1),this.sealed=!0}},e.prototype.collectStyles=function(e){if(this.sealed)throw new L(2);return l.a.createElement(Ke,{sheet:this.instance},e)},e.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(e){throw new L(3)},e}(),qe=Object(s.createContext)(),Ye=qe.Consumer,Ke=function(e){function t(r){g(this,t);var n=b(this,e.call(this,r));return n.getContext=Object(h.a)(n.getContext),n}return x(t,e),t.prototype.getContext=function(e,t){if(e)return e;if(t)return new he(t);throw new L(4)},t.prototype.render=function(){var e=this.props,t=e.children,r=e.sheet,n=e.target;return l.a.createElement(qe.Provider,{value:this.getContext(r,n)},t)},t}(s.Component),Je={};var Ze=function(e){function t(){g(this,t);var r=b(this,e.call(this));return r.attrs={},r.renderOuter=r.renderOuter.bind(r),r.renderInner=r.renderInner.bind(r),r}return x(t,e),t.prototype.render=function(){return l.a.createElement(Ye,null,this.renderOuter)},t.prototype.renderOuter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he.master;return this.styleSheet=e,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():l.a.createElement(We,null,this.renderInner)},t.prototype.renderInner=function(e){var t=this.props.forwardedComponent,r=t.componentStyle,n=t.defaultProps,i=(t.displayName,t.foldedComponentIds),o=t.styledComponentId,a=t.target,l=void 0;l=r.isStatic?this.generateAndInjectStyles(M,this.props):this.generateAndInjectStyles(Te(this.props,e,n)||M,this.props);var c=this.props.as||this.attrs.as||a,u=Le(c),h={},d=y({},this.props,this.attrs),p=void 0;for(p in d)"forwardedComponent"!==p&&"as"!==p&&("forwardedRef"===p?h.ref=d[p]:"forwardedAs"===p?h.as=d[p]:u&&!Object(f.a)(p)||(h[p]=d[p]));return this.props.style&&this.attrs.style&&(h.style=y({},this.attrs.style,this.props.style)),h.className=Array.prototype.concat(i,o,l!==o?l:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),Object(s.createElement)(c,h)},t.prototype.buildExecutionContext=function(e,t,r){var n=this,i=y({},t,{theme:e});return r.length?(this.attrs={},r.forEach((function(e){var t,r=e,o=!1,a=void 0,s=void 0;for(s in S(r)&&(r=r(i),o=!0),r)a=r[s],o||!S(a)||(t=a)&&t.prototype&&t.prototype.isReactComponent||C(a)||(a=a(i)),n.attrs[s]=a,i[s]=a})),i):i},t.prototype.generateAndInjectStyles=function(e,t){var r=t.forwardedComponent,n=r.attrs,i=r.componentStyle;r.warnTooManyClasses;return i.isStatic&&!n.length?i.generateAndInjectStyles(M,this.styleSheet):i.generateAndInjectStyles(this.buildExecutionContext(e,t,n),this.styleSheet)},t}(s.Component);function $e(e,t,r){var n=C(e),i=!Le(e),o=t.displayName,a=void 0===o?function(e){return Le(e)?"styled."+e:"Styled("+A(e)+")"}(e):o,s=t.componentId,c=void 0===s?function(e,t,r){var n="string"!=typeof t?"sc":Pe(t),i=(Je[n]||0)+1;Je[n]=i;var o=n+"-"+e.generateName(n+i);return r?r+"-"+o:o}(Ce,t.displayName,t.parentComponentId):s,u=t.ParentComponent,h=void 0===u?Ze:u,f=t.attrs,p=void 0===f?_:f,m=t.displayName&&t.componentId?Pe(t.displayName)+"-"+t.componentId:t.componentId||c,g=n&&e.attrs?Array.prototype.concat(e.attrs,p).filter(Boolean):p,v=new Ce(n?e.componentStyle.rules.concat(r):r,g,m),x=void 0,b=function(e,t){return l.a.createElement(h,y({},e,{forwardedComponent:x,forwardedRef:t}))};return b.displayName=a,(x=l.a.forwardRef(b)).displayName=a,x.attrs=g,x.componentStyle=v,x.foldedComponentIds=n?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):_,x.styledComponentId=m,x.target=n?e.target:e,x.withComponent=function(e){var n=t.componentId,i=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(t,["componentId"]),o=n&&n+"-"+(Le(e)?e:Pe(A(e)));return $e(e,y({},i,{attrs:g,componentId:o,ParentComponent:h}),r)},Object.defineProperty(x,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=n?Object(d.a)(e.defaultProps,t):t}}),x.toString=function(){return"."+x.styledComponentId},i&&Ge(x,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),x}var et=function(e){return function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M;if(!Object(u.isValidElementType)(r))throw new L(1,String(r));var i=function(){return t(r,n,xe.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,r,y({},n,i))},i.attrs=function(i){return e(t,r,y({},n,{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},i}($e,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){et[e]=et(e)}));var tt=function(){function e(t,r){g(this,e),this.rules=t,this.componentId=r,this.isStatic=Me(t,_),he.master.hasId(r)||he.master.deferredInject(r,[])}return e.prototype.createStyles=function(e,t){var r=W(ye(this.rules,e,t),"");t.inject(this.componentId,r)},e.prototype.removeStyles=function(e){var t=this.componentId;e.hasId(t)&&e.remove(t)},e.prototype.renderStyles=function(e,t){this.removeStyles(t),this.createStyles(e,t)},e}();function rt(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=xe.apply(void 0,[e].concat(r)),o="sc-global-"+be(JSON.stringify(i)),a=new tt(i,o),s=function(e){function t(r){g(this,t);var n=b(this,e.call(this,r)),i=n.constructor,o=i.globalStyle,a=i.styledComponentId;return E&&(window.scCGSHMRCache[a]=(window.scCGSHMRCache[a]||0)+1),n.state={globalStyle:o,styledComponentId:a},n}return x(t,e),t.prototype.componentWillUnmount=function(){window.scCGSHMRCache[this.state.styledComponentId]&&(window.scCGSHMRCache[this.state.styledComponentId]-=1),0===window.scCGSHMRCache[this.state.styledComponentId]&&this.state.globalStyle.removeStyles(this.styleSheet)},t.prototype.render=function(){var e=this;return l.a.createElement(Ye,null,(function(t){e.styleSheet=t||he.master;var r=e.state.globalStyle;return r.isStatic?(r.renderStyles(P,e.styleSheet),null):l.a.createElement(We,null,(function(t){var n=e.constructor.defaultProps,i=y({},e.props);return void 0!==t&&(i.theme=Te(e.props,t,n)),r.renderStyles(i,e.styleSheet),null}))}))},t}(l.a.Component);return s.globalStyle=a,s.styledComponentId=o,s}E&&(window.scCGSHMRCache={});var nt=function(e){return e.replace(/\s|\\n/g,"")};function it(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=xe.apply(void 0,[e].concat(r)),o=_e(be(nt(JSON.stringify(i))));return new fe(o,W(i,o,"@keyframes"))}var ot=function(e){var t=l.a.forwardRef((function(t,r){return l.a.createElement(We,null,(function(n){var i=e.defaultProps,o=Te(t,n,i);return l.a.createElement(e,y({},t,{theme:o,ref:r}))}))}));return Ge(t,e),t.displayName="WithTheme("+A(e)+")",t},at={StyleSheet:he};t.default=et}.call(this,r(8))},function(e,t,r){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n="function"==typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,x=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case f:case a:case l:case s:case p:return e;default:switch(e=e&&e.$$typeof){case u:case d:case v:case g:case c:return e;default:return t}}case o:return t}}}function M(e){return _(e)===f}t.AsyncMode=h,t.ConcurrentMode=f,t.ContextConsumer=u,t.ContextProvider=c,t.Element=i,t.ForwardRef=d,t.Fragment=a,t.Lazy=v,t.Memo=g,t.Portal=o,t.Profiler=l,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return M(e)||_(e)===h},t.isConcurrentMode=M,t.isContextConsumer=function(e){return _(e)===u},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===v},t.isMemo=function(e){return _(e)===g},t.isPortal=function(e){return _(e)===o},t.isProfiler=function(e){return _(e)===l},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===f||e===l||e===s||e===p||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===g||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d||e.$$typeof===x||e.$$typeof===b||e.$$typeof===w||e.$$typeof===y)},t.typeOf=_},function(e,t,r){e.exports=r(68)()},function(e,t,r){"use strict";var n=r(69);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";r.r(t);r(30);var n=r(0),i=r.n(n),o=r(23),a=r.n(o),s=r(11),l=r.n(s),c=(r(46),r(55),r(24)),u=r.n(c),h=r(25),f=r.n(h);var d={orientation:1,hoverTime:2e3,hoverRange:100,cursorColor:"green"};class p extends n.Component{constructor(e){super(e),this._isMounted=!1,this.xCursHist=[],this.yCursHist=[],this.selectorHistory=[],this.selectorSums={x:0,y:0},this.timeoutRunning=!1,this.state={cursorX:0,cursorY:0,selectorX:0,selectorY:0,hoverTimeout:null,selectorTimeout:null,cursorShown:!1,selectorShown:!0,clickTriggered:!1}}componentDidMount(){this._isMounted=!0,l.a.loop({hand:e=>{u()(this.updateHand(e.screenPosition()),41)},frame:e=>{0===e.hands.length&&(clearTimeout(this.state.hoverTimeout),this.selectorHistory=[],this.selectorSums={x:0,y:0},this.setState({cursorShown:!1,selectorShown:!1}))}}).use("screenPosition")}componentDidUpdate(e){e.clickTriggered!==this.state.clickTriggered&&this.state.clickTriggered&&this.simClick()}updateHand(e){this.updateSelector(e),this.setState({cursorX:this.getCursorAverage(e[0],"X"),cursorY:this.getCursorAverage(e[d.orientation]+window.innerHeight,"Y"),cursorShown:!0})}updateSelector(e){this.selectorHistory.push({x:e[0],y:e[d.orientation],timestamp:new Date}),this.selectorHistory.sort((e,t)=>e.timestamp-t.timestamp),this.selectorSums.x+=e[0],this.selectorSums.y+=e[d.orientation];const t=new Date;for(let e=0;e<this.selectorHistory.length;e++){const r=this.selectorHistory[e];if(t-r.timestamp<=d.hoverTime)break;this.selectorSums.x-=r.x,this.selectorSums.y-=r.y,this.selectorHistory.shift()}const r=this.selectorSums.x/this.selectorHistory.length,n=this.selectorSums.y/this.selectorHistory.length+window.innerHeight;let i=Math.abs(e[0]-this.state.selectorX);i+=Math.abs(e[d.orientation]+window.innerHeight-this.state.selectorY);const o=i<=d.hoverRange;let a={selectorX:r,selectorY:n,selectorShown:o};o?this.timeoutRunning||(a.hoverTimeout=setTimeout(()=>{this.setState({clickTriggered:!0,selectorShown:!1,cursorShown:!1})},d.hoverTime),this.timeoutRunning=!0):(clearTimeout(this.state.hoverTimeout),clearTimeout(this.state.selectorTimeout),this.timeoutRunning=!1),this.setState(a)}getCursorAverage(e,t){let r="X"===t?this.xCursHist:this.yCursHist;r.push(e),r.length>10&&r.shift();let n=0;return r.forEach(e=>n+=e),n/=r.length,n}componentWillUnmount(){this._isMounted=!1,clearTimeout(this.state.hoverTimeout),clearTimeout(this.state.selectorTimeout)}simClick(){const e=Math.round(this.state.selectorX)+25,t=Math.round(this.state.selectorY)+25,r=document.elementFromPoint(e,t),n=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0,screenX:e,screenY:t}),i=new MouseEvent("mouseup",{view:window,bubbles:!0,cancelable:!0,screenX:e,screenY:t});r.dispatchEvent(n),r.click(),setTimeout(r.dispatchEvent(i),10),this.setState({clickTriggered:!1,cursorShown:!0})}render(){return i.a.createElement("div",{className:"leapStandalone"},this.state.cursorShown&&i.a.createElement(f.a,{className:"cursor",style:{left:this.state.cursorX+"px",top:this.state.cursorY+"px"},color:d.cursorColor}),this.state.selectorShown&&i.a.createElement("div",{className:"selector",style:{left:this.state.selectorX+"px",top:this.state.selectorY+"px"}},i.a.createElement("div",{className:"indicator"})))}}const m=document.getElementById("standaloneTarget");m&&a.a.render(i.a.createElement(p,null),m)}]);